(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33,148],{"0659":function(t,e,a){"use strict";a.r(e);var i=a("f859"),n=a("6da0");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("a308");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"535a0aa6",null);e["default"]=r.exports},"06a6":function(t,e,a){"use strict";a.r(e);var i=a("bd86"),n=a("5e8a");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("d422");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"addc01d6",null);e["default"]=r.exports},"0968":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3"),a("caad");var n=i(a("d858")),s=i(a("06a6")),o={name:"GoodsTooltip",components:{QrCode:n.default,Tabbar:s.default},props:{content:{type:String},maxWidth:{type:Number,default:340},type:{type:String,default:"text",validator:function(t){return["text","form","image","qrCode"].includes(t)}},image:{type:String,default:a("5474")},delay:{type:Number,default:0},text:{type:String,default:"复制链接"},url:{type:String,default:"https://www.baidu.com/"},qrcode_url:{type:String,default:""},id:{type:String,default:""},placement:{type:String,default:"top"},width:String,trigger:{type:String,default:"hover"}},data:function(){return{imgUrl:"",tabContent:{id:"h5",tabTit:"H5",tabLink:"商品链接",isShow:!1},tabList:[{id:"h5",tabTit:"H5",tabLink:"商品链接",isShow:!1},{id:"wxapp",tabTit:"微信小程序",tabLink:"微信小程序商品路径",isShow:!0}],qrData:{},loading:!1}},mounted:function(){this.image&&-1==this.image.indexOf("static/dist/shop/")&&(this.imgUrl=this.$media(this.image))},watch:{"tabContent.id":{handler:function(t){var e=this;"wxapp"===t&&this.$api.goodsApi.getGoodQrcode({id:this.id}).then((function(t){0===t.error&&(e.qrData=t.data)}))}}},methods:{onPopperShow:function(){this.$emit("on-popper-show")},tabClick:function(t){this.tabContent=t},downCode:function(){if("wxapp"===this.tabContent.id){var t=new Image;return t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0,t.width,t.height);var i=e.toDataURL("image/png"),n=document.createElement("a"),s=new MouseEvent("click");n.download="小程序商品二维码",n.href=i,n.dispatchEvent(s)},void(t.src=this.qrData.qrcode)}}}};e.default=o},"09e8":function(t,e,a){"use strict";a.r(e);var i=a("e3eb"),n=a("8a63");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("9bfd");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"841dd688",null);e["default"]=r.exports},"0d35":function(t,e,a){"use strict";a.r(e);var i=a("bb14"),n=a("6820");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("ea96");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"50bf1baf",null);e["default"]=r.exports},"0da9":function(t,e,a){"use strict";a.r(e);var i=a("324b"),n=a("8ab6");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("898a");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"4385b6e8",null);e["default"]=r.exports},1018:function(t,e,a){},"10c3":function(t,e,a){"use strict";a.r(e);var i=a("b921"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},1324:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAABLUExURQCwf9j06wDKjgDLji/Gmavn1QDIjEdwTACvfNf068Xv4szw5Y3dx9Hy6N317UzbsADMj+D27w7PlTfXpyPTnqXr1mrgvYPkx8Dw4W4mga4AAAAPdFJOUxnGp9ouV2QAC/p6jDua4jaJMJMAAALzSURBVFjDvZjpgqsgDIVjRQdsO7K49P2f9AJuCQLV1rn8aKcznc+ck4QNfnKDc1gH5zz3VUhDIDL4WVCUkmXBSUwSBacxCRR8gImi4DPOnhSA4MTIgDicGjwFOsmhJPiCQ0jwDQeT4CsOIsEn+YrlDo5yHo88CQ4JY02h1O8jJw7ec1hlKarvVZGzCd4Jq55CqdegpexVlREH2YAed0sRo5FuDOqeCQnSAXljRD9R7NBCZPyGRECzMU6S1KY17n1MaeMzKGeM1F3rh0UZ9UyHBPuAsDEzxQ8phWDJkCAICBvTmRYPbbU1yZAIKDAmGMZqKzIgnjTGGApzpZTUBnNADBtjJiVhXJ0tpaS2BfQbGuPC6jSx20id1gaTskb11JiFIKXBdqfbZAbdVevCMdvDuzUKqi3VJjOoUr0LCP2LWaPAoGSbrCkTQmMVnWwjIJ1pk2Xc1UBFRCJyyTBqLG8sN5NabRonaMkW+q0vCB96WadZhdI0QbusTdUhhI3XsxKgxmojNWMrynRrHbkfbXX0QvXTR8uKS2TqJSXt0bX9PUWa0bXQiP9ex7UZSXrLdFOVu4fLbni5WaGl1t+is7wasd1L+nzBD72lvAacTWdfPCLm8hFMHKsxi6SO1FoZLUl4KkPs3owRQ6zOW6qMI2391rbYmKFd0hB0Xr3vta1NfNpXY5QzxjeZ8W84IF1CAuTaZFnDvDF20p2nJ2+WJHMKVcbhh7aJ3Iy5P6C+ufnNzCjdkXxKFpsh51JyX/fGPJcmn1jtfhBlgCd/1yYvb0xR4YexuowsKoYUEQ/WNbcaFc2+hditDJe5QFm4QFZNamOG7JpW8NtugTy8Dd3scvVR75bsE/vQ2S5XDOV+E3FuZ+ztChqf5zdaWYkli2y0PtiskzmbH9qMHt2zwzfnh/32+CvSySPEu8PI5Yea645ZERJDr8cPftcdRREpFgQ7fji+7rh+Mnc8e6Xx6UXE312yXHftcwT1/6/GLrysW24Pj18f/gOh226F5EkqAQAAAABJRU5ErkJggg=="},"146a":function(t,e,a){"use strict";a("bbaa")},"154a":function(t,e,a){"use strict";a("20b7")},"16a1":function(t,e,a){"use strict";a.r(e);var i=a("d3d1"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"1b78":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("b680"),a("b64b"),a("d81d"),a("b0c0");var n=i(a("5530")),s=i(a("2c55")),o=i(a("5782")),r=i(a("55f7")),l={components:{DataCard:s.default,ActivityChat:o.default,RankingList:r.default},data:function(){return{chartLine:{color:["#4A67FF","#FF9900"],data:[],legend:["浏览量（PV）","访客量（UV）"],xAxis:[],yAxis:{name:"单位(人)",minInterval:1},legendStyle:{right:"30",top:"25"},grid:{left:60,right:40,bottom:30}},chartPie:{legend:{orient:"vertical",left:60,top:90,bottom:0,data:[]},radius:["40%","60%"],center:["70%","50%"],data:[]},cardData:[],headerCard:{tempList:[{key:"credit_wait_order",image:a("91bc"),title:"待发货订单数量"},{key:"goods_count",image:a("ad02"),title:"当前积分商品总数"},{key:"credit_sum",image:a("6ebe"),title:"累计成交积分"},{key:"price_sum",image:a("1324"),title:"累计成交金额"}],data:{}},goodsData:[],consumeData:[],updateTimeText:""}},created:function(){this.getDataInfo(),this.getLine(),this.getChannel(),this.getGoods(),this.getMember()},methods:{getDataInfo:function(){var t=this;this.$api.creditShopApi.getOverview().then((function(e){0===e.error&&(t.headerCard.data=(0,n.default)((0,n.default)({},e.data),{},{credit_wait_order:{wait_send:"".concat(e.data.wait_send||0),order_count:"".concat(e.data.order_count||0)},price_sum:e.data.price_sum?"￥".concat(parseFloat(e.data.price_sum).toFixed(2)):"￥0"}))}))},getLine:function(){var t=this;this.$api.creditShopApi.getExposure().then((function(e){0===e.error&&(t.chartLine.xAxis=Object.keys(e.data),t.chartLine.data=[t.chartLine.xAxis.map((function(t){var a;return(null===(a=e.data[t])||void 0===a?void 0:a.view_count)||0})),t.chartLine.xAxis.map((function(t){var a;return(null===(a=e.data[t])||void 0===a?void 0:a.member_count)||0}))],t.$nextTick((function(){var e;null===(e=t.$refs.activity_chart)||void 0===e||e.renderLine()})))}))},getChannel:function(){var t=this;this.$api.creditShopApi.getChannelData().then((function(e){if(0===e.error){var a=e.data.channel,i=void 0===a?[]:a;t.chartPie.data=i,t.chartPie.legend.data=i.map((function(t){return t.name})),t.$nextTick((function(){var e;null===(e=t.$refs.activity_chart)||void 0===e||e.renderPie()}))}}))},getGoods:function(){var t=this;this.$api.creditShopApi.getGoodsRank().then((function(e){0===e.error&&(t.goodsData=e.data||[])}))},getMember:function(){var t=this;this.$api.creditShopApi.getMemberRank().then((function(e){0===e.error&&(t.consumeData=e.data||[])}))}}};e.default=l},"1c3a":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("e9c4"),a("d3b7"),a("159b"),a("a434");var n=i(a("b85c")),s=i(a("2909")),o={name:"labelSelector",props:{currentList:{type:Array,default:function(){return[]}}},data:function(){return{value:!1,selectRows:[],list:[],loading:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.selectRows=(0,s.default)(this.currentList),this.getLabelData())},handleCancel:function(){this.setValue()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.setValue()},initDefaultChecked:function(){var t=this;this.selectRows.length>0&&this.list.forEach((function(e,a){var i,s=(0,n.default)(t.selectRows);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(e.id===o.id){t.$set(t.list[a],"checked",!0);break}}}catch(r){s.e(r)}finally{s.f()}}))},setLabelChecked:function(t,e){var a=this;if(this.$set(this.list[t],"checked",e),e)this.selectRows.push(this.list[t]);else{var i=-1;this.selectRows.forEach((function(e,n){e.id===a.list[t].id&&(i=n)})),this.selectRows.splice(i,1)}},getLabelData:function(){var t=this;this.loading=!0,this.$api.memberApi.getGroupList({is_all:1}).then((function(e){t.loading=!1,0===e.error&&(t.list=e.list||[],t.initDefaultChecked())}))}}};e.default=o},"1dc0":function(t,e,a){"use strict";a("2189")},"1e22":function(t,e,a){"use strict";a.r(e);var i=a("1c3a"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"1ea7":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{title:"会员等级标签",loading:t.loading,"class-name":"shop-label-modal"},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"shop-label"},[a("div",{staticClass:"custom"},[t.list.length>0?a("div",{staticClass:"recommend"},[a("div",{staticClass:"label-content"},t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"shop-label-item",class:{checked:e.checked},on:{click:function(a){return t.setLabelChecked(i,!e.checked)}}},[a("span",[t._v(" "+t._s(e.level_name))]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin"}})],1)})),0)]):a("div",{staticStyle:{"text-align":"center"}},[t._v(" 暂无数据 ")])])])])},n=[]},"20b7":function(t,e,a){},2189:function(t,e,a){},"294f":function(t,e,a){"use strict";a.r(e);var i=a("1b78"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"2a77":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ranking-list"},[i("div",{staticClass:"rank-item"},[i("div",{staticClass:"title"},[i("span",{staticClass:"iconfont icon-database warning-color icon-title"}),t._v(" 积分商品TOP排行榜 "),i("kdx-hint-tooltip",{staticStyle:{"font-weight":"normal"}},[t._v(" 统计数据不包括已退款的商品数量 ")])],1),i("Table",{attrs:{columns:t.goods.columns,data:t.goodsData},scopedSlots:t._u([{key:"rank",fn:function(e){var a=e.index;return[i("div",{staticClass:"rank-index"},[0===a?i("kdx-svg-icon",{attrs:{type:"icon-paihang-jinpai"}}):1===a?i("kdx-svg-icon",{attrs:{type:"icon-paihang-yinpai"}}):2===a?i("kdx-svg-icon",{attrs:{type:"icon-paihang-tongpai"}}):i("div",{staticClass:"text"},[t._v(t._s(a+1))])],1)]}},{key:"title",fn:function(e){var n=e.row;return[i("div",{staticClass:"title-box"},[1==n.type?i("div",{staticClass:"image"},[1==n.coupon_sale_type?i("img",{attrs:{src:a("999e"),alt:""},on:{error:t.replaceImage}}):t._e(),2==n.coupon_sale_type?i("img",{attrs:{src:a("8ede"),alt:""},on:{error:t.replaceImage}}):t._e()]):i("div",{staticClass:"image"},[i("img",{attrs:{src:t.$utils.media(n.thumb),alt:""},on:{error:t.replaceImage}})]),i("div",{staticClass:"title"},[1==n.type?i("div",[t._v(t._s(n.coupon_name))]):i("div",[t._v(t._s(n.title))])])])]}},{key:"total",fn:function(e){var a=e.row;return[i("div",{staticClass:"total"},[i("div",[t._v(t._s(a.total))]),i("div",{staticClass:"piece"},[t._v("件")])])]}}])})],1),i("div",{staticClass:"rank-item"},[i("div",{staticClass:"title"},[i("span",{staticClass:"iconfont icon-shuju-huiyuanshu success-color icon-title"}),t._v(" 会员消费排行 "),i("kdx-hint-tooltip",{staticStyle:{"font-weight":"normal"}},[t._v(" 统计数据不包括已退款的订单金额 ")])],1),i("Table",{attrs:{columns:t.consume.columns,data:t.consumeData},scopedSlots:t._u([{key:"rank",fn:function(e){var a=e.index;return[i("div",{staticClass:"rank-index"},[0===a?i("kdx-svg-icon",{attrs:{type:"icon-paihang-jinpai"}}):1===a?i("kdx-svg-icon",{attrs:{type:"icon-paihang-yinpai"}}):2===a?i("kdx-svg-icon",{attrs:{type:"icon-paihang-tongpai"}}):i("div",{staticClass:"text"},[t._v(t._s(a+1))])],1)]}},{key:"nickname",fn:function(e){var a=e.row;return[i("div",{staticClass:"title-box"},[i("div",{staticClass:"image member-image"},[i("img",{attrs:{src:a.avatar,alt:""},on:{error:t.replaceImage}})]),i("div",{staticClass:"nickname"},[t._v(" "+t._s(a.nickname)+" "),i("div",{staticClass:"member-source"},["10"==a.source?i("span",{staticClass:"iconfont icon-source icon-H"}):t._e(),"20"==a.source?i("span",{staticClass:"iconfont icon-source icon-weixin"}):t._e(),"21"==a.source?i("span",{staticClass:"iconfont icon-source icon-weixinxiaochengxu"}):t._e(),"30"==a.source?i("span",[i("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-qudao-toutiao2"}})],1):t._e(),"32"==a.source?i("span",[i("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-qudao-toutiaojisuban"}})],1):t._e(),"31"==a.source?i("span",[i("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-douyin"}})],1):"70"===a.source?i("span",{staticClass:"iconfont icon-PCduan",staticStyle:{color:"#12aa9c","font-size":"16px"}}):t._e()])])])]}},{key:"pay_price",fn:function(e){var a=e.row;return[i("div",{staticClass:"total"},[t._v("￥"+t._s(a.pay_price||0))])]}}])})],1)])},n=[]},"2c55":function(t,e,a){"use strict";a.r(e);var i=a("ff4b"),n=a("e345");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("76ba");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"ce3af40e",null);e["default"]=r.exports},"2e16":function(t,e,a){"use strict";a.r(e);var i=a("be05"),n=a("c5c3");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("154a");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"61c6331c",null);e["default"]=r.exports},"2e1d":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2909")),s=i(a("5530")),o=i(a("b85c"));a("a9e3"),a("a434"),a("4de4"),a("d3b7"),a("159b"),a("ac1f"),a("841c");var r={name:"goodsSelector",props:{current:{type:[String,Object],default:function(){}},currentList:{type:Array,default:function(){return[]}},value:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},limit:{type:Number},isStore:{type:Boolean,default:!1},params:{type:Object,default:function(){}},type:{type:String,default:""},flag:{type:String,default:""},status:{type:Number,default:5},show_activity:{type:[Number],default:0},is_shopping_reward:{type:[Number],default:0}},computed:{columns:function(){var t=this,e=(this.$createElement,[{title:"商品",key:"shop",minWidth:450,render:function(e,a){var i;switch(a.row.type){case"0":i={goodsText:"实"};break;case"1":i={goodsText:"虚"};break;case"2":i={goodsText:"密"};break;case"3":i={goodsText:"预"};break}return e("div",{class:{"shop-box":!0}},[e("div",{class:{image:!0}},[e("img",{attrs:{src:t.$media(a.row.thumb)},on:{error:function(e){t.replaceImage(e)}}})]),e("div",{class:{content:!0}},[e("div",{class:{"content-text":!0}},[e("span",{class:{mark:!0},style:{display:"1"===a.row.has_option?"inline-block":"none"}},"多"),e("span",{class:{mark:!0,real:"0"===a.row.type,virtual:"1"===a.row.type,secret:"2"===a.row.type}},i.goodsText),e("span",{class:{text:!0}},a.row.title)])])])}},{title:"价格",key:"price",minWidth:60,render:function(t,e){return"1"===e.row.has_option?t("div",{class:"price"},[t("span",["￥",e.row.min_price," ~ ￥",e.row.max_price])]):t("div",{class:"price"},[t("span",["￥",e.row[e.column.key]])])}},{title:"库存",key:"stock",width:60,render:function(t,e){var a=parseInt(e.row[e.column.key]);return"3"==e.row.type?t("div","-"):t("div",a||0===a?a<=999?a:"999+":"-")}},{title:"操作",key:"action",width:80,render:function(e,a){return e("div",{class:"action"},[e("Button",{class:"default-primary",attrs:{disabled:1===a.row.is_select},style:{display:a.row.checked?"none":"block"},on:{click:function(){t.setChecked(a.index,!0)}}},["选择"]),e("Button",{attrs:{type:"primary"},style:{display:a.row.checked?"block":"none"},on:{click:function(){t.setChecked(a.index,!1)}}},["已选"])])}}]);return this.show_activity&&e.splice(-1,0,{title:"营销活动",key:"is_activity_goods",width:130,render:function(e,a){return e("div",{class:1===a.row.is_activity_goods?"brand-color pointer":"pointer",on:{click:function(){t.viewActivity(a.row)}}},[1===a.row.is_activity_goods?"查看参与的活动":"未参与活动"])}}),e}},data:function(){var t=this.$createElement;return{search:{keywords:"",group:""},goodsGroup:[],page:{pageSize:10,pageNumber:1},selectRows:[],selectRow:{},table:{data:[],loading:!1,total:0},activity:{show:!1,columns:[{title:"活动名称",key:"title"},{title:"活动状态",key:"status",slot:"status"},{title:"活动时间",key:"time",slot:"date"},{title:"活动类型",key:"type_text"},{title:"活动来源",key:"sub_shop_id",render:function(){return t("div",["平台"])}}],data:[]}}},created:function(){this.activity.columns=this.activity.columns.filter((function(t){return"sub_shop_id"!==t.key}))},methods:{handleSearch:function(){this.resetPage(),this.getShopList()},resetPage:function(){var t;this.page={pageSize:10,pageNumber:1},null===(t=this.$refs["page"])||void 0===t||t.reset()},handlePageChange:function(t){this.page=t,this.getShopList();try{this.$refs.scrollBox.scrollTop=0}catch(e){console.log(e)}},setChecked:function(t,e){var a=this;if(this.multiple){if(this.limit&&this.selectRows.length===this.limit&&e)return void this.$Message.error("已超出最大可选数量");this.$set(this.table.data[t],"checked",e),0===this.selectRows.length||e?this.selectRows.push(this.table.data[t]):this.selectRows=this.selectRows.filter((function(e){return e.id!==a.table.data[t].id}))}else e?(this.table.data.forEach((function(t,e){a.$set(a.table.data[e],"checked",!1)})),this.$set(this.table.data[t],"checked",!0),this.selectRow=this.table.data[t]):(this.$set(this.table.data[t],"checked",!1),this.selectRow={})},defaultChecked:function(){var t,e=this,a=this.isStore?"broadcast_goods_id":"id",i=this.isStore?"broadcast_goods_id":"id";this.multiple?this.table.data.forEach((function(t,n){var s,r=(0,o.default)(e.selectRows);try{for(r.s();!(s=r.n()).done;){var l=s.value;if(l[i]===t[a]){e.$set(e.table.data[n],"checked",!0);break}}}catch(d){r.e(d)}finally{r.f()}})):null===(t=this.table.data)||void 0===t||t.forEach((function(t,n){e.selectRow&&t[a]===e.selectRow[i]?e.$set(e.table.data[n],"checked",!0):e.$set(e.table.data[n],"checked",!1)}))},getShopList:function(){var t=this;if(this.isStore)this.getGoodsStore();else{this.table.loading=!0;var e=Object.assign((0,s.default)({page:this.page.pageNumber,pagesize:this.page.pageSize,status:-1===this.status?"":this.status,type:this.type,flag:this.flag,show_activity:this.show_activity,is_shopping_reward:this.is_shopping_reward},this.params),this.search);this.$api.goodsApi.goodsList(e).then((function(e){t.table.loading=!1,0===e.error&&(t.table.data=e.list,t.table.total=e.total,t.defaultChecked())})).catch()}},getGoodsStore:function(){var t=this;this.table.loading=!0;var e=Object.assign({page:this.page.pageNumber,pagesize:this.page.pageSize,bro_goods_status:2},{title:this.search.keywords});this.$api.liverApi.getGoodsStore(e).then((function(e){t.table.loading=!1,0===e.error&&(t.table.data=e.list,t.table.total=e.total,t.defaultChecked())})).catch()},goodGroupList:function(){var t=this;this.$api.goodsApi.goodGroupList({pager:0}).then((function(e){0===e.error?t.goodsGroup=e.list:t.$Message.error("商品组获取失败")}))},handleSave:function(){this.multiple?this.$emit("on-change",this.selectRows):this.$emit("on-change",this.selectRow),this.handleCancel()},handleCancel:function(){this.$emit("on-cancel"),this.activity.show=!1},resetSearch:function(){this.search={keywords:"",group:""}},viewActivity:function(t){console.log(t,"data>>>>>>>>viewActivity"),t.is_activity_goods&&(this.activity.show=!0,this.activity.data=t.join_activity)},getTime:function(t){return"0000-00-00 00:00:00"===t?"-":t}},watch:{value:{handler:function(t){t&&(this.multiple?this.selectRows=(0,n.default)(this.currentList)||[]:this.selectRow=this.current,this.resetSearch(),this.resetPage(),this.getShopList())},immediate:!0}}};e.default=r},"2f16":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3"),a("ac1f"),a("1276"),a("d3b7"),a("a434"),a("d81d");var n=i(a("3dc0")),s={name:"RulesGoods",components:{specificationsRules:n.default},props:{type:{type:[String,Number],default:"0"},value:{type:Array,default:function(){return[]}},isDisabled:{type:Boolean,default:!1}},data:function(){var t=this,e=this.$createElement;return{page:{pageSize:10,pageNumber:1},specificationsData:{rulesModal:!1,goodsId:"",spaceRules:[]},form:{goodsList:[]},columns:[{slot:"shop",minWidth:176,renderHeader:function(){return e("div",["0"===t.type?"商品":"优惠券名称"])}},{title:"价格",slot:"price",minWidth:110},{title:"现库存",slot:"stock",minWidth:60},{slot:"rules",minWidth:520,renderHeader:function(){return e("div",{class:"flex"},[e("p",{class:"table-title"},["积分价"]),e("p",{class:"table-title"},["积分商品库存"])])}},{title:"操作",key:"action",width:60,render:function(e,a){return e("Button",{attrs:{type:"text",disabled:t.isDisabled},class:"action-btn",on:{click:function(){t.handleDelete(a.index)}}},["删除"])}}],rules:{credit_shop_credit:[{required:!0,message:"积分不能为空"},{validator:function(t,e,a){0===+e?a(new Error("积分不能为0")):a()}}],credit_shop_price:[{required:!0,message:"金额不能为空"}],credit_shop_stock:[{required:!0,message:"库存不能为空"},{validator:function(e,a,i){var n,s=e.field.split(".")[1];0===Number(a)?i(new Error("库存不能为0")):"1"===t.type&&"0"===(null===(n=t.form.goodsList[s])||void 0===n?void 0:n.stock_type)?i():Number(t.form.goodsList[s].stock)<Number(a)?i(new Error("积分商品库存不能大于现库存")):i()}}]}}},computed:{total:function(){var t;return(null===(t=this.form.goodsList)||void 0===t?void 0:t.length)||0}},watch:{value:{handler:function(t){this.form.goodsList=t},immediate:!0}},created:function(){},mounted:function(){},methods:{validateForm:function(){var t=this;return new Promise((function(e,a){t.form.goodsList.some((function(t){return 0==t.has_option}))?t.$refs["goodsForm"].validate((function(t){t?e():a()})):e()}))},changePage:function(t){this.page=t},handleDelete:function(t){this.form.goodsList.splice(t,1),this.$emit("input",this.form.goodsList)},handleSelectOption:function(t){var e=this;this.specificationsData.rulesModal=!0,this.specificationsData.goodsId=t,this.form.goodsList.map((function(a){var i;a.id==t&&(null===a||void 0===a||null===(i=a.rules)||void 0===i?void 0:i.length)>0&&(e.specificationsData.spaceRules=a.rules)}))},handleSpaceGoods:function(t){this.form.goodsList=this.form.goodsList.map((function(e){return e.id==t.id&&(e.goods_id=e.id,e.rules=t.rules),e})),this.$emit("input",this.form.goodsList)},isSetRules:function(t){var e,a;return(null===(e=t.rules)||void 0===e?void 0:e.length)>0&&(null===(a=t.rules)||void 0===a?void 0:a.some((function(t){return"1"==t.is_join})))}}};e.default=s},"324b":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hint-tooltip"},[a("Poptip",{staticClass:"qrCode-tooltip",attrs:{placement:"bottom-end",transfer:!0,trigger:t.trigger,loading:t.loading},on:{"on-popper-show":t.onPopperShow},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",{staticClass:"tab"},[a("tabbar",{attrs:{tabList:t.tabList},on:{tabContent:t.tabClick}})],1),a("div",{staticClass:"qr-code-tooltip-content"},[a("div",{staticClass:"image"},[t.qrcode_url||"h5"!=t.tabContent.id?t._e():a("qr-code",{attrs:{size:150,url:t.$media(t.url)}}),t.qrcode_url||"wxapp"!=t.tabContent.id?t._e():a("img",{attrs:{src:t.qrData.qrcode,alt:""}})],1),a("p",{staticClass:"text"},[t._v(t._s(t.tabContent.tabLink))]),a("div",{staticClass:"link"},["h5"==t.tabContent.id?a("div",[t._v(" "+t._s(t.$media(t.url))+" ")]):a("div",[t._v(t._s(t.qrData.url))])]),t.qrcode_url||"h5"!=t.tabContent.id?a("kdx-copy-text",{attrs:{text:t.qrData.url}},[a("Button",{attrs:{type:"text"}},[t._v(t._s(t.text))])],1):a("kdx-copy-text",{attrs:{text:t.$media(t.url)}},[a("Button",{class:{textNext:!t.tabContent.isShow},attrs:{type:"text"}},[t._v(t._s(t.text))])],1),t.tabContent.isShow?a("Button",{staticClass:"downCode",attrs:{type:"text"},on:{click:function(e){return t.downCode(t.id)}}},[t._v("下载二维码")]):t._e()],1)]},proxy:!0}])},[t._t("default")],2)],1)},n=[]},3655:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("0da9")),s=a("3b02"),o={name:"list",components:{GoodsTooltip:n.default},data:function(){return{loading:!1,data:[],total:0,pageSize:10,current:1,model:{keyword:"",date:[]},columns:[{title:"商品",slot:"goods",minWidth:300},{title:"积分价",slot:"credit_price",minWidth:170},{title:"库存",key:"credit_shop_stock",minWidth:70},{title:"销售数量",key:"sale",minWidth:90},{title:"销售额",slot:"pay",minWidth:130},{title:"创建时间",key:"created_at",minWidth:120},{title:"状态",slot:"status",width:100},{title:"操作",slot:"action",minWidth:130}]}},computed:{noManagePerm:function(){return!this.$getPermMap("creditShop.list.manage")}},mounted:function(){this.getData()},methods:{addCreditGoods:function(){this.$router.push({path:"/creditShop/goods/index"})},changeDate:function(t){t[0]&&(this.model.date=t)},handleSearch:function(){this.getData()},handleReset:function(){this.model.keyword="",this.model.date=[],this.getData()},handleExport:function(){var t={export:"1",start_time:this.model.date[0],end_time:this.model.date[1],keyword:this.model.keyword};(0,s.Export)("manage/creditShop/list/index",t)},viewHistory:function(){this.$utils.openNewWindowPage("/order/list/all",{activity_type:"5"})},changeStatus:function(t,e){var a,i=this;"1"===e?(a="确认下架此商品？",e="0"):(a="确认上架此商品？",e="1"),this.$Modal.confirm({title:"提示",content:a,onOk:function(){i.$api.creditShopApi.changeStatus({id:t,status:e}).then((function(t){0===t.error&&i.getData()}))},onCancel:function(){}})},handleEdit:function(t){this.$router.push({path:"/creditShop/goods/index",query:{id:t,type:"edit"}})},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除此商品？",onOk:function(){e.$api.creditShopApi.deleteGood({id:t}).then((function(t){0===t.error&&e.getData()}))},onCancel:function(){}})},changePage:function(t){this.pageSize=t.pageSize,this.current=t.pageNumber,this.getData()},getData:function(){var t=this;this.loading=!0;var e={pagesize:this.pageSize,page:this.current,keyword:this.model.keyword,start_time:this.model.date[0],end_time:this.model.date[1]};this.$api.creditShopApi.getList(e).then((function(e){t.loading=!1,t.data=e.list,t.total=e.total}))}}};e.default=o},"389d":function(t,e,a){"use strict";a.r(e);var i=a("b20d"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"39da":function(t,e,a){},"3acd":function(t,e,a){},"3b02":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.Export=void 0;var n=i(a("5530")),s=a("d8cc"),o=i(a("4328")),r=a("384d"),l=i(a("1cc8")),d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log(t,"---------downloadPath"),t){var a="";if(-1===t.indexOf(s.config.base_url)){var i={baseURL:s.config.base_url,url:t};(0,l.default)(i),a=i.baseURL+i.url}else a=t;a=a.indexOf("?")>-1?a:a+"?",e=(0,n.default)((0,n.default)({},e),(0,r.getUserInfo)()),a+="&".concat(o.default.stringify(e)),window.open(a)}};e.Export=d},"3baf":function(t,e,a){},"3dc0":function(t,e,a){"use strict";a.r(e);var i=a("acef"),n=a("10c3");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("146a");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"1abdac3c",null);e["default"]=r.exports},"3e10":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3"),a("e9c4"),a("b0c0"),a("a15b"),a("99af"),a("d3b7"),a("159b");var n=i(a("313e")),s=i(a("89bd")),o={name:"ChartLine",props:{id:{type:String,required:!0},data:{type:Array,default:function(){return[]}},legend:{type:[Object,Boolean],default:function(){}},height:{type:Number,default:130},loading:{type:Boolean,default:!1},radius:{type:[Array,String],default:function(){return["70%","90%"]}},label:{type:Object,default:function(){}},hoverOffset:{type:Number,default:2},center:{type:Array,default:function(){return["50%","50%"]}},width:{type:[String,Number],default:"100%"}},data:function(){return{myCharts:null,option:{title:{},grid:{left:"0%",right:"0%",bottom:"0%",containLabel:!1},tooltip:{trigger:"item",padding:[0]},legend:{icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:"#636669"}},series:[{type:"pie",radius:this.radius,hoverOffset:this.hoverOffset,center:this.center,label:{normal:{show:!1,position:"center",formatter:"{b}132: \n{d}",rich:{b:{color:"#636669",fontSize:12,lineHeight:16,fontFamily:"din,PingFang SC,Microsoft YaHei"},d:{color:"#636669",fontSize:20,lineHeight:28,fontWeight:"bold",fontFamily:"din,PingFang SC,Microsoft YaHei"}}}},emphasis:{label:{show:!0,rich:{a:{color:"#636669",fontSize:12,lineHeight:16,fontFamily:"din,PingFang SC,Microsoft YaHei"},b:{color:"#262b30",fontSize:20,lineHeight:32,fontWeight:"bold",fontFamily:"din,PingFang SC,Microsoft YaHei"}}}}}]}}},methods:{init:function(){n.default.registerTheme("theme",s.default),this.myCharts=n.default.init(document.getElementById("pie_".concat(this.id)),s.default)},render:function(){var t=this;this.myCharts||this.init();var e=JSON.parse(JSON.stringify(this.option));this.legend?Object.assign(e.legend,this.legend):delete e.legend,e.series[0].data=this.data,e.series[0].emphasis.label.formatter=function(t){var e=t.name,a=t.percent;return["{a|".concat(e,"}"),"{b|".concat(a,"%}")].join("\n")},e.tooltip.formatter=function(t){var e=t.name,a=t.percent,i=t.color;return'<div style="background:#fff;border-radius: 2px;padding: 12px 48px 12px 12px;box-shadow: 0px 4px 10px rgba(0, 49, 95, 0.08);">\n                    <div style="display:flex;align-items:center;margin-top:4px;">\n                        <span style="display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:8px;background:'.concat(i,';"></span>\n                        <span style="color:#636669;">').concat(e,"：").concat(a,"%</span>\n                    </div>\n                </div>")},this.myCharts.setOption(e);var a=0;this.myCharts.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a}),this.myCharts.on("mouseover",(function(e){t.data.forEach((function(e,a){t.myCharts.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a})})),t.myCharts.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e.dataIndex})})),this.myCharts.on("mouseout",(function(e){a=e.dataIndex,t.myCharts.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e.dataIndex})}))},handleResize:function(){this.myCharts&&this.myCharts.resize()}},mounted:function(){window.addEventListener("resize",this.handleResize)}};e.default=o},4130:function(t,e,a){"use strict";a("4463")},4463:function(t,e,a){},"472f":function(t,e,a){"use strict";a("3acd")},5050:function(t,e,a){"use strict";a.r(e);var i=a("2f16"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"522a":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",attrs:{loading:t.submitLoading},on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("kdx-hint-alert",[a("div",[t._v("积分商品添加方式为调取商城商品/付费优惠券并设置积分价、库存，对原商品/优惠券的设置、售卖、活动等不产生影响，积分商品与商城商品/优惠券不共用详情页链接")]),a("div",[t._v("请注意如果原商品的规格信息产生变更，对应积分商品将自动下架，必须重新编辑积分商品的积分价方可上架")])]),a("div",{staticClass:"container"},[a("select-type",{attrs:{"is-disabled":t.is_disabled},model:{value:t.good_type,callback:function(e){t.good_type=e},expression:"good_type"}}),a("deal-set",{ref:"dealInfo",attrs:{type:t.good_type,dealSetData:t.dealSetData,"is-disabled":t.is_disabled},on:{"update:dealSetData":function(e){t.dealSetData=e},"update:deal-set-data":function(e){t.dealSetData=e}}}),a("other-set",{ref:"otherSet",attrs:{otherSetData:t.otherSetData},on:{"update:otherSetData":function(e){t.otherSetData=e},"update:other-set-data":function(e){t.otherSetData=e}}})],1)],1)},n=[]},"546c":function(t,e,a){"use strict";a("8935")},5494:function(t,e,a){"use strict";a.r(e);var i=a("ea83"),n=a("f8be");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("857c");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"6d38fb0d",null);e["default"]=r.exports},"55f7":function(t,e,a){"use strict";a.r(e);var i=a("2a77"),n=a("16a1");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("5640");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"1972d845",null);e["default"]=r.exports},5640:function(t,e,a){"use strict";a("640a")},"56d0":function(t,e,a){"use strict";a("7ae5")},5782:function(t,e,a){"use strict";a.r(e);var i=a("834e"),n=a("7ea9");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("472f");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"2ba78e10",null);e["default"]=r.exports},5792:function(t,e,a){},5998:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",attrs:{disabled:t.noManagePerm},on:{click:function(e){return t.handleSubmit("model")}}},[t._v("保存")])]},proxy:!0}])},[a("kdx-hint-alert",[a("div",[t._v("积分商城商品不参与会员折扣、分销、积分抵扣，支持商品余额抵扣；积分商城订单不支持叠加营销的优惠券、满额立减、满额包邮")])]),a("div",{staticClass:"settings"},[a("Form",{ref:"form",attrs:{model:t.model,rules:t.rules,"label-width":120}},[a("div",{staticClass:"settings-item"},[a("kdx-form-title",[t._v("基础设置")]),a("FormItem",{attrs:{label:"积分商城：",prop:"status"}},[a("RadioGroup",{model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}},[a("Radio",{attrs:{label:"1",disabled:t.noManagePerm}},[t._v("开启")]),a("Radio",{attrs:{label:"0",disabled:t.noManagePerm}},[t._v("关闭")])],1),a("kdx-hint-text",{staticClass:"text"},[t._v("开启后用户端可通过装修的积分商城首页或积分商品访问并下单 "),a("span",{staticClass:"jump-decoration",on:{click:t.jumpDecorate}},[t._v("立即装修")])])],1),a("FormItem",{attrs:{label:"售后维权：",prop:"refund_type"}},[a("RadioGroup",{model:{value:t.model.refund_type,callback:function(e){t.$set(t.model,"refund_type",e)},expression:"model.refund_type"}},[a("Radio",{attrs:{label:"0",disabled:t.noManagePerm}},[t._v("读取系统设置")]),a("Radio",{attrs:{label:"1",disabled:t.noManagePerm}},[t._v("自定义售后规则")])],1),"0"===t.model.refund_type?a("div",[a("kdx-hint-text",{staticClass:"text"},[t._v("读取系统【设置-维权设置】内容")])],1):t._e(),a("kdx-hint-alert",{staticStyle:{margin:"10px 0"}},[a("div",[t._v(" 积分商品订单的售后维权仅支持整单全金额售后，不支持修改退款金额 ")])]),"1"===t.model.refund_type?a("div",{staticClass:"payment-setting-main"},[a("FormItem",{staticClass:"number-input no-width",attrs:{label:"已完成订单：",prop:"finish_order_refund_type"}},[a("RadioGroup",{attrs:{vertical:""},model:{value:t.model.finish_order_refund_type,callback:function(e){t.$set(t.model,"finish_order_refund_type",e)},expression:"model.finish_order_refund_type"}},[a("Radio",{attrs:{label:"0",disabled:t.noManagePerm}},[t._v("不允许售后")]),a("Radio",{staticClass:"radio-flex mt-15",attrs:{label:"1",disabled:t.noManagePerm}},[a("FormItem",{staticClass:"flex margin refund_rule",attrs:{prop:"finish_order_refund_days"}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"marginR-10"},[t._v("订单完成后")]),a("kdx-rr-input",{staticClass:"width-160",attrs:{minValue:0,maxValue:30,fixed:0,number:"",disabled:t.noManagePerm},model:{value:t.model.finish_order_refund_days,callback:function(e){t.$set(t.model,"finish_order_refund_days",e)},expression:"model.finish_order_refund_days"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("天")])]),a("span",{staticClass:"marginL-10"},[t._v("内可发起售后维权")])],1)])],1),a("kdx-hint-text",{staticClass:"mL-20 marginT-10"},[t._v("售后维权时间必须在订单完成0～30天之间")])],1)],1)],1):t._e()],1),a("FormItem",{staticClass:"number-input no-width",attrs:{label:"退款规则：",prop:"refund_rule"}},[a("RadioGroup",{model:{value:t.model.refund_rule,callback:function(e){t.$set(t.model,"refund_rule",e)},expression:"model.refund_rule"}},[a("Radio",{attrs:{label:"0",disabled:t.noManagePerm}},[t._v("全部退款")]),a("Radio",{attrs:{label:"1",disabled:t.noManagePerm}},[t._v("不退积分")])],1)],1)],1)])],1)],1)},n=[]},"5c5b":function(t,e,a){},"5e8a":function(t,e,a){"use strict";a.r(e);var i=a("da0a"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"626b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAeCAYAAAAGos/EAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA4SURBVHgB3YsxDgAQEMDKIEZ+4MdGMYkf2iUOOa/QsU2RRuBgmWQpJCMVUfOwLDqOyO1qPOPDawNr1jQJbIusxQAAAABJRU5ErkJggg=="},"62dd":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530"));a("a9e3"),a("e9c4"),a("d81d"),a("d3b7"),a("159b"),a("b680"),a("b0c0"),a("99af");var s=i(a("313e")),o=i(a("89bd")),r={name:"ChartLine",props:{id:{type:String,required:!0},data:{type:Array,default:function(){return[]}},legend:{type:Array,default:function(){return[]}},legendStyle:{type:Object,default:function(){return{right:"0",top:"25"}}},xAxis:{type:Array,default:function(){return[]}},yAxis:{type:[Array,Object],default:function(){}},height:{type:Number,default:450},isAreaStyle:{type:Boolean,default:!1},areaStyle:{type:[Array,Object],default:function(){return[]}},loading:{type:Boolean,default:!1},grid:{type:Object,default:function(){}},lineColors:{type:Array,default:function(){return[]}},showYAxis:{type:Boolean,default:!1}},data:function(){return{myCharts:null,option:{title:{},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!1},tooltip:{trigger:"axis",axisPointer:{animation:!1,lineStyle:{color:"#BFBFBF"}},padding:[0],textStyle:{color:"#262B30",fontSize:12}},legend:(0,n.default)({icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:"#939799"},data:this.legend},this.legendStyle),xAxis:{type:"category",boundaryGap:!1,data:this.xAxis},yAxis:{nameTextStyle:{color:"#262B30"},splitLine:{lineStyle:{type:"dashed"}},axisLabel:{}},series:this.data}}},methods:{init:function(){s.default.registerTheme("theme",o.default),this.myCharts=s.default.init(document.getElementById("line_".concat(this.id)),o.default)},render:function(){var t=this;this.myCharts||this.init();var e=JSON.parse(JSON.stringify(this.option));if(Object.assign(e.grid,this.grid),e.legend.data=this.legend,this.lineColors.length&&(e.color=this.lineColors),e.xAxis.data=this.xAxis,this.yAxis instanceof Array)e.yAxis=this.yAxis.map((function(a,i){return a.splitLine=e.yAxis.splitLine,t.showYAxis&&1==i&&(a.inverse=!1),a}))||[],e.yAxis.forEach((function(t){var e;null!==t&&void 0!==t&&null!==(e=t.axisLabel)&&void 0!==e&&e.formatter||(t.axisLabel=(0,n.default)((0,n.default)({},t.axisLabel),{},{formatter:function(t){return t>=1e3?"".concat(parseFloat(t/1e3).toFixed(1),"K"):t}}))}));else if(this.yAxis instanceof Object){var a,i;e.yAxis=Object.assign(e.yAxis,this.yAxis),null!==(a=e.yAxis)&&void 0!==a&&null!==(i=a.axisLabel)&&void 0!==i&&i.formatter||(e.yAxis.axisLabel.formatter=function(t){return t>=1e3?"".concat(parseFloat(t/1e3).toFixed(1),"K"):t})}this.legend.length>1?e.series=this.legend.map((function(e,a){var i={name:e,type:"line",data:t.data[a]||[]};return t.showYAxis&&1==a&&(i.yAxisIndex=1),t.isAreaStyle&&(i.areaStyle=t.areaStyle[a]||{}),i})):(e.series=[{name:this.legend[0],type:"line",data:this.data||[]}],this.isAreaStyle&&(e.series[0].areaStyle=this.areaStyle||{})),e.tooltip.formatter=function(t){var e="",a=t[0].name;return t.forEach((function(t){var a=t.seriesName,i=t.value,n=t.color;e+='\n                                  <div style="display:flex;align-items:center;margin-top:4px;">\n                                  <span style="display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:8px;background:'.concat(n,';"></span>\n                                  <span style="color:#636669;">').concat(a,"：").concat(i,"</span>\n                                  </div>")})),'<div style="background:#fff;border-radius: 2px;padding: 12px 48px 12px 12px;box-shadow: 0px 4px 10px rgba(0, 49, 95, 0.08);">\n                                <div>'.concat(a,"</div>\n                                ").concat(e,"\n                        </div>")},this.myCharts.setOption(e)},handleResize:function(){this.myCharts&&this.myCharts.resize()}},mounted:function(){this.$emit("chartLineMounted"),window.addEventListener("resize",this.handleResize)}};e.default=r},"640a":function(t,e,a){},"653b":function(t,e,a){"use strict";a.r(e);var i=a("93d7"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"65eb":function(t,e,a){"use strict";a.r(e);var i=a("e0ac"),n=a("8c95");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("56d0");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"20721dbe",null);e["default"]=r.exports},"67bd":function(t,e,a){"use strict";a.r(e);var i=a("a0163"),n=a("aa0f");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("782d");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"5258634c",null);e["default"]=r.exports},6820:function(t,e,a){"use strict";a.r(e);var i=a("a7d8"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"69a7":function(t,e,a){},"6ab3":function(t,e,a){"use strict";a.r(e);var i=a("eff1"),n=a("e17c");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("9f05");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"8c3f8a16",null);e["default"]=r.exports},"6da0":function(t,e,a){"use strict";a.r(e);var i=a("2e1d"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"6ebe":function(t,e){t.exports="data:image/png;base64,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"},"75e2":function(t,e,a){"use strict";a.r(e);var i=a("522a"),n=a("b2ff");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("4130");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"f1e5bc3c",null);e["default"]=r.exports},"76ba":function(t,e,a){"use strict";a("1018")},"782d":function(t,e,a){"use strict";a("834a")},"7a39":function(t,e,a){},"7ae5":function(t,e,a){},"7ea9":function(t,e,a){"use strict";a.r(e);var i=a("b992"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"82c7":function(t,e,a){"use strict";a.r(e);var i=a("5998"),n=a("653b");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("1dc0");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"8c2417bc",null);e["default"]=r.exports},"834a":function(t,e,a){},"834e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-chart"},[a("div",{staticClass:"activity-line"},[t._m(0),a("div",{staticClass:"chart-line"},[a("chart-line",{ref:"chart_line",attrs:{id:"groups_line",data:t.chartLine.data,"x-axis":t.chartLine.xAxis,"y-axis":t.chartLine.yAxis,legend:t.chartLine.legend,"legend-style":t.chartLine.legendStyle,grid:t.chartLine.grid,height:328}})],1)]),a("div",{staticClass:"activity-pie"},[a("div",{staticClass:"activity-pie-header"},[t._v(" 销售额占比 ")]),a("div",{staticClass:"chart-pie"},[a("chart-pie",{ref:"chart_pie",attrs:{id:"groups_pie",legend:t.chartPie.legend,height:328,data:t.chartPie.data,center:t.chartPie.center,radius:t.chartPie.radius}})],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-line-header"},[a("div",{staticClass:"title"},[t._v(" 积分商城曝光量 ")])])}]},"83b0":function(t,e,a){"use strict";a.r(e);var i=a("1ea7"),n=a("389d");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("eec44");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"d1a95214",null);e["default"]=r.exports},"857c":function(t,e,a){"use strict";a("5792")},8935:function(t,e,a){},"898a":function(t,e,a){"use strict";a("97c4")},"8a63":function(t,e,a){"use strict";a.r(e);var i=a("3655"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"8a81":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{title:"会员标签组",loading:t.loading,"class-name":"shop-label-modal"},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"shop-label"},[a("div",{staticClass:"custom"},[t.list.length>0?a("div",{staticClass:"recommend"},[a("div",{staticClass:"label-content"},t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"shop-label-item",class:{checked:e.checked},on:{click:function(a){return t.setLabelChecked(i,!e.checked)}}},[a("span",[t._v(" "+t._s(e.group_name))]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin-y"}})],1)})),0)]):a("div",{staticStyle:{"text-align":"center"}},[t._v(" 暂无数据 ")])])])])},n=[]},"8ab6":function(t,e,a){"use strict";a.r(e);var i=a("0968"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"8c95":function(t,e,a){"use strict";a.r(e);var i=a("e3c8"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"8ede":function(t,e,a){t.exports=a.p+"static/dist/shop/img/discount.png"},"8f3c":function(t,e,a){var i={"./subtract-blue.png":"e7cd","./subtract-yellow.png":"626b"};function n(t){var e=s(t);return a(e)}function s(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=s,t.exports=n,n.id="8f3c"},"91bc":function(t,e){t.exports="data:image/png;base64,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"},"93d7":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530")),s={name:"index",data:function(){var t=function(t,e,a){var i=t.message;""===e||null===e?a(i):a()};return{loading:!1,model:{status:"1",refund_type:"1",finish_order_refund_type:"1",finish_order_refund_days:null,refund_rule:"1"},rules:{finish_order_refund_days:[{validator:t,message:"允许售后天数必填"}]}}},computed:{noManagePerm:function(){return!this.$getPermMap("creditShop.setting.manage")}},mounted:function(){this.getSetting()},methods:{getSetting:function(){var t=this;this.loading=!0,this.$api.creditShopApi.getSetting({}).then((function(e){t.loading=!1,0===e.error&&(t.model=e.data)})).catch((function(){t.loading=!1}))},jumpDecorate:function(){this.$utils.openNewWindowPage("/shop/list/system")},handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.setSetting(),t.$Message.success("保存成功！"))}))},setSetting:function(){var t=this,e=this.model;this.loading=!0,this.$api.creditShopApi.setSetting((0,n.default)({},e)).then((function(){t.loading=!1,t.getSetting()})).catch((function(){t.loading=!1}))}}};e.default=s},"953b":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rules-goods-table"},[i("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[i("Table",{attrs:{columns:t.columns,data:t.form.goodsList},scopedSlots:t._u([{key:"shop",fn:function(e){var n=e.row;return["0"===t.type?i("div",{staticClass:"shop-box"},[i("div",{staticClass:"image"},[i("img",{attrs:{src:t.$media(n.thumb)},on:{error:t.replaceImage}})]),i("div",{staticClass:"title-content"},[i("div",{staticClass:"content-text"},[1===+n.has_option?i("span",{staticClass:"mark more"},[t._v("多")]):t._e(),0===+n.type?i("span",{staticClass:"mark real"},[t._v("实")]):1===+n.type?i("span",{staticClass:"mark virtual"},[t._v("虚")]):i("span",{staticClass:"mark card"},[t._v("密")]),i("span",{staticClass:"text"},[t._v(t._s(n.title))])])])]):i("div",{staticClass:"flex align-center"},[i("div",{staticClass:"coupons-type",class:"2"===n.coupon_sale_type?"deduction":"full-reduction"},[i("span",[t._v(t._s("2"===n.coupon_sale_type?"折扣券":"满减券"))]),i("img",{attrs:{src:a("8f3c")("./subtract-"+("2"===n.coupon_sale_type?"blue":"yellow")+".png"),alt:""}})]),i("div",{staticClass:"marginL-10"},[i("p",[t._v(t._s(n.coupon_name))]),i("p",{staticClass:"disabled-color"},[t._v(t._s(n.content))])])])]}},{key:"price",fn:function(e){var a=e.row;return["0"===t.type?i("div",{staticClass:"price"},[1==a.has_option?i("div",{staticClass:"flex-wrap"},[i("div",[t._v("￥"+t._s(a.min_price))]),i("div",[t._v("~")]),i("div",[t._v("￥"+t._s(a.max_price))])]):i("span",[t._v("￥"+t._s(a.price))])]):i("div",[0!==parseFloat(a.credit)?i("span",[t._v(t._s(parseFloat(a.credit))+"积分")]):t._e(),0!==parseFloat(a.credit)&&0!==parseFloat(a.balance)?i("span",[t._v("+")]):t._e(),0!==parseFloat(a.balance)?i("span",[t._v(t._s(parseFloat(a.balance))+"元")]):t._e()])]}},{key:"stock",fn:function(e){var a=e.row;return["0"===t.type?i("div",[t._v(t._s(parseInt(a.stock)>999?"999+":parseInt(a.stock)))]):i("div",["0"===a.stock_type?i("div",[t._v("不限制")]):i("div",[t._v(t._s(parseInt(a.stock)-parseInt(a.get_total)))])])]}},{key:"rules",fn:function(e){var a=e.row,n=e.index;return[1==a.has_option?i("div",{staticClass:"deposit-btn"},[t.isSetRules(a)?i("Button",{staticClass:"default-primary on-set",on:{click:function(e){return t.handleSelectOption(a.id)}}},[t._v("已设置（可点击修改） ")]):i("Button",{staticClass:"default-primary off-set",on:{click:function(e){return t.handleSelectOption(a.id)}}},[t._v("未设置积分价格及库存 ")])],1):i("div",{staticClass:"flex"},[i("div",{staticClass:"table-input flex"},[i("FormItem",{attrs:{prop:"goodsList."+n+".credit_shop_credit",rules:t.rules.credit_shop_credit}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,maxValue:9999999},model:{value:t.form.goodsList[n].credit_shop_credit,callback:function(e){t.$set(t.form.goodsList[n],"credit_shop_credit",e)},expression:"form.goodsList[index].credit_shop_credit"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("积分")])])],1),i("i",{staticClass:"iconfont icon-tianjia"}),i("FormItem",{attrs:{prop:"goodsList."+n+".credit_shop_price",rules:t.rules.credit_shop_price}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99},model:{value:t.form.goodsList[n].credit_shop_price,callback:function(e){t.$set(t.form.goodsList[n],"credit_shop_price",e)},expression:"form.goodsList[index].credit_shop_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),i("div",{staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+n+".credit_shop_stock",rules:t.rules.credit_shop_stock}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,maxValue:999999999},model:{value:t.form.goodsList[n].credit_shop_stock,callback:function(e){t.$set(t.form.goodsList[n],"credit_shop_stock",e)},expression:"form.goodsList[index].credit_shop_stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)],1)])]}}])})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.form.goodsList&&t.form.goodsList.length>0,expression:"form.goodsList && form.goodsList.length > 0"}],staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1),i("specifications-rules",{attrs:{goodsId:t.specificationsData.goodsId,spaceRules:t.specificationsData.spaceRules},on:{spaceGoods:t.handleSpaceGoods},model:{value:t.specificationsData.rulesModal,callback:function(e){t.$set(t.specificationsData,"rulesModal",e)},expression:"specificationsData.rulesModal"}})],1)},n=[]},"97c4":function(t,e,a){},"999e":function(t,e,a){t.exports=a.p+"static/dist/shop/img/full-reduction.png"},"9bfd":function(t,e,a){"use strict";a("e6d0")},"9f05":function(t,e,a){"use strict";a("7a39")},a0163:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"form",staticClass:"content"},[a("kdx-form-title",[t._v("商品类型")]),a("FormItem",{attrs:{label:"","label-width":0,model:t.model}},[a("div",{staticClass:"multi-select"},[a("RadioGroup",{on:{"on-change":t.changeType},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},[a("Radio",{attrs:{label:"0",border:"",disabled:t.isDisabled}},[a("div",{staticClass:"tit"},[t._v("商品")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1),a("Radio",{attrs:{label:"1",border:"",disabled:t.isDisabled}},[a("div",{staticClass:"tit"},[t._v("优惠券")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1)],1)],1)])],1)},n=[]},a308:function(t,e,a){"use strict";a("c792")},a7d8:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2909")),s=i(a("5530")),o=i(a("b85c"));a("a9e3"),a("4de4"),a("d3b7"),a("159b"),a("ac1f"),a("841c");var r={name:"CouponSelector",props:{value:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},current:{type:[String,Object]},currentList:{type:Array},limit:{type:Number},pick_way:{type:[String,Number],default:""},params:{type:Object,default:function(){}}},data:function(){var t=this;this.$createElement;return{search:{keyword:"",coupon_sale_type:""},columns:[{title:"类型",key:"coupon_sale_type",width:80,render:function(t,e){return"2"===e.row.coupon_sale_type?t("div",{class:"coupons-type coupons-type-blue"},[t("span",["折"]),t("img",{class:"coupons-img",attrs:{src:a("e7cd")}})]):t("div",{class:"coupons-type coupons-type-yellow"},[t("span",["减"]),t("img",{class:"coupons-img",attrs:{src:a("626b")}})])}},{title:"名称",key:"coupon_name"},{title:"优惠内容",key:"content"},{title:"剩余数量",key:"surplus",render:function(t,e){return"0"==e.row.stock_type?t("div",["不限制"]):t("div",[e.row[e.column.key]])}},{title:"创建时间",key:"created_at",render:function(t,e){return t("div",{style:"word-break: normal"},[e.row[e.column.key]])}},{title:" ",key:"action",width:100,render:function(e,a){return e("div",{class:"action"},[e("Button",{class:"default-primary",attrs:{disabled:1===a.row.is_select},style:{display:a.row.checked?"none":"block"},on:{click:function(){t.setChecked(a.index,!0)}}},["选择"]),e("Button",{attrs:{type:"primary"},style:{display:a.row.checked?"block":"none"},on:{click:function(){t.setChecked(a.index,!1)}}},["已选"])])}}],data:[],total:0,page:{pageSize:10,pageNumber:1},loading:!1,selectRows:[],selectRow:{}}},methods:{handleSearch:function(){this.resetPage(),this.getCouponList()},handlePageChange:function(t){this.page=t,this.getCouponList();try{this.$refs.scrollBox.scrollTop=0}catch(e){console.log(e)}},resetPage:function(){var t;this.page={pageSize:10,pageNumber:1},null===(t=this.$refs["page"])||void 0===t||t.reset()},setChecked:function(t,e){var a=this;if(this.multiple){if(this.limit&&this.selectRows.length===this.limit&&e)return void this.$Message.error("已超出最大可选数量");this.$set(this.data[t],"checked",e),0===this.selectRows.length||e?this.selectRows.push(this.data[t]):this.selectRows=this.selectRows.filter((function(e){return e.id!==a.data[t].id}))}else e?(this.data.forEach((function(t,e){a.$set(a.data[e],"checked",!1)})),this.$set(this.data[t],"checked",!0),this.selectRow=this.data[t]):(this.$set(this.data[t],"checked",!1),this.selectRow={})},defaultChecked:function(){var t=this;this.multiple?this.data.forEach((function(e,a){var i,n=(0,o.default)(t.selectRows);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.id===e.id){t.$set(t.data[a],"checked",!0);break}}}catch(r){n.e(r)}finally{n.f()}})):this.data.forEach((function(e,a){t.selectRow&&e.id===t.selectRow.id?t.$set(t.data[a],"checked",!0):t.$set(t.data[a],"checked",!1)}))},getCouponList:function(){var t=this;this.loading=!0;var e=Object.assign({},this.search,{pick_way:this.pick_way});e.coupon_sale_type="all"===e.coupon_sale_type?"":e.coupon_sale_type;var a=Object.assign((0,s.default)({pagesize:this.page.pageSize,page:this.page.pageNumber},this.params),e);this.$api.marketApi.getCouponAllList(a).then((function(e){t.loading=!1,0===e.error&&(t.data=e.list,t.total=e.total,t.defaultChecked())}))},handleSave:function(){this.multiple?this.$emit("on-change",this.selectRows):this.$emit("on-change",this.selectRow),this.handleCancel()},handleCancel:function(){this.$emit("on-cancel")},resetSearch:function(){this.search={keyword:"",coupon_sale_type:"all"}}},watch:{value:{handler:function(t){t&&(this.multiple?this.selectRows=(0,n.default)(this.currentList)||[]:this.selectRow=this.current||{},this.resetSearch(),this.resetPage(),this.getCouponList())},immediate:!0}},mounted:function(){this.resetSearch()}};e.default=r},aa0f:function(t,e,a){"use strict";a.r(e);var i=a("f405"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},acef:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{title:"修改积分商品信息",value:t.modal,width:"1000","mask-closable":!1,loading:t.loading},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOK}},[a("div",{staticClass:"multi-specification"},[a("div",{staticClass:"setting flex"},[a("span",[t._v("批量设置：")]),a("div",{staticClass:"setting-input flex"},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},on:{"on-change":t.changePresell},model:{value:t.allJoin,callback:function(e){t.allJoin=e},expression:"allJoin"}},[t._v("参与积分商城 ")]),a("kdx-rr-input",{attrs:{type:"text",placeholder:"积分价",number:"",fixed:0,maxValue:9999999},model:{value:t.batchData.credit_shop_credit,callback:function(e){t.$set(t.batchData,"credit_shop_credit",e)},expression:"batchData.credit_shop_credit"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("积分")])]),a("i",{staticClass:"iconfont icon-tianjia"}),a("kdx-rr-input",{attrs:{type:"text",placeholder:"积分价",number:"",fixed:2,maxValue:9999999.99},model:{value:t.batchData.credit_shop_price,callback:function(e){t.$set(t.batchData,"credit_shop_price",e)},expression:"batchData.credit_shop_price"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),a("kdx-rr-input",{attrs:{type:"text",placeholder:"积分商品库存",number:"",fixed:0,maxValue:999999999},model:{value:t.batchData.credit_shop_stock,callback:function(e){t.$set(t.batchData,"credit_shop_stock",e)},expression:"batchData.credit_shop_stock"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])]),a("Button",{staticClass:"default-primary",on:{click:t.handleBatchChange}},[t._v("应用")])],1)]),a("div",{staticClass:"table-list"},[a("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.form.goodsList,"span-method":t.handleSpan},scopedSlots:t._u([{key:"is_join",fn:function(e){var i=e.index;return[a("FormItem",{attrs:{prop:"goodsList."+i+".is_join",rules:t.rules.is_join}},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.goodsList[i].is_join,callback:function(e){t.$set(t.form.goodsList[i],"is_join",e)},expression:"form.goodsList[index].is_join"}},[t._v("参与")])],1)]}},{key:"credit_shop_credit",fn:function(e){var i=e.index;return[a("div",{staticClass:"flex"},[a("FormItem",{attrs:{prop:"goodsList."+i+".credit_shop_credit",rules:t.rules.credit_shop_credit}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:9999999},model:{value:t.form.goodsList[i].credit_shop_credit,callback:function(e){t.$set(t.form.goodsList[i],"credit_shop_credit",e)},expression:"form.goodsList[index].credit_shop_credit"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("积分")])])],1),a("i",{staticClass:"iconfont icon-tianjia"}),a("FormItem",{attrs:{prop:"goodsList."+i+".credit_shop_price",rules:t.rules.credit_shop_price}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99},model:{value:t.form.goodsList[i].credit_shop_price,callback:function(e){t.$set(t.form.goodsList[i],"credit_shop_price",e)},expression:"form.goodsList[index].credit_shop_price"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1)]}},{key:"credit_shop_stock",fn:function(e){var i=e.index;return[a("FormItem",{attrs:{prop:"goodsList."+i+".credit_shop_stock",rules:t.rules.credit_shop_stock}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:999999999},model:{value:t.form.goodsList[i].credit_shop_stock,callback:function(e){t.$set(t.form.goodsList[i],"credit_shop_stock",e)},expression:"form.goodsList[index].credit_shop_stock"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)]}}])})],1)],1)])])},n=[]},ad02:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAqUExURUdwTP+ZPf+YN/+YPf+ZPv+ZPv+ZP/+XOP+ZPv+ZP////v/Fkv/w4v+sYxH2jKsAAAAJdFJOUwAZChLGpuUWa516CZEAAAG+SURBVEjHrZa/TsMwEMbTMrD2kkrtmDZD16YLcxd2BiTYEWIMBdSZAd6AwaJ5ANy8QJsnAMQDVOJhSOok9vlf3IpvaaX8dP5sn+/O85C60RLgYTb2zOrGUCkITUwEgmZ6ZgRICwcGwFeZCShSYp2ARlMJutdBgxZDGltdMChsD4RCGQOJoUZmiIcyM3yDpxYIkgqKbVDQaptbr1Ybnt8i3TwzU4m4t2si6U3cH7u2IVHEQoFgqa9CF9xUZelRhebsS49b6hshn5+SGQr4nZgh4EdpgcImuS3Q1Ou0Q0mTS3sor7/nItRD0DvdMIb9mTeJFx8NrRAUNK+yhFL6UUM7ARogiNA1g7YZQRCI0HYfgaRfaxECDK3oT/nzSz8tUEqzTemfBTRAxXrZd04raxxCxgs3tFC2I8S8u2KpktoQCYqlC07zfCddcKBAmizwcRaYoM4/QT239HV6CE5Pyu1xOj3zThuU8NLzZC09tXMVEot0ZepVZu7EcliX8ZdLpCtUyOvjHFi7i7XY+4e0DVsDgsNamVNTdGqvbo3aFGpx+PCgH0PCYwYaDeXrBqiJA+M2rrkNfoXG0RnAUh4h/wCPrwb31nuEpgAAAABJRU5ErkJggg=="},b20d:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("e9c4"),a("d3b7"),a("159b"),a("a434");var n=i(a("b85c")),s=i(a("2909")),o={name:"levelSelector",props:{currentList:{type:Array,default:function(){return[]}}},data:function(){return{value:!1,selectRows:[],list:[],loading:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.selectRows=(0,s.default)(this.currentList)||[],this.getLabelData())},handleCancel:function(){this.setValue()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.setValue()},initDefaultChecked:function(){var t=this;this.currentList.length>0&&this.list.forEach((function(e,a){var i,s=(0,n.default)(t.selectRows);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(e.id===o.id){t.$set(t.list[a],"checked",!0);break}}}catch(r){s.e(r)}finally{s.f()}}))},setLabelChecked:function(t,e){var a=this;if(this.$set(this.list[t],"checked",e),e)this.selectRows.push(this.list[t]);else{var i=-1;this.selectRows.forEach((function(e,n){e.id===a.list[t].id&&(i=n)})),this.selectRows.splice(i,1)}},getLabelData:function(){var t=this;this.loading=!0,this.$api.memberApi.getLevelList({is_all:1}).then((function(e){t.loading=!1,0===e.error&&(t.list=e.list||[],t.initDefaultChecked())}))}}};e.default=o},b2ff:function(t,e,a){"use strict";a.r(e);var i=a("fbc6"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},b921:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("1da1")),s=i(a("2909")),o=i(a("5530"));a("a9e3"),a("ac1f"),a("1276"),a("d3b7"),a("d81d"),a("99af"),a("4e82"),a("159b");var r={name:"SpecificationsRules",components:{},props:{value:{type:Boolean,default:!1},goodsId:{type:[String,Number],default:""},spaceRules:{type:Array,default:function(){return[]}}},data:function(){var t=this;this.$createElement;return{loading:!1,modal:!1,specs:[],form:{goodsList:[]},colspan:{0:1,1:1,2:1},batchData:{credit_shop_stock:"",credit_shop_price:"",credit_shop_credit:"",is_join:"0"},submitValid:!1,columns:[],defaultColumns:[{title:"售卖价",key:"price",width:100,render:function(t,e){return t("div",["￥"+e.row.price])}},{title:"总库存",key:"stock",width:80,render:function(t,e){return t("div",[e.row.stock])}},{title:"是否参与",slot:"is_join",width:100},{title:"积分价",minWidth:260,slot:"credit_shop_credit"},{title:"积分商品库存",minWidth:120,slot:"credit_shop_stock"}],rules:{is_join:[],credit_shop_credit:[{validator:function(e,a,i){var n=e.field.split(".")[1],s=t.form.goodsList[n].is_join;if("1"!=s)return i();"1"!=s||a?0===Number(a)&&"1"==s?i(new Error("积分不能为0")):i():i(new Error("积分不能为空"))}}],credit_shop_price:[{validator:function(e,a,i){var n=e.field.split(".")[1],s=t.form.goodsList[n].is_join;if("1"!=s)return i();"1"!=s||a?i():i(new Error("金额不能为空"))}}],credit_shop_stock:[{validator:function(e,a,i){var n=e.field.split(".")[1],s=t.form.goodsList[n],o=s.stock,r=s.is_join;if("1"!=r)return i();Number(o)<Number(a)?i(new Error("库存不能大于总库存")):"1"!=r||a?0===Number(a)&&"1"==r?i(new Error("库存不能为0")):i():i(new Error("库存不能为空"))}}]}}},watch:{goodsId:{handler:function(t){t&&this.getGoodsData(t)},immediate:!0},value:function(t){this.getGoodsData(this.goodsId),this.initColumns(),this.refreshInput(),this.modal=t}},computed:{allJoin:{get:function(){return this.form.goodsList.every((function(t){return"1"==t.is_join}))?"1":"0"},set:function(t){this.batchData.is_join=t}}},created:function(){},mounted:function(){},methods:{getGoodsData:function(t){var e=this;this.loading=!0,this.$api.goodsApi.getGoodInformation({id:t}).then((function(t){if(0===t.error){e.specs=t.data.spec;var a=t.data.options.map((function(t){return e.spaceRules.length>0?e.spaceRules.map((function(e){t.id==e["option_id"]&&(t.credit_shop_stock=(null===e||void 0===e?void 0:e.credit_shop_stock)||"",t.credit_shop_price=(null===e||void 0===e?void 0:e.credit_shop_price)||"",t.credit_shop_credit=(null===e||void 0===e?void 0:e.credit_shop_credit)||"",t.is_join=(null===e||void 0===e?void 0:e.is_join)||"0")})):(t.credit_shop_stock="",t.credit_shop_price="",t.credit_shop_credit="",t.is_join="0"),(0,o.default)({},t)}));e.initColumns(),e.initTable(a),e.initColspan(),e.loading=!1}}))},initColumns:function(){this.$createElement;var t=this.specs.map((function(t,e){return{title:t.title,key:"",render:function(t,a){return t("div",[a.row.childSpecVal[e]])}}}));this.columns=[].concat((0,s.default)(t),(0,s.default)(this.defaultColumns))},initTable:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>1?this.form.goodsList=e.sort((function(t,e){for(var a=t.specs.split(",").map((function(t){return parseInt(t)})),i=e.specs.split(",").map((function(t){return parseInt(t)})),n=Math.min(a.length,i.length),s=0;s<n;s++)if(a[s]!==i[s])return a[s]-i[s]})):this.form.goodsList=e,this.form.goodsList.forEach((function(e){var a=[];t.specs.forEach((function(t){t.items.forEach((function(t){e.specs.indexOf(t.id)>-1&&a.push(t.title)}))})),e.childSpecVal=a}))},initColspan:function(){var t={0:1,1:1,2:1};this.specs.forEach((function(e,a){e.items.length>0&&(t[a]=e.items.length)})),t[0]=t[1]*(t[2]||1)||1,t[1]=t[2]||1,t[2]=t[2]?1:0,this.colspan=t},handleSpan:function(t){var e=t.rowIndex,a=t.columnIndex,i={rowspan:0,colspan:1};return a<this.specs.length?(e%this.colspan[a]==0&&(i={rowspan:this.colspan[a],colspan:1}),i):[1,1]},handleCancel:function(){this.modal=!1,this.$emit("input",this.modal)},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["goodsForm"].validate((function(i){t.submitValid=!1,i?t.form.goodsList.some((function(t){return"1"==t.is_join}))?e():(t.$Message.error("请至少选择一个规格参加活动"),a()):a()}))}))},handleOK:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.submitValid=!0,e.next=3,t.validateForm();case 3:a={id:t.goodsId,rules:t.form.goodsList.map((function(t){return{option_id:t.id,credit_shop_stock:t.credit_shop_stock,credit_shop_credit:t.credit_shop_credit,credit_shop_price:t.credit_shop_price||0,is_join:t.is_join}}))},t.$emit("spaceGoods",a),t.handleCancel();case 6:case"end":return e.stop()}}),e)})))()},changePresell:function(t){this.form.goodsList.map((function(e){e.is_join=t}))},handleBatchChange:function(){var t=this;(this.batchData.credit_shop_credit||this.batchData.credit_shop_price||this.batchData.credit_shop_stock)&&this.form.goodsList.map((function(e){e.credit_shop_credit=t.batchData.credit_shop_credit,e.credit_shop_price=t.batchData.credit_shop_price||0,e.credit_shop_stock=t.batchData.credit_shop_stock}))},refreshInput:function(){this.batchData=(0,o.default)((0,o.default)({},this.batchData),{},{credit_shop_credit:"",credit_shop_price:"",credit_shop_stock:""})}}};e.default=r},b992:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("6ab3")),s=i(a("2e16")),o={name:"ActivityChat",components:{ChartPie:s.default,ChartLine:n.default},props:{chartLine:{type:Object,default:function(){}},chartPie:{type:Object,default:function(){}},activityData:{type:Array,default:function(){return[]}}},data:function(){return{activity_id:"all"}},methods:{changeActivity:function(){"all"===this.activity_id?this.$emit("on-line-change",""):this.$emit("on-line-change",this.activity_id)},renderLine:function(){this.$refs["chart_line"].render()},renderPie:function(){this.$refs["chart_pie"].render()}}};e.default=o},bb14:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{value:t.value,title:"优惠券选择器",width:"1000","ok-text":"保存"},on:{"on-ok":t.handleSave,"on-cancel":t.handleCancel}},[a("div",{staticClass:"selector-link-discount-coupon"},[a("div",{ref:"scrollBox",staticClass:"coupon-content"},[a("div",{staticClass:"search"},[a("Input",{staticClass:"width-250",attrs:{search:"","enter-button":"搜索",placeholder:"请输入"},on:{"on-search":t.getCouponList,"on-enter":t.getCouponList},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}}),a("span",{staticClass:"label"},[t._v("优惠券类型：")]),a("Select",{staticClass:"width-160",on:{"on-change":t.handleSearch},model:{value:t.search.coupon_sale_type,callback:function(e){t.$set(t.search,"coupon_sale_type",e)},expression:"search.coupon_sale_type"}},[a("Option",{attrs:{value:"all"}},[t._v("全部")]),a("Option",{attrs:{value:"1"}},[t._v("满减券")]),a("Option",{attrs:{value:"2"}},[t._v("折扣券")])],1)],1),a("Table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{columns:t.columns,data:t.data}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>10,expression:"total>10"}],staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.handlePageChange}})],1)])])},n=[]},bbaa:function(t,e,a){},bc42c:function(t,e,a){"use strict";a.r(e);var i=a("953b"),n=a("5050");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("c843");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"1799e43f",null);e["default"]=r.exports},bd1f:function(t,e,a){},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabBar"},t._l(t.tabList,(function(e){return a("div",{key:e.id,staticClass:"tab",class:{active:t.tabCent.id==e.id},on:{click:function(a){return t.tabClick(e)}}},[t._v(t._s(e.tabTit))])})),0)},n=[]},be05:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"data_charts_pie"},[a("div",{style:{width:t.width,height:t.height+"px"},attrs:{id:"pie_"+t.id}})])},n=[]},be67:function(t,e,a){"use strict";a("3baf")},c261:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("4de4"),a("d3b7"),a("caad"),a("2532"),a("ac1f"),a("1276"),a("d81d"),a("a15b"),a("a434");var n=i(a("c35a")),s=i(a("83b0")),o={name:"OtherSet",components:{LabelSelector:n.default,LevelSelector:s.default},props:{otherSetData:{type:Object,default:function(){}}},data:function(){var t=this;return{label:{list:[],noList:[]},level:{list:[],noList:[]},model:{member_level_limit_type:"0",member_level_id:"",member_group_limit_type:"0",member_group_id:"",goods_limit_type:"0",goods_limit_num:"",goods_limit_num1:"",goods_limit_day:"",status:"1"},rule:{goods_limit_type:[{validator:function(e,a,i){1!=a?t.$refs.form.validateField("goods_limit_num"):2!=a&&(t.$refs.form.validateField("goods_limit_num1"),t.$refs.form.validateField("goods_limit_day")),i()}}],goods_limit_num:[{validator:function(e,a,i){1!=t.model.goods_limit_type||a?i():i(new Error("限购数量必填"))}}],goods_limit_num1:[{validator:function(e,a,i){2!=t.model.goods_limit_type||a?i():i(new Error("限购数量必填"))}}],goods_limit_day:[{validator:function(e,a,i){2!=t.model.goods_limit_type||a?i():i(new Error("天数必填"))}}],member_group_id:[{required:!0,message:"会员标签组必填"}],member_level_id:[{required:!0,message:"会员等级必填"}]}}},computed:{},watch:{otherSetData:{handler:function(t){if(null!==t&&void 0!==t&&t.member_level&&0!=t.member_level_limit_type){var e=null===t||void 0===t?void 0:t.member_level.filter((function(e){return t.member_level_id.split(",").includes(e.id)}));1==t.member_level_limit_type?this.level.list=e:2==t.member_level_limit_type&&(this.level.noList=e)}if(null!==t&&void 0!==t&&t.member_group&&0!=t.member_group_limit_type){var a=null===t||void 0===t?void 0:t.member_group.filter((function(e){return t.member_group_id.split(",").includes(e.id)}));1==t.member_group_limit_type?this.label.list=a:2==t.member_group_limit_type&&(this.label.noList=a)}this.model=t}},model:{handler:function(t){this.$emit("update:otherSetData",t)},deep:!0}},created:function(){},mounted:function(){},methods:{addLevel:function(){var t=this;this.$nextTick((function(){t.$refs["level_modal"].setValue()}))},addLabel:function(){var t=this;this.$nextTick((function(){t.$refs["label_modal"].setValue()}))},changeLabel:function(t){var e=t.map((function(t){return t.id}));"1"===this.model.member_group_limit_type?this.label.list=t:this.label.noList=t,this.model.member_group_id=e.join(",")},changeLevel:function(t){var e=t.map((function(t){return t.id}));"1"===this.model.member_level_limit_type?this.level.list=t:this.level.noList=t,this.model.member_level_id=e.join(",")},closeLevel:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"是否删除该会员等级",onOk:function(){"1"===a.model.member_level_limit_type?(a.level.list.splice(e,1),a.model.member_level_id=a.level.list.map((function(t){return t.id})).join(",")):(a.level.noList.splice(e,1),a.model.member_level_id=a.level.noList.map((function(t){return t.id})).join(","))},onCancel:function(){}})},closeLabel:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"是否删除该会员标签组",onOk:function(){"1"===a.model.member_group_limit_type?(a.label.list.splice(e,1),a.model.member_group_id=a.label.list.map((function(t){return t.id})).join(",")):(a.label.noList.splice(e,1),a.model.member_group_id=a.label.noList.map((function(t){return t.id})).join(","))},onCancel:function(){}})},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate((function(t){t?(console.log(t,"valid>>>>>"),e()):a()}))}))}}};e.default=o},c35a:function(t,e,a){"use strict";a.r(e);var i=a("8a81"),n=a("1e22");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("546c");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"0360cf99",null);e["default"]=r.exports},c503:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"DataCard",props:{tmpList:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){}},type:{type:String,default:""},params:{type:Object,default:function(){}}},methods:{skipToOtherPage:function(t){"credit_wait_order"===t.key&&this.$router.push({path:"/order/list/send",query:{activity_type:"5"}})}}};e.default=a},c5c3:function(t,e,a){"use strict";a.r(e);var i=a("3e10"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},c792:function(t,e,a){},c843:function(t,e,a){"use strict";a("39da")},cce8:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"credit-shop-statistics"},[a("div",{staticClass:"market-overview-box"},[a("div",{staticClass:"card-panel-title"},[a("span",{staticClass:"title"},[t._v("积分商城营销概览")]),a("kdx-hint-tooltip",{attrs:{type:"form","max-width":500}},[a("Form",{attrs:{"label-width":110}},[a("FormItem",{attrs:{label:"待发货订单数量："}},[t._v(" 待发货订单数 / 累计订单数，其中累计订单数 = 成交订单数 - 退款订单数 ")]),a("FormItem",{attrs:{label:"累计成交积分："}},[t._v(" 已支付订单中积分部分（不包括已退款订单中产生退还的积分) ")]),a("FormItem",{attrs:{label:"累计成交金额："}},[t._v(" 已支付订单中金额部分(不包括已退款的订单金额) ")])],1)],1),t.updateTimeText?a("span",{staticClass:"time marginL-10"},[t._v(t._s(t.updateTimeText))]):t._e()],1),a("data-card",{attrs:{"tmp-list":t.headerCard.tempList,data:t.headerCard.data}})],1),a("activity-chat",{ref:"activity_chart",attrs:{"chart-line":t.chartLine,"chart-pie":t.chartPie,"activity-data":t.cardData}}),a("ranking-list",{attrs:{"goods-data":t.goodsData,"consume-data":t.consumeData}}),t._t("default")],2)},n=[]},d3d1:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"RankingList",props:{goodsData:{type:Array,default:function(){return[]}},consumeData:{type:Array,default:function(){return[]}}},data:function(){return{goods:{data:[],columns:[{title:"排行",slot:"rank",width:60},{title:"商品",slot:"title"},{title:"销售数量",slot:"total",maxWidth:140,align:"right"}]},consume:{data:[],columns:[{title:"排行",slot:"rank",width:60},{title:"会员",slot:"nickname",maxWidth:300},{title:"消费积分",key:"pay_credit"},{title:"消费额",slot:"pay_price",maxWidth:160,align:"right"}]}}},methods:{}};e.default=a},d422:function(t,e,a){"use strict";a("bd1f")},da0a:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"Tabbar",props:{tabList:{type:Array,default:function(){return[]}}},data:function(){return{type:0,tabCent:{id:"h5",tabTit:"h5",tabLink:"商品链接",isShow:!1}}},methods:{tabClick:function(t){this.tabCent.id=t.id,this.$emit("tabContent",t)}}};e.default=a},e0ac:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deal-set"},[a("Form",{ref:"form",attrs:{model:t.model,"label-width":120,rules:t.rule}},[a("kdx-form-title",[t._v("交易设置")]),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"批量添加商品："}},[a("div",{staticClass:"block"},[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"goods_list"}},["0"===t.type?a("Button",{staticClass:"default-primary",attrs:{disabled:t.isDisabled},on:{click:t.chooseShop}},[t._v("选择商城商品")]):a("Button",{staticClass:"default-primary",attrs:{disabled:t.isDisabled},on:{click:t.chooseCoupon}},[t._v("选择付费优惠券")]),t.isDisabled?a("Button",{staticClass:"marginL-10",attrs:{type:"text"},on:{click:t.jumpGoodDetail}},[t._v(t._s("0"===t.type?"查看原商品":"查看原优惠券"))]):t._e(),t.model.goods_list&&t.model.goods_list.length>0?a("div",{staticClass:"goods-box"},[a("rules-goods",{ref:"goodsRule",attrs:{type:t.type,"is-disabled":t.isDisabled},model:{value:t.model.goods_list,callback:function(e){t.$set(t.model,"goods_list",e)},expression:"model.goods_list"}})],1):t._e()],1)],1)]),"0"===t.type?a("FormItem",{attrs:{label:"运费设置："}},[a("RadioGroup",{model:{value:t.model.dispatch_type,callback:function(e){t.$set(t.model,"dispatch_type",e)},expression:"model.dispatch_type"}},[a("Radio",{attrs:{label:"0"}},[t._v("读取商品设置")]),a("Radio",{attrs:{label:"1"}},[t._v("包邮")])],1)],1):t._e()],1),a("goods-selector",{attrs:{multiple:!0,flag:"creditShop","current-list":t.goodSelector.data},on:{"on-change":t.changeGoodList,"on-cancel":t.cancelGoodSelector},model:{value:t.goodSelector.value,callback:function(e){t.$set(t.goodSelector,"value",e)},expression:"goodSelector.value"}}),a("coupon-selector",{attrs:{multiple:!0,params:{is_credit_shop:1,is_validity:1},"current-list":t.couponSelector.data,pick_way:"2"},on:{"on-change":t.changeCouponList,"on-cancel":t.cancelCouponSelector},model:{value:t.couponSelector.value,callback:function(e){t.$set(t.couponSelector,"value",e)},expression:"couponSelector.value"}})],1)},n=[]},e17c:function(t,e,a){"use strict";a.r(e);var i=a("62dd"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},e345:function(t,e,a){"use strict";a.r(e);var i=a("c503"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},e3c8:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("1da1")),s=i(a("5530"));a("a9e3"),a("d81d"),a("d3b7");var o=i(a("bc42c")),r=i(a("0659")),l=i(a("0d35")),d={name:"DealSet",components:{RulesGoods:o.default,GoodsSelector:r.default,CouponSelector:l.default},props:{type:{type:[String,Number],default:"0"},dealSetData:{type:Object,default:function(){}},isDisabled:{type:Boolean,default:!1}},data:function(){return{couponSelector:{value:!1,data:[]},goodSelector:{value:!1,data:[]},model:{dispatch_type:"0",goods:[],goods_list:[]},rule:{goods_list:[{required:!0,type:"array",min:1,message:"请选择商品"}]}}},computed:{},watch:{dealSetData:{handler:function(t){this.model=t}},model:{handler:function(t){this.$emit("update:dealSetData",t)},deep:!0},type:{handler:function(t){this.isDisabled||(this.model.goods_list="1"===t?this.couponSelector.data:this.goodSelector.data)}}},created:function(){},mounted:function(){},methods:{chooseShop:function(){this.goodSelector.value=!0},changeGoodList:function(t){this.goodSelector.data=t.map((function(t){return(0,s.default)((0,s.default)({},t),{},{credit_shop_stock:(null===t||void 0===t?void 0:t.credit_shop_stock)||"",credit_shop_price:(null===t||void 0===t?void 0:t.credit_shop_price)||"",credit_shop_credit:(null===t||void 0===t?void 0:t.credit_shop_credit)||""})})),this.model.goods_list=this.goodSelector.data,this.cancelGoodSelector()},cancelGoodSelector:function(){this.goodSelector.value=!1},chooseCoupon:function(){this.couponSelector.value=!0},changeCouponList:function(t){this.couponSelector.data=t.map((function(t){return(0,s.default)((0,s.default)({},t),{},{goods_id:t.id,credit_shop_stock:(null===t||void 0===t?void 0:t.credit_shop_stock)||"",credit_shop_price:(null===t||void 0===t?void 0:t.credit_shop_price)||"",credit_shop_credit:(null===t||void 0===t?void 0:t.credit_shop_credit)||"",has_option:0})})),this.model.goods_list=this.couponSelector.data,this.cancelCouponSelector()},cancelCouponSelector:function(){this.couponSelector.value=!1},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate(function(){var i=(0,n.default)(regeneratorRuntime.mark((function i(n){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!n){i.next=17;break}return i.prev=1,i.next=4,t.$refs.goodsRule.validateForm();case 4:return i.next=6,t.handleGoodsRules();case 6:s=i.sent,s.some((function(t){return"1"==t.has_option&&!t.rules}))&&(t.$Message.error("每个商品必须有一个规格参加活动"),a()),t.model.goods=s,e(),i.next=15;break;case 12:i.prev=12,i.t0=i["catch"](1),a();case 15:i.next=18;break;case 17:a();case 18:case"end":return i.stop()}}),i,null,[[1,12]])})));return function(t){return i.apply(this,arguments)}}())}))},handleGoodsRules:function(){var t=this,e=this.model.goods_list.map((function(e){var a,i;0===+(null===(a=e)||void 0===a?void 0:a.has_option)||t.isDisabled&&+t.type?e={goods_id:e.id,has_option:(null===(i=e)||void 0===i?void 0:i.has_option)||0,option_id:0,credit_shop_stock:e.credit_shop_stock,credit_shop_credit:e.credit_shop_credit,credit_shop_price:e.credit_shop_price||0}:e={goods_id:e.id,has_option:e.has_option,rules:e.rules};return e}));return e},jumpGoodDetail:function(){var t="0"===this.type?"/goods/add":"/market/coupons/base/edit";this.$utils.openNewWindowPage(t,{id:this.model.goods_list[0].id})}}};e.default=d},e3eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[i("kdx-header-bar",{scopedSlots:t._u([{key:"header",fn:function(){return[i("Button",{attrs:{type:"primary",disabled:t.noManagePerm},on:{click:t.addCreditGoods}},[t._v(" +批量添加积分商品 ")])]},proxy:!0}])},[i("Form",{ref:"form",attrs:{model:t.model,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[i("FormItem",{attrs:{label:"商品名称："}},[i("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入关键词"},on:{"on-enter":t.handleSearch},model:{value:t.model.keyword,callback:function(e){t.$set(t.model,"keyword",e)},expression:"model.keyword"}})],1),i("FormItem",{attrs:{label:"创建时间："}},[i("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",placeholder:"请选择创建时间",format:"yyyy-MM-dd HH:mm"},on:{"on-change":t.changeDate},model:{value:t.model.date,callback:function(e){t.$set(t.model,"date",e)},expression:"model.date"}})],1),i("div",{staticClass:"ivu-form-item-btn"},[i("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),i("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")]),i("Button",{attrs:{type:"text"},on:{click:t.handleExport}},[t._v("导出")]),i("Button",{attrs:{type:"text"},on:{click:t.viewHistory}},[t._v("查看订购记录")])],1)],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list"},[i("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"goods",fn:function(e){var n=e.row;return[i("div",{staticClass:"goods"},[i("div",{staticClass:"image"},[null==n.thumb?i("div",[1==n.coupon_sale_type?i("img",{attrs:{src:a("999e"),alt:""},on:{error:t.replaceImage}}):t._e(),2==n.coupon_sale_type?i("img",{attrs:{src:a("8ede"),alt:""},on:{error:t.replaceImage}}):t._e()]):i("div",[i("img",{attrs:{src:t.$utils.media(n.thumb),alt:""}})])]),i("div",{staticClass:"content"},[1===+n.has_option?i("span",{staticClass:"mark more"},[t._v("多")]):t._e(),0===+n.goods_type&&null===n.coupon_sale_type?i("span",{staticClass:"mark real"},[t._v("实")]):1===+n.goods_type?i("span",{staticClass:"mark virtual"},[t._v("虚")]):null!==n.coupon_sale_type?i("span",{staticClass:"mark coupon"},[t._v("券")]):i("span",{staticClass:"mark card"},[t._v("密")]),null===n.title?i("span",[t._v(t._s(n.coupon_name))]):i("span",[t._v(t._s(n.title))])])])]}},{key:"credit_price",fn:function(e){var a=e.row;return[i("div",{staticClass:"credit_price"},["0"==a.has_option?i("div",[i("span",{staticClass:"credit-unit"},[t._v(t._s(a.credit_shop_credit))]),t._v("积分+"),i("span",{staticClass:"price-unit"},[t._v(t._s(a.credit_shop_price))]),t._v("元 ")]):i("div",[i("div",[i("span",{staticClass:"credit-unit"},[t._v(t._s(a.rules.min.credit_shop_credit))]),t._v("积分 "),0!==a.rules.min.credit_shop_price?i("span",[t._v(" +"),i("span",{staticClass:"price-unit"},[t._v(t._s(a.rules.min.credit_shop_price))]),t._v("元 ")]):t._e()]),i("div",[t._v(" ~ "),i("span",{staticClass:"credit-unit"},[t._v(t._s(a.rules.max.credit_shop_credit))]),t._v("积分 "),0!==a.rules.max.credit_shop_price?i("span",[t._v(" +"),i("span",{staticClass:"price-unit"},[t._v(t._s(a.rules.max.credit_shop_price))]),t._v("元 ")]):t._e()])])])]}},{key:"pay",fn:function(e){var a=e.row;return[i("div",{staticClass:"pay"},[i("div",[t._v("积分："),i("span",{staticClass:"pay-color"},[t._v(t._s(a.pay_credit))])]),i("div",[t._v("金额："),i("span",{staticClass:"pay-color"},[t._v(t._s(a.pay_price))])])])]}},{key:"status",fn:function(e){var a=e.row;return["1"===a.status?i("kdx-status-text",{attrs:{type:"success"}},[t._v(" 已上架 ")]):i("kdx-status-text",{attrs:{type:"danger"}},[t._v(" 已下架 ")])]}},{key:"action",fn:function(e){var a=e.row;return[i("div",{staticClass:"btn-box"},["0"===a.status?i("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(e){return t.changeStatus(a.id,a.status)}}},[t._v(" 上架 ")]):t._e(),"1"===a.status?i("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(e){return t.changeStatus(a.id,a.status)}}},[t._v(" 下架 ")]):t._e(),i("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(e){return t.handleEdit(a.id)}}},[t._v(" 编辑 ")]),i("GoodsTooltip",{attrs:{url:t.$utils.getPreviewUrl("creditShop",a.id),text:"复制链接",id:a.id}},[i("Button",{attrs:{type:"text",disabled:t.noManagePerm}},[t._v("推广")])],1),i("Button",{attrs:{type:"text",disabled:t.noManagePerm},on:{click:function(e){return t.handleDelete(a.id)}}},[t._v(" 删除 ")])],1)]}}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.length>0,expression:"data.length > 0"}],staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{total:t.total,pageSize:t.pageSize,current:t.current},on:{"on-change":t.changePage}})],1)],1)],1)},n=[]},e6d0:function(t,e,a){},e7cd:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAeBAMAAAD0jNL3AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAPUExURTCI7yyH7y2M7y2N8S2M8GsgvRMAAAAEdFJOUwogoJ8q1PIiAAAAFUlEQVQI12NgYDBkcAFCBQYBBhLZAIgxBI7KasErAAAAAElFTkSuQmCC"},ea83:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"other-set"},[a("Form",{ref:"form",attrs:{model:t.model,"label-width":120,rules:t.rule}},[a("div",{staticClass:"pb-30"},[a("kdx-form-title",[t._v("购买权限")]),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"会员等级："}},[a("RadioGroup",{model:{value:t.model.member_level_limit_type,callback:function(e){t.$set(t.model,"member_level_limit_type",e)},expression:"model.member_level_limit_type"}},[a("Radio",{attrs:{label:"0"}},[t._v("不限制会员等级")]),a("Radio",{attrs:{label:"1"}},[t._v("指定会员等级可购买")]),a("Radio",{attrs:{label:"2"}},[t._v("指定会员等级不可购买")])],1),"1"===t.model.member_level_limit_type?a("div",{staticClass:"nest-box"},[a("FormItem",{attrs:{prop:"member_level_id"}},[a("Button",{staticClass:"add-label ivu-normal brand",on:{click:t.addLevel}},[t._v("+添加")]),t.level.list&&t.level.list.length>0?a("div",{staticClass:"label-list"},t._l(t.level.list,(function(e,i){return a("kdx-tag-label",{key:i,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"info",border:"",closable:!0},on:{"on-close":function(e){return t.closeLevel(i)}}},[t._v(" "+t._s(e.level_name)+" ")])})),1):t._e()],1)],1):t._e(),"2"===t.model.member_level_limit_type?a("div",{staticClass:"nest-box"},[a("FormItem",{attrs:{prop:"member_level_id"}},[a("Button",{staticClass:"add-label ivu-normal brand",on:{click:t.addLevel}},[t._v("+添加")]),t.level.noList&&t.level.noList.length>0?a("div",{staticClass:"label-list"},t._l(t.level.noList,(function(e,i){return a("kdx-tag-label",{key:i,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"info",border:"",closable:!0},on:{"on-close":function(e){return t.closeLevel(i)}}},[t._v(" "+t._s(e.level_name)+" ")])})),1):t._e()],1)],1):t._e()],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"会员标签组："}},[a("RadioGroup",{model:{value:t.model.member_group_limit_type,callback:function(e){t.$set(t.model,"member_group_limit_type",e)},expression:"model.member_group_limit_type"}},[a("Radio",{attrs:{label:"0"}},[t._v("不限制标签组")]),a("Radio",{attrs:{label:"1"}},[t._v("指定标签组可购买")]),a("Radio",{attrs:{label:"2"}},[t._v("指定标签组不可购买")])],1),"1"===t.model.member_group_limit_type?a("div",{staticClass:"nest-box"},[a("FormItem",{attrs:{prop:"member_group_id"}},[a("Button",{staticClass:"add-label ivu-normal brand",on:{click:t.addLabel}},[t._v("+添加")]),t.label.list&&t.label.list.length>0?a("div",{staticClass:"label-list"},t._l(t.label.list,(function(e,i){return a("kdx-tag-label",{key:i,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"warning",border:"",closable:!0},on:{"on-close":function(e){return t.closeLabel(i)}}},[t._v(" "+t._s(e.group_name)+" ")])})),1):t._e()],1)],1):t._e(),"2"===t.model.member_group_limit_type?a("div",{staticClass:"nest-box"},[a("FormItem",{attrs:{prop:"member_group_id"}},[a("Button",{staticClass:"add-label ivu-normal brand",on:{click:t.addLabel}},[t._v("+添加")]),t.label.noList&&t.label.noList.length>0?a("div",{staticClass:"label-list"},t._l(t.label.noList,(function(e,i){return a("kdx-tag-label",{key:i,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"warning",border:"",closable:!0},on:{"on-close":function(e){return t.closeLabel(i)}}},[t._v(" "+t._s(e.group_name)+" ")])})),1):t._e()],1)],1):t._e()],1),a("form-item",{attrs:{label:"商品限购："}},[a("RadioGroup",{attrs:{vertical:""},model:{value:t.model.goods_limit_type,callback:function(e){t.$set(t.model,"goods_limit_type",e)},expression:"model.goods_limit_type"}},[a("Radio",{attrs:{label:"0"}},[t._v("不限制")]),a("Radio",{attrs:{label:"1"}},[a("FormItem",{staticClass:"radio-item limit-num",attrs:{prop:"goods_limit_num","label-width":0}},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex"},[a("span",[t._v("每人限购")]),a("kdx-rr-input",{staticClass:"width-160 input-gap",attrs:{placeholder:"请输入",number:"",fixed:0,"min-value":1,"max-value":999999999},model:{value:t.model.goods_limit_num,callback:function(e){t.$set(t.model,"goods_limit_num",e)},expression:"model.goods_limit_num"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)])])],1),a("Radio",{attrs:{label:"2"}},[a("div",{staticClass:"radio-item limit-day"},[a("div",{staticClass:"flex"},[a("span",[t._v("每人每")]),a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:" ","label-width":0,prop:"goods_limit_day"}},[a("kdx-rr-input",{staticClass:"width-160 input-gap",attrs:{placeholder:"请输入",number:"",fixed:0,"min-value":1,"max-value":999999999},model:{value:t.model.goods_limit_day,callback:function(e){t.$set(t.model,"goods_limit_day",e)},expression:"model.goods_limit_day"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("天")])])],1),a("span",{staticClass:"input-gap"},[t._v("限购")]),a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:" ","label-width":0,prop:"goods_limit_num1"}},[a("kdx-rr-input",{staticClass:"width-160 input-gap",attrs:{placeholder:"请输入",number:"",fixed:0,"min-value":1,"max-value":999999999},model:{value:t.model.goods_limit_num1,callback:function(e){t.$set(t.model,"goods_limit_num1",e)},expression:"model.goods_limit_num1"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)],1)])])],1)],1)],1),a("kdx-form-title",[t._v("商品状态")]),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"上架设置："}},[a("RadioGroup",{model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}},[a("Radio",{attrs:{label:"1"}},[t._v("上架")]),a("Radio",{attrs:{label:"0"}},[t._v("下架")])],1),a("kdx-hint-text",[t._v("积分商品的下架不影响原商品的上架状态；原商品如果下架或删除，积分商品自动下架并且无法上架")])],1)],1),a("label-selector",{ref:"label_modal",attrs:{"current-list":"1"===t.model.member_group_limit_type?t.label.list:t.label.noList},on:{"on-change":t.changeLabel}}),a("level-selector",{ref:"level_modal",attrs:{"current-list":"1"===t.model.member_level_limit_type?t.level.list:t.level.noList},on:{"on-change":t.changeLevel}})],1)},n=[]},ea96:function(t,e,a){"use strict";a("69a7")},eec44:function(t,e,a){"use strict";a("5c5b")},eff1:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"data_charts_line"},[a("div",{style:{width:"100%",height:t.height+"px"},attrs:{id:"line_"+t.id}})])},n=[]},f405:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"SelectType",components:{},props:{value:{type:String,default:"0"},isDisabled:{type:Boolean,default:!1}},data:function(){return{model:{type:"0"}}},watch:{value:{handler:function(t){this.model.type=t},immediate:!0}},computed:{},created:function(){},mounted:function(){},methods:{changeType:function(){this.$emit("input",this.model.type)}}};e.default=a},f859:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{value:t.value,title:"商品选择器",width:"1000","ok-text":"保存"},on:{"on-ok":t.handleSave,"on-cancel":t.handleCancel},scopedSlots:t._u([{key:"footer",fn:function(){return[t.activity.show?a("div",{staticClass:"btn-group"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.activity.show=!1}}},[t._v("返回选择商品")])],1):t._e()]},proxy:!0}])},[a("div",{staticClass:"goods-preview"},[a("div",{ref:"scrollBox",staticClass:"goods-preview-content"},[t.activity.show?t._e():a("div",{staticClass:"search"},[a("Input",{staticClass:"width-250",attrs:{search:"","enter-button":"搜索",placeholder:"请输入"},on:{"on-search":t.handleSearch,"on-enter":t.handleSearch},model:{value:t.search.keywords,callback:function(e){t.$set(t.search,"keywords",e)},expression:"search.keywords"}})],1),t.activity.show?t._e():a("Table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"table",attrs:{columns:t.columns,data:t.table.data}}),t.activity.show?a("Table",{ref:"activityTable",attrs:{columns:t.activity.columns,data:t.activity.data},scopedSlots:t._u([{key:"status",fn:function(e){var i=e.row;return[1===+i.status?a("kdx-status-text",{attrs:{type:"success"}},[t._v("进行中")]):t._e(),-1===+i.status?a("kdx-status-text",{attrs:{type:"danger"}},[t._v("已停止")]):t._e(),-2===+i.status?a("kdx-status-text",{attrs:{type:"danger"}},[t._v("手动停止")]):t._e(),0===+i.status?a("kdx-status-text",{attrs:{type:"warning"}},[t._v("未开始")]):t._e()]}},{key:"date",fn:function(e){var i=e.row;return[a("div",{staticClass:"time"},[t._v("起："+t._s(t.getTime(i.start_time)))]),a("div",{staticClass:"time"},[t._v("止："+t._s(t.getTime(i.end_time)))])]}}],null,!1,940490386)}):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.table.total>10&&!t.activity.show,expression:"table.total > 10&&!activity.show"}],staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.table.total},on:{"on-change":t.handlePageChange}})],1)])])},n=[]},f8be:function(t,e,a){"use strict";a.r(e);var i=a("c261"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},fb70:function(t,e,a){"use strict";a.r(e);var i=a("cce8"),n=a("294f");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("be67");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"ea75fbc2",null);e["default"]=r.exports},fbc6:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("e9c4"),a("ac1f"),a("5319"),a("96cf");var n=i(a("1da1")),s=i(a("5530")),o=i(a("15fd")),r=i(a("67bd")),l=i(a("65eb")),d=i(a("5494")),c=["type","goods","dispatch_type"],u={name:"index",components:{SelectType:r.default,DealSet:l.default,OtherSet:d.default},props:{},data:function(){return{loading:!1,submitLoading:!1,id:"",type:"",good_type:"0",dealSetData:{goods:[],goods_list:[],dispatch_type:"0"},otherSetData:{member_level_limit_type:"0",member_level_id:"",member_group_limit_type:"0",member_group_id:"",goods_limit_type:"0",goods_limit_num:"",goods_limit_day:"",status:"1"}}},computed:{is_disabled:function(){return"edit"===this.type}},created:function(){var t=this.$route.query,e=t.id,a=t.type;this.id=e,this.type=a,this.id&&this.getData()},mounted:function(){},methods:{getData:function(){var t=this;this.$api.creditShopApi.getCreditShopData({id:this.id}).then((function(e){if(0===e.error){"-1"===e.data.status&&(+e.data.goods.has_option?delete e.data.goods.rules:(e.data.goods.credit_shop_stock="",e.data.goods.credit_shop_price="",e.data.goods.credit_shop_credit=""));var a=e.data,i=a.type,n=a.goods,r=a.dispatch_type,l=(0,o.default)(a,c);t.good_type=i,t.dealSetData={goods:[n],goods_list:[n],dispatch_type:r},t.otherSetData=(0,s.default)((0,s.default)({},l),{},{status:"-1"===e.data.status?"0":e.data.status,goods_limit_num:1==e.data.goods_limit_type?e.data.goods_limit_num:"",goods_limit_num1:2==e.data.goods_limit_type?e.data.goods_limit_num:"",goods_limit_day:2==e.data.goods_limit_type?e.data.goods_limit_day:""})}}))},handleSave:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.submitLoading=!0,e.prev=1,e.next=4,t.$refs.dealInfo.validateForm();case 4:return e.next=6,t.$refs.otherSet.validateForm();case 6:t.formatParams(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),t.submitLoading=!1;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},formatParams:function(){var t=(0,s.default)((0,s.default)((0,s.default)({type:this.good_type},this.dealSetData),this.otherSetData),{},{goods:JSON.stringify(this.dealSetData.goods)});2==t.goods_limit_type&&(t.goods_limit_num=this.otherSetData.goods_limit_num1),delete t.goods_limit_num1,delete t.goods_list,this.submit(t)},submit:function(t){var e=this;this.$api.creditShopApi[this.id?"editCreditShop":"addCreditShop"](t).then((function(t){e.submitLoading=!1,0==t.error&&(e.$Message.success("保存成功"),e.$router.replace({path:"/creditShop/goods/list"}))}))}}};e.default=u},ff4b:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-card"},[t.tmpList&&t.tmpList.length?a("ul",t._l(t.tmpList,(function(e,i){return a("li",{key:i},[a("div",{staticClass:"card-box",class:{hover:!t.type&&"ladder_commission_count"!=e.key&&"agent_ladder_count"!=e.key},on:{click:function(a){return t.skipToOtherPage(e)}}},[e.image?a("div",{staticClass:"image"},[a("img",{attrs:{src:e.image,alt:""}})]):t._e(),a("div",{staticClass:"card-content"},[a("div",{staticClass:"title flex"},[a("div",{staticClass:"line-hide"},[t._v(" "+t._s(e.title)+" ")]),e.tooltip?a("kdx-hint-tooltip",[t._v(" "+t._s(e.tooltip.content)+" ")]):t._e()],1),a("div",{staticClass:"number"},[t.data[e.key]&&t.data[e.key].wait_send?a("div",[a("span",[t._v(t._s(t.data[e.key].wait_send))]),a("span",{staticClass:"no-hover"},[t._v("/")]),a("span",{staticClass:"no-hover"},[t._v(t._s(t.data[e.key].order_count))])]):"ladder_commission_count"==e.key?a("div",[a("span",[t._v(t._s(t.data[e.key]))]),a("span",{staticClass:"no-hover"},[t._v("/")]),a("span",{staticClass:"no-hover"},[t._v(t._s(t.data.ladder_remit_success_count))])]):"agent_ladder_count"==e.key?a("div",[a("span",[t._v(t._s(t.data[e.key]))]),a("span",{staticClass:"no-hover"},[t._v("/")]),a("span",{staticClass:"no-hover"},[t._v(t._s(t.data.agent_count))])]):a("div",[t._v(" "+t._s(e.prefix||"")+t._s(t.data[e.key]||"0")+" ")])])])])])})),0):t._e()])},n=[]}}]);