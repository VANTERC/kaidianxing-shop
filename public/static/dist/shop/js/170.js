(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[170],{"16fe":function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return n}));var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"good-add-vip"},[o("Form",{ref:"form",attrs:{model:e.$store.state.goodAddEdit.model,rules:e.$store.state.goodAddEdit.rules,"label-width":120}},[o("div",{staticClass:"box"},[o("kdx-form-title",[e._v(" 会员折扣 ")]),o("FormItem",{ref:"form",staticClass:"r-form-item-checkbox",attrs:{label:"会员折扣：",prop:"member_level_discount_type"}},[o("RadioGroup",{model:{value:e.model_member_level_discount_type,callback:function(t){e.model_member_level_discount_type=t},expression:"model_member_level_discount_type"}},[o("Radio",{attrs:{label:"0"}},[e._v("不支持")]),o("Radio",{attrs:{label:"1"}},[e._v("系统默认")]),o("Radio",{directives:[{name:"show",rawName:"v-show",value:"1"!==e.model_has_option,expression:"model_has_option!== '1'"}],attrs:{label:"2"}},[e._v("指定会员等级")]),o("Radio",{directives:[{name:"show",rawName:"v-show",value:"1"===e.model_has_option,expression:"model_has_option === '1'"}],attrs:{label:"3"}},[e._v("多规格会员等级")])],1),"2"==e.model_member_level_discount_type||"3"==e.model_member_level_discount_type?o("kdx-hint-alert",{staticClass:"marginT-10",attrs:{"show-icon":!1}},[e._v(" 折扣数值请填写 0.1-9.9之间； 当设置为0时,会员等级价格为0. "),"3"===e.model_type?o("div",[e._v("设置为折扣价格时，系统将按每个时段核算出会员折扣价；设置为固定价格时，全部时段统一会员价格")]):e._e()]):e._e(),"2"===e.model_member_level_discount_type||"3"===e.model_member_level_discount_type?o("div",{staticClass:"nest-box"},["2"===e.model_member_level_discount_type?o("div",{staticClass:"content"},[e.levels.length?o("div",e._l(e.levelDiscount,(function(t,l){return o("FormItem",{key:l,attrs:{label:e.levels[l]?e.levels[l].level_name:""}},[o("kdx-rr-input",{key:l,staticClass:"width-250",attrs:{type:"text",number:"",fixed:1==t.type?1:2,"min-value":1==t.type?.1:0,"max-value":1==t.type?9.9:"3"===e.model_type?9999999.99:Math.min(e.model_price,9999999.99)},on:{"on-change":e.change},model:{value:t.discount,callback:function(o){e.$set(t,"discount",o)},expression:"item.discount"}},[o("Select",{style:{backgroundColor:e.getColor(t.type)},attrs:{slot:"prepend"},on:{"on-change":function(o){return e.change(t)}},slot:"prepend",model:{value:t.type,callback:function(o){e.$set(t,"type",o)},expression:"item.type"}},[o("Option",{attrs:{value:1,label:"折扣"}}),o("Option",{attrs:{value:2,label:"价格"}})],1),o("span",{attrs:{slot:"append"},slot:"append"},[e._v(" "+e._s(e.getUnit(t.type))+" ")])],1)],1)})),1):o("div",{staticStyle:{"text-align":"center"}},[e._v(" 暂无会员等级数据 ")])]):e._e(),"3"===e.model_member_level_discount_type?o("div",{staticClass:"content"},[o("MultiOption",{attrs:{"goods-type":e.model_type}})],1):e._e()]):e._e()],1)],1)])],1)},n=[]},3199:function(e,t,o){"use strict";o.r(t);var l=o("16fe"),n=o("cd51");for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);o("7e45");var i=o("2877"),s=Object(i["a"])(n["default"],l["a"],l["b"],!1,null,"72b954bc",null);t["default"]=s.exports},"5bf8":function(e,t,o){},"7e45":function(e,t,o){"use strict";o("5bf8")},cd51:function(e,t,o){"use strict";o.r(t);var l=o("d88a"),n=o.n(l);for(var a in l)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return l[e]}))}(a);t["default"]=n.a},d88a:function(e,t,o){var l=o("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(o("b85c")),a=l(o("5530"));o("d3b7"),o("3ca3"),o("ddb0");var i=o("8812"),s=l(o("7ac9")),r={name:"index",components:{MultiOption:function(){return o.e(121).then(o.bind(null,"1d8e"))}},computed:(0,a.default)((0,a.default)((0,a.default)({},(0,i.stateMap)([])),(0,i.modelMap)()),{},{levels:function(){return this.$store.state.goodAddEdit.multiOptions.vipLevels},levelDiscount:function(){return this.$store.state.goodAddEdit.multiOptions.levelDiscount}}),watch:{model_member_level_discount_type:{immediate:!0,handler:function(){s.default.setDiscountType(this.model_member_level_discount_type)}}},data:function(){return{model:{},optional:[{value:1,label:"折扣",color:"#FF9900",unit:"折"},{value:2,label:"价格",color:this.$css["--theme-color"],unit:"元"}]}},methods:{change:function(e){e&&e.type},getUnit:function(e){var t,o=(0,n.default)(this.optional);try{for(o.s();!(t=o.n()).done;){var l=t.value;if(l.value===e)return l.unit}}catch(a){o.e(a)}finally{o.f()}},getColor:function(e){var t,o=(0,n.default)(this.optional);try{for(o.s();!(t=o.n()).done;){var l=t.value;if(l.value===e)return l.color}}catch(a){o.e(a)}finally{o.f()}},getRules:function(e){return 2===e.type?[{required:!0,message:"必填"},{pattern:/^(0|[1-9][0-9]{0,6})(.[0-9]{1,2})?$/,message:"小数点前7位小数点后两位"}]:[{required:!0,message:"必填"},{pattern:/^(0)(.[0-9]{1,2})?$/,message:"支持0.01-0.99折扣"}]},validate:function(){var e=this;return new Promise((function(t){"2"==e.model_member_level_discount_type?e.$refs["form"].validate().then((function(e){t(e)})):(e.model_member_level_discount_type,t(!0))}))}}};t.default=r}}]);