(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"0786":function(t,e,i){"use strict";i.r(e);var o=i("75450"),a=i("fad2");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("5de72");var n=i("2877"),s=Object(n["a"])(a["default"],o["a"],o["b"],!1,null,"a5092432",null);e["default"]=s.exports},"150b":function(t,e,i){t.exports=i.p+"static/dist/shop/img/material-bottom1.png"},2200:function(t,e,i){},2965:function(t,e,i){},3384:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"Preview",props:{model:{type:Object,default:function(){}}},data:function(){return{previewTop:i("6c86"),previewBottom:i("150b")}},methods:{}};e.default=o},"3d87":function(t,e,i){var o=i("4930");t.exports=o&&!!Symbol["for"]&&!!Symbol.keyFor},"428f":function(t,e,i){var o=i("da84");t.exports=o},"57b9":function(t,e,i){var o=i("c65b"),a=i("d066"),r=i("b622"),n=i("cb2d");t.exports=function(){var t=a("Symbol"),e=t&&t.prototype,i=e&&e.valueOf,s=r("toPrimitive");e&&!e[s]&&n(e,s,(function(t){return o(i,this)}),{arity:1})}},"5a47":function(t,e,i){var o=i("23e7"),a=i("4930"),r=i("d039"),n=i("7418"),s=i("7b0b"),d=!a||r((function(){n.f(1)}));o({target:"Object",stat:!0,forced:d},{getOwnPropertySymbols:function(t){var e=n.f;return e?e(s(t)):[]}})},"5de72":function(t,e,i){"use strict";i("2965")},"6c86":function(t,e,i){t.exports=i.p+"static/dist/shop/img/material-top.png"},"6e4e":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex activity-add-wrap"},[i("preview",{attrs:{model:t.model}}),i("div",{staticClass:"right"},[i("kdx-content-bar",{staticClass:"content-bar-right",scopedSlots:t._u([{key:"btn",fn:function(){return[i("Button",{staticClass:"primary-long",attrs:{type:"primary",loading:t.loading,disabled:t.noManagePerm},on:{click:t.handleSave}},[t._v("保存")]),i("Button",{staticClass:"default-long",attrs:{to:"/material/list"}},[t._v("取消")])]},proxy:!0}])},[i("kdx-hint-alert",{staticStyle:{"margin-bottom":"10px"}},[i("div",{staticClass:"flex"},[i("div",{staticStyle:{"white-space":"nowrap"}},[t._v("提示：")]),i("div",[i("p",[t._v("朋友圈推广小程序/公众号/H5渠道系统自动生成生成小程序短链（Short Link），微信环境内无需问询可直接唤起小程序。")]),i("p",[t._v("需要微信小程序拥有以下一级类目：电商平台、商家自营、跨境电商，不符和条件时会自动转为URL Link（另一种小程序链接形式，打开时会跳转中间页）")]),i("p",[t._v("由于带参数的小程序链接（Short Link）永久链接上限是 10 万条，目前默认生成临时链接，生成数量不受限制，但是临时链接生成后有效时长为 30 天，失效后需要重新生成再使用，在新的场景使用时建议重新生成后使用。")])])])]),i("div",{staticClass:"content"},[i("Form",{ref:"form",staticClass:"form",attrs:{model:t.model,"label-width":120,rules:t.rule}},[i("kdx-form-title",{staticClass:"price-settings"},[t._v("推广设置")]),i("FormItem",{ref:"goods_id",attrs:{label:"选择商品：",prop:"goods"}},[i("div",{staticClass:"next-box"},[i("Button",{staticClass:"default-primary",on:{click:t.addShop}},[t._v(t._s(t.model.goods_id?"重新选择商品":"+添加商品"))]),t.model.goods_id?i("div",{staticClass:"shop-list-box"},[i("shop-name-page-list",{ref:"shop_name_list",attrs:{list:[Object.assign({},t.model.goods)]},on:{"on-delete":t.handleDelete}})],1):t._e()],1)]),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"推广文案：",prop:"description_type"}},[i("RadioGroup",{model:{value:t.model.description_type,callback:function(e){t.$set(t.model,"description_type",e)},expression:"model.description_type"}},[i("Radio",{attrs:{label:"0"}},[t._v("系统默认")]),i("Radio",{attrs:{label:"1"}},[t._v("自定义")])],1),i("kdx-hint-text",{staticClass:"hint-margin"},[t._v(" 系统默认文案为左侧预览图中显示，商品标题、商品价格读取商品设置不可修改，系统自动生成小程序短链 ")]),"0"!==t.model.description_type?i("div",{staticClass:"next-box"},[i("FormItem",{staticClass:"margin-l",attrs:{label:"推广文案：",prop:"description"}},[i("Input",{staticClass:"width-520 limit-input",attrs:{type:"textarea",rows:4,maxlength:"1000","show-word-limit":"",placeholder:"请输入推广文案"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),i("kdx-hint-text",{staticClass:"hint-margin",staticStyle:{"margin-left":"120px"}},[t._v("您可以自定义个性化文案，不再读取商品标题信息，支持emoj表情包")])],1)],1):t._e()],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"上传素材：",prop:"material_type"}},[i("RadioGroup",{model:{value:t.model.material_type,callback:function(e){t.$set(t.model,"material_type",e)},expression:"model.material_type"}},[i("Radio",{attrs:{label:"0"}},[t._v("图片")]),i("Radio",{attrs:{label:"1"}},[t._v("视频")])],1),i("div",{staticClass:"next-box"},[0==t.model.material_type?[i("kdx-image-video",{staticClass:"swiper-img",attrs:{type:"image",limit:9,multiple:!0,"current-list":t.model.thumb_all,"is-drag":""},on:{"on-change":t.thumbAllChange}}),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"建议尺寸：750*750像素，可以拖拽图片调整顺序，最多上传9张"}})],1)]:[i("kdx-image-video",{staticStyle:{"padding-bottom":"10px"},attrs:{type:"video",video:t.model.video,current:t.model.video_thumb},on:{"on-video-change":t.changeVideo,"on-change":t.changeVideoImage}}),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"仅小程序渠道支持一键保存视频，建议视频突出商品核心卖点，时长9～30秒，宽高比16:9"}})],1)]],2)],1)],1)],1)],1),i("goods-selector",{attrs:{current:t.model.goods,show_material:1,multiple:!1},on:{"on-change":t.selectorChange,"on-cancel":t.selectorCancel},model:{value:t.selector.modal,callback:function(e){t.$set(t.selector,"modal",e)},expression:"selector.modal"}})],1)],1)},a=[]},"746f":function(t,e,i){var o=i("428f"),a=i("1a2d"),r=i("e538"),n=i("9bf2").f;t.exports=function(t){var e=o.Symbol||(o.Symbol={});a(e,t)||n(e,t,{value:r.f(t)})}},"74fa":function(t,e,i){"use strict";i("2200")},75450:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"preview-index"},[i("div",{staticClass:"preview-title"},[t._v("推广预览")]),i("div",{staticClass:"preview-box"},[i("div",{staticClass:"content"},[i("img",{attrs:{src:t.previewTop,alt:""}}),i("div",{staticClass:"text-wrap"},[i("div",{staticClass:"text"},[i("div",{staticClass:"description"},[t._v(t._s("0"===t.model.description_type?"📢 现在下单超划算，赶紧下单":t.model.description))]),"0"===t.model.description_type?i("div",{staticClass:"goods"},[t._v("👍 衬衫男女长袖夏季日系ins风文艺薄款亚麻港风男士女士小清新棉麻条纹白衬女士")]):t._e(),i("div",{staticClass:"item"},[t._v("💰 ￥50.99")]),i("div",{staticClass:"item"},[t._v("👉 购买链接：#小程序://后朴商城/商品/M1Ytw4mg7r7nB3a")])])]),i("img",{attrs:{src:t.previewBottom,alt:""}})])])])},a=[]},9488:function(t,e,i){"use strict";i.r(e);var o=i("a793"),a=i.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(r);e["default"]=a.a},a4d3:function(t,e,i){i("d9f5"),i("b4f8"),i("c513"),i("e9c4"),i("5a47")},a793:function(t,e,i){var o=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("c7eb")),r=o(i("1da1")),n=o(i("5530"));i("d9e2"),i("a4d3"),i("e01a"),i("e9c4"),i("d3b7"),i("ac1f"),i("5319");var s=o(i("0786")),d=o(i("0659")),l=o(i("416b")),c={components:{preview:s.default,shopNamePageList:l.default,GoodsSelector:d.default},data:function(){var t=this;return{id:"",type:"",model:{goods_id:"",goods:{},description_type:"0",description:"",material_type:"0",thumb_all:[],video:"",video_thumb:""},rule:{goods:[{required:!0,validator:function(e,i,o){t.model.goods_id?o():o(new Error("至少选择一个商品"))}}],description_type:[{required:!0,message:"请选择推广文案"}],description:[{required:!0,message:"请输入推广文案"}],material_type:[{required:!0,validator:function(e,i,o){0==t.model.material_type&&0===t.model.thumb_all.length||1==t.model.material_type&&!t.model.video?o(new Error("请选择素材")):o()}}]},loading:!1,selector:{modal:!1}}},mounted:function(){var t,e,i,o;this.type=null===(t=this.$route)||void 0===t||null===(e=t.meta)||void 0===e?void 0:e.type,this.id=(null===(i=this.$route)||void 0===i||null===(o=i.query)||void 0===o?void 0:o.id)||"","edit"===this.type&&this.id&&this.getDetail()},computed:{noManagePerm:function(){return!this.$getPermMap("material.index.manage")}},methods:{getDetail:function(){var t=this;this.$api.materialApi.getMaterialInfo({id:this.id}).then((function(e){if(0===e.error){var i=e.data,o=i.goods_id,a=i.description_type,r=i.description,n=i.material_type,s=i.thumb_all,d=i.video,l=i.video_thumb;s=JSON.parse(s);var c={id:e.data.goods_id,category:e.data.goods_category,has_option:e.data.goods_has_option,thumb:e.data.goods_thumb,title:e.data.goods_title,type:e.data.goods_type};t.model={goods_id:o,description_type:a,description:r,material_type:n,thumb_all:s,video:d,video_thumb:l,goods:c}}}))},addShop:function(){this.selector.modal=!0},handleDelete:function(){this.model.goods={},this.model.goods_id=""},selectorChange:function(t){var e=this;this.model.goods=(0,n.default)({},t),this.model.goods_id=t.id,this.$refs["goods_id"].validateState="",this.$nextTick((function(){var t;null===(t=e.$refs["shop_name_list"])||void 0===t||t.reset()})),this.selectorCancel()},selectorCancel:function(){this.selector.modal=!1},thumbAllChange:function(t){this.model.thumb_all=t},changeVideo:function(t){this.model.video=t.path},changeVideoImage:function(t){this.model.video_thumb=t},handleSave:function(){var t=this;return(0,r.default)((0,a.default)().mark((function e(){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs["form"].validate().then((function(e){if(e){t.loading=!0;var i=(0,n.default)({},t.model);i["thumb_all"]=JSON.stringify(i["thumb_all"]),i["goods"]=JSON.stringify(i["goods"]);var o="addMaterial";"edit"===t.type&&(o="editMaterial",i["id"]=t.id),t.$api.materialApi[o](i).then((function(e){0===e.error&&(t.$Message.success("保存成功"),t.$router.replace({path:"/material/list"}))})).finally((function(){t.loading=!1}))}}));case 1:case"end":return e.stop()}}),e)})))()}}};e.default=c},b4f8:function(t,e,i){var o=i("23e7"),a=i("d066"),r=i("1a2d"),n=i("577e"),s=i("5692"),d=i("3d87"),l=s("string-to-symbol-registry"),c=s("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!d},{for:function(t){var e=n(t);if(r(l,e))return l[e];var i=a("Symbol")(e);return l[e]=i,c[i]=e,i}})},bc3c:function(t,e,i){"use strict";i.r(e);var o=i("6e4e"),a=i("9488");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("74fa");var n=i("2877"),s=Object(n["a"])(a["default"],o["a"],o["b"],!1,null,"1585b2d6",null);e["default"]=s.exports},c513:function(t,e,i){var o=i("23e7"),a=i("1a2d"),r=i("d9b5"),n=i("0d51"),s=i("5692"),d=i("3d87"),l=s("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!d},{keyFor:function(t){if(!r(t))throw TypeError(n(t)+" is not a symbol");if(a(l,t))return l[t]}})},d9f5:function(t,e,i){"use strict";var o=i("23e7"),a=i("da84"),r=i("c65b"),n=i("e330"),s=i("c430"),d=i("83ab"),l=i("4930"),c=i("d039"),u=i("1a2d"),f=i("3a9b"),m=i("825a"),p=i("fc6a"),v=i("a04b"),h=i("577e"),b=i("5c6c"),g=i("7c73"),y=i("df75"),_=i("241c"),x=i("057f"),w=i("7418"),C=i("06cf"),S=i("9bf2"),k=i("37e8"),O=i("d1e7"),$=i("cb2d"),P=i("5692"),j=i("f772"),M=i("d012"),I=i("90e3"),E=i("b622"),F=i("e538"),R=i("746f"),B=i("57b9"),q=i("d44e"),D=i("69f3"),J=i("b727").forEach,L=j("hidden"),N="Symbol",T="prototype",A=D.set,V=D.getterFor(N),G=Object[T],H=a.Symbol,Q=H&&H[T],U=a.TypeError,Y=a.QObject,z=C.f,K=S.f,W=x.f,X=O.f,Z=n([].push),tt=P("symbols"),et=P("op-symbols"),it=P("wks"),ot=!Y||!Y[T]||!Y[T].findChild,at=d&&c((function(){return 7!=g(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,i){var o=z(G,e);o&&delete G[e],K(t,e,i),o&&t!==G&&K(G,e,o)}:K,rt=function(t,e){var i=tt[t]=g(Q);return A(i,{type:N,tag:t,description:e}),d||(i.description=e),i},nt=function(t,e,i){t===G&&nt(et,e,i),m(t);var o=v(e);return m(i),u(tt,o)?(i.enumerable?(u(t,L)&&t[L][o]&&(t[L][o]=!1),i=g(i,{enumerable:b(0,!1)})):(u(t,L)||K(t,L,b(1,{})),t[L][o]=!0),at(t,o,i)):K(t,o,i)},st=function(t,e){m(t);var i=p(e),o=y(i).concat(ft(i));return J(o,(function(e){d&&!r(lt,i,e)||nt(t,e,i[e])})),t},dt=function(t,e){return void 0===e?g(t):st(g(t),e)},lt=function(t){var e=v(t),i=r(X,this,e);return!(this===G&&u(tt,e)&&!u(et,e))&&(!(i||!u(this,e)||!u(tt,e)||u(this,L)&&this[L][e])||i)},ct=function(t,e){var i=p(t),o=v(e);if(i!==G||!u(tt,o)||u(et,o)){var a=z(i,o);return!a||!u(tt,o)||u(i,L)&&i[L][o]||(a.enumerable=!0),a}},ut=function(t){var e=W(p(t)),i=[];return J(e,(function(t){u(tt,t)||u(M,t)||Z(i,t)})),i},ft=function(t){var e=t===G,i=W(e?et:p(t)),o=[];return J(i,(function(t){!u(tt,t)||e&&!u(G,t)||Z(o,tt[t])})),o};l||(H=function(){if(f(Q,this))throw U("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,e=I(t),i=function(t){this===G&&r(i,et,t),u(this,L)&&u(this[L],e)&&(this[L][e]=!1),at(this,e,b(1,t))};return d&&ot&&at(G,e,{configurable:!0,set:i}),rt(e,t)},Q=H[T],$(Q,"toString",(function(){return V(this).tag})),$(H,"withoutSetter",(function(t){return rt(I(t),t)})),O.f=lt,S.f=nt,k.f=st,C.f=ct,_.f=x.f=ut,w.f=ft,F.f=function(t){return rt(E(t),t)},d&&(K(Q,"description",{configurable:!0,get:function(){return V(this).description}}),s||$(G,"propertyIsEnumerable",lt,{unsafe:!0}))),o({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:H}),J(y(it),(function(t){R(t)})),o({target:N,stat:!0,forced:!l},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),o({target:"Object",stat:!0,forced:!l,sham:!d},{create:dt,defineProperty:nt,defineProperties:st,getOwnPropertyDescriptor:ct}),o({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ut}),B(),q(H,N),M[L]=!0},e01a:function(t,e,i){"use strict";var o=i("23e7"),a=i("83ab"),r=i("da84"),n=i("e330"),s=i("1a2d"),d=i("1626"),l=i("3a9b"),c=i("577e"),u=i("9bf2").f,f=i("e893"),m=r.Symbol,p=m&&m.prototype;if(a&&d(m)&&(!("description"in p)||void 0!==m().description)){var v={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),e=l(p,this)?new m(t):void 0===t?m():m(t);return""===t&&(v[e]=!0),e};f(h,m),h.prototype=p,p.constructor=h;var b="Symbol(test)"==String(m("test")),g=n(p.toString),y=n(p.valueOf),_=/^Symbol\((.*)\)[^)]+$/,x=n("".replace),w=n("".slice);u(p,"description",{configurable:!0,get:function(){var t=y(this),e=g(t);if(s(v,t))return"";var i=b?w(e,7,-1):x(e,_,"$1");return""===i?void 0:i}}),o({global:!0,constructor:!0,forced:!0},{Symbol:h})}},e538:function(t,e,i){var o=i("b622");e.f=o},fad2:function(t,e,i){"use strict";i.r(e);var o=i("3384"),a=i.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(r);e["default"]=a.a}}]);