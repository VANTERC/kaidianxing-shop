(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[107],{"2ec8":function(n,t,e){"use strict";e("7f3d")},"488c":function(n,t,e){var a=e("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("d3b7");var i=a(e("8272")),o={name:"index",components:{ChannelList:i.default},data:function(){return{list:[],loading:!1,buy:{data:{}}}},created:function(){this.getList()},methods:{buyChannel:function(n){var t=this;this.buy.data=n,this.$nextTick((function(){t.$refs["app_recharge"].setValue()}))},getList:function(){var n=this;this.loading=!0,this.$api.homeApi.getChannelList().then((function(t){n.loading=!1,0===t.error&&(n.list=t.list||[])}))},handleConfig:function(n){"wechat"===n?this.$router.push({path:"/home/wechat/config/not"}):this.$router.push({path:"/home/config/".concat(n)})},handleMessage:function(n){var t="";switch(n){case"wx":t="/home/config/wx";break;case"wechat":t="/home/wechat/config/achieve";break;case"pc":t="/home/pc/goods/list";break;case"douyin":t="/home/config/douyin";break;case"tt":t="/home/config/tt";break;default:t="/home/config/".concat(n);break}this.$router.push({path:t})},changeStatus:function(n){var t=this;this.loading=!0,this.$api.homeApi.setChannelStatus(n).then((function(n){0===n.error&&(t.$Message.success("渠道状态修改成功"),t.getList())})).finally((function(){t.loading=!1}))}}};t.default=o},"4f65":function(n,t,e){},"6f9d":function(n,t,e){"use strict";e("4f65")},7119:function(n,t,e){"use strict";e.r(t);var a=e("c0d5"),i=e.n(a);for(var o in a)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(o);t["default"]=i.a},7455:function(n,t,e){"use strict";e.r(t);var a=e("488c"),i=e.n(a);for(var o in a)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(o);t["default"]=i.a},"7f3d":function(n,t,e){},8272:function(n,t,e){"use strict";e.r(t);var a=e("f9fc"),i=e("7119");for(var o in i)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(o);e("6f9d");var s=e("2877"),c=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,"2dac28da",null);t["default"]=c.exports},abd0:function(n,t,e){"use strict";e.d(t,"a",(function(){return a})),e.d(t,"b",(function(){return i}));var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("kdx-content-bar",{attrs:{loading:n.loading}},[e("div",{staticClass:"channel-manage"},[n.list.length>0?e("div",{staticClass:"manage-box"},[e("kdx-form-title",{attrs:{hasMargin:!1}},[n._v("渠道管理")]),e("channel-list",{attrs:{data:n.list},on:{"on-buy":n.buyChannel,"on-config":n.handleConfig,"on-manage":n.handleMessage,"on-change":n.changeStatus}})],1):n._e()])])},i=[]},b6dc:function(n,t,e){"use strict";e.r(t);var a=e("abd0"),i=e("7455");for(var o in i)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(o);e("2ec8");var s=e("2877"),c=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,"5f25ae7c",null);t["default"]=c.exports},c0d5:function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={name:"ChannelHave",computed:{noManagePerm:function(){return!this.$getPermMap("channel.wap.manage")},noWechatManagePerm:function(){return!this.$getPermMap("channel.wechat.manage")},noWxManagePerm:function(){return!this.$getPermMap("channel.wxapp.manage")},noTtManagePerm:function(){return!this.$getPermMap("channel.byteDance.manage")},noPCManagePerm:function(){return!1}},props:{data:{type:Array,default:function(){return[]}}},methods:{handleConfig:function(n,t){this.$emit("on-config",n,t)},handleManage:function(n,t){this.$emit("on-manage",n,t)},changeStatus:function(n,t){this.$emit("on-change",{status:n,client_type:t})},getItemInfo:function(n){var t,e,a,i,o,s,c,r,u,l,d,f,g,h;switch(n.identity){case"wxapp":return{src:null===n||void 0===n||null===(t=n.channel_info)||void 0===t?void 0:t.qrcode,status:"1"==(null===n||void 0===n||null===(e=n.channel_info)||void 0===e?void 0:e.status),icon:"icon-weixinxiaochengxu"};case"wechat":return{src:null===n||void 0===n||null===(a=n.channel_info)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.qrcodeimgsrc,status:null===n||void 0===n||null===(o=n.channel_info)||void 0===o?void 0:o.is_open,icon:"icon-weixin",connect:null===n||void 0===n||null===(s=n.channel_info)||void 0===s?void 0:s.connect};case"toutiao":return{src:null===n||void 0===n||null===(c=n.channel_info)||void 0===c?void 0:c.toutiao_qrcode,status:1==(null===n||void 0===n||null===(r=n.channel_info)||void 0===r?void 0:r.status),icon:"icon-qudao-toutiao2"};case"douyin":return{src:null===n||void 0===n||null===(u=n.channel_info)||void 0===u?void 0:u.douyin_qrcode,status:1==(null===n||void 0===n||null===(l=n.channel_info)||void 0===l?void 0:l.status),icon:"icon-douyin"};case"wap":return{src:null===n||void 0===n||null===(d=n.channel_info)||void 0===d?void 0:d.url,status:1==(null===n||void 0===n||null===(f=n.channel_info)||void 0===f?void 0:f.is_open),icon:"icon-H"};case"pc":return{src:null===n||void 0===n||null===(g=n.channel_info)||void 0===g?void 0:g.url,status:1==(null===n||void 0===n||null===(h=n.channel_info)||void 0===h?void 0:h.is_open),icon:"icon-H"};default:return{icon:"",status:0,src:""}}}}};t.default=e},f9fc:function(n,t,e){"use strict";e.d(t,"a",(function(){return a})),e.d(t,"b",(function(){return i}));var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"channel-buy"},[n._m(0),e("div",{staticClass:"channel-body"},n._l(n.data,(function(t){return e("div",{key:t.id},[e("div",{staticClass:"channel-body-left"},[e("div",{staticClass:"image"},[1==t.info_type?[e("img",{attrs:{src:n.$media(t.shop_show_logo,"manage")},on:{error:n.replaceImage}})]:[e("img",{attrs:{src:n.$media(t.logo,"manage")},on:{error:n.replaceImage}})]],2),e("p",{staticClass:"title"},[e("span",[n._v(n._s(1==t.info_type?t.shop_show_name:t.name))])]),e("p",{staticClass:"text"},[n._v(" "+n._s(1==t.info_type?t.shop_show_description:t.description)+" ")])]),e("div",{staticClass:"channel-body-right"},["wxapp"===t.identity?[n.getItemInfo(t).status?e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noWxManagePerm},attrs:{disabled:n.noWxManagePerm},on:{click:function(t){return n.handleManage("wx")}}},[n._v(" 管理微信小程序 ")]):e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noWxManagePerm},attrs:{disabled:n.noWxManagePerm},on:{click:function(t){return n.handleConfig("wx")}}},[n._v(" 配置微信小程序 ")])]:"pc"===t.identity?[n.getItemInfo(t).status?e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noWxManagePerm},attrs:{disabled:n.noPCManagePerm},on:{click:function(t){return n.handleManage("pc")}}},[n._v(" PC端管理 ")]):n._e()]:"wechat"===t.identity?[n.getItemInfo(t).connect?e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noWechatManagePerm},attrs:{disabled:n.noWechatManagePerm},on:{click:function(e){return n.handleManage("wechat",t)}}},[n._v(" 管理微信公众号 ")]):e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noWechatManagePerm},attrs:{disabled:n.noWechatManagePerm},on:{click:function(e){return n.handleConfig("wechat",t)}}},[n._v(" 配置微信公众号 ")])]:n._e(),"toutiao"===t.identity?[n.getItemInfo(t).status?e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noTtManagePerm},attrs:{disabled:n.noTtManagePerm},on:{click:function(t){return n.handleManage("tt")}}},[n._v(" 管理头条小程序 ")]):e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noTtManagePerm},attrs:{disabled:n.noTtManagePerm},on:{click:function(t){return n.handleConfig("tt")}}},[n._v(" 配置头条小程序 ")])]:n._e(),"douyin"===t.identity?[n.getItemInfo(t).status?e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noTtManagePerm},attrs:{disabled:n.noTtManagePerm},on:{click:function(t){return n.handleManage("douyin")}}},[n._v(" 管理抖音小程序 ")]):e("Button",{staticClass:"primary-long",class:{noManagePerm:n.noTtManagePerm},attrs:{disabled:n.noTtManagePerm},on:{click:function(t){return n.handleConfig("douyin")}}},[n._v(" 配置抖音小程序 ")])]:n._e(),n.getItemInfo(t).status&&"wap"!=t.identity&&"pc"!=t.identity?e("kdx-hint-tooltip",{attrs:{type:"qrCode",qrcode_url:n.getItemInfo(t).src+"?v="+(new Date).getTime(),text:""}},[e("Button",{staticClass:"primary-long"},[n._v("推广入口")])],1):!n.getItemInfo(t).status||"wap"!==t.identity&&"pc"!==t.identity?n._e():e("kdx-hint-tooltip",{attrs:{type:"qrCode",url:n.getItemInfo(t).src,text:"复制页面链接"}},[e("Button",{staticClass:"primary-long"},[n._v("推广入口")])],1),n.getItemInfo(t).connect?["1"==n.getItemInfo(t).status?[e("Button",{attrs:{type:"text",disabled:n.noWechatManagePerm},on:{click:function(t){return n.changeStatus("0","20")}}},[n._v(" 关闭访问 ")])]:[e("Button",{attrs:{type:"text",disabled:n.noWechatManagePerm},on:{click:function(t){return n.changeStatus("1","20")}}},[n._v(" 开启访问 ")])]]:"wap"===t.identity?[n.getItemInfo(t).status?[e("Button",{class:{noManagePerm:n.noManagePerm},attrs:{type:"text",disabled:n.noManagePerm},on:{click:function(t){return n.changeStatus("0","10")}}},[n._v(" 关闭访问 ")])]:[e("Button",{class:{noManagePerm:n.noManagePerm},attrs:{type:"text",disabled:n.noManagePerm},on:{click:function(t){return n.changeStatus("1","10")}}},[n._v(" 开启访问 ")])]]:"pc"===t.identity?[n.getItemInfo(t).status?[e("Button",{class:{noManagePerm:n.noManagePerm},attrs:{type:"text",disabled:n.noPCManagePerm},on:{click:function(t){return n.changeStatus("0","70")}}},[n._v(" 关闭访问 ")])]:[e("Button",{class:{noManagePerm:n.noManagePerm},attrs:{type:"text",disabled:n.noPCManagePerm},on:{click:function(t){return n.changeStatus("1","70")}}},[n._v(" 开启访问 ")])]]:[e("Button",{staticStyle:{visibility:"hidden"},attrs:{disabled:n.noPCManagePerm,type:"text"}},[n._v("关闭访问")])]],2)])})),0)])},i=[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"channel-title"},[e("div",[n._v("渠道")]),e("div",[n._v("操作")])])}]}}]);