(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[183],{"0b92":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-content-bar",{scopedSlots:e._u([{key:"btn",fn:function(){return[a("Button",{attrs:{type:"primary",loading:e.submitLoading,disabled:e.noManagePerm},on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"vip-ranking"},[a("div",{staticClass:"content"},[a("kdx-form-title",[e._v(" 积分排行榜设置 ")]),a("Form",{ref:"form1",attrs:{model:e.rank,"label-width":135,rules:e.rule1}},[a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"直接链接："}},[a("Button",{attrs:{type:"text",disabled:e.noManagePerm,to:e.credit_url,target:"_blank"}},[e._v(e._s(e.credit_url))])],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"积分排行榜开关："}},[a("RadioGroup",{model:{value:e.rank.credit_state,callback:function(t){e.$set(e.rank,"credit_state",t)},expression:"rank.credit_state"}},[a("Radio",{attrs:{disabled:e.noManagePerm,label:1}},[e._v("开启")]),a("Radio",{attrs:{disabled:e.noManagePerm,label:0}},[e._v("关闭")])],1)],1),1==e.rank.credit_state?a("FormItem",{attrs:{label:"积分榜显示数量：",prop:"credit_num"}},[a("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:e.noManagePerm,placeholder:"积分榜显示数量"},model:{value:e.rank.credit_num,callback:function(t){e.$set(e.rank,"credit_num",t)},expression:"rank.credit_num"}}),a("kdx-hint-text",[e._v(" 如果不填写，默认显示前50名 ")])],1):e._e()],1)],1),a("div",{staticClass:"content"},[a("kdx-form-title",[e._v(" 消费排行榜设置 ")]),a("Form",{ref:"form2",attrs:{model:e.rank,"label-width":135,rules:e.rule2}},[a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"直接链接："}},[a("Button",{attrs:{type:"text",disabled:e.noManagePerm,to:e.money_url,target:"_blank"}},[e._v(e._s(e.money_url))])],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"消费排行榜开关："}},[a("RadioGroup",{model:{value:e.rank.money_state,callback:function(t){e.$set(e.rank,"money_state",t)},expression:"rank.money_state"}},[a("Radio",{attrs:{disabled:e.noManagePerm,label:1}},[e._v("开启")]),a("Radio",{attrs:{disabled:e.noManagePerm,label:0}},[e._v("关闭")])],1)],1),1==e.rank.money_state?a("FormItem",{attrs:{label:"消费榜显示数量：",prop:"money_num"}},[a("kdx-rr-input",{staticClass:"width-160",attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:e.noManagePerm,placeholder:"积分榜显示数量"},model:{value:e.rank.money_num,callback:function(t){e.$set(e.rank,"money_num",t)},expression:"rank.money_num"}}),a("kdx-hint-text",[e._v(" 如果不填写，默认显示前50名 ")])],1):e._e()],1)],1)])])},r=[]},2889:function(e,t,a){},6707:function(e,t,a){"use strict";a("2889")},da0a:function(e,t,a){"use strict";a.r(t);var n=a("0b92"),r=a("e733");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("6707");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"fb6199be",null);t["default"]=s.exports},e578:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("5530")),i=n(a("1da1"));a("d3b7");var o={name:"index",data:function(){return{rank:{credit_state:0,credit_num:"",money_state:0,money_num:""},credit_url:"",money_url:"",submitLoading:!1,rule1:{credit_num:[{pattern:/(^[1-9]\d*$)/,message:"请输入正确的数字"}]},rule2:{money_num:[{pattern:/(^[1-9]\d*$)/,message:"请输入正确的数字"}]}}},computed:{noManagePerm:function(){return!this.$getPermMap("member.rank.manage")}},created:function(){},mounted:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.$api.memberApi.getRank({}).then((function(t){0==t.error&&(t.rank&&(e.rank=t.rank),e.credit_url=t.credit_url,e.money_url=t.money_url)}))},validateForm1:function(){var e=this;return new Promise((function(t,a){e.$refs["form1"].validate((function(e){e?t(e):a()}))}))},validateForm2:function(){var e=this;return new Promise((function(t,a){e.$refs["form2"].validate((function(e){e?t(e):a()}))}))},handleSave:function(){this.submitLoading=!0,this.customForm()},customForm:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,1!=e.rank.credit_state){t.next=6;break}return t.next=4,e.validateForm1();case 4:t.next=9;break;case 6:if(1!=e.rank.money_state){t.next=9;break}return t.next=9,e.validateForm2();case 9:e.submit(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.submitLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},submit:function(){var e=this;this.$api.memberApi.editRank((0,r.default)({},this.rank)).then((function(t){0==t.error&&(e.getDetail(),e.$Message.success("保存成功")),e.submitLoading=!1}))}}};t.default=o},e733:function(e,t,a){"use strict";a.r(t);var n=a("e578"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a}}]);