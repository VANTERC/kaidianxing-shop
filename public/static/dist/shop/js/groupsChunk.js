(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44,159],{"004d":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("4de4"),i("d3b7"),i("159b");var s=a(i("5530")),n={name:"Preview",components:{},props:{activityData:{type:Object,default:function(){}}},data:function(){return{data:{}}},watch:{activityData:{handler:function(t){var e;if(null!==t&&void 0!==t&&null!==(e=t.goods_info)&&void 0!==e&&e.length){var i,a,n,r=(0,s.default)({},null===t||void 0===t?void 0:t.goods_info[0]);if(1==r.has_option){var o,l,c,d,u,f=null===(o=r)||void 0===o||null===(l=o.rules)||void 0===l?void 0:l.filter((function(t){return 1==t.is_join}))[0],p=null===f||void 0===f?void 0:f.activity_stock,v=null===f||void 0===f?void 0:f.activity_price;if(1==t.inner_type)v=null===f||void 0===f||null===(u=f.ladder_price)||void 0===u?void 0:u[t.group_num_list.length];var m=null===(c=r)||void 0===c||null===(d=c.rules)||void 0===d?void 0:d.filter((function(t){return 1==t.is_join}));m&&m.length&&(p=0,m.forEach((function(t){p+=parseInt(t.activity_stock)}))),r=(0,s.default)((0,s.default)({},r),{},{activity_price:v||10,activity_stock:p||100})}if(1==t.inner_type)if(1==r.has_option)r.activity_price=(null===(a=r.rules)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.ladder_price[t.group_num_list.length])||"2000",r.original_price=r.min_price,r.price=r.min_price;else r.activity_price=r["activity_price".concat(t.group_num_list.length)];var _=(null===t||void 0===t||null===(i=t.rules)||void 0===i?void 0:i.single_buy)||1;this.data=(0,s.default)((0,s.default)({},t),{},{single_buy:_,goods_info:r})}else this.data=(0,s.default)((0,s.default)({},t),{},{goods_info:{thumb:this.$utils.staticImg("decorate/default_goods3.jpg"),price:"334.00",title:"衬衫男女长袖夏季日系ins风文艺薄款亚麻港风男士女士小清新棉麻条纹白衬女士",has_option:0,activity_price:10,activity_stock:100,stock:100,sales:45,group_num:2,min_price:"334.00",single_buy:1,sub_name:"条纹棉麻衬衫，慵随性饭，自然、舒适、透气、吸湿散湿快，可单穿当外套搭配T恤都很好看，整个风格"}})},deep:!0,immediate:!0}},computed:{},created:function(){},mounted:function(){},methods:{}};e.default=n},"0073":function(t,e,i){"use strict";i.r(e);var a=i("47a5"),s=i("58ac");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("6516");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"47e14b10",null);e["default"]=o.exports},"016b":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("6ab3")),n=a(i("2e16")),r={name:"ActivityChat",components:{ChartPie:n.default,ChartLine:s.default},props:{chartLine:{type:Object,default:function(){}},chartPie:{type:Object,default:function(){}},activityData:{type:Array,default:function(){return[]}}},data:function(){return{activity_id:"all"}},methods:{changeActivity:function(){"all"===this.activity_id?this.$emit("on-line-change",""):this.$emit("on-line-change",this.activity_id)},renderLine:function(){this.$refs["chart_line"].render()},renderPie:function(){this.$refs["chart_pie"].render()}}};e.default=r},"020c":function(t,e,i){"use strict";i.r(e);var a=i("7f56"),s=i("1489");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("0749");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"17557f3c",null);e["default"]=o.exports},"0378":function(t,e,i){"use strict";i("640c")},"03f4":function(t,e,i){},"055d":function(t,e,i){"use strict";i.r(e);var a=i("3c72"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"0680":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-modal-frame",{attrs:{value:t.value,title:"活动数据",width:1e3,loading:t.loading},on:{"on-cancel":t.handleCancel},scopedSlots:t._u([{key:"footer",fn:function(){return[i("kdx-page-component",{ref:"page",attrs:{total:t.total,"limit-default":""},on:{"on-change":t.handlePageChange}})]},proxy:!0}])},[i("div",{staticClass:"content"},[i("Table",{attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"goods",fn:function(e){var a=e.row;return[i("div",{staticClass:"goods"},[i("img",{staticClass:"goods-thumb",attrs:{src:t.$media(a.thumb),alt:""},on:{error:t.replaceImage}}),i("div",[i("div",{staticClass:"two-line-hide goods-title"},[t._v(" "+t._s(a.title)+" ")]),a.option_title?i("div",{staticClass:"goods-options"},[t._v(" "+t._s(a.option_title)+" ")]):t._e()])])]}}])})],1)])},s=[]},"0749":function(t,e,i){"use strict";i("4ec0")},"0804":function(t,e,i){"use strict";i("c383")},"0f38":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-chart"},[i("div",{staticClass:"activity-line"},[i("div",{staticClass:"activity-line-header"},[i("div",{staticClass:"title"},[t._v(" 活动曝光 ")]),i("div",{staticClass:"name"},[i("div",{staticClass:"label"},[t._v(" 活动名称： ")]),i("div",{staticClass:"content"},[i("Select",{staticClass:"width-250 active-name",attrs:{filterable:"",placeholder:"请选择"},on:{"on-change":t.changeActivity},model:{value:t.activity_id,callback:function(e){t.activity_id=e},expression:"activity_id"}},t._l(t.activityData,(function(t){return i("Option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)])]),i("div",{staticClass:"chart-line"},[i("chart-line",{ref:"chart_line",attrs:{id:"groups_line",data:t.chartLine.data,"x-axis":t.chartLine.xAxis,"y-axis":t.chartLine.yAxis,legend:t.chartLine.legend,"legend-style":t.chartLine.legendStyle,grid:t.chartLine.grid,height:328}})],1)]),i("div",{staticClass:"activity-pie"},[i("div",{staticClass:"activity-pie-header"},[t._v(" 销售占比 ")]),i("div",{staticClass:"chart-pie"},[i("chart-pie",{ref:"chart_pie",attrs:{id:"groups_pie",legend:t.chartPie.legend,height:328,data:t.chartPie.data,center:t.chartPie.center,radius:t.chartPie.radius}})],1)])])},s=[]},"101e":function(t,e,i){"use strict";i("2766")},1040:function(t,e,i){"use strict";i("8499")},"110a":function(t,e,i){"use strict";i.r(e);var a=i("3ab2"),s=i("1e64");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("70a4");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"9e35ca70",null);e["default"]=o.exports},"138b":function(t,e,i){"use strict";i.r(e);var a=i("b7a8"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"13b8":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"content"},[a("kdx-form-title",[t._v("拼团设置")]),a("Form",{ref:"form",attrs:{model:t.model,rules:t.rules,"label-width":150}},[a("FormItem",{attrs:{label:"商品详情中团列表："}},[a("RadioGroup",{model:{value:t.model.team_list,callback:function(e){t.$set(t.model,"team_list",e)},expression:"model.team_list"}},[a("Radio",{attrs:{label:"1"}},[a("span",[t._v("开启")]),a("kdx-hint-tooltip",{attrs:{type:"image",image:i("46b7")}})],1),a("Radio",{attrs:{label:"0"}},[a("span",[t._v("不开启")])])],1),a("kdx-hint-text",[t._v(" 开启后，用户可使用参团功能，选择已开团团长进行拼单。若关闭则只支持团长开团 ")])],1),a("FormItem",{attrs:{label:"未付款订单：",prop:"order_status"}},[a("RadioGroup",{model:{value:t.model.auto_close_open,callback:function(e){t.$set(t.model,"auto_close_open",e)},expression:"model.auto_close_open"}},[a("Radio",{attrs:{label:"0"}},[a("span",[t._v("永不关闭")])]),a("Radio",{attrs:{label:"1"}},[a("span",[t._v("自定义关闭时间")])])],1),a("kdx-hint-text",[t._v(" 拼团只读取本交易规则设置 ")]),"1"==t.model.auto_close_open?a("div",{staticClass:"main marginT-10"},[a("FormItem",{staticClass:"number-input label-width-100 refund-input",attrs:{label:"拍下来付款订单：",prop:"auto_close_time"}},[a("div",{staticClass:"flex width-340 "},[a("kdx-rr-input",{attrs:{number:"",minValue:5,maxValue:60,fixed:0},model:{value:t.model.auto_close_time,callback:function(e){t.$set(t.model,"auto_close_time",e)},expression:"model.auto_close_time"}}),a("span",{staticClass:"ivu-input-group-append item-append"},[t._v("分钟")]),a("span",{staticClass:"paddingL"},[t._v("內未付款，自动关闭订单")])],1)]),a("kdx-hint-text",{staticStyle:{"margin-left":"20px"}},[t._v("订单自动关闭时间必须在5-60分钟之间，订单关闭后自动退还库存。 ")])],1):t._e()],1)],1)],1)])},s=[]},"13d1":function(t,e,i){"use strict";i.r(e);var a=i("9146"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},1489:function(t,e,i){"use strict";i.r(e);var a=i("b856"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},1516:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"presell-message-list"},[i("div",{staticClass:"presell-message-list-index"},[i("notice-list",{attrs:{type:t.type},on:{toDetail:t.toDetail}})],1),t._t("default")],2)},s=[]},1569:function(t,e,i){},"16b6":function(t,e,i){"use strict";i("1569")},"18cc":function(t,e,i){"use strict";i.r(e);var a=i("5cf2"),s=i("9bb0");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("5a39");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"67338e40",null);e["default"]=o.exports},1964:function(t,e,i){"use strict";i("8dd36")},"1a1b":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d3b7"),i("159b");var s=a(i("92aa")),n=a(i("deba")),r={name:"index",components:{OrderList:s.default,OrderStatus:n.default},data:function(){return{info:{},list:[],table:{list:[]},id:"",loading:!1,current:1,lastStep:"待成团",lastTime:"",status:"process",countInterval:null}},mounted:function(){var t;this.id=(null===(t=this.$route.query)||void 0===t?void 0:t.id)||"",this.getData()},beforeDestroy:function(){clearInterval(this.countInterval)},methods:{getData:function(){var t=this;this.loading=!0,this.$api.groupsApi.getGroupsOrderDetail({id:this.id}).then((function(e){if(0===e.error){var i,a;t.lastStep="待成团",t.lastTime="",t.info=e.groups_detail,t.list=e.team_detail||[];var s=[];t.list.forEach((function(t){t.order_no&&s.push(t)})),t.table.list=s,t.status="process",0==(null===(i=e.groups_detail)||void 0===i?void 0:i.success)?(t.current=1,t.info.end_time&&t.setCount()):1==(null===(a=e.groups_detail)||void 0===a?void 0:a.success)?(t.current=2,t.lastStep="拼团成功",t.lastTime=t.info.success_time):(t.current=1,t.lastStep="拼团失败",t.status="error",t.lastTime=t.info.end_time)}})).finally((function(){t.loading=!1}))},setCount:function(){var t=this;clearInterval(this.countInterval),this.countDown(),this.countInterval=setInterval((function(){t.countDown()}),1e3)},countDown:function(){var t=new Date(this.info.end_time).getTime()/1e3,e=this.$utils.countDown(t,!1,!0),i=["天","时","分","秒"],a="";e?(e.forEach((function(t,e){t&&(a+=t+i[e])})),this.$set(this.info,"countTime",a)):(clearInterval(this.countInterval),this.getData())},confirmGroups:function(){var t=this;this.$Modal.confirm({title:"手动确认成团?",content:"此团下有待支付订单，确认成团后，待支付订单将自动关闭。",onOk:function(){t.$api.groupsApi.confirmGroups({id:t.id,success:1}).then((function(e){0===e.error&&(t.$Message.success("拼团成功"),t.getData())}))}})},routeOrder:function(t){this.$utils.openNewWindowPage("/order/list/all",{keywords:t,search_field:"order_no"})}}};e.default=r},"1b35":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-list"},[i("div",{staticClass:"form-title"},[t._v(" 拼团订单 ")]),i("div",{staticClass:"table-list"},[i("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"title",fn:function(e){var a=e.row;return[i("div",{staticClass:"title-box line-hide"},[i("div",{staticClass:"icon"},["10"==a.create_from?i("span",{staticClass:"iconfont icon-H icon"}):"20"==a.create_from?i("span",{staticClass:"iconfont icon-weixin icon"}):"21"==a.create_from?i("span",{staticClass:"iconfont icon-weixinxiaochengxu icon"}):"30"==a.create_from?i("kdx-svg-icon",{staticClass:"iconfont icon",attrs:{type:"icon-qudao-toutiao2"}}):"32"==a.create_from?i("kdx-svg-icon",{staticClass:"iconfont icon",attrs:{type:"icon-qudao-toutiaojisuban"}}):"31"==a.create_from?i("kdx-svg-icon",{staticClass:"iconfont icon",attrs:{type:"icon-douyin"}}):t._e()],1),i("div",{staticClass:"order-no line-hide",on:{click:function(e){return t.handleOrderNo(a.order_no)}}},[t._v(" "+t._s(a.order_no)+" ")])])]}},{key:"goods",fn:function(e){var a=e.row;return[i("div",{staticClass:"goods"},[i("div",{staticClass:"thumb"},[i("img",{attrs:{src:t.$media(a.thumb),alt:""},on:{error:t.replaceImage}})]),i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[t._v(" "+t._s(a.title)+" ")]),a.option_title?i("div",{staticClass:"option"},[t._v(" "+t._s(a.option_title)+" ")]):t._e()])])]}},{key:"price_num",fn:function(e){var a=e.row;return[i("div",{staticClass:"price-num"},[i("div",{staticClass:"price"},[t._v(" ￥"+t._s(a.price_unit)+" ")]),i("div",{staticClass:"num"},[t._v(" X "+t._s(a.total)+" ")])])]}},{key:"created_at",fn:function(e){var a=e.row;return[i("div",{staticClass:"create-time"},[t._v(" "+t._s(a.created_at)+" ")])]}},{key:"user",fn:function(e){var a=e.row;return[i("div",{staticClass:"user"},[i("div",{staticClass:"user-name"},[t._v(" "+t._s(a.nickname)+" ")]),i("div",{staticClass:"user-tele"},[t._v(" "+t._s(a.mobile)+" ")])])]}},{key:"payment",fn:function(e){var a=e.row;return[i("div",{staticClass:"payment"},[i("div",{staticClass:"price"},[t._v(" ￥"+t._s(a.price)+" ")]),i("div",{staticClass:"freight"},[t._v(" (含运费：¥"+t._s(a.dispatch_price)+") ")])])]}},{key:"payment_type",fn:function(e){var a=e.row;return[30==a.pay_type?i("div",{staticClass:"payment-type alipay"},[i("span",{staticClass:"iconfont icon-alipay"}),i("span",[t._v("支付宝")])]):t._e(),20==a.pay_type?i("div",{staticClass:"payment-type weichat"},[i("span",{staticClass:"iconfont icon-wechatpay"}),i("span",[t._v("微信支付")])]):t._e(),2==a.pay_type?i("div",{staticClass:"payment-type balance"},[i("span",{staticClass:"iconfont icon-money-pay"}),i("span",[t._v("余额支付")])]):t._e()]}},{key:"order_status",fn:function(e){var a=e.row;return[10==a.status&&0==t.info.success?i("div",{staticClass:"order-status wait brand-color"},[t._v(" 待成团 ")]):10==a.status&&1==t.info.success?i("div",{staticClass:"order-status success warning-color"},[t._v(" 待发货 ")]):-1==a.status?i("div",{staticClass:"order-status success disabled-color"},[t._v(" 已关闭 ")]):30==a.status?i("div",{staticClass:"order-status success success-color"},[t._v(" 已完成 ")]):20==a.status&&20===+a.dispatch_type?i("div",{staticClass:"order-status success warning-color"},[t._v(" 待核销 ")]):20==a.status&&20!==+a.dispatch_type?i("div",{staticClass:"order-status success brand-color"},[t._v(" 待收货 ")]):t._e()]}}])})],1)])},s=[]},"1e64":function(t,e,i){"use strict";i.r(e);var a=i("c1f8"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"1faf":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf"),i("a434"),i("d3b7"),i("e9c4"),i("159b"),i("d81d"),i("a15b");var s=a(i("1da1")),n=a(i("5530")),r=i("2f62"),o=a(i("7162")),l=a(i("0659")),c=a(i("45a5")),d=a(i("020c")),u=a(i("2821")),f={name:"RulesInfo",components:{TypeList:o.default,GoodsSelector:l.default,RulesGoods:c.default,LadderGroupNum:d.default,LadderRulesGoods:u.default},props:{type:{type:String,default:""},activityData:{type:Object,default:function(){}},basicInfo:{type:Object,default:function(){}},isDisabled:{type:Boolean,default:!1},id:{type:String}},data:function(){var t=this;return{model:{is_commission:"0",limit_type:"0",limit_num1:null,limit_num2:null,is_preheat:"0",preheat_time:""},rule:{goods_info:[{required:!0,type:"array",min:1,message:"请选择商品"}],"rules.limit_num1":[{validator:function(e,i,a){"1"!=t.model.rules.limit_type||i||0===i?a():a(new Error("请填写数量"))}}],"rules.limit_num2":[{validator:function(e,i,a){"2"!=t.model.rules.limit_type||i||0===i?a():a(new Error("请填写数量"))}}],preheat_time:[{required:!0,validator:function(e,i,a){var s,n,r=null===(s=t.basicInfo)||void 0===s||null===(n=s.activity_time)||void 0===n?void 0:n[0];i?r&&i>r?a(new Error("预热时间不能大于开始时间")):a():a(new Error("请设置预热时间"))}}],hour:[{required:!0,message:"拼团有效期必填"}],minute:[{required:!0,message:"拼团有效期，分钟必填"},{validator:function(e,i,a){0==t.model.hour&&0==i&&a("拼团有效期不可为0"),a()}}],"rules.success_num":[{required:!0,message:"成团人数必填"}],"rules.virtual_success_num":[{validator:function(e,i,a){if(i||a(new Error("虚拟成团人数必填")),i=parseFloat(i),0==t.model.inner_type){var s=t.model.rules.success_num||2;s<=i&&a(new Error("虚拟成团人数要小于成团人数"))}else{var n,r=(null===(n=t.model.group_num_list[t.model.group_num_list.length-1])||void 0===n?void 0:n.num)||2;r<=i&&a(new Error("虚拟成团人数要小于成团人数"))}a()}}]},goodsSelector:{value:!1},cache:{goodsList:[],ladderGoodsList:[]}}},computed:(0,n.default)((0,n.default)((0,n.default)({},(0,r.mapGetters)("config",["getAppPermMap"])),(0,r.mapState)("config",["apps"])),{},{hiddenCommision:function(){return void 0===this.getAppPermMap("commission")||!1===this.getAppPermMap("commission")},disabledPreheat:function(){var t;return(null===(t=this.activityData)||void 0===t?void 0:t.status)&&this.activityData.status<0||"view"==this.$route.query.type},isShowGoodsList:function(){var t,e;return null===(t=this.model)||void 0===t||null===(e=t.goods_info)||void 0===e?void 0:e.length}}),watch:{activityData:{handler:function(t){this.model=t},immediate:!0},model:{handler:function(t){this.$emit("update:activityData",t)},deep:!0}},methods:{handleDelete:function(t){this.model.goods_info.splice(t,1)},validateForm:function(){var t=this;return new Promise((function(e,i){t.$refs["rules_form"].validate(function(){var a=(0,s.default)(regeneratorRuntime.mark((function a(s){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s){a.next=16;break}if(!t.id){a.next=4;break}return e(),a.abrupt("return");case 4:if(0!=t.model.inner_type){a.next=9;break}return a.next=7,t.$refs["goods_rule"].validateForm();case 7:a.next=13;break;case 9:return a.next=11,t.$refs["ladder_group_num"].validateForm();case 11:return a.next=13,t.$refs["goods_ladder_goods"].validateForm();case 13:e(),a.next=17;break;case 16:i();case 17:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())}))},changeTime:function(t){this.model.preheat_time=t},addGoods:function(){this.goodsSelector.value=!0},changeGoods:function(t){this.model.goods_info=t},cancelGoods:function(){this.goodsSelector.value=!1},changeType:function(t){1==t?(this.cache.goodsList=JSON.parse(JSON.stringify(this.model.goods_info)),this.model.goods_info=this.cache.ladderGoodsList):(this.cache.ladderGoodsList=JSON.parse(JSON.stringify(this.model.goods_info)),this.model.goods_info=this.cache.goodsList)},getParams:function(){var t=this.getGoodsInfoParams(),e=Object.assign({},{rules:JSON.parse(JSON.stringify(this.model.rules))},t);return e.rules.limit_time=60*this.model.hour+1*this.model.minute,e.is_preheat=this.model.is_preheat,1==e.is_preheat&&(e.preheat_time=this.model.preheat_time||""),e.inner_type=this.model.inner_type,e.rules.virtual_success_num=0==e.rules.vitrual_success?"0":e.rules.virtual_success_num,0==e.rules.limit_type?delete e.rules.limit_num:e.rules.limit_num=1==e.rules.limit_type?e.rules.limit_num1||"":e.rules.limit_num2||"",1==this.model.inner_type&&(e.rules.success_num={},this.model.group_num_list.forEach((function(t,i){e.rules.success_num[i+1]=t.num}))),delete e.rules.limit_num1,delete e.rules.limit_num2,e.rules=JSON.stringify(e.rules),e},getGoodsInfoParams:function(){var t=this,e=[],i=[],a=this.model.goods_info.map((function(a){e.push(a.id);var s={};return 1==a.has_option?(a.rules.forEach((function(t){i.push(t.option_id)})),s={goods_id:a.id,has_option:"1",rules:a.rules}):(s={goods_id:a.id,option_id:"0",has_option:"0",activity_stock:a.activity_stock,leader_price:a.leader_price||"-1"},0==t.model.inner_type?s.activity_price=a.activity_price:(s.activity_price="0",s.ladder_price={},t.model.group_num_list.forEach((function(t,e){s.ladder_price[e+1]=a["activity_price".concat(e+1)]})))),s}));return{goods_ids:e.join(","),option_ids:i.join(","),goods_info:a}}}};e.default=f},"1fd1":function(t,e,i){"use strict";i("2e0c")},2766:function(t,e,i){},2791:function(t,e,i){"use strict";i.r(e);var a=i("96ac"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"279a":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-status-box"},[i("ul",[i("li",{staticClass:"order-status"},[i("div",{staticClass:"title"},[t._v(" 当前拼团状态 ")]),i("div",{staticClass:"status"},[i("div",{staticClass:"icon"},[1==t.data.success?i("span",{staticClass:"iconfont icon-zujian-yingxiaoxinxi-duihao success-color"}):i("span",{staticClass:"iconfont icon-pintuan2-1"})]),0==t.data.success?i("div",{staticClass:"name"},[t._v(" 待成团 ")]):t._e(),1==t.data.success?i("div",{staticClass:"name success-color"},[t._v(" 已成团 ")]):t._e(),2==t.data.success?i("div",{staticClass:"name danger-color"},[t._v(" 未成团 ")]):t._e()]),0==t.data.success&&t.data.countTime?i("div",{staticClass:"surplus-time"},[t._v(" 剩余拼团时间："),i("span",{staticClass:"danger-color"},[t._v(t._s(t.data.countTime))])]):t._e(),0==t.data.success&&t.pastGroups?i("div",{staticClass:"action-btn"},[i("Button",{staticClass:"status-btn",attrs:{type:"primary"},on:{click:t.confirmGroups}},[t._v(" 确认成团 ")])],1):t._e(),2==t.data.success?i("div",{staticClass:"explain-text"},[t._v(" 团长有效期内未成团，已付款订单自动退款 ")]):t._e(),1==t.data.success?i("div",{staticClass:"explain-text"},[t._v(" 拼团成功，请及时发货 ")]):t._e()]),i("li",{staticClass:"order-info"},[i("div",{staticClass:"title"},[t._v(" 拼团信息 ")]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v(" 拼团编号： ")]),i("div",{staticClass:"content team-no"},[i("span",[t._v(t._s(t.data.team_no))]),i("kdx-copy-text",{attrs:{text:t.data.team_no}},[i("Button",{attrs:{type:"text"}},[t._v("复制")])],1)],1)]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v(" 开团时间： ")]),i("div",{staticClass:"content"},[t._v(" "+t._s(t.data.created_at)+" ")])]),i("div",{staticClass:"item group-type"},[i("div",{staticClass:"label"},[t._v(" 拼团类型： ")]),1==t.data.is_ladder?i("div",{staticClass:"content flex"},[i("span",{staticClass:"iconfont icon-yingyong-pintuan-jieti2 warning-color"}),i("span",{staticClass:"text warning-color"},[t._v("阶梯拼团 "),1==t.data.is_fictitious?i("span",[t._v("(虚拟成团)")]):t._e()])]):0==t.data.is_ladder?i("div",{staticClass:"content flex"},[i("span",{staticClass:"iconfont icon-yingyong-pintuan-putong2 brand-color"}),i("span",{staticClass:"text brand-color"},[t._v("普通拼团 "),1==t.data.is_fictitious?i("span",[t._v("(虚拟成团)")]):t._e()])]):t._e()])]),i("li",{staticClass:"order-progress"},[i("div",{staticClass:"title"},[t._v(" 拼团进度 ")]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v(" 当前进度： ")]),i("div",{staticClass:"content"},[i("progress-bar",{attrs:{current:t.data.count,total:t.data.success_num}})],1)]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v(" 拼团成员： ")]),i("div",{staticClass:"content user"},[t._l(t.userList,(function(e,a){return[a<5?i("kdx-hint-tooltip",{key:e.id,scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{key:e.id,staticClass:"header-list"},[i("img",{attrs:{src:t.$media(e.avatar),alt:""},on:{error:function(e){return t.replaceImage(e,"avatar")}}})])]},proxy:!0}],null,!0)},[i("div",{staticClass:"text"},[t._v(" "+t._s(e.order_no?e.nickname:"虚拟")+" ")])]):t._e()]})),t.userList.length>5?i("div",{staticClass:"all"},[i("span",[t._v("...")]),i("Button",{attrs:{type:"text"},on:{click:t.readAll}},[t._v("查看全部")])],1):t._e()],2)])])]),i("group-user",{ref:"group_user",attrs:{data:t.userList}})],1)},s=[]},2821:function(t,e,i){"use strict";i.r(e);var a=i("97a2"),s=i("5b77");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("5411");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"d612a7d6",null);e["default"]=o.exports},"2ad6":function(t,e,i){"use strict";i.r(e);var a=i("016b"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"2e0c":function(t,e,i){},"2e17":function(t,e,i){"use strict";i.r(e);var a=i("13b8"),s=i("055d");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("1fd1");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"7945c275",null);e["default"]=o.exports},"2e31":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-modal-frame",{attrs:{title:"设置拼团商品信息",value:t.modal,width:"1020","mask-closable":!1,loading:t.loading,footerHide:t.isDisabled},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOK}},[i("div",{staticClass:"multi-specification"},[i("div",{staticClass:"setting flex"},[i("span",[t._v("批量设置：")]),i("div",{staticClass:"setting-input flex"},[i("Checkbox",{attrs:{"true-value":"1","false-value":"0",disabled:t.isDisabled},on:{"on-change":t.changeSeckill},model:{value:t.allSeckill,callback:function(e){t.allSeckill=e},expression:"allSeckill"}},[t._v("参与拼团 ")]),i("kdx-rr-input",{attrs:{type:"text",placeholder:"拼团库存",number:"",fixed:0,disabled:t.isDisabled,maxValue:999999999},model:{value:t.batchData.activity_stock,callback:function(e){t.$set(t.batchData,"activity_stock",e)},expression:"batchData.activity_stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])]),i("kdx-rr-input",{attrs:{type:"text",placeholder:"拼团价格",number:"",fixed:2,disabled:t.isDisabled,maxValue:9999999.99},model:{value:t.batchData.activity_price,callback:function(e){t.$set(t.batchData,"activity_price",e)},expression:"batchData.activity_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),i("kdx-rr-input",{attrs:{type:"text",placeholder:"团长价(非必填)",number:"",fixed:2,disabled:t.isDisabled,maxValue:9999999.99},model:{value:t.batchData.leader_price,callback:function(e){t.$set(t.batchData,"leader_price",e)},expression:"batchData.leader_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),i("Button",{staticClass:"default-primary",attrs:{disabled:t.isDisabled},on:{click:t.handleBatchChange}},[t._v("应用")])],1)]),i("div",{staticClass:"table-list"},[i("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[i("Table",{ref:"table",attrs:{columns:t.columns,data:t.form.goodsList,"span-method":t.handleSpan},scopedSlots:t._u([{key:"is_join",fn:function(e){var a=e.index;return[i("FormItem",{attrs:{prop:"goodsList."+a+".is_join",rules:t.rules.is_join}},[i("Checkbox",{attrs:{"true-value":"1","false-value":"0",disabled:t.isDisabled},model:{value:t.form.goodsList[a].is_join,callback:function(e){t.$set(t.form.goodsList[a],"is_join",e)},expression:"form.goodsList[index].is_join"}},[t._v("参与 ")])],1)]}},{key:"activity_stock",fn:function(e){var a=e.index;return[i("FormItem",{attrs:{prop:"goodsList."+a+".activity_stock",rules:t.rules.activity_stock}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:t.isDisabled},model:{value:t.form.goodsList[a].activity_stock,callback:function(e){t.$set(t.form.goodsList[a],"activity_stock",e)},expression:"form.goodsList[index].activity_stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)]}},{key:"activity_price",fn:function(e){var a=e.index;return[i("FormItem",{attrs:{prop:"goodsList."+a+".activity_price",rules:t.rules.activity_price}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[a].activity_price,callback:function(e){t.$set(t.form.goodsList[a],"activity_price",e)},expression:"form.goodsList[index].activity_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)]}},{key:"leader_price",fn:function(e){var a=e.index;return[i("FormItem",{attrs:{prop:"goodsList."+a+".leader_price",rules:t.rules.leader_price}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[a].leader_price,callback:function(e){t.$set(t.form.goodsList[a],"leader_price",e)},expression:"form.goodsList[index].leader_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)]}}])})],1)],1)])])},s=[]},3734:function(t,e,i){"use strict";i.r(e);var a=i("b06b"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},3844:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("841c"),i("d3b7");var s=a(i("fbe4")),n=a(i("7b9f")),r={name:"index",components:{SearchHeader:s.default,ListItem:n.default},data:function(){return{search:{},page:{pageSize:12,pageNumber:1},total:20,list:[],loading:!1,innerType:[]}},created:function(){this.getList(),this.getGroupsType()},mounted:function(){this.$refs["page"].reset(this.page)},methods:{getGroupsType:function(){var t=this;this.$api.groupsApi.getGroupsType().then((function(e){if(0===e.error){var i=e.data,a=void 0===i?[]:i;a.unshift({type:"all",title:"全部"}),t.innerType=a}}))},handleSearch:function(t){this.search=t,this.initPage()},getList:function(){var t=this;this.loading=!0;var e=Object.assign({pagesize:this.page.pageSize,page:this.page.pageNumber},this.search);this.$api.groupsApi.getGroupsOrderList(e).then((function(e){0===e.error&&(t.list=e.list,t.total=e.total)})).finally((function(){t.loading=!1}))},changePage:function(t){this.page=t,this.getList()},initPage:function(){var t;this.page={pageSize:12,pageNumber:1},null===(t=this.$refs["page"])||void 0===t||t.reset(this.page),this.getList()},clickItem:function(t){this.$router.push({path:"/plugins/market/groups/order/detail",query:{id:t}})}}};e.default=r},"3a81":function(t,e,i){"use strict";i("c2bf")},"3ab2":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-modal-frame",{attrs:{value:t.value,title:"全部团成员",width:1e3,footerHide:""},on:{"on-cancel":t.setValue}},[i("div",{staticClass:"group-user"},[i("ul",t._l(t.data,(function(e,a){return i("li",{key:a},[i("div",{staticClass:"user-avatar"},[i("img",{attrs:{src:t.$media(e.avatar),alt:""},on:{error:function(e){return t.replaceImage(e,"avatar")}}})]),i("div",{staticClass:"user-name"},[t._v(" "+t._s(e.order_no?e.nickname:"虚拟")+" ")])])})),0)])])},s=[]},"3b75":function(t,e,i){"use strict";i("74e7")},"3c72":function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d3b7");var a={data:function(){return{model:{team_list:"0",auto_close_open:"1",auto_close_time:"5"},rules:{auto_close_time:[{required:!0,message:"请输入拍下来付款订单分钟"},{validator:function(t,e,i){e=parseInt(e),e<5?i(new Error("订单自动关闭时间要大于5")):e>60&&i(new Error("订单自动关闭时间要小于60")),i()}}]},loading:!1}},mounted:function(){this.getSetting()},methods:{getSetting:function(){var t=this;this.$api.groupsApi.getGroupsSetting().then((function(e){var i,a;0===e.error&&(console.log("res",e),t.model.team_list=e.data.team_list||"0",t.model.auto_close_open=(null===(i=e.data.auto_close)||void 0===i?void 0:i.open)||"0",t.model.auto_close_time=(null===(a=e.data.auto_close)||void 0===a?void 0:a.close_time)||"0")}))},handleSave:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.loading=!0,t.$api.groupsApi.setGroupsSetting(t.model).then((function(e){0===e.error&&t.$Message.success("拼团设置成功")})).finally((function(){t.loading=!1})))}))}}};e.default=a},"3e3e":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf"),i("ac1f"),i("1276"),i("d3b7"),i("5319"),i("d81d"),i("b64b"),i("159b");var s=a(i("1da1")),n=a(i("5530")),r=a(i("15fd")),o=a(i("c90e")),l=a(i("e9e9")),c=a(i("6b0c")),d=["title","client_type","start_time","end_time","preheat_time","rules","goods_info"],u={name:"index",components:{preview:o.default,basicInfo:l.default,rulesInfo:c.default},data:function(){return{activityData:{inner_type:"0",hour:"",minute:"",is_preheat:"0",preheat_time:"",rules:{success_num:2,virtual_success:"0",virtual_success_num:"",is_commission:"0",use_coupon:"0",limit_type:"0",single_buy:"1"},goods_info:[],group_num_list:[{num:2}]},basicInfoData:{title:"",client_type:[],activity_time:[],start_time:"",end_time:""},loading:!1,submitLoading:!1,id:"",type:"",status:""}},created:function(){var t=this.$route.query,e=t.id,i=t.type;this.id=e,this.type=i,this.id&&this.getGroupsActivityDetail()},computed:{isDisabled:function(){return"add"!==this.type},isSaveBtnDisabled:function(){var t,e;return-1===+(null===(t=this.activityData)||void 0===t?void 0:t.status)||-2===+(null===(e=this.activityData)||void 0===e?void 0:e.status)||"view"==this.type}},methods:{getGroupsActivityDetail:function(){var t=this;this.loading=!0,this.$api.groupsApi.getGroupsActivityDetail({id:this.id}).then((function(e){if(t.loading=!1,0===e.error){var i=e.data,a=i.title,s=i.client_type,o=i.start_time,l=i.end_time,c=i.preheat_time,u=i.rules,f=i.goods_info,p=(0,r.default)(i,d);"0000-00-00 00:00:00"==c&&(c=""),u.limit_num1="",u.limit_num2="",1==u.limit_type?u.limit_num1=u.limit_num:2==u.limit_type&&(u.limit_num2=u.limit_num),t.activityData=(0,n.default)((0,n.default)({rules:u},p),{},{preheat_time:c,goods_info:f}),t.activityData.hour=Math.floor(t.activityData.rules.limit_time/60),t.activityData.minute=t.activityData.rules.limit_time%60,t.formatLadderInfo(),t.status=p.status,t.basicInfoData={title:a,client_type:(null===s||void 0===s?void 0:s.split(","))||[],activity_time:[o,l],start_time:o,end_time:l}}}))},handleSave:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.id){e.next=4;break}return e.next=4,t.$refs.basicInfo.validateForm();case 4:return e.next=6,t.$refs.rulesInfo.validateForm();case 6:i=t.$refs.basicInfo.getParams(),a=t.$refs.rulesInfo.getParams(),t.id?(s={id:t.id,is_preheat:a.is_preheat,preheat_time:1==a.is_preheat?a.preheat_time:"",end_time:i.end_time},t.editActivity(s)):(n=Object.assign(i,a),t.saveActivity(n)),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.submitLoading=!1;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},saveActivity:function(t){var e=this;this.submitLoading=!0,this.$api.groupsApi.addGroupsActivity(t).then((function(t){0===t.error&&(e.$Message.success("保存成功"),e.$router.replace({path:"/plugins/market/groups/activity/list"}))})).finally((function(){e.submitLoading=!1}))},editActivity:function(t){var e=this;this.submitLoading=!0,this.$api.groupsApi.editGroupsActivity(t).then((function(t){0===t.error&&(e.$Message.success("编辑成功"),e.$router.replace({path:"/plugins/market/groups/activity/list"}))})).finally((function(){e.submitLoading=!1}))},formatLadderInfo:function(){var t=this,e=this.activityData.rules,i=this.activityData.goods_info;1==this.activityData.inner_type&&(this.activityData.group_num_list=Object.keys(e.success_num).map((function(t){return{num:e.success_num[t]}}))),i.forEach((function(e){e.has_option||(e.leader_price=-1==e.leader_price?"":e.leader_price,1==t.activityData.inner_type&&Object.keys(e.ladder_price).forEach((function(t){e["activity_price".concat(t)]=e.ladder_price[t]})))}))}}};e.default=u},4353:function(t,e,i){"use strict";i.r(e);var a=i("6887"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"43ed":function(t,e,i){"use strict";i.r(e);var a=i("a898"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"45a5":function(t,e,i){"use strict";i.r(e);var a=i("f278"),s=i("5f03");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("555b");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"9cb53ad0",null);e["default"]=o.exports},"46b7":function(t,e,i){t.exports=i.p+"static/dist/shop/img/goods_detail.png"},"47a5":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spell-group-index"},[i("preview",{attrs:{activityData:t.activityData}}),i("div",{staticClass:"right"},[i("kdx-content-bar",{scopedSlots:t._u([{key:"btn",fn:function(){return[i("Button",{staticClass:"primary-long",attrs:{type:"primary",disabled:t.isSaveBtnDisabled,loading:t.submitLoading},on:{click:t.handleSave}},[t._v("保存")]),i("Button",{staticClass:"default-long",attrs:{to:"/plugins/market/groups/activity/list"}},[t._v("取消")])]},proxy:!0}])},[i("div",{staticClass:"content"},[i("basic-info",{ref:"basicInfo",attrs:{type:t.type,data:t.basicInfoData,status:t.status,"is-disabled":t.isDisabled},on:{"update:data":function(e){t.basicInfoData=e}}}),i("rules-info",{ref:"rulesInfo",attrs:{type:t.type,activityData:t.activityData,"basic-info":t.basicInfoData,id:t.id,"is-disabled":t.isDisabled},on:{"update:activityData":function(e){t.activityData=e},"update:activity-data":function(e){t.activityData=e}}})],1)])],1)],1)},s=[]},4802:function(t,e,i){"use strict";i("a6b0")},4829:function(t,e,i){},"4c62":function(t,e,i){"use strict";i("5338")},"4eb9":function(t,e,i){"use strict";i.r(e);var a=i("1faf"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"4ec0":function(t,e,i){},5338:function(t,e,i){},5411:function(t,e,i){"use strict";i("5c2b")},"555b":function(t,e,i){"use strict";i("b6c7")},"58ac":function(t,e,i){"use strict";i.r(e);var a=i("3e3e"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"5a39":function(t,e,i){"use strict";i("fd46")},"5b77":function(t,e,i){"use strict";i.r(e);var a=i("d44e3"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"5c2b":function(t,e,i){},"5cf2":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"order-detail"},[i("div",{staticClass:"steps"},[i("Steps",{attrs:{current:t.current}},[i("Step",{attrs:{title:"已开团",content:t.info.created_at}}),i("Step",{attrs:{title:t.lastStep,status:t.status,content:t.lastTime}})],1)],1),i("div",{staticClass:"box"},[i("order-status",{attrs:{data:t.info,"user-list":t.list},on:{"on-change":t.confirmGroups}}),i("order-list",{attrs:{data:t.table.list,info:t.info},on:{"on-order":t.routeOrder}})],1)])},s=[]},"5f03":function(t,e,i){"use strict";i.r(e);var a=i("c045"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"60d1":function(t,e,i){"use strict";i("fe41")},6237:function(t,e,i){"use strict";i.r(e);var a=i("628b"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"628b":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("5530")),n=a(i("6e54")),r=a(i("110a")),o=i("2f62"),l={name:"OrderStatus",components:{ProgressBar:n.default,GroupUser:r.default},props:{data:{type:Object,default:function(){}},userList:{type:Array,default:function(){return[]}}},computed:(0,s.default)((0,s.default)({},(0,o.mapGetters)("config",["getAppPermMap"])),{},{pastGroups:function(){var t,e,i,a,s=null===(t=this.$store)||void 0===t||null===(e=t.state)||void 0===e||null===(i=e.config)||void 0===i||null===(a=i.apps)||void 0===a?void 0:a.groups;return this.getAppPermMap("groups")&&!(1!=(null===s||void 0===s?void 0:s.is_forever)&&1==(null===s||void 0===s?void 0:s.about_expire)&&1!=(null===s||void 0===s?void 0:s.is_free)&&0==(null===s||void 0===s?void 0:s.shop_app_status))}}),methods:{confirmGroups:function(){this.$emit("on-change")},readAll:function(){this.$refs["group_user"].setValue()}}};e.default=l},"628f":function(t,e,i){"use strict";i("b658")},"62dd":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("5530"));i("a9e3"),i("e9c4"),i("d81d"),i("d3b7"),i("159b"),i("b680"),i("b0c0"),i("99af");var n=a(i("313e")),r=a(i("89bd")),o={name:"ChartLine",props:{id:{type:String,required:!0},data:{type:Array,default:function(){return[]}},legend:{type:Array,default:function(){return[]}},legendStyle:{type:Object,default:function(){return{right:"0",top:"25"}}},xAxis:{type:Array,default:function(){return[]}},yAxis:{type:[Array,Object],default:function(){}},height:{type:Number,default:450},isAreaStyle:{type:Boolean,default:!1},areaStyle:{type:[Array,Object],default:function(){return[]}},loading:{type:Boolean,default:!1},grid:{type:Object,default:function(){}},lineColors:{type:Array,default:function(){return[]}},showYAxis:{type:Boolean,default:!1}},data:function(){return{myCharts:null,option:{title:{},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!1},tooltip:{trigger:"axis",axisPointer:{animation:!1,lineStyle:{color:"#BFBFBF"}},padding:[0],textStyle:{color:"#262B30",fontSize:12}},legend:(0,s.default)({icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:"#939799"},data:this.legend},this.legendStyle),xAxis:{type:"category",boundaryGap:!1,data:this.xAxis},yAxis:{nameTextStyle:{color:"#262B30"},splitLine:{lineStyle:{type:"dashed"}},axisLabel:{}},series:this.data}}},methods:{init:function(){n.default.registerTheme("theme",r.default),this.myCharts=n.default.init(document.getElementById("line_".concat(this.id)),r.default)},render:function(){var t=this;this.myCharts||this.init();var e=JSON.parse(JSON.stringify(this.option));if(Object.assign(e.grid,this.grid),e.legend.data=this.legend,this.lineColors.length&&(e.color=this.lineColors),e.xAxis.data=this.xAxis,this.yAxis instanceof Array)e.yAxis=this.yAxis.map((function(i,a){return i.splitLine=e.yAxis.splitLine,t.showYAxis&&1==a&&(i.inverse=!1),i}))||[],e.yAxis.forEach((function(t){var e;null!==t&&void 0!==t&&null!==(e=t.axisLabel)&&void 0!==e&&e.formatter||(t.axisLabel=(0,s.default)((0,s.default)({},t.axisLabel),{},{formatter:function(t){return t>=1e3?"".concat(parseFloat(t/1e3).toFixed(1),"K"):t}}))}));else if(this.yAxis instanceof Object){var i,a;e.yAxis=Object.assign(e.yAxis,this.yAxis),null!==(i=e.yAxis)&&void 0!==i&&null!==(a=i.axisLabel)&&void 0!==a&&a.formatter||(e.yAxis.axisLabel.formatter=function(t){return t>=1e3?"".concat(parseFloat(t/1e3).toFixed(1),"K"):t})}this.legend.length>1?e.series=this.legend.map((function(e,i){var a={name:e,type:"line",data:t.data[i]||[]};return t.showYAxis&&1==i&&(a.yAxisIndex=1),t.isAreaStyle&&(a.areaStyle=t.areaStyle[i]||{}),a})):(e.series=[{name:this.legend[0],type:"line",data:this.data||[]}],this.isAreaStyle&&(e.series[0].areaStyle=this.areaStyle||{})),e.tooltip.formatter=function(t){var e="",i=t[0].name;return t.forEach((function(t){var i=t.seriesName,a=t.value,s=t.color;e+='\n                                  <div style="display:flex;align-items:center;margin-top:4px;">\n                                  <span style="display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:8px;background:'.concat(s,';"></span>\n                                  <span style="color:#636669;">').concat(i,"：").concat(a,"</span>\n                                  </div>")})),'<div style="background:#fff;border-radius: 2px;padding: 12px 48px 12px 12px;box-shadow: 0px 4px 10px rgba(0, 49, 95, 0.08);">\n                                <div>'.concat(i,"</div>\n                                ").concat(e,"\n                        </div>")},this.myCharts.setOption(e)},handleResize:function(){this.myCharts&&this.myCharts.resize()}},mounted:function(){this.$emit("chartLineMounted"),window.addEventListener("resize",this.handleResize)}};e.default=o},"62ea":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"MarketOverview",components:{},props:{title:{type:String,default:"活动营销概览"},icon_show:{type:Boolean,default:!1},countData:{type:Object,default:function(){return{pay_price_sum:"0",order_count:"0",goods_pv_count:"0",sales_goods_total:"0"}}},time:{type:String,default:""},showHover:{type:Boolean,default:!1}},data:function(){return{data:{}}},computed:{updateTime:function(){var t,e,i,a;return console.log("update-time",null===(t=this.$store.state.config)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.updateTimeText),null===(i=this.$store.state.config)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.updateTimeText}},watch:{},created:function(){},mounted:function(){},methods:{}};e.default=i},"640c":function(t,e,i){},"64f8":function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3");var a={name:"ProgressBar",props:{current:{type:[Number,String],default:0},total:{type:[Number,String],default:1}},computed:{progress:function(){return parseInt(this.current/this.total*100)}}};e.default=a},6516:function(t,e,i){"use strict";i("6643")},"657e":function(t,e,i){"use strict";i.r(e);var a=i("d5ef"),s=i("a573");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("de35");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"7e7f2490",null);e["default"]=o.exports},6643:function(t,e,i){},6694:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d81d"),i("b0c0"),i("b64b");var s=a(i("657e")),n=a(i("b46b")),r=a(i("b58d")),o={components:{MarketOverview:s.default,ActivityChat:n.default,DataList:r.default},data:function(){return{data:{pay_price_sum:0,order_count:0},chartLine:{color:["#4A67FF","#FF9900"],data:[],legend:["浏览量（PV）","访客量（UV）"],xAxis:[],yAxis:{name:"单位(人)",minInterval:1},legendStyle:{right:"30",top:"25"},grid:{left:60,right:40,bottom:30}},chartPie:{legend:{orient:"vertical",left:60,top:90,bottom:0,data:[]},radius:["40%","60%"],center:["70%","50%"],data:[]},activityData:[],activityId:"",activity:{data:[],page:{pageSize:10,pageNumber:1}},goods:{data:[],page:{pageSize:10,pageNumber:1}}}},mounted:function(){this.getStatistics(),this.getLine(),this.getAllActivity(),this.getActivityData(),this.getGoodsData()},methods:{getStatistics:function(){var t=this;this.$api.groupsApi.getGroupsStatistics().then((function(e){var i,a,s;0===e.error&&(t.data=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.count,t.chartPie.data=(null===(a=e.data)||void 0===a?void 0:a.channel)||[],t.chartPie.legend.data=null===(s=e.data)||void 0===s?void 0:s.channel.map((function(t){return t.name})),t.$nextTick((function(){var e;null===(e=t.$refs.activity_chart)||void 0===e||e.renderPie()})))}))},getLine:function(){var t=this,e={};this.activityId&&(e.activity_id=this.activityId),this.$api.groupsApi.getGroupsLineData(e).then((function(e){0===e.error&&(t.chartLine.xAxis=Object.keys(e.data),t.chartLine.data=[t.chartLine.xAxis.map((function(t){var i;return(null===(i=e.data[t])||void 0===i?void 0:i.goods_pv_count)||0})),t.chartLine.xAxis.map((function(t){var i;return(null===(i=e.data[t])||void 0===i?void 0:i.member_pv_count)||0}))],t.$nextTick((function(){var e;null===(e=t.$refs.activity_chart)||void 0===e||e.renderLine()})))}))},getAllActivity:function(){var t=this;this.$api.groupsApi.getGroupActivities({is_all:1}).then((function(e){0===e.error&&(t.activityData=e.list,t.activityData.unshift({title:"全部",id:"all"}))}))},getActivityData:function(){var t=this,e={page:this.activity.page.pageNumber,pagesize:this.activity.page.pageSize};this.$api.groupsApi.getGroupsActivityData(e).then((function(e){0===e.error&&(console.log("res",e),t.activity.data=e.list||[],t.activity.total=e.total)}))},getGoodsData:function(){var t=this,e={page:this.goods.page.pageNumber,pagesize:this.goods.page.pageSize};this.$api.groupsApi.getGroupsGoodsData(e).then((function(e){0===e.error&&(t.goods.data=e.list||[],t.goods.total=e.total)}))},changeLine:function(t){this.activityId=t,this.getLine()},changeActivityPage:function(t){this.activity.page=t,this.getActivityData()},changeGoodsPage:function(t){this.goods.page=t,this.getGoodsData()}}};e.default=o},"673e":function(t,e,i){},6887:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var s=a(i("1da1")),n=a(i("2909")),r=a(i("5530"));i("a9e3"),i("ac1f"),i("1276"),i("fb6a"),i("d3b7"),i("d81d"),i("159b"),i("99af"),i("4e82");var o={name:"SpecificationsRules",components:{},props:{value:{type:Boolean,default:!1},goodsId:{type:[String,Number],default:""},type:{type:String,default:""},spaceRules:{type:Array,default:function(){return[]}},isDisabled:{type:Boolean,default:!1},ladderNum:{type:Array,default:function(){return[]}}},data:function(){var t=this;this.$createElement;return{loading:!1,modal:!1,specs:[],form:{goodsList:[]},colspan:{0:1,1:1,2:1},batchData:{activity_stock:"",activity_price1:"",activity_price2:"",activity_price3:"",leader_price:"",is_join:"0"},submitValid:!1,columns:[],specColumns:[],defaultColumns:[{title:"售卖价",key:"price",render:function(t,e){return t("div",["￥"+e.row.price])}},{title:"总库存",key:"stock",width:80,render:function(t,e){return t("div",[e.row.stock])}},{title:"参与拼团",slot:"is_join",width:100},{title:"拼团库存",slot:"activity_stock"}],ladderColumns:{},headColumn:{title:"团长价(非必填)",slot:"leader_price"},rules:{is_join:[],activity_price:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=t.form.goodsList[s],r=n.price,o=n.is_join;if("1"!=o)return a();Number(r)<=Number(i)?a(new Error("拼团价格需小于售价")):i?a():a(new Error("拼团价格不能为空"))}}],activity_stock:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=t.form.goodsList[s],r=n.stock,o=n.is_join;if("1"!=o)return a();Number(r)<Number(i)?a(new Error("拼团库存大于库存")):i?0===Number(i)?a(new Error("拼团库存不能为0")):a():a(new Error("拼团库存不能为空"))}}],activity_price1:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=t.form.goodsList[s],r=n.is_join,o=parseFloat(n.price);1==r&&(i?(i=parseFloat(i),o<=i&&a(new Error("拼团价格需小于售卖价"))):a(new Error("拼团价格不能为空"))),a()}}],activity_price2:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=e.field.slice(-1)-1,r=t.form.goodsList[s],o=r.is_join,l=parseFloat(r.price);if(1==o)if(i){i=parseFloat(i),l<i&&a(new Error("拼团价格需小于售卖价"));var c=r["activity_price".concat(n)];c&&parseFloat(c)<=i&&a(new Error("阶梯拼团价要比上一阶梯小"))}else a(new Error("拼团价格不能为空"));a()}}],activity_price3:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=e.field.slice(-1)-1,r=t.form.goodsList[s],o=r.is_join,l=parseFloat(r.price);if(1==o)if(i){i=parseFloat(i),l<i&&a(new Error("拼团价格需小于售卖价"));var c=r["activity_price".concat(n)];c&&c<=i&&a(new Error("阶梯拼团价要比上一阶梯小"))}else a(new Error("拼团价格不能为空"));a()}}],leader_price:[{validator:function(e,i,a){i=Number(i);var s=e.field.split(".")[1],n=t.form.goodsList[s],r=n.is_join,o=Number(null===n||void 0===n?void 0:n.price),l=Number((null===n||void 0===n?void 0:n["activity_price".concat(t.ladderNum.length)])||o);1==r&&i?o<=i?a(new Error("团长价格需小于售售卖价")):l<=i&&a(new Error("团长价格需小于拼团价格")):a(),a()}}]}}},watch:{goodsId:{handler:function(t){t&&this.getGoodsData(t)},immediate:!0},value:function(t){this.getGoodsData(this.goodsId),this.initColumns(),this.refreshInput(),this.modal=t},ladderNum:{handler:function(){this.setColumns()},immediate:!0,deep:!0}},computed:{allSeckill:{get:function(){return this.form.goodsList.every((function(t){return"1"==t.is_join}))?"1":"0"},set:function(t){this.batchData.is_join=t}}},methods:{getGoodsData:function(t){var e=this;this.loading=!0,this.$api.goodsApi.getGoodInformation({id:t}).then((function(t){if(0===t.error){e.specs=t.data.spec;var i=t.data.options.map((function(t){return e.spaceRules.length>0?e.spaceRules.map((function(i){var a=e.isDisabled?"id":"option_id";t.id==i[a]&&(t.activity_stock=(null===i||void 0===i?void 0:i.activity_stock)||"",t.is_join=(null===i||void 0===i?void 0:i.is_join)||"0",t.leader_price=-1==(null===i||void 0===i?void 0:i.leader_price)?"":null===i||void 0===i?void 0:i.leader_price,e.ladderNum.forEach((function(e,a){t["activity_price".concat(a+1)]=i.ladder_price[a+1]})))})):(t.activity_stock="",t.is_join="0",t.leader_price="",e.ladderNum.forEach((function(e,i){t["activity_price".concat(i+1)]=""}))),(0,r.default)({},t)}));e.initColumns(),e.initTable(i),e.initColspan(),e.loading=!1}}))},setColumns:function(){var t=this,e=this.$createElement,i=150*this.ladderNum.length;this.ladderColumns={slot:"activity_price",minWidth:i,renderHeader:function(){return e("div",{class:"flex"},[t.ladderNum.map((function(t){return e("p",{class:"table-title"},[t.num,"人拼团价"])}))])}},this.concatColumns()},initColumns:function(){this.$createElement;this.specColumns=this.specs.map((function(t,e){return{title:t.title,key:"",render:function(t,i){return t("div",[i.row.childSpecVal[e]])}}})),this.concatColumns()},concatColumns:function(){this.columns=[].concat((0,n.default)(this.specColumns),(0,n.default)(this.defaultColumns),[this.ladderColumns,this.headColumn])},initTable:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>1?this.form.goodsList=e.sort((function(t,e){for(var i=t.specs.split(",").map((function(t){return parseInt(t)})),a=e.specs.split(",").map((function(t){return parseInt(t)})),s=Math.min(i.length,a.length),n=0;n<s;n++)if(i[n]!==a[n])return i[n]-a[n]})):this.form.goodsList=e,this.form.goodsList.forEach((function(e){var i=[];t.specs.forEach((function(t){t.items.forEach((function(t){e.specs.indexOf(t.id)>-1&&i.push(t.title)}))})),e.childSpecVal=i}))},initColspan:function(){var t={0:1,1:1,2:1};this.specs.forEach((function(e,i){e.items.length>0&&(t[i]=e.items.length)})),t[0]=t[1]*(t[2]||1)||1,t[1]=t[2]||1,t[2]=t[2]?1:0,this.colspan=t},handleSpan:function(t){var e=t.rowIndex,i=t.columnIndex,a={rowspan:0,colspan:1};return i<this.specs.length?(e%this.colspan[i]==0&&(a={rowspan:this.colspan[i],colspan:1}),a):[1,1]},handleCancel:function(){this.modal=!1,this.$emit("input",this.modal)},validateForm:function(){var t=this;return new Promise((function(e,i){t.$refs["goodsForm"].validate((function(a){t.submitValid=!1,a?t.form.goodsList.some((function(t){return 1==t.is_join}))?e():(t.$Message.error("请至少选择一个规格参加活动"),i()):i()}))}))},handleOK:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.submitValid=!0,e.next=3,t.validateForm();case 3:i={id:t.goodsId,rules:t.form.goodsList.map((function(e){var i={option_id:e.id,activity_price:"0",activity_stock:e.activity_stock,leader_price:e.leader_price||-1,is_join:e.is_join,ladder_price:{}};return t.ladderNum.forEach((function(t,a){i.ladder_price[a+1]=e["activity_price".concat(a+1)]})),i}))},t.$emit("spaceGoods",i),t.handleCancel();case 6:case"end":return e.stop()}}),e)})))()},changeSeckill:function(t){this.form.goodsList.map((function(e){e.is_join=t}))},handleBatchChange:function(){var t=this;this.form.goodsList.forEach((function(e){t.batchData.activity_price1&&(e.activity_price1=t.batchData.activity_price1),t.batchData.activity_price2&&(e.activity_price2=t.batchData.activity_price2),t.batchData.activity_price3&&(e.activity_price3=t.batchData.activity_price3),t.batchData.activity_stock&&(e.activity_stock=t.batchData.activity_stock),e.leader_price=t.batchData.leader_price}))},refreshInput:function(){this.batchData=(0,r.default)((0,r.default)({},this.batchData),{},{activity_stock:"",activity_price1:"",activity_price2:"",activity_price3:"",leader_price:""})}}};e.default=o},"68d4":function(t,e,i){"use strict";i.r(e);var a=i("cf20"),s=i("43ed");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("d8bc");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"2fadeacc",null);e["default"]=o.exports},"6ab3":function(t,e,i){"use strict";i.r(e);var a=i("9900"),s=i("e17c");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("0378");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"ea54cac2",null);e["default"]=o.exports},"6b0c":function(t,e,i){"use strict";i.r(e);var a=i("fc62"),s=i("4eb9");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("ed04");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"fe9a7fd6",null);e["default"]=o.exports},"6e54":function(t,e,i){"use strict";i.r(e);var a=i("a44f"),s=i("aab7");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("60d1");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"04df0582",null);e["default"]=o.exports},"70a4":function(t,e,i){"use strict";i("03f4")},7162:function(t,e,i){"use strict";i.r(e);var a=i("dd8f"),s=i("bf10");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("9a0c");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"4d560851",null);e["default"]=o.exports},"74e7":function(t,e,i){},"75ea":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-list-item-box"},[i("div",{staticClass:"order-list-item",on:{click:t.handleClick}},[i("div",{staticClass:"header"},[i("div",{staticClass:"group-no"},[i("span",[t._v("拼团编号: "+t._s(t.data.team_no))]),i("kdx-copy-text",{attrs:{text:t.data.team_no}},[i("Button",{attrs:{type:"text"}},[t._v("复制")])],1)],1),2==t.data.success?i("div",{staticClass:"status"},[t._v(" 未成团 ")]):1==t.data.success?i("div",{staticClass:"status success-color"},[t._v(" 已成团 ")]):0==t.data.success?i("div",{staticClass:"status brand-color"},[t._v(" 待成团 ")]):t._e()]),i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.data.title)+" ")]),i("div",{staticClass:"info"},[i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v(" 拼团进度： ")]),i("div",{staticClass:"info-content"},[i("progress-bar",{attrs:{current:t.data.count,total:t.data.success_num}})],1)]),i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v(" 拼团类型： ")]),0==t.data.is_ladder?i("div",{staticClass:"info-type-brand flex"},[i("i",{staticClass:"iconfont icon-yingyong-pintuan-putong2"}),t._v(" 普通拼团 ")]):1==t.data.is_ladder?i("div",{staticClass:"info-type-warning flex"},[i("i",{staticClass:"iconfont icon-yingyong-pintuan-jieti2"}),t._v(" 阶梯拼团 ")]):t._e()]),i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v(" 开团时间： ")]),i("div",{staticClass:"info-content info-time"},[t._v(" "+t._s(t.data.created_at)+" ")])])]),i("div",{staticClass:"user-head"},[i("img",{attrs:{src:t.data.avatar,alt:""},on:{error:function(e){return t.replaceImage(e,"avatar")}}}),i("div",{staticClass:"user-mode"},[t._v(" 团长 ")])])])])])},s=[]},"7b9f":function(t,e,i){"use strict";i.r(e);var a=i("75ea"),s=i("cc8c");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("3a81");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"55f0e04c",null);e["default"]=o.exports},"7f56":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ladder-group-num"},[t._m(0),i("div",{staticClass:"content"},[i("Form",{ref:"form",attrs:{model:t.model,rules:t.rules}},t._l(t.model.list,(function(e,a){return i("div",{key:a,staticClass:"content-item"},[i("div",{staticClass:"name"},[t._v(" 第 "+t._s(a+1)+" 阶梯 ")]),i("div",{staticClass:"group-num"},[i("FormItem",{attrs:{prop:"list."+a+".num",rules:t.rules.num}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",value:e.num,number:"",fixed:0,"min-value":1,"max-value":100,disabled:t.isDisabled},on:{"on-change":function(e){return t.changeNum(a,e)}}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("人")])])],1)],1),i("div",{staticClass:"btn-del"},[i("Button",{directives:[{name:"show",rawName:"v-show",value:0!==a&&t.model.list.length==a+1,expression:"index !== 0 && model.list.length == index+1"}],attrs:{type:"text",disabled:t.isDisabled},on:{click:t.handleDelete}},[t._v("删除")])],1)])})),0)],1),t.model.list.length<3?i("div",{staticClass:"add"},[i("Button",{attrs:{type:"text",disabled:t.isDisabled},on:{click:t.handleAdd}},[t._v(" +添加拼团阶梯( "+t._s(t.model.list.length)+" / 3) ")])],1):t._e()])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("div",{staticClass:"name"},[t._v(" 阶梯 ")]),i("div",{staticClass:"group-num"},[t._v(" 拼团人数 ")]),i("div",{staticClass:"btn-del"})])}]},"7fd2":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"preview-index"},[a("div",{staticClass:"preview-title"},[t._v("拼团预览")]),a("div",{staticClass:"preview-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("3084"),alt:""}})]),a("div",{staticClass:"img"},[a("img",{attrs:{src:i("bb47"),alt:""}})]),a("div",{staticClass:"goods-img"},[a("img",{attrs:{src:t.$utils.media(t.data.goods_info.thumb),alt:""},on:{error:t.replaceImage}})]),a("div",{staticClass:"detail-activity"},[a("div",{staticClass:"activity-detail-content"},[a("div",{staticClass:"left"},[a("div",{staticClass:"price"},[a("span",{staticClass:"unit"},[t._v("￥")]),a("span",{staticClass:"price-num"},[t._v(t._s(Number(t.data.goods_info.activity_price)||20))])]),a("div",{staticClass:"group-price"},[a("div",{staticClass:"group-num"},[0==t.data.group_type?[t._v(" "+t._s(t.data.group_num)+"人拼团价 ")]:[t._v(" 人多更优惠 ")]],2),a("div",{staticClass:"del-price"},[t._v(" ￥"+t._s(t.data.goods_info.original_price||100)+" ")])]),a("span",{staticClass:"iconfont icon-pintuan2-1"})]),t._m(0)])]),a("div",{staticClass:"detail_info"},[a("div",{staticClass:"container"},[a("div",{staticClass:"title-floor floor flex"},[a("p",{staticClass:"title"},[t._v(t._s(t.data.goods_info.title))]),"1"==t.data.is_commission?a("div",{staticClass:"share-commission"},[t._m(1)]):t._e()]),t.data.goods_info.sub_name?a("div",{staticClass:"desc-floor floor"},[t._v(" "+t._s(t.data.goods_info.sub_name)+" ")]):t._e()])]),a("div",{staticClass:"detail_navbar van-hairline--top"},[t._m(2),t._m(3),a("div",{staticClass:"navbar-btn"},[1==t.data.rules.single_buy?a("div",{staticClass:"left-btn"},[a("div",{staticClass:"left-btn-desc"},[t._v("¥"+t._s(t.data.goods_info.price||999))]),a("div",{staticClass:"left-btn-label"},[t._v("单独购买")])]):t._e(),a("div",{staticClass:"right-btn"},[a("div",{staticClass:"left-btn-desc"},[t._v("¥"+t._s(t.data.goods_info.activity_price||999))]),a("span",{staticClass:"right-btn-text"},[t._v("我要开团")])])])])])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"seckill-surplus"},[t._v("活动剩余时间")]),i("div",{staticClass:"seckill-count"},[i("span",{staticClass:"text orange"},[t._v("2天")]),i("span",{staticClass:"time"},[t._v("23")]),i("span",{staticClass:"colon orange"},[t._v(":")]),i("span",{staticClass:"time"},[t._v("23")]),i("span",{staticClass:"colon orange"},[t._v(":")]),i("span",{staticClass:"time"},[t._v("23")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"commission"},[i("p",{staticClass:"money"},[i("span",{staticClass:"money-unit"},[t._v("￥")]),i("span",{staticClass:"num"},[t._v("5")])]),i("p",{staticClass:"word"},[t._v("预计佣金")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn-shop"},[i("span",{staticClass:"iconfont-m- icon-m-iconfontshop"}),i("span",{staticClass:"text"},[t._v("店铺")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn-shop"},[i("span",{staticClass:"iconfont-m- icon-m-xingxingkongxin"}),i("span",{staticClass:"text"},[t._v("收藏")])])}]},"80fd3":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var s=a(i("1da1")),n=a(i("2909")),r=a(i("5530"));i("a9e3"),i("ac1f"),i("1276"),i("d3b7"),i("d81d"),i("99af"),i("4e82"),i("159b");var o={name:"SpecificationsRules",components:{},props:{value:{type:Boolean,default:!1},goodsId:{type:[String,Number],default:""},type:{type:String,default:""},spaceRules:{type:Array,default:function(){return[]}},isDisabled:{type:Boolean,default:!1}},data:function(){var t=this;this.$createElement;return{loading:!1,modal:!1,specs:[],form:{goodsList:[]},colspan:{0:1,1:1,2:1},batchData:{activity_stock:"",activity_price:"",leader_price:"",is_join:"0"},submitValid:!1,columns:[],defaultColumns:[{title:"售卖价",key:"price",render:function(t,e){return t("div",["￥"+e.row.price])}},{title:"总库存",key:"stock",width:80,render:function(t,e){return t("div",[e.row.stock])}},{title:"参与拼团",slot:"is_join",width:100},{title:"拼团库存",slot:"activity_stock"},{title:"拼团价格",slot:"activity_price"},{title:"团长价(非必填)",slot:"leader_price"}],rules:{is_join:[],activity_price:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=t.form.goodsList[s],r=n.price,o=n.is_join;if("1"!=o)return a();Number(r)<=Number(i)?a(new Error("拼团价格需小于售价")):"1"!=o||i?a():a(new Error("拼团价格不能为空"))}}],activity_stock:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=t.form.goodsList[s],r=n.stock,o=n.is_join;if("1"!=o)return a();Number(r)<Number(i)?a(new Error("拼团库存大于库存")):i?0===Number(i)?a(new Error("拼团库存不能为0")):a():a(new Error("拼团库存不能为空"))}}],leader_price:[{validator:function(e,i,a){var s,n;i=Number(i);var r=e.field.split(".")[1],o=t.form.goodsList[r].is_join,l=Number(null===(s=t.form.goodsList[r])||void 0===s?void 0:s.price),c=Number((null===(n=t.form.goodsList[r])||void 0===n?void 0:n.activity_price)||l);1==o&&i&&(l<=i?a(new Error("团长价格需小于售售卖价")):c<=i&&a(new Error("团长价格需小于拼团价格"))),a()}}]}}},watch:{goodsId:{handler:function(t){t&&this.getGoodsData(t)},immediate:!0},value:function(t){this.getGoodsData(this.goodsId),this.handleColumns(),this.refreshInput(),this.modal=t}},computed:{allSeckill:{get:function(){return this.form.goodsList.every((function(t){return"1"==t.is_join}))?"1":"0"},set:function(t){this.batchData.is_join=t}}},methods:{getGoodsData:function(t){var e=this;this.loading=!0,this.$api.goodsApi.getGoodInformation({id:t}).then((function(t){if(0===t.error){e.specs=t.data.spec;var i=t.data.options.map((function(t){return e.spaceRules.length>0?e.spaceRules.map((function(i){var a=e.isDisabled?"id":"option_id";t.id==i[a]&&(t.activity_stock=(null===i||void 0===i?void 0:i.activity_stock)||"",t.activity_price=(null===i||void 0===i?void 0:i.activity_price)||"",t.is_join=(null===i||void 0===i?void 0:i.is_join)||"0",t.leader_price=-1==(null===i||void 0===i?void 0:i.leader_price)?"":null===i||void 0===i?void 0:i.leader_price)})):(t.activity_stock="",t.activity_price="",t.is_join="0",t.leader_price=""),(0,r.default)({},t)}));e.handleColumns(),e.initTable(i),e.initColspan(),e.loading=!1}}))},handleColumns:function(){this.initColumns(this.defaultColumns)},initColumns:function(t){this.$createElement;var e=this.specs.map((function(t,e){return{title:t.title,key:"",render:function(t,i){return t("div",[i.row.childSpecVal[e]])}}}));this.columns=[].concat((0,n.default)(e),(0,n.default)(t))},initTable:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>1?this.form.goodsList=e.sort((function(t,e){for(var i=t.specs.split(",").map((function(t){return parseInt(t)})),a=e.specs.split(",").map((function(t){return parseInt(t)})),s=Math.min(i.length,a.length),n=0;n<s;n++)if(i[n]!==a[n])return i[n]-a[n]})):this.form.goodsList=e,this.form.goodsList.forEach((function(e){var i=[];t.specs.forEach((function(t){t.items.forEach((function(t){e.specs.indexOf(t.id)>-1&&i.push(t.title)}))})),e.childSpecVal=i}))},initColspan:function(){var t={0:1,1:1,2:1};this.specs.forEach((function(e,i){e.items.length>0&&(t[i]=e.items.length)})),t[0]=t[1]*(t[2]||1)||1,t[1]=t[2]||1,t[2]=t[2]?1:0,this.colspan=t},handleSpan:function(t){var e=t.rowIndex,i=t.columnIndex,a={rowspan:0,colspan:1};return i<this.specs.length?(e%this.colspan[i]==0&&(a={rowspan:this.colspan[i],colspan:1}),a):[1,1]},handleCancel:function(){this.modal=!1,this.$emit("input",this.modal)},validateForm:function(){var t=this;return new Promise((function(e,i){t.$refs["goodsForm"].validate((function(a){t.submitValid=!1,a?t.form.goodsList.some((function(t){return"1"==t.is_join}))?e():(t.$Message.error("请至少选择一个规格参加活动"),i()):i()}))}))},handleOK:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.submitValid=!0,e.next=3,t.validateForm();case 3:i={id:t.goodsId,rules:t.form.goodsList.map((function(t){return{option_id:t.id,activity_stock:t.activity_stock,activity_price:t.activity_price,leader_price:t.leader_price||"-1",is_join:t.is_join}}))},t.$emit("spaceGoods",i),t.handleCancel();case 6:case"end":return e.stop()}}),e)})))()},changeSeckill:function(t){this.form.goodsList.map((function(e){e.is_join=t}))},handleBatchChange:function(){var t=this;this.form.goodsList.forEach((function(e){t.batchData.activity_price&&(e.activity_price=t.batchData.activity_price),t.batchData.activity_stock&&(e.activity_stock=t.batchData.activity_stock),e.leader_price=t.batchData.leader_price}))},refreshInput:function(){this.batchData=(0,r.default)((0,r.default)({},this.batchData),{},{activity_stock:"",activity_price:"",leader_price:""})}}};e.default=o},"81e9":function(t,e,i){"use strict";i.r(e);var a=i("3844"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},8499:function(t,e,i){},8859:function(t,e,i){},"8963d":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("notice-index")],1)},s=[]},"89e5":function(t,e,i){"use strict";i.r(e);var a=i("f235"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"8bdc":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"data-transaction-make-info"},[i("div",{staticClass:"market-overview-box"},[i("market-overview",{attrs:{icon_show:!0,"count-data":t.data}})],1),i("activity-chat",{ref:"activity_chart",attrs:{"chart-line":t.chartLine,"chart-pie":t.chartPie,"activity-data":t.activityData},on:{"on-line-change":t.changeLine}}),i("data-list",{attrs:{"activity-data":t.activity.data,"activity-total":t.activity.total,"goods-data":t.goods.data,"goods-total":t.goods.total},on:{"on-activity-page":t.changeActivityPage,"on-goods-page":t.changeGoodsPage}}),t._t("default")],2)},s=[]},"8dd36":function(t,e,i){},9146:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var s=a(i("1da1"));i("d3b7"),i("a15b");var n={name:"BasicInfo",props:{data:{type:Object,default:function(){}},isDisabled:{type:Boolean,default:!1},status:{type:String,default:""},type:{type:String,default:""}},data:function(){var t=this;return{model:{title:"",client_type:[],activity_time:[],start_time:"",end_time:""},rule:{title:[{required:!0,message:"请填写活动名称"}],client_type:[{required:!0,message:"请选择活动渠道"}],activity_time:[{required:!0,type:"array",fields:{0:{type:"date",required:!0,message:"请选择活动日期"},1:{type:"date",required:!0,message:"请选择活动日期"}}}],end_time:[{validator:function(t,e,i){e?i():i(new Error("请选择活动日期"))}}]},dateOptions:{disabledDate:function(e){return!t.model.start_time||new Date(e)<new Date(t.model.start_time)}}}},computed:{editabled:function(){return this.status&&("0"==this.status||"1"==this.status)&&"edit"==this.type}},watch:{data:{handler:function(t){this.model=Object.assign({},t)}}},methods:{validateForm:function(){var t=this;return new Promise((function(e,i){t.$refs["form"].validate(function(){var t=(0,s.default)(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a?e():i();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},changeActivityTime:function(t){this.model.start_time=t[0],this.model.end_time=t[1],this.$emit("update:data",this.model)},getParams:function(){return{title:this.model.title,client_type:this.model.client_type.join(","),start_time:this.model.start_time,end_time:this.model.end_time}},changeEndTime:function(t){this.model.end_time=t}}};e.default=n},"92aa":function(t,e,i){"use strict";i.r(e);var a=i("1b35"),s=i("b3db");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("1964");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"13b93a97",null);e["default"]=o.exports},"96ac":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("9794")),n={name:"index",components:{noticeIndex:s.default},props:{},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{}};e.default=n},"97a2":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rules-goods-table"},[i("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[i("Table",{attrs:{columns:t.columns,data:t.form.goodsList},scopedSlots:t._u([{key:"shop",fn:function(e){var a=e.row;return[i("div",{staticClass:"shop-box"},[i("div",{staticClass:"image"},[i("img",{attrs:{src:t.$media(a.thumb)},on:{error:t.replaceImage}})]),i("div",{staticClass:"title-content"},[i("div",{staticClass:"content-text"},[i("span",{staticClass:"mark",style:1==a.has_option?"display:inline-block":"display:none"},[t._v("多")]),i("span",{staticClass:"mark",class:0==a.type?"real":1==a.type?"virtual":2==a.type?"secret":"appoint"},[t._v(t._s(0==a.type?"实":1==a.type?"虚":2==a.type?"密":"预"))]),i("span",{staticClass:"text"},[t._v(t._s(a.title))])])])])]}},{key:"price",fn:function(e){var a=e.row;return[i("div",{staticClass:"price"},[1==a.has_option?i("div",{staticClass:"flex-wrap"},[i("div",[t._v("￥"+t._s(a.min_price))]),i("div",[t._v("~")]),i("div",[t._v("￥"+t._s(a.max_price))])]):i("span",[t._v("￥"+t._s(a.price))])])]}},{key:"stock",fn:function(e){var a=e.row;return[i("div",[t._v(t._s(parseInt(a.stock)>999?"999+":parseInt(a.stock)))])]}},{key:"rules",fn:function(e){var a=e.row,s=e.index;return[1==a.has_option?i("div",{staticClass:"deposit-btn"},[t.isSetRules(a)?i("Button",{staticClass:"default-primary on-set",on:{click:function(e){return t.handleSelectOption(a.id)}}},[t._v("已设置（可点击修改） ")]):i("Button",{staticClass:"default-primary off-set",on:{click:function(e){return t.handleSelectOption(a.id)}}},[t._v("未设置拼团库存及价格 ")])],1):i("div",{staticClass:"flex"},[i("div",{staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+s+".activity_stock",rules:t.rules.activity_stock}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:t.isDisabled},model:{value:t.form.goodsList[s].activity_stock,callback:function(e){t.$set(t.form.goodsList[s],"activity_stock",e)},expression:"form.goodsList[index].activity_stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)],1),t.ladderNum.length?t._l(t.ladderNum,(function(e,a){return i("div",{key:a,staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+s+".activity_price"+(a+1),rules:t.rules["activity_price"+(a+1)]}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[s]["activity_price"+(a+1)],callback:function(e){t.$set(t.form.goodsList[s],"activity_price"+(a+1),e)},expression:"form.goodsList[index][`activity_price${i+1}`]"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1)})):t._e(),i("div",{staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+s+".leader_price",rules:t.rules.leader_price}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[s].leader_price,callback:function(e){t.$set(t.form.goodsList[s],"leader_price",e)},expression:"form.goodsList[index].leader_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1)],2)]}}])})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.form.goodsList&&t.form.goodsList.length>0,expression:"form.goodsList && form.goodsList.length > 0"}],staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1),i("ladder-specifications-rules",{attrs:{goodsId:t.specificationsData.goodsId,type:t.type,"is-disabled":t.isDisabled,"ladder-num":t.ladderNum,spaceRules:t.specificationsData.spaceRules},on:{spaceGoods:t.handleSpaceGoods},model:{value:t.specificationsData.rulesModal,callback:function(e){t.$set(t.specificationsData,"rulesModal",e)},expression:"specificationsData.rulesModal"}})],1)},s=[]},9900:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"data_charts_line"},[i("div",{style:{width:"100%",height:t.height+"px"},attrs:{id:"line_"+t.id}})])},s=[]},"9a05":function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("5530"));i("a9e3");var n=i("2f62"),r={name:"TypeList",props:{value:{type:[Number,String],default:0},items:{type:Array,default:function(){return[]}},isDisabled:{type:Boolean,default:!1}},computed:(0,s.default)((0,s.default)({},(0,n.mapState)("config",{serviceFunction:function(t){return t.serviceFunction}})),{},{isLadder:function(){var t;return null===(t=this.serviceFunction)||void 0===t?void 0:t.ladder_group}}),methods:{clickItem:function(t){this.isDisabled||t===this.value||(this.$emit("input",t),this.$emit("on-change",t))}}};e.default=r},"9a0c":function(t,e,i){"use strict";i("673e")},"9ac5":function(t,e,i){"use strict";i.r(e);var a=i("be6a"),s=i("89e5");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"9a858d1e",null);e["default"]=o.exports},"9bb0":function(t,e,i){"use strict";i.r(e);var a=i("1a1b"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"9f7d":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-modal-frame",{attrs:{title:"设置拼团商品信息",value:t.modal,width:"1500","mask-closable":!1,loading:t.loading,footerHide:t.isDisabled},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOK}},[i("div",{staticClass:"multi-specification"},[i("div",{staticClass:"setting flex"},[i("span",[t._v("批量设置：")]),i("div",{staticClass:"setting-input flex"},[i("Checkbox",{attrs:{"true-value":"1","false-value":"0",disabled:t.isDisabled},on:{"on-change":t.changeSeckill},model:{value:t.allSeckill,callback:function(e){t.allSeckill=e},expression:"allSeckill"}},[t._v("参与拼团 ")]),i("kdx-rr-input",{attrs:{type:"text",placeholder:"拼团库存",number:"",fixed:0,maxValue:999999999,disabled:t.isDisabled},model:{value:t.batchData.activity_stock,callback:function(e){t.$set(t.batchData,"activity_stock",e)},expression:"batchData.activity_stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])]),t.ladderNum.length?t._l(t.ladderNum,(function(e,a){return i("kdx-rr-input",{key:a,attrs:{type:"text",placeholder:e.num+"人拼团价",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.batchData["activity_price"+(a+1)],callback:function(e){t.$set(t.batchData,"activity_price"+(a+1),e)},expression:"batchData[`activity_price${index + 1}`]"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])})):t._e(),i("kdx-rr-input",{attrs:{type:"text",placeholder:"团长价(非必填)",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.batchData.leader_price,callback:function(e){t.$set(t.batchData,"leader_price",e)},expression:"batchData.leader_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),i("Button",{staticClass:"default-primary",attrs:{disabled:t.isDisabled},on:{click:t.handleBatchChange}},[t._v("应用")])],2)]),i("div",{staticClass:"table-list"},[i("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[i("Table",{ref:"table",attrs:{columns:t.columns,data:t.form.goodsList,"span-method":t.handleSpan},scopedSlots:t._u([{key:"is_join",fn:function(e){var a=e.index;return[i("FormItem",{attrs:{prop:"goodsList."+a+".is_join",rules:t.rules.is_join}},[i("Checkbox",{attrs:{"true-value":"1","false-value":"0",disabled:t.isDisabled},model:{value:t.form.goodsList[a].is_join,callback:function(e){t.$set(t.form.goodsList[a],"is_join",e)},expression:"form.goodsList[index].is_join"}},[t._v("参与 ")])],1)]}},{key:"activity_stock",fn:function(e){var a=e.index;return[i("FormItem",{attrs:{prop:"goodsList."+a+".activity_stock",rules:t.rules.activity_stock}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:t.isDisabled},model:{value:t.form.goodsList[a].activity_stock,callback:function(e){t.$set(t.form.goodsList[a],"activity_stock",e)},expression:"form.goodsList[index].activity_stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)]}},{key:"activity_price",fn:function(e){var a=e.index;return[i("div",{staticClass:"flex"},[t.ladderNum.length?t._l(t.ladderNum,(function(e,s){return i("div",{key:s,staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+a+".activity_price"+(s+1),rules:t.rules["activity_price"+(s+1)]}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[a]["activity_price"+(s+1)],callback:function(e){t.$set(t.form.goodsList[a],"activity_price"+(s+1),e)},expression:"form.goodsList[index][`activity_price${i+1}`]"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1)})):t._e()],2)]}},{key:"leader_price",fn:function(e){var a=e.index;return[i("FormItem",{attrs:{prop:"goodsList."+a+".leader_price",rules:t.rules.leader_price}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[a].leader_price,callback:function(e){t.$set(t.form.goodsList[a],"leader_price",e)},expression:"form.goodsList[index].leader_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)]}}])})],1)],1)])])},s=[]},a3c0:function(t,e,i){"use strict";i("4829")},a44f:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"progress-bg"},[i("div",{staticClass:"progress",class:{success:100===t.progress},style:{width:t.progress+"%"}})]),i("div",{staticClass:"num",class:{success:100===t.progress}},[i("span",{staticClass:"current"},[t._v(t._s(t.current))]),t._v(" / "),i("span",{staticClass:"total"},[t._v(t._s(t.total))])])])},s=[]},a4d0:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spell-group-order-list"},[i("search-header",{attrs:{"inner-type":t.innerType},on:{"on-search":t.handleSearch}}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list"},[t.list.length>0?i("div",{staticClass:"table-list-content"},t._l(t.list,(function(e){return i("list-item",{key:e.id,attrs:{data:e},on:{"on-click":t.clickItem}})})),1):t._e(),0===t.list.length?i("div",{staticClass:"table-no-list"},[t._v(" 暂无数据 ")]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length > 0"}],staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{total:t.total,showSizer:!1},on:{"on-change":t.changePage}})],1)]),t._t("default")],2)},s=[]},a573:function(t,e,i){"use strict";i.r(e);var a=i("62ea"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},a6b0:function(t,e,i){},a7de:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-header-bar",[i("Form",{ref:"form",attrs:{model:t.model,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[i("FormItem",{attrs:{label:"活动名称："}},[i("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"活动名称"},on:{"on-enter":t.handleSearch},model:{value:t.model.keyword,callback:function(e){t.$set(t.model,"keyword",e)},expression:"model.keyword"}})],1),i("FormItem",{attrs:{label:"拼团编号："}},[i("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"拼团编号"},on:{"on-enter":t.handleSearch},model:{value:t.model.team_no,callback:function(e){t.$set(t.model,"team_no",e)},expression:"model.team_no"}})],1),i("FormItem",{attrs:{label:"拼团状态："}},[i("Select",{staticClass:"width-160",model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}},t._l(t.statusList,(function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),i("FormItem",{attrs:{label:"拼团类型："}},[i("Select",{staticClass:"width-160",model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.innerType,(function(e){return i("Option",{key:e.type,attrs:{value:e.type}},[t._v(t._s(e.title))])})),1)],1),i("FormItem",{attrs:{label:"开团时间："}},[i("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"开团时间"},on:{"on-change":t.changeDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),i("div",{staticClass:"ivu-form-item-btn"},[i("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),i("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)},s=[]},a898:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("841c");var s=a(i("5530")),n=a(i("9ac5")),r=a(i("d2d6")),o={name:"index",components:{SearchHeader:n.default,DataList:r.default},data:function(){var t=this;this.$createElement;return{loading:!1,page:{pageSize:10,pageNumber:1},search:{},data:[],total:0,innerType:[],columns:[{title:"活动名称",key:"title"},{title:"拼团类型",slot:"type"},{title:"活动时间",slot:"date"},{title:"手动停止时间",key:"stop_time",render:function(e,i){return e("div",[t.getStopTime(i.row)])}},{title:"活动状态",slot:"status",width:160},{title:"操作",slot:"action"}],currentId:""}},created:function(){this.getList(),this.getGroupsType()},methods:{getGroupsType:function(){var t=this;this.$api.groupsApi.getGroupsType().then((function(e){if(0===e.error){var i=e.data,a=void 0===i?[]:i;a.unshift({type:"all",title:"全部"}),t.innerType=a}}))},getList:function(){var t=this;this.loading=!0;var e=(0,s.default)((0,s.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber});this.$api.groupsApi.getGroupActivities(e).then((function(e){t.loading=!1,0===e.error&&(t.data=e.list,t.total=e.total)}))},handleSearch:function(t){this.search=(0,s.default)((0,s.default)({},this.search),t),this.refreshTable()},changePage:function(t){this.page=t,this.getList()},handleView:function(t){this.$router.push({path:"/plugins/market/groups/activity/index",query:{id:t,type:"view"}})},handleEdit:function(t){this.$router.push({path:"/plugins/market/groups/activity/index",query:{id:t,type:"edit"}})},handleStop:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"活动停止后将无法恢复，确认停止？",onOk:function(){e.stopGroupsActivity(t)},onCancel:function(){}})},stopGroupsActivity:function(t){var e=this;this.$api.groupsApi.stopGroupsActivity({id:t}).then((function(t){0===t.error&&(e.refreshTable(),e.$Message.success("操作成功"))}))},handleDelete:function(t){var e=this,i="自动结束的活动可能仍有团长进行拼团，删除活动后待支付的订单自动取消，待成团的订单处理成拼团失败 ，请确认此活动下是否仍有团长在开团？";this.$Modal.confirm({title:"确认删除",content:i,onOk:function(){e.deleteGroupsActivity(t.id)},onCancel:function(){}})},deleteGroupsActivity:function(t){var e=this;this.$api.groupsApi.deleteGroupsActivity({id:t}).then((function(t){0===t.error&&(e.refreshTable(),e.$Message.success("删除成功"))}))},handleActivityData:function(t){var e=this;this.currentId=t,this.$nextTick((function(){e.$refs["data_list"].setValue()}))},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["page"].reset(),this.getList()},getTime:function(t){return"0000-00-00 00:00:00"===t?"-":t},getStopTime:function(t){return-2==t.status?"0000-00-00 00:00:00"===t.stop_time?"-":t.stop_time:"-"}}};e.default=o},aa0e:function(t,e,i){"use strict";i.r(e);var a=i("1516"),s=i("ecb6");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("628f");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},aab7:function(t,e,i){"use strict";i.r(e);var a=i("64f8"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},ad02:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAqUExURUdwTP+ZPf+YN/+YPf+ZPv+ZPv+ZP/+XOP+ZPv+ZP////v/Fkv/w4v+sYxH2jKsAAAAJdFJOUwAZChLGpuUWa516CZEAAAG+SURBVEjHrZa/TsMwEMbTMrD2kkrtmDZD16YLcxd2BiTYEWIMBdSZAd6AwaJ5ANy8QJsnAMQDVOJhSOok9vlf3IpvaaX8dP5sn+/O85C60RLgYTb2zOrGUCkITUwEgmZ6ZgRICwcGwFeZCShSYp2ARlMJutdBgxZDGltdMChsD4RCGQOJoUZmiIcyM3yDpxYIkgqKbVDQaptbr1Ybnt8i3TwzU4m4t2si6U3cH7u2IVHEQoFgqa9CF9xUZelRhebsS49b6hshn5+SGQr4nZgh4EdpgcImuS3Q1Ou0Q0mTS3sor7/nItRD0DvdMIb9mTeJFx8NrRAUNK+yhFL6UUM7ARogiNA1g7YZQRCI0HYfgaRfaxECDK3oT/nzSz8tUEqzTemfBTRAxXrZd04raxxCxgs3tFC2I8S8u2KpktoQCYqlC07zfCddcKBAmizwcRaYoM4/QT239HV6CE5Pyu1xOj3zThuU8NLzZC09tXMVEot0ZepVZu7EcliX8ZdLpCtUyOvjHFi7i7XY+4e0DVsDgsNamVNTdGqvbo3aFGpx+PCgH0PCYwYaDeXrBqiJA+M2rrkNfoXG0RnAUh4h/wCPrwb31nuEpgAAAABJRU5ErkJggg=="},b06b:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3");var a={name:"DataList",props:{activityData:{type:Array,default:function(){return[]}},goodsData:{type:Array,default:function(){return[]}},activityTotal:{type:Number,default:0},goodsTotal:{type:Number,default:0}},data:function(){var t=this;this.$createElement;return{activity:{columns:[{title:"活动名称",key:"title",minWidth:230},{title:"活动时间",slot:"activity_time",minWidth:130,maxWidth:300},{title:"停止时间",key:"stop_time",render:function(e,i){return e("div",[t.getTime(i.row[i.column.key])])}},{title:"拼团订单",key:"order_count",render:function(e,i){return e("div",[t.formatData(i.row.order_count)])}},{title:"成交金额",slot:"pay_price_sum",render:function(e,i){return e("div",[t.formatData(i.row.pay_price_sum)])}},{title:"退款金额",slot:"refund_price_sum",minWidth:90,render:function(e,i){return e("div",[t.formatData(i.row.refund_price_sum)])}},{title:"参与人数",key:"pay_member_count",minWidth:90,maxWidth:200,render:function(e,i){return e("div",[t.formatData(i.row.pay_member_count)])}}]},goods:{columns:[{title:"商品名称",slot:"goods"},{title:"成交商品数",key:"order_count"},{title:"成交金额",slot:"pay_price"},{title:"退款金额",slot:"refund_price"},{title:"参与人数",key:"member_count"}]}}},methods:{changeActivityPage:function(t){this.$emit("on-activity-page",t)},changeGoodsPage:function(t){this.$emit("on-goods-page",t)},getTime:function(t){return"0000-00-00 00:00:00"===t?"-":t},formatData:function(t){return t&&"number"!=typeof t?t:"-"}}};e.default=a},b2a6:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("6e54")),n={name:"ListItem",components:{ProgressBar:s.default},props:{data:{type:Object,default:function(){}}},methods:{handleClick:function(){this.$emit("on-click",this.data.id)}}};e.default=n},b3db:function(t,e,i){"use strict";i.r(e);var a=i("fcf7"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},b446:function(t,e,i){"use strict";i.r(e);var a=i("6694"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},b46b:function(t,e,i){"use strict";i.r(e);var a=i("0f38"),s=i("2ad6");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("0804");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"61eae56d",null);e["default"]=o.exports},b58d:function(t,e,i){"use strict";i.r(e);var a=i("da70"),s=i("3734");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("cdb6");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"6971f62d",null);e["default"]=o.exports},b658:function(t,e,i){},b6c7:function(t,e,i){},b7a8:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("5530")),n={props:{innerType:{type:Array,default:function(){return[]}}},data:function(){return{model:{keyword:"",team_no:"",status:"all",type:"all",start_time:"",end_time:""},date:[],statusList:[{value:"all",label:"全部"},{value:"0",label:"待成团"},{value:"1",label:"已成团"},{value:"2",label:"未成团"}]}},methods:{addActivity:function(){this.$router.push({path:"/plugins/market/groups/activity/index",query:{type:"add"}})},changeDate:function(t){this.model.start_time=t[0],this.model.end_time=t[1]},handleSearch:function(){var t=(0,s.default)((0,s.default)({},this.model),{},{status:"all"===this.model.status?"":this.model.status,type:"all"===this.model.type?"":this.model.type});this.$emit("on-search",t)},handleReset:function(){this.reset(),this.handleSearch()},reset:function(){this.model={keyword:"",status:"all",type:"all",start_time:"",end_time:""},this.date=[]}}};e.default=n},b7b6:function(t,e,i){"use strict";i.r(e);var a=i("80fd3"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},b856:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("1276"),i("a434"),i("d3b7");var a={name:"LadderGroupNum",props:{isDisabled:{type:Boolean,default:!1},data:{type:Array,default:function(){return[{num:2}]}}},data:function(){var t=this;return{model:{list:[]},list:[],item:{},rules:{num:[{validator:function(e,i,a){var s=e.field.split(".")[1];if(i){if(i=parseInt(i),s>0){var n,r,o=t.model.list[s-1].num,l=null===(n=t.model.list)||void 0===n||null===(r=n[s+1])||void 0===r?void 0:r.num;o&&o>=i?a("要大于上一阶梯人数"):l&&l<=i&&a("要比下一阶梯的小")}a()}else a(new Error("拼团人数不能为空"))}}]}}},mounted:function(){var t;this.model.list=null!==(t=this.data)&&void 0!==t&&t.length?this.data:[{num:2}]},watch:{},methods:{handleAdd:function(){this.model.list.push({num:""}),this.updateData()},changeNum:function(t,e){this.model.list[t].num=e.target.value,this.updateData()},handleDelete:function(){this.model.list.splice(this.model.list.length-1,1),this.updateData()},updateData:function(){this.$emit("update:data",this.model.list)},validateForm:function(){var t=this;return new Promise((function(e,i){t.$refs["form"].validate((function(t){t?e():i()}))}))}}};e.default=a},bd61:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"seckill-basic-info"},[i("Form",{ref:"form",attrs:{model:t.model,"label-width":120,rules:t.rule},nativeOn:{submit:function(t){t.preventDefault()}}},[i("kdx-form-title",[t._v("基本信息")]),i("FormItem",{attrs:{label:"活动名称：",prop:"title"}},[i("Input",{staticClass:"width-340",class:{"input-disabled":t.isDisabled},attrs:{placeholder:"请输入活动名称",maxlength:"20","show-word-limit":"",disabled:t.isDisabled},model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}})],1),t.editabled?i("FormItem",{attrs:{label:"活动期限：",required:""}},[i("div",{staticClass:"flex"},[i("DatePicker",{staticClass:"width-250",attrs:{value:t.model.start_time,type:"datetime",placeholder:"开始时间",disabled:""}}),i("div",{staticClass:"marginL-10 marginR-10"},[t._v("~")]),i("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"end_time"}},[i("DatePicker",{staticClass:"width-250",attrs:{value:t.model.end_time,options:t.dateOptions,type:"datetime",placeholder:"结束时间"},on:{"on-change":t.changeEndTime}})],1)],1)]):i("FormItem",{attrs:{label:"活动期限：",prop:"activity_time"}},[i("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动期限",disabled:t.isDisabled},on:{"on-change":t.changeActivityTime},model:{value:t.model.activity_time,callback:function(e){t.$set(t.model,"activity_time",e)},expression:"model.activity_time"}})],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"活动渠道：",prop:"client_type"}},[i("CheckboxGroup",{model:{value:t.model.client_type,callback:function(e){t.$set(t.model,"client_type",e)},expression:"model.client_type"}},[i("Checkbox",{attrs:{label:"20",disabled:t.isDisabled}},[t._v(" 微信公众号 ")]),i("Checkbox",{attrs:{label:"21",disabled:t.isDisabled}},[t._v(" 微信小程序 ")]),i("Checkbox",{attrs:{label:"10",disabled:t.isDisabled}},[t._v(" 手机浏览器H5 ")]),i("Checkbox",{attrs:{label:"30",disabled:t.isDisabled}},[t._v(" 头条/抖音小程序 ")])],1)],1)],1)],1)},s=[]},be6a:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-header-bar",{scopedSlots:t._u([{key:"header",fn:function(){return[i("Button",{attrs:{type:"primary",disabled:t.noManagePerm},on:{click:t.addActivity}},[t._v("+添加活动")])]},proxy:!0}])},[i("Form",{ref:"form",attrs:{model:t.model,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[i("FormItem",{attrs:{label:"活动名称："}},[i("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"活动名称"},on:{"on-enter":t.handleSearch},model:{value:t.model.keyword,callback:function(e){t.$set(t.model,"keyword",e)},expression:"model.keyword"}})],1),i("FormItem",{attrs:{label:"拼团类型："}},[i("Select",{staticClass:"width-160",model:{value:t.model.inner_type,callback:function(e){t.$set(t.model,"inner_type",e)},expression:"model.inner_type"}},t._l(t.innerType,(function(e){return i("Option",{key:e.type,attrs:{value:e.type}},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("FormItem",{attrs:{label:"活动状态："}},[i("Select",{staticClass:"width-160",model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}},t._l(t.statusList,(function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),i("FormItem",{attrs:{label:"活动时间："}},[i("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"活动时间"},on:{"on-change":t.changeDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),i("div",{staticClass:"ivu-form-item-btn"},[i("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),i("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)},s=[]},bf10:function(t,e,i){"use strict";i.r(e);var a=i("9a05"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},bfe7:function(t,e,i){},c045:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("1276"),i("a9e3"),i("d3b7"),i("fb6a"),i("d81d");var s=a(i("f2e6")),n={name:"RulesGoods",components:{specificationsRules:s.default},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:""},isDisabled:{type:Boolean,default:!1}},data:function(){var t=this,e=this.$createElement;return{page:{pageSize:10,pageNumber:1},total:0,specificationsData:{rulesModal:!1,goodsId:"",spaceRules:[]},form:{goodsList:[]},columns:[{title:"商品",slot:"shop",minWidth:220},{title:"售卖价",slot:"price",minWidth:130},{title:"现库存",slot:"stock",minWidth:80},{slot:"rules",minWidth:450,renderHeader:function(){return e("div",{class:"flex"},[e("p",{class:"table-title"},["拼团库存"]),e("p",{class:"table-title"},["拼团价格"]),e("p",{class:"table-title"},["团长价(非必填)"])])}},{title:"操作",key:"action",width:80,render:function(e,i){return e("Button",{attrs:{type:"text",disabled:t.isDisabled},class:"action-btn",on:{click:function(){t.handleDelete(i.index)}}},["删除"])}}],rules:{activity_stock:[{validator:function(e,i,a){var s=e.field.split(".")[1];i?0===Number(i)?a(new Error("拼团库存不能为0")):Number(t.form.goodsList[s].stock)<Number(i)?a(new Error("拼团库存大于现库存")):a():a(new Error("拼团库存不能为空"))}}],activity_price:[{validator:function(e,i,a){var s=e.field.split(".")[1];i?Number(t.form.goodsList[s].price)<=Number(i)?a(new Error("拼团价格需小于售卖价")):a():a(new Error("拼团价格不能为空"))}}],leader_price:[{validator:function(e,i,a){var s,n,r=e.field.split(".")[1],o=null===(s=t.form.goodsList[r])||void 0===s?void 0:s.price,l=(null===(n=t.form.goodsList[r])||void 0===n?void 0:n.activity_price)||o;i&&(Number(o)<=Number(i)?a(new Error("团长价格需小于售售卖价")):Number(l)<=Number(i)&&a(new Error("团长价格需小于拼团价格"))),a()}}]}}},watch:{value:{handler:function(){var t=this;this.$nextTick((function(){t.reset()}))},immediate:!0}},created:function(){},mounted:function(){},methods:{validateForm:function(){var t=this;return new Promise((function(e,i){t.form.goodsList.some((function(t){return 1!=t.has_option}))?t.$refs["goodsForm"].validate((function(t){t?e():i()})):(t.form.goodsList.some((function(t){return!t.rules}))&&(t.$Message.error("每个商品必须有一个规格参加活动"),i()),e())}))},reset:function(){var t;null===(t=this.$refs["page"])||void 0===t||t.reset(),this.page={pageSize:10,pageNumber:1},this.getPageData()},getPageData:function(){this.total=this.value.length;var t=this.page.pageSize*(this.page.pageNumber-1),e=this.page.pageSize*this.page.pageNumber;this.form.goodsList=this.value.slice(t,e)},changePage:function(t){this.page=t,this.getPageData()},handleDelete:function(t){var e=(this.page.pageNumber-1)*this.page.pageSize+t;this.$emit("delete",e)},handleSelectOption:function(t){var e=this;this.specificationsData.rulesModal=!0,this.specificationsData.goodsId=t,this.form.goodsList.map((function(i){var a;i.id==t&&(null===i||void 0===i||null===(a=i.rules)||void 0===a?void 0:a.length)>0&&(e.specificationsData.spaceRules=i.rules)}))},handleSpaceGoods:function(t){var e=this.value.map((function(e){return e.id==t.id&&(e.goods_id=e.id,e.rules=t.rules),e}));this.$emit("input",e)},isSetRules:function(t){var e,i;return(null===(e=t.rules)||void 0===e?void 0:e.length)>0&&(null===(i=t.rules)||void 0===i?void 0:i.some((function(t){return"1"==t.is_join})))}}};e.default=n},c1f8:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"GroupUser",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{value:!1}},methods:{setValue:function(){this.value=!this.value}}};e.default=i},c2bf:function(t,e,i){},c383:function(t,e,i){},c90e:function(t,e,i){"use strict";i.r(e);var a=i("7fd2"),s=i("e0d0");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("1040");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"ccc9ad7a",null);e["default"]=o.exports},cc8c:function(t,e,i){"use strict";i.r(e);var a=i("b2a6"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},cdb6:function(t,e,i){"use strict";i("e25d")},cf20:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spell-group-list"},[i("search-header",{ref:"search_header",attrs:{"inner-type":t.innerType},on:{"on-search":t.handleSearch}}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list"},[i("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"type",fn:function(e){var a=e.row;return[i("div",[i("kdx-tag-label",{attrs:{type:"0"===a.inner_type?"info":"warning",size:"small"}},[t._v(" "+t._s("0"===a.inner_type?"普通拼团":"阶梯拼团")+" ")])],1)]}},{key:"date",fn:function(e){var a=e.row;return[i("div",{staticClass:"time"},[t._v("起："+t._s(t.getTime(a.start_time)))]),i("div",{staticClass:"time"},[t._v("止："+t._s(t.getTime(a.end_time)))])]}},{key:"status",fn:function(e){var a=e.row;return["1"===a.status?i("kdx-status-text",{attrs:{type:"success"}},[t._v("进行中")]):t._e(),"-1"===a.status?i("kdx-status-text",{attrs:{type:"danger"}},[t._v("已停止")]):t._e(),"-2"===a.status?i("kdx-status-text",{attrs:{type:"danger"}},[t._v("手动停止")]):t._e(),"0"===a.status?i("kdx-status-text",{attrs:{type:"warning"}},[t._v("未开始")]):t._e()]}},{key:"action",fn:function(e){var a=e.row;return[i("div",{staticClass:"btn-box"},[i("Button",{attrs:{type:"text",disabled:-1==a.status||-2==a.status||0==a.status},on:{click:function(e){return t.handleStop(a.id)}}},[t._v("停止 ")]),i("Button",{attrs:{type:"text"},on:{click:function(e){return t.handleView(a.id)}}},[t._v("查看")]),"1"==a.status||"0"==a.status?i("Button",{attrs:{type:"text"},on:{click:function(e){return t.handleEdit(a.id)}}},[t._v("编辑")]):t._e(),"0"!==a.status?i("Button",{attrs:{type:"text"},on:{click:function(e){return t.handleActivityData(a.id)}}},[t._v("数据")]):t._e(),i("Button",{attrs:{type:"text",disabled:1==a.status},on:{click:function(e){return t.handleDelete(a)}}},[t._v("删除")])],1)]}}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.length>0,expression:"data.length > 0"}],staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1),i("data-list",{ref:"data_list",attrs:{id:t.currentId}}),t._t("default")],2)},s=[]},d2d6:function(t,e,i){"use strict";i.r(e);var a=i("0680"),s=i("dd60");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("a3c0");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"6322be0c",null);e["default"]=o.exports},d44e3:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("2909"));i("ac1f"),i("1276"),i("a9e3"),i("fb6a"),i("d81d"),i("99af"),i("d3b7"),i("a434");var n=a(i("e489")),r={name:"RulesGoods",components:{LadderSpecificationsRules:n.default},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:""},isDisabled:{type:Boolean,default:!1},ladderNum:{type:Array,default:function(){return[]}}},data:function(){var t=this;this.$createElement;return{page:{pageSize:10,pageNumber:1},specificationsData:{rulesModal:!1,goodsId:"",spaceRules:[]},form:{goodsList:[]},columns:[],defaultColumns:[{title:"商品",slot:"shop",minWidth:220},{title:"售卖价",slot:"price",minWidth:130},{title:"现库存",slot:"stock",minWidth:80}],actionColumns:{title:"操作",key:"action",width:80,render:function(e,i){return e("Button",{attrs:{type:"text",disabled:t.isDisabled},class:"action-btn",on:{click:function(){t.handleDelete(i.index)}}},["删除"])}},rules:{activity_stock:[{validator:function(e,i,a){var s=e.field.split(".")[1];i?0===Number(i)?a(new Error("拼团库存不能为0")):Number(t.form.goodsList[s].stock)<Number(i)?a(new Error("拼团库存大于现库存")):a():a(new Error("拼团库存不能为空"))}}],activity_price:[{validator:function(e,i,a){var s=e.field.split(".")[1];i?Number(t.form.goodsList[s].price)<=Number(i)?a(new Error("拼团价格需小于售卖价")):a():a(new Error("拼团价格不能为空"))}}],activity_price1:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=t.form.goodsList[s],r=parseFloat(n.price);i?(i=parseFloat(i),r<=i&&a(new Error("拼团价格需小于售卖价"))):a(new Error("拼团价格不能为空")),a()}}],activity_price2:[{validator:function(e,i,a){console.log("rule------");var s=e.field.split(".")[1],n=e.field.slice(-1)-1,r=t.form.goodsList[s],o=parseFloat(r.price);if(console.log("value",i),i){i=parseFloat(i),o<=i&&a(new Error("拼团价格需小于售卖价"));var l=r["activity_price".concat(n)];l&&parseFloat(l)<=i&&a(new Error("阶梯拼团价要比上一阶梯小")),a()}else a(new Error("拼团价格不能为空"))}}],activity_price3:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=e.field.slice(-1)-1,r=t.form.goodsList[s],o=parseFloat(r.price);if(i){i=parseFloat(i),o<=i&&a(new Error("拼团价格需小于售卖价"));var l=r["activity_price".concat(n)];l&&parseFloat(l)<=i&&a(new Error("阶梯拼团价要比上一阶梯小")),a()}else a(new Error("拼团价格不能为空"))}}],leader_price:[{validator:function(e,i,a){var s=e.field.split(".")[1],n=t.form.goodsList[s],r=null===n||void 0===n?void 0:n.price,o=null===n||void 0===n?void 0:n["activity_price".concat(t.ladderNum.length)];i&&(Number(r)<=Number(i)?a(new Error("团长价格需小于售售卖价")):Number(o)<=Number(i)&&a(new Error("团长价格需小于拼团价格"))),a()}}]}}},computed:{total:function(){var t;return(null===(t=this.form.goodsList)||void 0===t?void 0:t.length)||0}},watch:{value:{handler:function(t){this.form.goodsList=t},immediate:!0},ladderNum:{handler:function(){this.setColumns()},immediate:!0,deep:!0}},created:function(){},mounted:function(){},methods:{setColumns:function(){var t=this,e=this.$createElement,i=300+150*this.ladderNum.length,a={slot:"rules",minWidth:i,renderHeader:function(){return e("div",{class:"flex"},[e("p",{class:"table-title"},["拼团库存"]),t.ladderNum.map((function(t){return e("p",{class:"table-title"},[t.num,"人拼团价"])})),e("p",{class:"table-title"},["团长价(非必填)"])])}};this.columns=[].concat((0,s.default)(this.defaultColumns),[a,this.actionColumns])},validateForm:function(){var t=this;return new Promise((function(e,i){t.form.goodsList.some((function(t){return 1!=t.has_option}))?t.$refs["goodsForm"].validate((function(t){t?e():i()})):(t.form.goodsList.some((function(t){return!t.rules}))&&(t.$Message.error("每个商品必须有一个规格参加活动"),i()),e())}))},changePage:function(t){this.page=t},handleDelete:function(t){this.form.goodsList.splice(t,1),this.$emit("input",this.form.goodsList)},handleSelectOption:function(t){var e=this;this.specificationsData.rulesModal=!0,this.specificationsData.goodsId=t,this.form.goodsList.map((function(i){var a;i.id==t&&(null===i||void 0===i||null===(a=i.rules)||void 0===a?void 0:a.length)>0&&(e.specificationsData.spaceRules=i.rules)}))},handleSpaceGoods:function(t){this.form.goodsList=this.form.goodsList.map((function(e){return e.id==t.id&&(e.goods_id=e.id,e.rules=t.rules),e})),this.$emit("input",this.form.goodsList)},isSetRules:function(t){var e,i;return(null===(e=t.rules)||void 0===e?void 0:e.length)>0&&(null===(i=t.rules)||void 0===i?void 0:i.some((function(t){return"1"==t.is_join})))}}};e.default=r},d5ef:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"market-overview"},[a("div",{staticClass:"card-panel-title"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),t.updateTime?a("span",{staticClass:"time"},[t._v(t._s(t.updateTime))]):t._e()]),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[a("div",{staticClass:"flex card-panel-price"},[t.icon_show?a("div",{staticClass:"icon"},[a("img",{attrs:{src:i("1324"),alt:""}})]):t._e(),a("div",[a("div",[t._v("成交总金额 "),a("kdx-hint-tooltip",[t._v(" 全部拼团活动的支付金额的总和，包含退款金额 ")])],1),a("div",{staticClass:"price"},[t._v("¥"+t._s(t.countData.pay_price_sum||0))])])])])]),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[a("div",{staticClass:"flex card-panel-price"},[t.icon_show?a("div",{staticClass:"icon"},[a("img",{attrs:{src:i("e7ea"),alt:""}})]):t._e(),a("div",[a("div",[t._v("累计订单数 "),a("kdx-hint-tooltip",[t._v(" 全部拼团活动的订单总数，包含取消订单数 ")])],1),a("div",{staticClass:"price"},[t._v(t._s(t.countData.order_count||0))])])])])]),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[a("div",{staticClass:"flex card-panel-price"},[t.icon_show?a("div",{staticClass:"icon"},[a("img",{attrs:{src:i("fe87"),alt:""}})]):t._e(),a("div",[a("div",[t._v("活动总浏览量 "),a("kdx-hint-tooltip",[t._v(" 全部拼团活动，浏览商品详情的数据的累计，不去重 ")])],1),a("div",{staticClass:"price"},[t._v(t._s(t.countData.goods_pv_count||0))])])])])]),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[a("div",{staticClass:"flex card-panel-price"},[t.icon_show?a("div",{staticClass:"icon"},[a("img",{attrs:{src:i("ad02"),alt:""}})]):t._e(),a("div",[a("div",[t._v("活动商品数量 "),a("kdx-hint-tooltip",[t._v(" 拼团活动在数据更新时，所有参与活动的商品总数量 ")])],1),a("div",{staticClass:"price"},[t._v(t._s(t.countData.sales_goods_total||0))])])])])])],1)],1)},s=[]},d615:function(t,e,i){"use strict";i.r(e);var a=i("8bdc"),s=i("b446");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("4c62");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"3f81631d",null);e["default"]=o.exports},d8bc:function(t,e,i){"use strict";i("bfe7")},da70:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"groups-data-list"},[i("Tabs",{attrs:{value:"name1",animated:!1}},[i("TabPane",{attrs:{label:"活动数据",name:"name1"}},[i("Table",{attrs:{columns:t.activity.columns,data:t.activityData},scopedSlots:t._u([{key:"activity_time",fn:function(e){var a=e.row;return[i("div",{staticClass:"time flex"},[t._v("起："+t._s(t.getTime(a.start_time)))]),i("div",{staticClass:"time flex"},[t._v("止："+t._s(t.getTime(a.end_time)))])]}},{key:"pay_price_sum",fn:function(e){var a=e.row;return[i("div",{staticClass:"activity-price"},[t._v(" "+t._s(a.pay_price_sum)+" ")])]}}])}),i("div",{staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{total:t.activityTotal},on:{"on-change":t.changeActivityPage}})],1)],1),i("TabPane",{attrs:{label:"商品数据",name:"name2"}},[i("Table",{attrs:{columns:t.goods.columns,data:t.goodsData},scopedSlots:t._u([{key:"goods",fn:function(e){var a=e.row;return[i("div",{staticClass:"goods"},[i("div",{staticClass:"image"},[i("img",{attrs:{src:t.$media(a.thumb),alt:""},on:{error:t.replaceImage}})]),i("div",{staticClass:"title"},[t._v(" "+t._s(a.title)+" ")])])]}},{key:"pay_price",fn:function(e){var a=e.row;return[i("div",{staticClass:"activity-price"},[t._v(" "+t._s(a.pay_price)+" ")])]}},{key:"refund_price",fn:function(e){var a=e.row;return[i("div",{staticClass:"activity-price"},[t._v(" "+t._s(a.refund_price)+" ")])]}}])}),i("div",{staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{total:t.goodsTotal},on:{"on-change":t.changeGoodsPage}})],1)],1)],1)],1)},s=[]},dd60:function(t,e,i){"use strict";i.r(e);var a=i("ed2b"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},dd8f:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"type-list"},[i("kdx-hint-tooltip",{scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"type-item",class:{checked:"0"==t.value,disabled:t.isDisabled},on:{click:function(e){return t.clickItem(0)}}},[i("span",{staticClass:"iconfont icon-yingyong-pintuan-putong"}),i("span",{staticClass:"text"},[t._v("普通拼团")]),i("kdx-svg-icon",{staticClass:"checked-icon",attrs:{type:"icon-yes1"}})],1)]},proxy:!0}])},[i("div",{staticClass:"text"},[i("p",[t._v("用户下单开团后，邀请好友")]),i("p",[t._v("拼团，以优惠价格购买，提")]),i("p",[t._v("升店铺转化")])])]),t.isLadder?i("kdx-hint-tooltip",{scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"type-item",class:{"checked-ladder":"1"==t.value,disabled:t.isDisabled},on:{click:function(e){return t.clickItem(1)}}},[i("span",{staticClass:"iconfont icon-yingyong-pintuan-jieti"}),i("span",{staticClass:"text"},[t._v("阶梯拼团")]),i("kdx-svg-icon",{staticClass:"checked-icon",attrs:{type:"icon-yes2"}})],1)]},proxy:!0}],null,!1,611532601)},[i("div",{staticClass:"text"},[i("p",[t._v("人数越多价格越低，用低价")]),i("p",[t._v("刺激用户发起拉人更多的拼")]),i("p",[t._v("团，高效裂变")])])]):t._e()],1)},s=[]},de35:function(t,e,i){"use strict";i("fab6")},deba:function(t,e,i){"use strict";i.r(e);var a=i("279a"),s=i("6237");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("f881");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"fbbd091a",null);e["default"]=o.exports},e0d0:function(t,e,i){"use strict";i.r(e);var a=i("004d"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},e17c:function(t,e,i){"use strict";i.r(e);var a=i("62dd"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},e25d:function(t,e,i){},e270:function(t,e,i){"use strict";i.r(e);var a=i("8963d"),s=i("2791");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},e489:function(t,e,i){"use strict";i.r(e);var a=i("9f7d"),s=i("4353");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("3b75");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"77b599a9",null);e["default"]=o.exports},e84f:function(t,e,i){},e9e9:function(t,e,i){"use strict";i.r(e);var a=i("bd61"),s=i("13d1");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("101e");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"0a84ff20",null);e["default"]=o.exports},ecb6:function(t,e,i){"use strict";i.r(e);var a=i("f6f2"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},ed04:function(t,e,i){"use strict";i("e84f")},ed2b:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d3b7");var a={props:{id:{type:String,required:!0}},data:function(){return{total:0,page:{pageNumber:1,pageSize:10},columns:[{title:"商品",key:"",slot:"goods",width:295},{title:"已售出数量",key:"order_count"},{title:"成交金额",key:"pay_price"},{title:"退款金额",key:"refund_price"},{title:"销售数量",key:"total"},{title:"参与人数",key:"member_count"}],data:[],loading:!1,value:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&this.getList()},getList:function(){var t=this;this.loading=!0;var e={page:this.page.pageNumber,pagesize:this.page.pageSize,id:this.id};this.$api.groupsApi.getGroupsActivityListData(e).then((function(e){0===e.error&&(t.data=e.list,t.total=e.total)})).finally((function(){t.loading=!1}))},handleCancel:function(){this.setValue()},handlePageChange:function(t){this.page=t,this.getList()}}};e.default=a},f235:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("5530")),n={props:{innerType:{type:Array,default:function(){return[]}}},data:function(){return{model:{keyword:"",status:"all",inner_type:"all",start_time:"",end_time:""},date:[],statusList:[{value:"all",label:"全部"},{value:"1",label:"进行中"},{value:"0",label:"未开始"},{value:"-1",label:"停止"},{value:"-2",label:"手动停止"}]}},computed:{noManagePerm:function(){return!this.$getPermMap("groups.manage")}},methods:{addActivity:function(){this.$router.push({path:"/plugins/market/groups/activity/index",query:{type:"add"}})},changeDate:function(t){this.model.start_time=t[0],this.model.end_time=t[1]},handleSearch:function(){var t=(0,s.default)((0,s.default)({},this.model),{},{status:"all"===this.model.status?"":this.model.status,inner_type:"all"===this.model.inner_type?"":this.model.inner_type});this.$emit("on-search",t)},handleReset:function(){this.reset(),this.handleSearch()},reset:function(){this.model={keyword:"",status:"all",inner_type:"all",start_time:"",end_time:""},this.date=[]}}};e.default=n},f278:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rules-goods-table"},[i("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[i("Table",{attrs:{columns:t.columns,data:t.form.goodsList},scopedSlots:t._u([{key:"shop",fn:function(e){var a=e.row;return[i("div",{staticClass:"shop-box"},[i("div",{staticClass:"image"},[i("img",{attrs:{src:t.$media(a.thumb)},on:{error:t.replaceImage}})]),i("div",{staticClass:"title-content"},[i("div",{staticClass:"content-text"},[i("span",{staticClass:"mark",style:1==a.has_option?"display:inline-block":"display:none"},[t._v("多")]),i("span",{staticClass:"mark",class:0==a.type?"real":1==a.type?"virtual":2==a.type?"secret":"appoint"},[t._v(t._s(0==a.type?"实":1==a.type?"虚":2==a.type?"密":"预"))]),i("span",{staticClass:"text"},[t._v(t._s(a.title))])])])])]}},{key:"price",fn:function(e){var a=e.row;return[i("div",{staticClass:"price"},[1==a.has_option?i("div",{staticClass:"flex-wrap"},[i("div",[t._v("￥"+t._s(a.min_price))]),i("div",[t._v("~")]),i("div",[t._v("￥"+t._s(a.max_price))])]):i("span",[t._v("￥"+t._s(a.price))])])]}},{key:"stock",fn:function(e){var a=e.row;return[i("div",[t._v(t._s(parseInt(a.stock)>999?"999+":parseInt(a.stock)))])]}},{key:"rules",fn:function(e){var a=e.row,s=e.index;return[1==a.has_option?i("div",{staticClass:"deposit-btn"},[t.isSetRules(a)?i("Button",{staticClass:"default-primary on-set",on:{click:function(e){return t.handleSelectOption(a.id)}}},[t._v("已设置（可点击修改） ")]):i("Button",{staticClass:"default-primary off-set",on:{click:function(e){return t.handleSelectOption(a.id)}}},[t._v("未设置拼团库存及价格 ")])],1):i("div",{staticClass:"flex"},[i("div",{staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+s+".activity_stock",rules:t.rules.activity_stock}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:t.isDisabled},model:{value:t.form.goodsList[s].activity_stock,callback:function(e){t.$set(t.form.goodsList[s],"activity_stock",e)},expression:"form.goodsList[index].activity_stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)],1),i("div",{staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+s+".activity_price",rules:t.rules.activity_price}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[s].activity_price,callback:function(e){t.$set(t.form.goodsList[s],"activity_price",e)},expression:"form.goodsList[index].activity_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),i("div",{staticClass:"table-input"},[i("FormItem",{attrs:{prop:"goodsList."+s+".leader_price",rules:t.rules.leader_price}},[i("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:t.isDisabled},model:{value:t.form.goodsList[s].leader_price,callback:function(e){t.$set(t.form.goodsList[s],"leader_price",e)},expression:"form.goodsList[index].leader_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1)])]}}])})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.form.goodsList&&t.form.goodsList.length>0,expression:"form.goodsList && form.goodsList.length > 0"}],staticClass:"footer-page"},[i("kdx-page-component",{ref:"page",attrs:{size:"small",total:t.total},on:{"on-change":t.changePage}})],1),i("specifications-rules",{attrs:{goodsId:t.specificationsData.goodsId,type:t.type,"is-disabled":t.isDisabled,spaceRules:t.specificationsData.spaceRules},on:{spaceGoods:t.handleSpaceGoods},model:{value:t.specificationsData.rulesModal,callback:function(e){t.$set(t.specificationsData,"rulesModal",e)},expression:"specificationsData.rulesModal"}})],1)},s=[]},f2e6:function(t,e,i){"use strict";i.r(e);var a=i("2e31"),s=i("b7b6");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("4802");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"73ef1c4d",null);e["default"]=o.exports},f6f2:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("487f")),n={name:"index",components:{noticeList:s.default},props:{},data:function(){return{type:{plugin_name:"groups",group_name:"buyer_notice",group_item_name:"buyer_notice"}}},computed:{},created:function(){},mounted:function(){},methods:{toDetail:function(t){this.$router.push({path:"/plugins/market/groups/message/index",query:{type_code:t.type_code,items:t.items}})}}};e.default=n},f73e:function(t,e,i){"use strict";i.r(e);var a=i("a4d0"),s=i("81e9");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("16b6");var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"257b822d",null);e["default"]=o.exports},f881:function(t,e,i){"use strict";i("8859")},fab6:function(t,e,i){},fbe4:function(t,e,i){"use strict";i.r(e);var a=i("a7de"),s=i("138b");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);var r=i("2877"),o=Object(r["a"])(s["default"],a["a"],a["b"],!1,null,"9aa0bd7c",null);e["default"]=o.exports},fc62:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"groups-rules-info"},[i("Form",{ref:"rules_form",attrs:{model:t.model,"label-width":120,rules:t.rule}},[i("kdx-form-title",[t._v("规则设置")]),i("FormItem",{attrs:{label:"拼团类型："}},[i("type-list",{attrs:{"is-disabled":t.isDisabled},on:{"on-change":t.changeType},model:{value:t.model.inner_type,callback:function(e){t.$set(t.model,"inner_type",e)},expression:"model.inner_type"}})],1),"1"==t.model.inner_type?i("FormItem",{attrs:{label:"成团人数："}},[i("ladder-group-num",{ref:"ladder_group_num",attrs:{data:t.model.group_num_list,"is-disabled":t.isDisabled},on:{"update:data":function(e){return t.$set(t.model,"group_num_list",e)}}})],1):t._e(),i("FormItem",{ref:"goods_info",attrs:{label:"拼团商品：",prop:"goods_info"}},[i("div",{staticClass:"next-box"},[i("Button",{staticClass:"default-primary",attrs:{disabled:t.isDisabled},on:{click:t.addGoods}},[t._v("选择拼团商品")]),i("kdx-hint-text",[t._v("提示：拼团库存不得大于商品库存，用户付款成功即扣除库存；拼团不支持会员折扣")]),t.model.goods_info&&t.model.goods_info.length>0?i("div",{staticClass:"goods-box"},["1"==t.model.inner_type?i("ladder-rules-goods",{ref:"goods_ladder_goods",attrs:{"is-disabled":t.isDisabled,type:t.type,"ladder-num":t.model.group_num_list},model:{value:t.model.goods_info,callback:function(e){t.$set(t.model,"goods_info",e)},expression:"model.goods_info"}}):i("rules-goods",{ref:"goods_rule",attrs:{"is-disabled":t.isDisabled,type:t.type},on:{delete:t.handleDelete},model:{value:t.model.goods_info,callback:function(e){t.$set(t.model,"goods_info",e)},expression:"model.goods_info"}})],1):t._e()],1)]),i("div",{staticClass:"validity"},[i("div",{staticClass:"flex"},[i("FormItem",{attrs:{label:"拼团有效期：",prop:"hour"}},[i("kdx-rr-input",{staticClass:"width-100",attrs:{placeholder:"请输入",number:"","min-value":0,maxValue:999999999,fixed:0,disabled:t.isDisabled},model:{value:t.model.hour,callback:function(e){t.$set(t.model,"hour",e)},expression:"model.hour"}}),i("span",{staticClass:"form-item-explain"},[t._v("时")])],1),i("FormItem",{attrs:{prop:"minute","label-width":0}},[i("kdx-rr-input",{staticClass:"width-100",attrs:{placeholder:"请输入",number:"","min-value":0,fixed:0,"max-value":59,disabled:t.isDisabled},model:{value:t.model.minute,callback:function(e){t.$set(t.model,"minute",e)},expression:"model.minute"}}),i("span",{staticClass:"form-item-explain"},[t._v("分")])],1)],1),i("kdx-hint-text",[t._v("用户需在有效期内成团，超时则拼团失败")])],1),"0"==t.model.inner_type?i("FormItem",{attrs:{label:"成团人数：",prop:"rules.success_num"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入2-100",number:"",fixed:0,"min-value":2,"max-value":100,disabled:t.isDisabled},model:{value:t.model.rules.success_num,callback:function(e){t.$set(t.model.rules,"success_num",e)},expression:"model.rules.success_num"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("人")])])],1):t._e(),i("FormItem",{attrs:{label:"模拟成团："}},[i("RadioGroup",{model:{value:t.model.rules.virtual_success,callback:function(e){t.$set(t.model.rules,"virtual_success",e)},expression:"model.rules.virtual_success"}},[i("Radio",{attrs:{label:"1",disabled:t.isDisabled}},[t._v("开启")]),i("Radio",{attrs:{label:"0",disabled:t.isDisabled}},[t._v("关闭")])],1),i("kdx-hint-text",[t._v("开启模拟成团后，拼团有效期内人数未满的团，系统将会模拟“匿名买家”凑满人数，使该团成团。")]),i("kdx-hint-text",{staticStyle:{"padding-top":"0"}},[t._v("你只需要对已付款参团的真实买家发货。建议合理开启，以提高成团率。")]),1==t.model.rules.virtual_success?i("FormItem",{staticClass:"marginB-0 paddingT-10",attrs:{label:"最多支持虚拟",prop:"rules.virtual_success_num"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入1-100",number:"",fixed:0,"min-value":1,"max-value":100,disabled:t.isDisabled},model:{value:t.model.rules.virtual_success_num,callback:function(e){t.$set(t.model.rules,"virtual_success_num",e)},expression:"model.rules.virtual_success_num"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("人")])])],1):t._e()],1),t.hiddenCommision?t._e():i("FormItem",{attrs:{label:"分销："}},[i("RadioGroup",{model:{value:t.model.rules.is_commission,callback:function(e){t.$set(t.model.rules,"is_commission",e)},expression:"model.rules.is_commission"}},[i("Radio",{attrs:{label:"1",disabled:t.isDisabled}},[t._v("参与")]),i("Radio",{attrs:{label:"0",disabled:t.isDisabled}},[t._v("不参与")])],1),i("kdx-hint-text",{staticStyle:{"max-width":"610px"}},[t._v("默认不参与分销，分销开启后才能生效，如果活动内包含未设置分销的商品，选择后也不会产生分佣 ")])],1),i("FormItem",{attrs:{label:"优惠券："}},[i("RadioGroup",{model:{value:t.model.rules.use_coupon,callback:function(e){t.$set(t.model.rules,"use_coupon",e)},expression:"model.rules.use_coupon"}},[i("Radio",{attrs:{label:"1",disabled:t.isDisabled}},[t._v("支持")]),i("Radio",{attrs:{label:"0",disabled:t.isDisabled}},[t._v("不支持")])],1),i("kdx-hint-text",[t._v("开启支持叠加使用优惠券则该活动商品支持使用平台内满足条件的优惠券")])],1),i("FormItem",{staticClass:"limit-type",attrs:{label:"限购次数："}},[i("RadioGroup",{attrs:{vertical:""},model:{value:t.model.rules.limit_type,callback:function(e){t.$set(t.model.rules,"limit_type",e)},expression:"model.rules.limit_type"}},[i("Radio",{attrs:{label:"0",disabled:t.isDisabled}},[t._v("不限制")]),i("Radio",{attrs:{label:"1",disabled:t.isDisabled}},[i("FormItem",{staticClass:"radio-item limit1",attrs:{prop:"rules.limit_num1"}},[i("div",{staticClass:"flex"},[i("span",[t._v("活动期内每人最多购买")]),i("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",number:"",fixed:0,"max-value":999999999,"min-value":1,disabled:t.isDisabled},model:{value:t.model.rules.limit_num1,callback:function(e){t.$set(t.model.rules,"limit_num1",e)},expression:"model.rules.limit_num1"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1),i("kdx-hint-text",[t._v("若开启，活动期间内每人每件商品最多支持购买数量，如商品A活动期间最多支持购买200件")])],1)],1),i("Radio",{attrs:{label:"2",disabled:t.isDisabled}},[i("FormItem",{staticClass:"radio-item limit2",attrs:{prop:"rules.limit_num2"}},[i("div",{staticClass:"flex"},[i("span",[t._v("活动期内每人每天最多购买")]),i("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",number:"",fixed:0,"max-value":999999999,"min-value":1,disabled:t.isDisabled},model:{value:t.model.rules.limit_num2,callback:function(e){t.$set(t.model.rules,"limit_num2",e)},expression:"model.rules.limit_num2"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1),i("kdx-hint-text",[t._v("若开启，活动期间内每人每天针对单个商品最多购买数量，如每人每天最多购买商品A200件")])],1)],1)],1)],1),i("FormItem",{attrs:{label:"商品单购：",prop:"rules.single_buy"}},[i("RadioGroup",{model:{value:t.model.rules.single_buy,callback:function(e){t.$set(t.model.rules,"single_buy",e)},expression:"model.rules.single_buy"}},[i("Radio",{attrs:{label:"1",disabled:t.isDisabled}},[t._v("支持")]),i("Radio",{attrs:{label:"0",disabled:t.isDisabled}},[t._v("不支持")])],1),i("kdx-hint-text",[t._v("开启后，商品详情展示单独购买按钮，支持用户单独购买")])],1),i("FormItem",{attrs:{label:"活动预热：",prop:"is_preheat"}},[i("RadioGroup",{model:{value:t.model.is_preheat,callback:function(e){t.$set(t.model,"is_preheat",e)},expression:"model.is_preheat"}},[i("Radio",{attrs:{label:"1",disabled:t.disabledPreheat}},[t._v("开启")]),i("Radio",{attrs:{label:"0",disabled:t.disabledPreheat}},[t._v("不开启")])],1),i("kdx-hint-text",[t._v("开启后，商品详情展示未开始的拼团活动，但活动开始前用户无法拼团购买。")]),"1"===t.model.is_preheat?i("div",{staticClass:"next-box"},[i("FormItem",{attrs:{label:"预热时间：",prop:"preheat_time"}},[i("DatePicker",{staticClass:"width-340",attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择预热时间",disabled:t.disabledPreheat,value:t.model.preheat_time},on:{"on-change":t.changeTime}})],1)],1):t._e()],1)],1),i("goods-selector",{attrs:{multiple:!0,"current-list":t.model.goods_info,flag:"presell",show_activity:1},on:{"on-change":t.changeGoods,"on-cancel":t.cancelGoods},model:{value:t.goodsSelector.value,callback:function(e){t.$set(t.goodsSelector,"value",e)},expression:"goodsSelector.value"}})],1)},s=[]},fcf7:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"OrderList",props:{data:{type:Array,default:function(){return[]}},info:{type:Object,default:function(){}}},data:function(){return{columns:[{title:"订单编号",slot:"title"},{title:"商品名称",slot:"goods",minWidth:120},{title:"单价/数量",slot:"price_num",maxWidth:150},{title:"下单时间",slot:"created_at",maxWidth:200},{title:"买家",slot:"user",maxWidth:150},{title:"实付款",slot:"payment",maxWidth:250},{title:"支付方式",slot:"payment_type",maxWidth:200},{title:"订单状态",slot:"order_status",maxWidth:150}]}},methods:{handleOrderNo:function(t){this.$emit("on-order",t)}}};e.default=i},fd46:function(t,e,i){},fe41:function(t,e,i){},fe87:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAgVBMVEUmZv8AAAAgY/8iZv8haf8eb/8yYv8iZ/8gav8hav8haf8hav8jav8haf8hZv8hav8hav8haP8haf8gav8ha/8kaP8eaf8hav/////j7f8uc/90ov9Yj/88fP/x9v/I2v/H2f+sx/9mmP/x9f+evv+Cq/+Cqv9Lhv9Khv/V4//V4v+E3yzjAAAAF3RSTlMUAAkP4gYDMZimbHtPTiPxiV3TXl1AIguHyaIAAAJiSURBVFjDtZjZcqMwEEV7WkgGL7GdSdLsXrLO/P8HDpUQBOrRYpVynuwq+5TuBQkJ+OVAIQr4QghE6fqtXTQ4GAJVoIhbuOsGEYITVGEiBC8YIJIQhPSJEAJBp0jBDSgm4rEi4oE7Vng8YJ5IEzBPpAl0P1FIU6QgEmWIwMLqYZMXxWHzsAILWmQvaJvvaSIrdq6awF7QOiODbG2vCWzBtlrjU2kRD3aXk4X8jof7File8T1ZyXjt3yJkHh0ryISjyOfxm75EaPaTkYd7syf8FAlYkpOXHJaIQcSqXlMAO5YNWLKMAshYNjCTrSmItZFtELkHVL+eqrLsz6+dc0iDRhozY6l5KScunaslBUZFBc1oq3JG9eG4cAhoT9aUBg1p9qZo2fUjad5LRkua1bJtQ/SbJrpqTNTWdB0/97OejoZoyYYmLqOn/mx9NJ1pYuMUHVhBV2r6qqGWhcvBhb5of8Z/ElVDJKpLc0hFoOg0/rOmfshHNH796xHxma+zNNVzQ1d2BxzAwFb26X9lX/xl88vfj6Yr1e3oqeyX31CtSNOWjA/HDYmwYB86RTI21xzr7Pty0rY0ozBFyrWMdBftealdy4j0LWzd2+l5GMz5rXYvbMmW2lSLvxxEZrZtxIBApXpARj6ysyeWLM0mQqTd1gwAN93iESpq6/dk3foNCPeeVpPtgCHSbY/9G/Zi5trn3g27Dsd5PB7yosg3R9sRQiQ71CQ8ZqU/+MWbMO3hOP1xXaMEBCPUj77S0EgRNBwZ8tpHxL324SgUQRou4sjYV2McpV3M4hFxJKIQkwOV67f/ACKAi+LikajGAAAAAElFTkSuQmCC"}}]);