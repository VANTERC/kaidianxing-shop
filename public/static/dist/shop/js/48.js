(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{"01ca":function(e,t,a){},"0637":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("5530")),s=a("2f62"),n=a("0d0e"),l={name:"GetRules",computed:(0,o.default)((0,o.default)((0,o.default)({},(0,n.modelMap)()),(0,s.mapState)("couponAdd",{isDisabled:function(e){return e.isDisabled},vipLevel:function(e){return e.vipLevel},commissionLevel:function(e){return e.commissionLevel}})),{},{isShowCommissionLevel:function(){var e,t,a,i;return parseInt((null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(a=t.commission)||void 0===a||null===(i=a.setting)||void 0===i?void 0:i.commission_level)||"-1")>0}})};t.default=l},"067b":function(e,t,a){"use strict";a("1768")},"067f":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-modal-frame",{attrs:{title:"删除优惠券",width:"400"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"delete-coupon-modal"},[a("RadioGroup",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("Radio",{attrs:{label:"1"}},[e._v("会员已领取的优惠券可正常使用")]),a("Radio",{attrs:{label:"2"}},[e._v("一并删除")])],1)],1)])},o=[]},"093c":function(e,t,a){"use strict";a.r(t);var i=a("134b"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},"0d0e":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.modelMap=void 0;var o=i(a("ade3")),s=i(a("4360")),n=function(){var e={},t=s.default.state.couponAdd.model,a=function(t){e["model_".concat(t)]={get:function(){return s.default.state.couponAdd.model[t]},set:function(e){s.default.commit("couponAdd/setModel",(0,o.default)({},t,e))}}};for(var i in t)a(i);return e};t.modelMap=n},"134b":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("2909")),s=i(a("5530"));a("a9e3"),a("d3b7"),a("159b"),a("a15b"),a("d81d"),a("a434");var n=a("2f62"),l=i(a("f431")),r=i(a("ceb0")),d=i(a("0659")),c=i(a("416b")),u={name:"UseLimit",components:{TreeSelect:l.default,Editor:r.default,GoodsSelector:d.default,ShopNamePageList:c.default},props:{id:{type:[String,Number]}},data:function(){return{selector:{modal:!1,allowList:[],limitList:[]},page:{pageSize:10,pageNumber:1}}},computed:(0,s.default)({},(0,n.mapState)("couponAdd",{model:function(e){return e.model},isDisabled:function(e){return e.isDisabled},shopLevel:function(e){return e.shopLevel},goods:function(e){return e.goods}})),methods:{handleShopLevelChange:function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)&&e.forEach((function(e){e.children&&e.children.length>0&&(e.indeterminate=e.children.some((function(e){return!0===e.checked})),t(e.children))}))}t(e),this.$store.commit("couponAdd/setShopLevel",e)},changeGoodsLimit:function(){"1"===this.model.goods_limit?(this.selector.limitList=(0,o.default)(this.goods.list),this.goods.list=this.selector.allowList||[],this.model.goods_ids=this.goods.list.map((function(e){return e.id})).join(",")):"2"==this.model.goods_limit?(this.selector.allowList=(0,o.default)(this.goods.list),this.goods.list=this.selector.limitList||[],this.model.goods_ids=this.goods.list.map((function(e){return e.id})).join(",")):(this.model.goods_ids="",this.goods.list=[])},addShop:function(){this.selector.modal=!0},selectorChange:function(e){this.model.goods_ids=e.map((function(e){return e.id})).join(","),this.goods.list=e,this.selectorCancel()},selectorCancel:function(){this.selector.modal=!1},deleteShop:function(e){this.goods.list.splice(e,1),this.model.goods_ids=this.goods.list.map((function(e){return e.id})).join(",")}}};t.default=u},1768:function(e,t,a){},"1aa0":function(e,t,a){"use strict";a.r(t);var i=a("067f"),o=a("79ec");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("8df8");var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"76bbfdd8",null);t["default"]=l.exports},"1adb":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-content-bar",{attrs:{loading:e.loading},scopedSlots:e._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",on:{click:e.handleSave}},[e._v("保存")]),a("Button",{staticClass:"default-long",attrs:{to:"/market/coupons/all-list"}},[e._v("取消")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:e.id,expression:"id"}],staticClass:"default-error-long",on:{click:e.deleteCoupons}},[e._v("删除优惠券")])]},proxy:!0}])},[a("div",{staticClass:"market-add-coupons"},[a("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":140},on:{"on-validate":e.onValidate}},[a("basic-info"),a("get-rules"),a("use-limit",{attrs:{id:e.id}})],1)],1),a("delete-coupons-modal",{ref:"delete_coupon_modal",on:{"on-change":e.changeDeleteCoupon}}),a("save-modal",{ref:"save_modal",attrs:{content:e.save.content},on:{"on-change":e.changeSave}})],1)},o=[]},"1ef8":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("5530")),s=a("2f62"),n={name:"BasicInfo",data:function(){return{}},computed:(0,o.default)({},(0,s.mapState)("couponAdd",{model:function(e){return e.model},isDisabled:function(e){return e.isDisabled}})),methods:{changeStartTime:function(e){this.model.start_time=e},changeEndTime:function(e){this.model.end_time=e},changeTimeLimit:function(){"0"===this.model.time_limit&&(this.model.end_time||this.model.start_time||(this.model.start_time=new Date,this.model.end_time=new Date((new Date).getTime()+6048e5)))}}};t.default=n},"243c":function(e,t,a){"use strict";a("01ca")},2548:function(e,t,a){"use strict";a.r(t);var i=a("fb29"),o=a("ce93");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("afa5");var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"68f7f022",null);t["default"]=l.exports},3101:function(e,t,a){function i(e,t){var a=[];function i(t){t.forEach((function(t){if(new Set(e).has(t.value))if(t.children&&t.children.length){var o=t.children.map((function(e){return e.value})),s=o.some((function(t){return e.indexOf(t)>=0}));s||a.push(t.value),i(t.children)}else a.push(t.value);else t.children&&t.children.length&&i(t.children)}))}return i(t),a}Object.defineProperty(t,"__esModule",{value:!0}),t.formatData=i,a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("d81d")},"3d87":function(e,t,a){var i=a("4930");e.exports=i&&!!Symbol["for"]&&!!Symbol.keyFor},"428f":function(e,t,a){var i=a("da84");e.exports=i},4678:function(e,t,a){"use strict";a.r(t);var i=a("1adb"),o=a("7fb4");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("243c");var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"9a9362f6",null);t["default"]=l.exports},"57b9":function(e,t,a){var i=a("c65b"),o=a("d066"),s=a("b622"),n=a("cb2d");e.exports=function(){var e=o("Symbol"),t=e&&e.prototype,a=t&&t.valueOf,l=s("toPrimitive");t&&!t[l]&&n(t,l,(function(e){return i(a,this)}),{arity:1})}},"583f":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var o=i(a("2909"));function s(e,t){var a=[];function i(e,s){e.forEach((function(e){var n=[].concat((0,o.default)(s),[e]);e.children&&e.children.length?i(e.children,n):t||a.push(n),t&&a.push(n)}))}return i(e,[]),a}a("d3b7"),a("159b"),a("99af")},"5a47":function(e,t,a){var i=a("23e7"),o=a("4930"),s=a("d039"),n=a("7418"),l=a("7b0b"),r=!o||s((function(){n.f(1)}));i({target:"Object",stat:!0,forced:r},{getOwnPropertySymbols:function(e){var t=n.f;return t?t(l(e)):[]}})},"626b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAeCAYAAAAGos/EAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA4SURBVHgB3YsxDgAQEMDKIEZ+4MdGMYkf2iUOOa/QsU2RRuBgmWQpJCMVUfOwLDqOyO1qPOPDawNr1jQJbIusxQAAAABJRU5ErkJggg=="},"6dd0":function(e,t,a){function i(e,t,a){this.$children.forEach((function(o){var s=o.$options.name;s===e?o.$emit.apply(o,[t].concat(a)):i.apply(o,[e,t].concat([a]))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("159b"),a("b0c0"),a("99af");var o={methods:{dispatch:function(e,t,a){var i=this.$parent||this.$root,o=i.$options.name;while(i&&(!o||o!==e))i=i.$parent,i&&(o=i.$options.name);i&&i.$emit.apply(i,[t].concat(a))},broadcast:function(e,t,a){i.call(this,e,t,a)}}};t.default=o},"6df7":function(e,t,a){"use strict";a.r(t);var i=a("fb7a"),o=a("093c");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"650b61b6",null);t["default"]=l.exports},"70cc":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i-select",e._b({ref:"select",staticClass:"ivu-tree-select",class:e.classes,attrs:{placeholder:e.placeholder,multiple:e.multiple,"transfer-class-name":e.transferClassName,transfer:e.transfer},on:{"on-change":e.handleChange,"on-open-change":e.handleOpenChange}},"i-select",e.$attrs,!1),[a("Tree",{ref:"tree",attrs:{data:e.tmpData,multiple:e.multiple,"check-strictly":e.checkStrictly,"show-checkbox":e.multiple&&e.showCheckbox,"check-directly":e.checkDirectly,"load-data":e.loadData},on:{"on-select-change":e.handleSelectNode,"on-check-change":e.handleSelectNode}})],1)},o=[]},"746f":function(e,t,a){var i=a("428f"),o=a("1a2d"),s=a("e538"),n=a("9bf2").f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});o(t,e)||n(t,e,{value:s.f(e)})}},"763f":function(e,t,a){"use strict";a.r(t);var i=a("f67e"),o=a("c286");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"af8de028",null);t["default"]=l.exports},"79ec":function(e,t,a){"use strict";a.r(t);var i=a("e70d"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},"7fb4":function(e,t,a){"use strict";a.r(t);var i=a("9b4d"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},"8df8":function(e,t,a){"use strict";a("e2c3")},"9b4d":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.formatParamsNull=t.default=void 0;var o=i(a("ade3")),s=i(a("5530"));a("d9e2"),a("d3b7"),a("a4d3"),a("e01a"),a("99af"),a("a15b"),a("d81d");var n=a("2f62"),l=i(a("1aa0")),r=i(a("d894")),d=a("d1be"),c=i(a("2548")),u=i(a("763f")),m=i(a("6df7")),f={name:"add",components:{DeleteCouponsModal:l.default,SaveModal:r.default,BasicInfo:c.default,GetRules:u.default,UseLimit:m.default},data:function(){var e=this;return{value:"base",id:0,loading:!1,save:{content:""},rules:{coupon_name:[{required:!0,message:"优惠券名称必填"},{pattern:/^\S.*\S$/,message:"优惠券前后不能有空格"}],stock_type:[{required:!0,message:"发放总量必填"}],time_limit:[{required:!0,message:"使用时间限制必填"}],get_max_type:[{required:!0,message:"每人领取张数必填"}],pick_type:[{required:!0,message:"领取方式必填"}],get_max:[{required:!0,message:"每人限领必填"}],stock:[{required:!0,message:"限制张数必填"}],enough:[{required:!0,message:"必填"}],discount_price:[{validator:function(e,t,a){""==t?a(new Error("优惠额度必填")):a()}}],start_time:[{required:!0,message:"开始时间必选"}],end_time:[{required:!0,message:"结束时间必选"},{validator:function(t,a){return e.model.start_time&&new Date(a)>new Date(e.model.start_time)},message:"结束时间要大于开始时间"}],limit_day:[{required:!0,message:"天数必填"}],member_level:[{required:!this.isShowCommissionLevel,message:"领取人限制必填"}],balance:[{required:!0,message:"花费金额必填"},{validator:function(t,a){return!("0"==e.model.credit&&"0"==a)},message:"金额和积分不能同时为0"}],credit:[{required:!0,message:"消耗积分必填"},{validator:function(t,a){return!("0"==parseFloat(e.model.balance)&&"0"==a)},message:"金额和积分不能同时为0",trigger:"blur"}]}}},computed:(0,s.default)((0,s.default)({},(0,n.mapState)("couponAdd",{model:function(e){return e.model}})),{},{isShowCommissionLevel:function(){var e,t,a,i,o,s,n,l;return console.log("is-show-commission-level",parseInt((null===(e=this.$store.state)||void 0===e||null===(t=e.config)||void 0===t||null===(a=t.commission)||void 0===a||null===(i=a.setting)||void 0===i?void 0:i.commission_level)||"-1")>0),parseInt((null===(o=this.$store.state)||void 0===o||null===(s=o.config)||void 0===s||null===(n=s.commission)||void 0===n||null===(l=n.setting)||void 0===l?void 0:l.commission_level)||"-1")>0}}),watch:{"$route.path":{handler:function(){this.id=this.$route.query.id||0;var e=!1;this.id&&(e=!0),this.$store.commit("couponAdd/setDisabled",e)},immediate:!0}},methods:(0,s.default)((0,s.default)({},(0,n.mapActions)("couponAdd",["getAgentGradeAllList"])),{},{onValidate:function(e,t){this.cacheError=(0,s.default)((0,s.default)({},this.cacheError),{},(0,o.default)({},e,t))},validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate((function(a){t(a),e.$nextTick((function(){if(!a)for(var t in e.cacheError)if(!e.cacheError[t]){e.$focusError(t);break}}))}))}))},handleSave:function(){var e=this;this.validate().then((function(t){if(t){var a,i,o,s,n,l,r,d=e.$store.state.couponAdd.model;if("1"===d.limit_member&&"2"!==d.pick_type)if(parseInt((null===(a=e.$store.state)||void 0===a||null===(i=a.config)||void 0===i||null===(o=i.commission)||void 0===o||null===(s=o.setting)||void 0===s?void 0:s.commission_level)||"-1")>0){if((null===d||void 0===d||null===(n=d.member_level)||void 0===n||!n.length)&&(null===d||void 0===d||null===(l=d.commission_level)||void 0===l||!l.length))return void e.$Message.error("领取人和分销商等级必选一个")}else if(null===d||void 0===d||null===(r=d.member_level)||void 0===r||!r.length)return void e.$Message.error("领取人限制必选");if("1"===d.goods_limit||"2"===d.goods_limit){if(!d.goods_ids)return void e.$Message.error("商品使用限制中商品必选")}else if("3"===d.goods_limit){var c;if(null===(c=d.goods_ids)||void 0===c||!c.length)return void e.$Message.error("商品分类必选")}if("2"===d.default_description&&!d.description)return void e.$Message.error("使用说明中说明文字必填");e.id?e.editCoupon():("1"===d.coupon_sale_type?e.save.content="满".concat(d.enough,"减").concat(d.discount_price):"2"===d.coupon_sale_type&&(e.save.content="满".concat(d.enough,"享").concat(d.discount_price,"折")),e.$refs["save_modal"].setValue())}}))},changeSave:function(){this.addCoupon()},getCouponData:function(){var e=this;if(this.id){this.loading=!0;var t={id:this.id};this.$api.marketApi.getCoupon(t).then((function(t){if(e.loading=!1,0===t.error){var a,i="";null!==(a=t.goods_list)&&void 0!==a&&a.length&&(i=t.goods_list.map((function(e){return e.id})).join(",")),"3"===t.item.goods_limit&&(i=t.cate_list.map((function(e){return e.id}))),e.$store.commit("couponAdd/setModel",(0,s.default)((0,s.default)((0,s.default)({},t.item),t.rules),{},{goods_ids:i})),e.$store.commit("couponAdd/initGoodsList",t.goods_list)}}))}else this.$store.commit("couponAdd/resetModel")},addCoupon:function(){var e=this,t=(0,s.default)({},this.$store.state.couponAdd.model);if("2"===t.pick_type){var a={is_free:"1",balance:"",credit:"",limit_member:"0",member_level:[],commission_level:[],get_max_type:"1",get_max:""};t=(0,s.default)((0,s.default)({},t),a)}t.goods_ids&&"string"!==typeof t.goods_ids&&(t.goods_ids=t.goods_ids.join(",")),t.member_level=t.member_level.join(","),t.commission_level=t.commission_level.join(","),t.start_time=t.start_time?this.$utils.formatDate(new Date(t.start_time),"yyyy-MM-dd hh:mm:ss"):"",t.end_time=t.end_time?this.$utils.formatDate(new Date(t.end_time),"yyyy-MM-dd hh:mm:ss"):"",this.loading=!0,this.$api.marketApi.addCoupon(p(t)).then((function(t){e.loading=!1,0===t.error&&(e.$Message.success("优惠券新增成功"),e.$router.push({path:"/market/coupons/all-list"}))}))},editCoupon:function(){var e=this,t=Object.assign({id:this.id},this.$store.state.couponAdd.model);t.member_level=t.member_level.join(","),t.commission_level=t.commission_level.join(","),"0"===t.time_limit&&(t.start_time=t.start_time?this.$utils.formatDate(new Date(t.start_time),"yyyy-MM-dd hh:mm:ss"):"",t.end_time=t.end_time?this.$utils.formatDate(new Date(t.end_time),"yyyy-MM-dd hh:mm:ss"):""),t.goods_ids&&"string"!==typeof t.goods_ids&&(t.goods_ids=t.goods_ids.join(",")),this.loading=!0,this.$api.marketApi.editCoupon(p(t)).then((function(t){e.loading=!1,0===t.error&&(e.$Message.success("优惠券修改成功"),e.$router.push({path:"/market/coupons/all-list"}))}))},deleteCoupons:function(){this.$refs["delete_coupon_modal"].setValue()},changeDeleteCoupon:function(e){var t=this;this.loading=!0;var a={id:this.id,type:e};this.$api.marketApi.deleteCoupon(a).then((function(e){t.loading=!1,0===e.error&&(t.$Message.success("优惠券删除成功"),t.$router.push({path:"/market/coupons/all-list"}))}))},getShopClassify:function(){var e=this;this.$api.goodsApi.goodClassifyList().then((function(t){if(0===t.error){var a=(0,d.dealClassifyList)(t.list);e.$store.commit("couponAdd/setShopLevel",a)}}))},getVipLevel:function(){var e=this;this.$api.memberApi.getLevelList({is_all:1}).then((function(t){0===t.error&&e.$store.commit("couponAdd/setVipLevel",t.list||[])}))}}),mounted:function(){this.$store.commit("couponAdd/resetModel"),this.getCouponData(),this.getShopClassify(),this.getVipLevel(),this.getAgentGradeAllList(),this.$refs["form"].resetFields()}};t.default=f;var p=function(e){var t={};for(var a in e)e[a]&&(t[a]=e[a]);return t};t.formatParamsNull=p},"9f33":function(e,t,a){},a481:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"SaveModal",props:{content:{type:String}},data:function(){return{value:!1}},methods:{setValue:function(){this.value=!this.value},handleOk:function(){this.setValue(),this.$emit("on-change")},handleCancel:function(){this.setValue()}}};t.default=a},a4d3:function(e,t,a){a("d9f5"),a("b4f8"),a("c513"),a("e9c4"),a("5a47")},afa5:function(e,t,a){"use strict";a("9f33")},b4f8:function(e,t,a){var i=a("23e7"),o=a("d066"),s=a("1a2d"),n=a("577e"),l=a("5692"),r=a("3d87"),d=l("string-to-symbol-registry"),c=l("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!r},{for:function(e){var t=n(e);if(s(d,t))return d[t];var a=o("Symbol")(t);return d[t]=a,c[a]=t,a}})},c286:function(e,t,a){"use strict";a.r(t);var i=a("0637"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},c513:function(e,t,a){var i=a("23e7"),o=a("1a2d"),s=a("d9b5"),n=a("0d51"),l=a("5692"),r=a("3d87"),d=l("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!r},{keyFor:function(e){if(!s(e))throw TypeError(n(e)+" is not a symbol");if(o(d,e))return d[e]}})},c55a:function(e,t,a){"use strict";a.r(t);var i=a("a481"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},ce93:function(e,t,a){"use strict";a.r(t);var i=a("1ef8"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},d4a9:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("53ca"));a("a9e3"),a("e9c4"),a("d81d"),a("d3b7"),a("159b"),a("4de4"),a("a15b");var s=i(a("6dd0")),n=i(a("583f")),l=a("3101"),r=[],d={name:"TreeSelect",mixins:[s.default],props:{value:{type:[String,Number,Array]},data:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default:function(){return!(!this.$IVIEWPRO||""===this.$IVIEWPRO.transfer)&&this.$IVIEWPRO.transfer}},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择"},isHandlePath:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value,isChangeValueInTree:!1,isValueChangeByTree:!1,tmpData:[]}},watch:{value:{handler:function(e){var t;this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.currentValue=e,null===(t=this.$refs.select)||void 0===t||t.reset(),r=(0,n.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.tmpData,!0),this.tmpData=JSON.parse(JSON.stringify(this.tmpData)))},deep:!0},data:{handler:function(){var e;(this.tmpData=JSON.parse(JSON.stringify(this.data)),r=(0,n.default)(this.data,this.isHandlePath),this.isChangeValueInTree)?this.isChangeValueInTree=!1:(null===(e=this.$refs.select)||void 0===e||e.reset(),this.handleUpdateTreeNodes(this.tmpData,!0))},deep:!0}},computed:{valueToArray:function(){return"object"===(0,o.default)(this.currentValue)?this.isHandlePath?(0,l.formatData)(this.currentValue,this.tmpData):this.currentValue:[this.currentValue]},isCheckboxUsable:function(){return this.multiple&&this.showCheckbox},transferClassName:function(){return this.transfer?"ivu-tree-select-transfer":""},classes:function(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode:function(e,t){if(this.$emit("change-data",this.tmpData),this.multiple)e.length?(this.currentValue=e.map((function(e){return e.value})),this.handleUpdateSelectValue(t.value,t.title)):(this.currentValue=[],this.handleUpdateSelectValue("","")),this.traverseData(this.tmpData,this.currentValue);else if(e.length){var a=e[0];this.currentValue=a.value,this.handleUpdateSelectValue(a.value,a.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue),this.dispatch("FormItem","on-form-change",this.currentValue)},handleUpdateTreeNodes:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((function(e){t.valueToArray.indexOf(e.value)>=0?(t.isCheckboxUsable?e.checked=!0:e.selected=!0,t.handleUpdateSelectValue(e.value,e.title)):t.isCheckboxUsable?e.checked=!1:e.selected=!1,e.children&&e.children.length&&t.handleUpdateTreeNodes(e.children)})),a&&this.$refs.select&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue:function(e){if(""===e){var t;null===(t=this.$refs.select)||void 0===t||t.reset()}else{this.isValueChangeByTree=!0;var a=r.filter((function(t){return t[t.length-1].value==e}))[0];a&&a.length>0&&this.$refs.select&&this.$refs.select.onOptionClick({value:e,label:a.map((function(e){return e.title})).join("->")||""}),this.multiple||(this.isValueChangeByTree=!1)}},handleChange:function(e){var t,a=this;this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=e,this.$emit("input",e),this.$emit("on-change",e),this.dispatch("FormItem","on-form-change",e),null===(t=this.$refs.select)||void 0===t||t.reset(),this.handleUpdateTreeNodes(this.tmpData,!0),this.$emit("change-data",this.tmpData),this.$nextTick((function(){a.isValueChangeByTree=!1})))},handleOpenChange:function(e){this.$emit("on-open-change",e)},traverseData:function(e,t){var a=this;e.forEach((function(e){t.indexOf(e.value)>-1?e.checked=!0:e.checked=!1,e.children&&e.children.length>0&&a.traverseData(e.children,t)}))}},mounted:function(){var e;null!==(e=this.data)&&void 0!==e&&e.length&&(this.tmpData=JSON.parse(JSON.stringify(this.data))),r=(0,n.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.data,!0)}};t.default=d},d894:function(e,t,a){"use strict";a.r(t);var i=a("e9de"),o=a("c55a");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("067b");var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"015cdf8a",null);t["default"]=l.exports},d9f5:function(e,t,a){"use strict";var i=a("23e7"),o=a("da84"),s=a("c65b"),n=a("e330"),l=a("c430"),r=a("83ab"),d=a("4930"),c=a("d039"),u=a("1a2d"),m=a("3a9b"),f=a("825a"),p=a("fc6a"),h=a("a04b"),v=a("577e"),b=a("5c6c"),_=a("7c73"),g=a("df75"),x=a("241c"),y=a("057f"),k=a("7418"),C=a("06cf"),A=a("9bf2"),$=a("37e8"),w=a("d1e7"),S=a("cb2d"),D=a("5692"),O=a("f772"),I=a("d012"),V=a("90e3"),R=a("b622"),M=a("e538"),L=a("746f"),N=a("57b9"),E=a("d44e"),F=a("69f3"),j=a("b727").forEach,T=O("hidden"),B="Symbol",P="prototype",U=F.set,G=F.getterFor(B),q=Object[P],J=o.Symbol,Q=J&&J[P],H=o.TypeError,Y=o.QObject,K=C.f,W=A.f,X=y.f,Z=w.f,z=n([].push),ee=D("symbols"),te=D("op-symbols"),ae=D("wks"),ie=!Y||!Y[P]||!Y[P].findChild,oe=r&&c((function(){return 7!=_(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(e,t,a){var i=K(q,t);i&&delete q[t],W(e,t,a),i&&e!==q&&W(q,t,i)}:W,se=function(e,t){var a=ee[e]=_(Q);return U(a,{type:B,tag:e,description:t}),r||(a.description=t),a},ne=function(e,t,a){e===q&&ne(te,t,a),f(e);var i=h(t);return f(a),u(ee,i)?(a.enumerable?(u(e,T)&&e[T][i]&&(e[T][i]=!1),a=_(a,{enumerable:b(0,!1)})):(u(e,T)||W(e,T,b(1,{})),e[T][i]=!0),oe(e,i,a)):W(e,i,a)},le=function(e,t){f(e);var a=p(t),i=g(a).concat(me(a));return j(i,(function(t){r&&!s(de,a,t)||ne(e,t,a[t])})),e},re=function(e,t){return void 0===t?_(e):le(_(e),t)},de=function(e){var t=h(e),a=s(Z,this,t);return!(this===q&&u(ee,t)&&!u(te,t))&&(!(a||!u(this,t)||!u(ee,t)||u(this,T)&&this[T][t])||a)},ce=function(e,t){var a=p(e),i=h(t);if(a!==q||!u(ee,i)||u(te,i)){var o=K(a,i);return!o||!u(ee,i)||u(a,T)&&a[T][i]||(o.enumerable=!0),o}},ue=function(e){var t=X(p(e)),a=[];return j(t,(function(e){u(ee,e)||u(I,e)||z(a,e)})),a},me=function(e){var t=e===q,a=X(t?te:p(e)),i=[];return j(a,(function(e){!u(ee,e)||t&&!u(q,e)||z(i,ee[e])})),i};d||(J=function(){if(m(Q,this))throw H("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=V(e),a=function(e){this===q&&s(a,te,e),u(this,T)&&u(this[T],t)&&(this[T][t]=!1),oe(this,t,b(1,e))};return r&&ie&&oe(q,t,{configurable:!0,set:a}),se(t,e)},Q=J[P],S(Q,"toString",(function(){return G(this).tag})),S(J,"withoutSetter",(function(e){return se(V(e),e)})),w.f=de,A.f=ne,$.f=le,C.f=ce,x.f=y.f=ue,k.f=me,M.f=function(e){return se(R(e),e)},r&&(W(Q,"description",{configurable:!0,get:function(){return G(this).description}}),l||S(q,"propertyIsEnumerable",de,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!d,sham:!d},{Symbol:J}),j(g(ae),(function(e){L(e)})),i({target:B,stat:!0,forced:!d},{useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),i({target:"Object",stat:!0,forced:!d,sham:!r},{create:re,defineProperty:ne,defineProperties:le,getOwnPropertyDescriptor:ce}),i({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:ue}),N(),E(J,B),I[T]=!0},e01a:function(e,t,a){"use strict";var i=a("23e7"),o=a("83ab"),s=a("da84"),n=a("e330"),l=a("1a2d"),r=a("1626"),d=a("3a9b"),c=a("577e"),u=a("9bf2").f,m=a("e893"),f=s.Symbol,p=f&&f.prototype;if(o&&r(f)&&(!("description"in p)||void 0!==f().description)){var h={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=d(p,this)?new f(e):void 0===e?f():f(e);return""===e&&(h[t]=!0),t};m(v,f),v.prototype=p,p.constructor=v;var b="Symbol(test)"==String(f("test")),_=n(p.toString),g=n(p.valueOf),x=/^Symbol\((.*)\)[^)]+$/,y=n("".replace),k=n("".slice);u(p,"description",{configurable:!0,get:function(){var e=g(this),t=_(e);if(l(h,e))return"";var a=b?k(t,7,-1):y(t,x,"$1");return""===a?void 0:a}}),i({global:!0,constructor:!0,forced:!0},{Symbol:v})}},e2c3:function(e,t,a){},e538:function(e,t,a){var i=a("b622");t.f=i},e70d:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"DeleteCouponsModal",props:{},data:function(){return{value:!1,type:"1"}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.type="1")},handleCancel:function(){this.setValue()},handleOk:function(){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除优惠券？",onOk:function(){e.$emit("on-change",e.type),e.setValue()},onCancel:function(){}})}}};t.default=a},e7cd:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAeBAMAAAD0jNL3AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAPUExURTCI7yyH7y2M7y2N8S2M8GsgvRMAAAAEdFJOUwogoJ8q1PIiAAAAFUlEQVQI12NgYDBkcAFCBQYBBhLZAIgxBI7KasErAAAAAElFTkSuQmCC"},e9de:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-modal-frame",{attrs:{title:"创建优惠券",width:"500"},on:{"on-ok":e.handleOk,"on-cancel":e.handleCancel},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"save-coupon-modal"},[a("p",{staticClass:"hint"},[e._v("您正在创建一张")]),a("p",{staticClass:"title"},[e._v(" 消费"),a("span",[e._v(" "+e._s(e.content)+" ")]),e._v("的优惠券 ")]),a("p",{staticClass:"text"},[e._v(" 请确认其他限制条件，保存后立即生效，部分限制条件不可再次修改。 ")])])])},o=[]},ed26:function(e,t,a){"use strict";a.r(t);var i=a("d4a9"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},f431:function(e,t,a){"use strict";a.r(t);var i=a("70cc"),o=a("ed26");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,null,null);t["default"]=l.exports},f67e:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"level"},[a("kdx-form-title",[e._v("领取规则")]),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"领取方式："}},[a("RadioGroup",{model:{value:e.model_pick_type,callback:function(t){e.model_pick_type=t},expression:"model_pick_type"}},[a("Radio",{attrs:{label:"0",disabled:e.isDisabled}},[a("span",[e._v("领券中心")])]),a("Radio",{attrs:{label:"1",disabled:e.isDisabled}},[a("span",[e._v("直接链接领取")])]),a("Radio",{attrs:{label:"2",disabled:e.isDisabled}},[a("span",[e._v("活动领取")])]),a("kdx-hint-tooltip",{attrs:{type:"form"}},[a("Form",{attrs:{"label-width":85}},[a("FormItem",{attrs:{label:"领券中心："}},[e._v(" 创建的优惠券，会员可以在领券中心进行领取。 ")]),a("FormItem",{attrs:{label:"直接链接领取："}},[e._v(" 创建的优惠券，商家可通过连接单独发送给会员。 ")]),a("FormItem",{attrs:{label:"活动领取："}},[e._v(" 创建的优惠券，只能通过营销活动进行发放。 ")])],1)],1)],1),a("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"0"===e.model_pick_type,expression:"model_pick_type === '0'"}],staticStyle:{"margin-top":"10px"}},[e._v(" 领券中心可支持免费领取，也可通过消耗积分或者花费金额进行支付获取优惠券 ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.model_pick_type,expression:"model_pick_type === '0'"}],staticClass:"form-item-bg-box"},[a("div",{staticClass:"coupons-get-center"},[a("div",{staticClass:"get-free"},[a("Radio",{attrs:{disabled:e.isDisabled,"true-value":"1","false-value":"0"},model:{value:e.model_is_free,callback:function(t){e.model_is_free=t},expression:"model_is_free"}},[e._v(" 免费领取 ")])],1),a("div",{staticClass:"get-pay"},[a("div",{staticClass:"r-form-item-checkbox"},[a("Radio",{attrs:{disabled:e.isDisabled,"true-value":"0","false-value":"1"},model:{value:e.model_is_free,callback:function(t){e.model_is_free=t},expression:"model_is_free"}},[e._v(" 付费领取 ")])],1),a("div",{staticClass:"left-text"},[e._v("花费")]),"0"==e.model_is_free?[a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{prop:"balance"}},[a("kdx-rr-input",{staticClass:"width-160",attrs:{disabled:e.isDisabled||"1"==e.model_is_free,placeholder:"请输入",number:"",fixed:2,"min-value":0,"max-value":9999999.99},model:{value:e.model_balance,callback:function(t){e.model_balance=t},expression:"model_balance"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1)]:[a("Input",{staticClass:"width-160",attrs:{disabled:e.isDisabled||"1"==e.model_is_free,placeholder:"请输入"},model:{value:e.model_balance,callback:function(t){e.model_balance=t},expression:"model_balance"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],a("div",{staticClass:"middle-text"},[e._v("消耗")]),"0"==e.model_is_free?[a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{prop:"credit"}},[a("kdx-rr-input",{staticClass:"width-160",attrs:{disabled:e.isDisabled||"1"==e.model_is_free,fixed:0,number:"","max-value":999999999,placeholder:"请输入"},model:{value:e.model_credit,callback:function(t){e.model_credit=t},expression:"model_credit"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("积分")])])],1)]:[a("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",disabled:e.isDisabled||"1"==e.model_is_free,number:"",fixed:0,"max-value":999999999},model:{value:e.model_credit,callback:function(t){e.model_credit=t},expression:"model_credit"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("积分")])])]],2),a("kdx-hint-text",{staticStyle:{"margin-left":"140px","padding-top":"6px"}},[e._v(" 抵扣积分+余额支付时，如用户取消支付时，积分不退。 ")])],1)])],1),"2"!==e.model_pick_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"领取人限制："}},[a("RadioGroup",{model:{value:e.model_limit_member,callback:function(t){e.model_limit_member=t},expression:"model_limit_member"}},[a("Radio",{attrs:{label:"0"}},[e._v("全部会员")]),a("Radio",{attrs:{label:"1"}},[e._v("指定会员身份")])],1),"1"===e.model_limit_member?a("div",{staticClass:"form-item-bg-box-label get-rules-checkbox"},[a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"会员等级：",prop:e.isShowCommissionLevel?"":"member_level"}},[a("CheckboxGroup",{model:{value:e.model_member_level,callback:function(t){e.model_member_level=t},expression:"model_member_level"}},e._l(e.vipLevel,(function(t){return a("Checkbox",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.level_name)+" ")])})),1)],1),e.isShowCommissionLevel?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"分销商等级："}},[a("CheckboxGroup",{model:{value:e.model_commission_level,callback:function(t){e.model_commission_level=t},expression:"model_commission_level"}},e._l(e.commissionLevel,(function(t){return a("Checkbox",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e()],1):e._e()],1):e._e(),"2"!==e.model_pick_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"每人领取张数：",prop:"get_max_type"}},[a("RadioGroup",{model:{value:e.model_get_max_type,callback:function(t){e.model_get_max_type=t},expression:"model_get_max_type"}},[a("Radio",{attrs:{label:"0",disabled:e.isDisabled}},[a("span",[e._v("不限制")])]),a("Radio",{attrs:{label:"1",disabled:e.isDisabled}},[a("span",[e._v("自定义")])])],1),"1"===e.model_get_max_type?a("div",{staticClass:"form-item-bg-box-label"},[a("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.get_max",modifiers:{get_max:!0}}],attrs:{label:"每人限领：",prop:"get_max"}},[a("kdx-rr-input",{staticClass:"width-160",attrs:{disabled:e.isDisabled,placeholder:"请输入",fixed:0,number:"","max-value":999999999},model:{value:e.model_get_max,callback:function(t){e.model_get_max=t},expression:"model_get_max"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("张")])])],1)],1):e._e()],1):e._e()],1)},o=[]},fb29:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"level"},[i("kdx-form-title",{attrs:{content:"基本信息"}}),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.coupon_name",modifiers:{coupon_name:!0}}],attrs:{label:"优惠券名称：",prop:"coupon_name"}},[i("Input",{staticClass:"width-250",class:{"input-disabled":e.isDisabled},attrs:{maxlength:"10","show-word-limit":"",disabled:e.isDisabled,placeholder:"请输入"},model:{value:e.model.coupon_name,callback:function(t){e.$set(e.model,"coupon_name",t)},expression:"model.coupon_name"}})],1),i("FormItem",{staticClass:"form-coupons-type",attrs:{label:"优惠券类型：",prop:"coupon_sale_type"}},[i("RadioGroup",{model:{value:e.model.coupon_sale_type,callback:function(t){e.$set(e.model,"coupon_sale_type",t)},expression:"model.coupon_sale_type"}},[i("Radio",{attrs:{label:"1",disabled:e.isDisabled}},[i("div",{staticClass:"coupons-full"},[i("span",[e._v("满减券")]),i("img",{attrs:{src:a("626b"),alt:""}})])]),i("Radio",{attrs:{label:"2",disabled:e.isDisabled}},[i("div",{staticClass:"coupons-discount"},[i("span",[e._v("折扣券")]),i("img",{attrs:{src:a("e7cd"),alt:""}})])])],1),i("div",{staticClass:"form-item-bg-box"},["1"===e.model.coupon_sale_type?i("div",{staticClass:"coupons-type "},[i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.enough",modifiers:{enough:!0}}],attrs:{label:"消费满",prop:"enough"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{number:"",fixed:2,"min-value":0,"max-value":9999999.99,maxlength:10,disabled:e.isDisabled,placeholder:"请输入"},model:{value:e.model.enough,callback:function(t){e.$set(e.model,"enough",t)},expression:"model.enough"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.discount_price",modifiers:{discount_price:!0}}],staticClass:"sub",attrs:{label:"减",prop:"discount_price"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{number:"",fixed:2,"min-value":0,"max-value":9999999.99,maxlength:10,disabled:e.isDisabled,placeholder:"请输入"},model:{value:e.model.discount_price,callback:function(t){e.$set(e.model,"discount_price",t)},expression:"model.discount_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1)],1):e._e(),"2"===e.model.coupon_sale_type?i("div",{staticClass:"coupons-type"},[i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.enough",modifiers:{enough:!0}}],attrs:{label:"消费满",prop:"enough"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{number:"",fixed:2,"min-value":0,"max-value":9999999.99,maxlength:10,disabled:e.isDisabled,placeholder:"请输入"},model:{value:e.model.enough,callback:function(t){e.$set(e.model,"enough",t)},expression:"model.enough"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.discount_price",modifiers:{discount_price:!0}}],staticClass:"sub",attrs:{label:"享",prop:"discount_price"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{disabled:e.isDisabled,fixed:1,number:"",minValue:.1,maxValue:9.9,placeholder:"请输入0.1-9.9"},model:{value:e.model.discount_price,callback:function(t){e.$set(e.model,"discount_price",t)},expression:"model.discount_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("折")])])],1)],1):e._e()])],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"发放总量：",prop:"stock_type"}},[i("RadioGroup",{model:{value:e.model.stock_type,callback:function(t){e.$set(e.model,"stock_type",t)},expression:"model.stock_type"}},[i("Radio",{attrs:{label:"0"}},[i("span",[e._v("不限制")])]),i("Radio",{attrs:{label:"1"}},[i("span",[e._v("限制")])])],1),"1"===e.model.stock_type?i("div",{staticClass:"form-item-bg-box-label"},[i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.stock",modifiers:{stock:!0}}],attrs:{label:"限制张数：",prop:"stock"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{fixed:0,number:"","max-value":999999999,placeholder:"请输入"},model:{value:e.model.stock,callback:function(t){e.$set(e.model,"stock",t)},expression:"model.stock"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("张")])])],1)],1):e._e()],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"使用时间限制："}},[i("RadioGroup",{on:{"on-change":e.changeTimeLimit},model:{value:e.model.time_limit,callback:function(t){e.$set(e.model,"time_limit",t)},expression:"model.time_limit"}},[i("Radio",{attrs:{label:"1"}},[i("span",[e._v("获得后")])]),i("Radio",{attrs:{label:"0"}},[i("span",[e._v("日期内")])])],1),i("div",{staticClass:"form-item-bg-box",staticStyle:{"padding-left":"0"}},["1"===e.model.time_limit?i("div",{staticClass:"time-limit"},[i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.limit_day",modifiers:{limit_day:!0}}],staticClass:"flex",attrs:{label:"限制天数：",prop:"limit_day"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{number:"",fixed:0,maxValue:999999999,placeholder:"请输入"},model:{value:e.model.limit_day,callback:function(t){e.$set(e.model,"limit_day",t)},expression:"model.limit_day"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("天")])])],1),i("span",{staticClass:"postfix"},[e._v("内有效")]),i("kdx-hint-tooltip",[e._v(" 有效期按自然天计算。举例：如设置领券次日起2天内可用，用户在5月22日的14:00领取优惠券，则该优惠券的可用时间为5月22日的00:00:00到5月23日的23:59:59 ")])],1):"0"===e.model.time_limit?i("div",{staticClass:"date-range"},[i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.start_time",modifiers:{start_time:!0}}],attrs:{label:"选择时间：",prop:"start_time"}},[i("DatePicker",{staticClass:"width-250",attrs:{type:"datetime",placeholder:"开始时间"},on:{"on-change":e.changeStartTime},model:{value:e.model.start_time,callback:function(t){e.$set(e.model,"start_time",t)},expression:"model.start_time"}})],1),i("div",{staticClass:"marginL-10 marginR-10"},[e._v("~")]),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.end_time",modifiers:{end_time:!0}}],attrs:{prop:"end_time"}},[i("DatePicker",{staticClass:"width-250",attrs:{type:"datetime",placeholder:"结束时间"},on:{"on-change":e.changeEndTime},model:{value:e.model.end_time,callback:function(t){e.$set(e.model,"end_time",t)},expression:"model.end_time"}})],1)],1):e._e()])],1),i("FormItem",{attrs:{label:"排序：",prop:"sort"}},[i("kdx-rr-input",{staticClass:"width-160",class:{"input-disabled":e.isDisabled},attrs:{number:"",maxlength:4,fixed:0,"show-word-limit":"",disabled:e.isDisabled,placeholder:"请输入"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}}),i("kdx-hint-text",[e._v("最多4位数字，数字越大，排名越靠前，默认排序为创建时间")])],1)],1)},o=[]},fb7a:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"level"},[a("kdx-form-title",[e._v("使用限制")]),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"商品使用限制："}},[a("RadioGroup",{on:{"on-change":e.changeGoodsLimit},model:{value:e.model.goods_limit,callback:function(t){e.$set(e.model,"goods_limit",t)},expression:"model.goods_limit"}},[a("Radio",{attrs:{label:"0",disabled:e.isDisabled}},[e._v("不限制")]),a("Radio",{attrs:{label:"1",disabled:e.isDisabled}},[e._v("允许以下商品使用")]),a("Radio",{attrs:{label:"2",disabled:e.isDisabled}},[e._v("限制以下商品使用")]),a("Radio",{attrs:{label:"3",disabled:e.isDisabled}},[e._v("允许以下商品分类使用")])],1),"3"===e.model.goods_limit?a("div",{staticClass:"form-item-bg-box"},[a("tree-select",{staticClass:"width-430",attrs:{transfer:!0,"show-checkbox":!0,data:e.shopLevel,disabled:e.isDisabled,multiple:!0},on:{"change-data":e.handleShopLevelChange},model:{value:e.model.goods_ids,callback:function(t){e.$set(e.model,"goods_ids",t)},expression:"model.goods_ids"}})],1):"0"!==e.model.goods_limit?a("div",{staticClass:"form-item-bg-box"},[a("div",{staticClass:"shop-list-box"},[a("Button",{staticClass:"default-primary",attrs:{disabled:e.isDisabled},on:{click:e.addShop}},[e._v("+添加商品")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.goods.list.length>0,expression:"goods.list.length > 0"}],staticClass:"shop-list"},[a("shop-name-page-list",{ref:"shop_name_list",attrs:{list:e.goods.list,disabled:e.isDisabled},on:{"on-delete":e.deleteShop}})],1)],1)]):e._e()],1),a("FormItem",{attrs:{label:"优惠使用限制："}},[a("RadioGroup",{model:{value:e.model.coupon_sale_limit,callback:function(t){e.$set(e.model,"coupon_sale_limit",t)},expression:"model.coupon_sale_limit"}},[a("Radio",{attrs:{label:"0",disabled:e.isDisabled}},[e._v("不限制")]),a("Radio",{attrs:{label:"1",disabled:e.isDisabled}},[e._v("不可与会员折扣同时使用")]),a("kdx-hint-tooltip",{attrs:{type:"form"}},[a("p",{staticClass:"bold",staticStyle:{"padding-bottom":"4px"}},[e._v("不限制：")]),a("p",{staticStyle:{"padding-bottom":"12px"}},[e._v(" 优惠券无任何使用限制，可以和其他活动进行同时使用。")]),a("p",{staticClass:"bold",staticStyle:{"padding-bottom":"4px"}},[e._v("不可与会员折扣同时使用：")]),a("p",[e._v("用户在支付时，优惠券优惠与会员折扣优惠只能享受一种，不能同时使用。")])])],1)],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"使用说明："}},[a("RadioGroup",{model:{value:e.model.default_description,callback:function(t){e.$set(e.model,"default_description",t)},expression:"model.default_description"}},[a("Radio",{attrs:{label:"1",disabled:e.isDisabled}},[e._v("统一说明")]),a("Radio",{attrs:{label:"2",disabled:e.isDisabled}},[e._v("单独设置")])],1),a("kdx-hint-text",[e._v("统一说明在"),a("router-link",{staticClass:"bold",attrs:{to:"/market/coupons/other-setting",target:"_blank"}},[e._v("【其他设置】")]),e._v("中设置，如果使用统一说明，则在优惠券说明前面显示统一说明")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.model.default_description,expression:"model.default_description === '2'"}],staticClass:"marginT-10"},[a("editor",{attrs:{height:300},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)],1),a("goods-selector",{attrs:{multiple:!0,"current-list":e.goods.list},on:{"on-change":e.selectorChange,"on-cancel":e.selectorCancel},model:{value:e.selector.modal,callback:function(t){e.$set(e.selector,"modal",t)},expression:"selector.modal"}})],1)},o=[]}}]);