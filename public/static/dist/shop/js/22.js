(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"0863":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("159b"),a("d81d"),a("ddb0"),a("ac1f"),a("5319");var n=a("2569"),i={},o=[];n.keys().map((function(e){return"./index.js"!=e?(o.push(e.replace(/(\.\/|\.js)/g,"").toLowerCase()),n(e).default):""})).forEach((function(e,t){i[o[t]]=e}));var r=i;t.default=r},2569:function(e,t,a){var n={"./Coupon.js":"90df","./Diyform.js":"3b47","./Goods.js":"70b7","./index.js":"0863"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="2569"},"262e":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var n=a("b380");function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Object(n["a"])(e,t)}},"264c":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{key:e.item._comIndex_,ref:"dragItem",staticClass:"drag-item",class:[{"active-item":e.activeItem,chooseable:e.chooseable,errorInfo:e.errorInfo&&e.errorInfo._comIndex_==e.item._comIndex_},e.item._comIndex_],on:{mouseenter:e.mouseEnter,mouseleave:e.mouseLeave,"!click":function(t){return e.clickTmp(e.item)}}},[e._t("default"),e.showDel?a("span",{staticClass:"del",attrs:{"data-html2canvas-ignore":""},on:{click:function(t){return t.stopPropagation(),e.delTmp(e.item)}}},[e._v("删除")]):e._e(),e.modalShow&&e.activeItem?a("div",{staticClass:"del-modal",attrs:{"data-html2canvas-ignore":""}},[a("div",{staticClass:"del-title"},[e._v("确认删除该组件吗？")]),a("div",{staticClass:"modal-btn-group"},[a("div",{staticClass:"modal-btn sure",on:{click:e.sureHandler}},[e._v("确认")]),a("div",{staticClass:"modal-btn cancel",on:{click:e.cancelHandler}},[e._v("取消")])])]):e._e(),a("i",{staticClass:"left-border border",attrs:{"data-html2canvas-ignore":""}}),a("i",{staticClass:"right-border border",attrs:{"data-html2canvas-ignore":""}})],2)},i=[]},"2caf":function(e,t,a){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}a.r(t),a.d(t,"default",(function(){return d}));var i=a("d967"),o=a("53ca");function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if(t&&("object"===Object(o["default"])(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}function d(e){var t=Object(i["a"])();return function(){var a,i=n(e);if(t){var o=n(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return u(this,a)}}},"3b47":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("d4ec")),o=n(a("bee2")),r=n(a("365c")),u=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"update",value:function(e){console.log(e.id,e,r.default)}}]),e}(),d=new u;t.default=d},"70b7":function(e,t,a){var n=a("dbce").default,i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d9e2"),a("d3b7"),a("159b"),a("d81d"),a("4de4");var o=i(a("5530")),r=i(a("262e")),u=i(a("2caf")),d=i(a("d4ec")),s=i(a("bee2")),c=i(a("365c")),l=n(a("d1be")),f=function(){function e(){(0,d.default)(this,e)}return(0,s.default)(e,[{key:"getGoodsList",value:function(){throw new Error("Please implement it in a subclass")}}]),e}(),p=function(e){(0,r.default)(a,e);var t=(0,u.default)(a);function a(e){var n;return(0,d.default)(this,a),n=t.call(this,e),n.getParams=function(e){var t={0:{key:"",by:"desc"},1:{key:"sales",by:"desc"},2:{key:"price",by:"desc"},3:{key:"price",by:"asc"}},a={label_field:"",sort:t[e.params.goodssort].key,by:t[e.params.goodssort].by},n=[];switch(e.params.goodsdata+""){case"0":e.data.forEach((function(e){e.gid&&n.push(e.gid)})),a=n.length?{ids:n,sort:"",by:"",page:1,pagesize:e.data.length}:null;break;case"1":a=e.params.cateid?(0,o.default)((0,o.default)({},a),{},{category_id:e.params.cateid,page:1,pagesize:e.data.length}):null;break;case"2":a=e.params.groupid?(0,o.default)((0,o.default)({},a),{},{group_id:e.params.groupid,page:1,pagesize:e.data.length}):null;break;case"3":case"is_new":a=(0,o.default)((0,o.default)({},a),{},{is_new:1,page:1,pagesize:e.data.length});break;case"4":case"is_hot":a=(0,o.default)((0,o.default)({},a),{},{is_hot:1,page:1,pagesize:e.data.length});break;case"5":case"is_recommand":a=(0,o.default)((0,o.default)({},a),{},{is_recommand:1,page:1,pagesize:e.data.length});break}return a&&(a.get_activity=1),a},n.getGoodsList=function(e){return new Promise((function(t){var a=e.data;if(a&&a.length){var i=n.getParams(e);if(!i)return;c.default.goodsApi.goodsList(i).then((function(e){if(0==e.error){var a=e.list.filter((function(e){return e})).map((function(e){var t,a,n,i={thumb:l.media(e.thumb),price:parseFloat(null!==(t=e.activities)&&void 0!==t&&t.member_price?null===(a=e.activities)||void 0===a?void 0:a.member_price:e.price),productprice:parseFloat(e.original_price),title:e.title,sales:e.sales,gid:e.id,bargain:0,credit:0,ctype:1,stock:e.stock,sub_name:e.sub_name,commission:(null===(n=e.activities)||void 0===n?void 0:n.commission)||null,has_option:e.has_option,goodstype:e.type,activities:null===e||void 0===e?void 0:e.activities,type:e.type};return i}));t(a)}else t([])}))}}))},n}return(0,s.default)(a)}(f),m=function(){function e(){(0,d.default)(this,e)}return(0,s.default)(e,[{key:"update",value:function(e){var t;"0"==e.params.goodstype&&(t=new p),t.getGoodsList(e).then((function(t){e.data=t.map((function(e){return(0,o.default)((0,o.default)({},e),{},{id:e.gid})}))}))}}]),e}(),h=new m;t.default=h},7520:function(e,t,a){},"7dfa":function(e,t,a){"use strict";a("7520")},"90df":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("d4ec")),o=n(a("bee2")),r=n(a("365c")),u=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"update",value:function(e){console.log(e.id,e,r.default)}}]),e}(),d=new u;t.default=d},c6b4:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530")),o=a("2f62"),r=n(a("f54f")),u=n(a("0863")),d={props:{item:{type:[Object,Array],default:null},lazyUpdate:{type:Boolean,default:!1}},data:function(){return{modalShow:!1,permsChecker:{},moving:!1,updater:null}},computed:(0,i.default)((0,i.default)({chooseable:function(){return"diymenu"!=this.item.id}},(0,o.mapState)("decorate",{currentModal:function(e){return e.currentModal},onlyOneComponent:function(e){return e.onlyOneComponent},errorInfo:function(e){return e.errorInfo}})),{},{activeItem:function(){return this.currentModal===this.item&&!this.onlyOneComponent},showDel:function(){return!this.onlyOneComponent&&(this.currentModal==this.item||this.moving&&this.chooseable)&&this.currentModal.params&&!1!==this.item.params.delable}}),watch:{lazyUpdate:{immediate:!0,handler:function(){this.isEdit="edit"==this.$route.query.type,this.isEdit&&this.lazyUpdate&&(this.updater=u.default[this.item.id],this.updater&&"function"==typeof this.updater.update&&this.updater.update(this.item,this.$slots.default[0]))}},activeItem:function(e){e||(this.modalShow=!1)}},created:function(){this.permsChecker=(0,r.default)()},methods:(0,i.default)((0,i.default)({},(0,o.mapMutations)("decorate",["changeFocus","delModal"])),{},{delTmp:function(){this.modalShow=!0},sureHandler:function(){this.delModal({item:this.item,pageId:this.$route.params.page}),this.modalShow=!1},cancelHandler:function(){this.modalShow=!1},clickTmp:function(e){var t=this;if(document.getElementById("forFocus").focus(),e!==this.currentModal){if("diymenu"==e.id)return;this.$emit("beforeChange",e),this.$nextTick((function(){t.changeFocus({item:e,pageId:t.$route.params.page})}))}},mouseEnter:function(){this.moving=!0},mouseLeave:function(){this.moving=!1}})};t.default=d},de68:function(e,t,a){"use strict";a.r(t);var n=a("c6b4"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},df776:function(e,t,a){"use strict";a.r(t);var n=a("264c"),i=a("de68");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("7dfa");var r=a("2877"),u=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,"5396a504",null);t["default"]=u.exports}}]);