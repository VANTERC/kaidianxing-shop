(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{"012c":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"level"},[i("kdx-form-title",{attrs:{content:"交易设置"}}),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"规格设置：",prop:"has_option"}},[i("RadioGroup",{staticClass:"flex",model:{value:e.model_has_option,callback:function(t){e.model_has_option=t},expression:"model_has_option"}},[i("Radio",{attrs:{label:"0",disabled:e.is_activity_goods}},[i("span",[e._v("单规格")])]),i("Radio",{attrs:{label:"1",disabled:e.is_activity_goods}},[i("span",[e._v("多规格")])]),i("div",{staticClass:"flex"},[i("kdx-hint-text",{staticStyle:{"padding-top":"0"},attrs:{content:"如有颜色、尺码等多种规格，请添加商品规格"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("74c2")}})],1)],1)],1),i("kdx-hint-alert",{staticStyle:{"margin-top":"10px"}},[e._v("如切换规格后，会员折扣需要重新设置，如果不设置则为系统默认该商品不支持会员折扣")]),i("div",{staticClass:"nest-box",staticStyle:{padding:"0"}},["0"===e.model_has_option?i("div",{staticClass:"single-one",staticStyle:{"padding-top":"30px"}},[i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.price",modifiers:{price:!0}}],attrs:{label:"售卖价：",prop:"price"}},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入",disabled:e.is_activity_goods,number:"",fixed:2,"min-value":0,"max-value":9999999.99},model:{value:e.model_price,callback:function(t){e.model_price=t},expression:"model_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1),i("FormItem",{attrs:{label:"划线价：",prop:"original_price"}},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入",number:"",fixed:2,"min-value":0,"max-value":9999999.99},model:{value:e.model_original_price,callback:function(t){e.model_original_price=t},expression:"model_original_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1),i("FormItem",{attrs:{prop:"cost_price"},scopedSlots:e._u([{key:"label",fn:function(){return[i("div",[i("span",[e._v("成本价")]),i("kdx-hint-tooltip",[e._v("尽量填写完整, 有助于商品销售的数据分析")]),i("span",[e._v("：")])],1)]},proxy:!0}],null,!1,2197376682)},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入",number:"",fixed:2,"min-value":0,"max-value":9999999.99},model:{value:e.model_cost_price,callback:function(t){e.model_cost_price=t},expression:"model_cost_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1)],1):e._e(),"0"===e.model_has_option?i("div",{staticStyle:{"padding-bottom":"30px"}},["2"!=e.model_type?i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.stock",modifiers:{stock:!0}}],staticStyle:{"margin-bottom":"0",display:"flex"},attrs:{label:"库存：",prop:"stock"}},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入库存",disabled:e.is_activity_goods,number:"",fixed:0,"max-value":999999999},model:{value:e.model_stock,callback:function(t){e.model_stock=t},expression:"model_stock"}})],1):i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.virtual_account_id",modifiers:{virtual_account_id:!0}}],staticStyle:{"margin-bottom":"0",display:"flex"},attrs:{label:"卡密库：",prop:"virtual_account_id"}},[i("Select",{staticStyle:{width:"520px"},attrs:{filterable:"",clearable:"","not-found-text":"暂无卡密库数据"},model:{value:e.model_virtual_account_id,callback:function(t){e.model_virtual_account_id=t},expression:"model_virtual_account_id"}},e._l(e.virtualList,(function(t){return i("Option",{key:t.id,attrs:{value:t.id,label:t.name}},[i("span",[e._v(e._s(t.name))]),i("span",{staticStyle:{float:"right",color:"#ccc"}},[e._v("库存："+e._s(t.total_count))])])})),1)],1)],1):"1"===e.model_has_option?i("div",{staticClass:"single-more"},[i("multi-option",{attrs:{model_type:e.model_type,actionType:e.actionType,flag:1},on:{"form-error":e.formError}})],1):e._e()])],1),"2"!=e.model_type?i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"库存设置：",prop:"reduction_type"}},[i("RadioGroup",{staticStyle:{"margin-bottom":"-10px"},model:{value:e.model_reduction_type,callback:function(t){e.model_reduction_type=t},expression:"model_reduction_type"}},[i("div",{staticClass:"inventory-settings"},[i("Radio",{attrs:{label:"0",disabled:e.isSeckill}},[i("span",[e._v("下单减库存")]),i("remind-label",{attrs:{title:"推荐"}})],1),i("Button",{directives:[{name:"show",rawName:"v-show",value:!e.isMoreInventorySetting,expression:"!isMoreInventorySetting"}],staticStyle:{display:"block","font-size":"12px",height:"inherit","padding-top":"10px"},attrs:{type:"text"},on:{click:e.getMoreInventorySetting}},[e._v("更多选项 "),i("span",{staticClass:"iconfont icon-line-right"})]),i("kdx-hint-text",{directives:[{name:"show",rawName:"v-show",value:e.isMoreInventorySetting,expression:"isMoreInventorySetting"}],attrs:{errContent:"恶意占用库存风险"}},[e._v("买家提交订单, 扣减库存数量, 可能会存在 ")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMoreInventorySetting,expression:"isMoreInventorySetting"}],staticClass:"inventory-settings"},[i("Radio",{attrs:{label:"1",disabled:e.isSeckill}},[i("span",[e._v("付款减库存")])]),i("kdx-hint-text",{attrs:{errContent:"超卖风险"}},[e._v("买家支付成功, 扣减库存数量, 可能会存在")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMoreInventorySetting,expression:"isMoreInventorySetting"}],staticClass:"inventory-settings"},[i("Radio",{attrs:{label:"2",disabled:e.isSeckill}},[i("span",[e._v("永不减库存")])]),i("kdx-hint-text",[e._v(" 无论在下单还是在支付成功, 该商品永远不会扣减库存数量 ")])],1)])],1):e._e(),i("collapse-panel",{attrs:{name:"展开更多交易设置","expand-name":"收起更多交易设置"}},[["0"===e.model_has_option?[2!=e.model_type?i("FormItem",{attrs:{label:"商品编码：",prop:"goods_sku"}},[i("Input",{staticClass:"width-430",attrs:{placeholder:"请输入商品编码"},model:{value:e.model_goods_sku,callback:function(t){e.model_goods_sku=t},expression:"model_goods_sku"}})],1):e._e(),2!=e.model_type?i("FormItem",{attrs:{label:"商品条码：",prop:"bar_code"}},[i("Input",{staticClass:"width-430",attrs:{placeholder:"请输入商品条码"},model:{value:e.model_bar_code,callback:function(t){e.model_bar_code=t},expression:"model_bar_code"}})],1):e._e(),"0"===e.model_type?i("FormItem",{attrs:{label:"商品重量：",prop:"weight"}},[i("kdx-rr-input",{staticClass:"width-430",attrs:{number:"",fixed:2,"min-value":0,"max-value":999999999.99,maxlength:12,placeholder:"请输入"},model:{value:e.model_weight,callback:function(t){e.model_weight=t},expression:"model_weight"}},[i("span",{attrs:{slot:"append"},slot:"append"},[e._v("克")])])],1):e._e()]:e._e(),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{prop:"ext_field.show_stock",label:"显示库存："}},[i("RadioGroup",{model:{value:e.model_ext_field.show_stock,callback:function(t){e.$set(e.model_ext_field,"show_stock",t)},expression:"model_ext_field.show_stock"}},[i("Radio",{attrs:{label:"1"}},[i("span",[e._v("是")])]),i("Radio",{attrs:{label:"0"}},[i("span",[e._v("否")])])],1),i("kdx-hint-text",{attrs:{content:"商品详情页中是否显示库存字段"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("48af")}})],1)],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"支持发票：",prop:"ext_field.invoice"}},[i("RadioGroup",{on:{"on-change":e.invoiceChange},model:{value:e.model_ext_field.invoice,callback:function(t){e.$set(e.model_ext_field,"invoice",t)},expression:"model_ext_field.invoice"}},[i("Radio",{attrs:{label:"1"}},[i("span",[e._v("是")])]),i("Radio",{attrs:{label:"0"}},[i("span",[e._v("否")])])],1)],1)]],2)],1)},n=[]},"04c9":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("ade3")),o=i(a("2909")),s=i(a("5530"));a("a9e3"),a("99af"),a("d81d"),a("b0c0"),a("c7cd"),a("fb6a"),a("c740"),a("07ac"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("a15b"),a("a434"),a("b64b"),a("b680");var r,l=a("2f62"),c=i(a("1e52")),d=i(a("7177")),u=a("6904"),p={name:"MultiOption",props:{model_type:{type:[String,Number]},actionType:{type:String}},components:{RInput:c.default,ImageSelector:d.default},data:function(){var e=this.$createElement;return{pageSizeOpts:[10,20,50],pageSize:10,pageNumber:1,cacheError:{},catchBatchData:Object.assign({},h),imageSelector:{index:-1,current:""},imgSelectCache:{index:-1,row:{optionImage:[]}},initColumns:[],initCustom:[{title:"售卖价(元)",key:"price",renderHeader:function(){return e("div",{class:"required-content"},["售卖价(元)"])}},{title:"划线价(元)",key:"original_price"},{title:"成本价",key:"cost_price"},{title:"库存",key:"stock",renderHeader:function(){return e("div",{class:"required-content"},["库存"])}},{title:"商品编码",key:"goods_sku"},{title:"商品条码",key:"bar_code"},{title:"重量(g)",key:"weight"}],local_columns:[],local_specs:[],secretColumn:[{title:"库存",key:"virtual_account_id",width:550,renderHeader:function(){return e("div",{class:"required-content"},["卡密库"])}},{title:"售卖价(元)",key:"price",renderHeader:function(){return e("div",{class:"required-content"},["售卖价(元)"])}},{title:"划线价(元)",key:"original_price"},{title:"成本价",key:"cost_price"}]}},computed:(0,s.default)((0,s.default)((0,s.default)({},(0,l.mapState)("goodAddEdit/multiOptions",{columns:function(e){return e.columns},specs:function(e){return e.specs},cacheRowSpan:function(e){return e.cacheRowSpan},cacheFormError:function(e){return e.cacheFormError},cacheSpecsError:function(e){return e.cacheSpecsError}})),(0,l.mapState)("goodAddEdit",{is_activity_goods:function(e){var t;return 1==(null===e||void 0===e||null===(t=e.model)||void 0===t?void 0:t.is_activity_goods)},virtualList:function(e){return(null===e||void 0===e?void 0:e.virtualData)||[]}})),{},{getColumns:function(){var e=this;this.$createElement;return[].concat((0,o.default)(this.local_columns),(0,o.default)(this.initColumns.map((function(t){return t.render=function(a,i){var n,o,s=e.pageSize*(e.pageNumber-1),r="".concat(i.index+s,"_").concat(i.column.key),l={},c=e.is_activity_goods&&("price"==t.key||"stock"==t.key);switch(i.column.key&&"2"!=e.model_type){case"price":case"original_price":case"cost_price":case"weight":l={maxValue:9999999.99,minValue:0,fixed:2,number:!0};break;case"stock":l={fixed:0,maxValue:999999999,number:!0};break;case"goods_sku":case"bar_code":l={fixed:0,number:!1};break}if("2"==e.model_type&&"virtual_account_id"==i.column.key){var d,u=function(a){i.row[t.key]=a,e.trackError(i.index+s,t.key,a),e.inputOptionVal(a,i,t.key)},p=e.virtualList.length>0?e.virtualList.map((function(e){return a("Option",{attrs:{value:e.id,label:e.name}},[a("span",[" ",e.name," "]),a("span",{style:"float:right;color: #ccc"},["库存：",e.total_count," "])])})):"";return a("div",[a("Select",{attrs:{value:i.row[t.key],disabled:c,fixed:l.fixed,filterable:!0,clearable:!0,"not-found-text":"暂无卡密库数据"},key:r,on:{"on-change":u}},[p]),a("p",{style:"color:red;font-size:12px;"},[(null===(d=e.cacheError[i.index+s])||void 0===d?void 0:d[t.key])||""])])}return a("div",[a("kdx-rr-input",{attrs:{className:"table-input "+(void 0!==(null===(n=e.cacheError[i.index+s])||void 0===n?void 0:n[t.key])?"error-input":""),disabled:c,value:i.row[t.key],number:l.number,maxValue:l.maxValue,minValue:l.minValue,fixed:l.fixed,maxlength:l.maxlength},key:r,on:{"on-blur":function(a){i.row[t.key]=a.target.value,e.trackError(i.index+s,t.key,a.target.value),e.inputOptionVal(a.target.value,i,t.key)}}}),a("p",{style:"color:red;font-size:12px;"},[(null===(o=e.cacheError[i.index+s])||void 0===o?void 0:o[t.key])||""])])},t}))))},total:function(){return this.$store.state.goodAddEdit.multiOptions.options.length},totalOptions:function(){return this.$store.state.goodAddEdit.multiOptions.options},tableData:{get:function(){var e=this.pageSize*(this.pageNumber-1),t=this.pageSize*this.pageNumber;return this.$store.state.goodAddEdit.multiOptions.options.slice(e,t)}}}),methods:(0,s.default)((0,s.default)((0,s.default)({},(0,l.mapMutations)("goodAddEdit/multiOptions",["addSpec","setBatch","delSpecs","addChildSpec","delChildSpec","editChildSpec","editSpec","cacheInput"])),(0,l.mapActions)("goodAddEdit/multiOptions",{checkSpecSettings:"checkSpecSettings",checkSpecs:"checkSpecs"})),{},{pageSizeChange:function(e){this.pageNumber=e.pageNumber,this.pageSize=e.pageSize},trackError:function(e,t,a){this.cacheError[e]?this.cacheError[e][t]=(0,u.trackError)(t,a):this.cacheError[e]=(0,n.default)({},t,(0,u.trackError)(t,a))},changePage:function(e){this.pageNumber=e.pageNumber,this.pageSize=e.pageSize},changeSpec:function(e,t){this.cacheSpecsError&&this.checkSpecs(),this.editSpec({row:e,val:{title:t.target.value}}),this.cacheSpecsError&&this.checkSpecs()},closeSpec:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确定删除该规格值？",onOk:function(){t.delSpecs(e)}})},batchData:function(e,t){this.catchBatchData[e]=f(t,e)},clickImgSelector:function(e){this.imageSelector=e,this.imageSelector.current=e.row.thumb,this.$refs["image_selector"].setValue(!0,this.imageSelector.current)},deleteImage:function(e){var t=this,a=this.local_specs.findIndex((function(e){return"1"===e.image_checked}));if(a+1!==this.local_specs.length){console.log(a);var i=Object.values(e.row._pos).slice(0,a+1);console.log(i),this.totalOptions.forEach((function(e){e._posArr=Object.values(e._pos),e._posArr.join("").includes(i.join(""))&&(e.thumb="",t.cacheInput({_pos:e._pos,key:"thumb",value:""}))}))}else this.totalOptions[e.index+(this.pageNumber-1)*this.pageSize][e.column.key]=""},thumbAllChange:function(e){this.inputOptionVal(e,this.imgSelectCache,"thumb")},fnImageCheckedChange:function(e,t){var a=this;r=0,this.resetOptionsThumb(),this.local_columns.forEach((function(e,t){"thumb"===e.key&&a.local_columns.splice(t,1)})),"1"===t&&(this.local_specs.forEach((function(e){e.image_checked="0"})),this.local_specs[e].image_checked="1",this.local_columns.splice(e+1,0,{title:"规格图片",key:"thumb",slot:"thumb"}))},setUsing:function(e){this.setBatch(e),this.catchBatchData=Object.assign({},h),this.checkSpecSettings(),this.cacheError=this.cacheFormError||{}},changeImageSelector:function(e){this.inputOptionVal(e,this.imageSelector,"thumb")},inputOptionVal:function(e,t,a){var i=f(e,a);"thumb"!==a?(this.tableData[t.index][a]=i,this.cacheInput({_pos:t.row._pos,key:a,value:i})):this.formatOptionsThumb(t,i)},formatOptionsThumb:function(e,t){var a=this;this.imageSelector.current=t;var i=e.row,n=e.index;this.totalOptions[n+(this.pageNumber-1)*this.pageSize]["thumb"]=t,this.cacheInput({_pos:i._pos,key:"thumb",value:t});var o=0,s=[];this.local_columns.forEach((function(e,t){"thumb"===e.key&&(o=t),0!==o&&t>o&&s.push(t-1)}));var r=0;s.length&&(r=1),s.forEach((function(e){r*=a.local_specs[e].items.length}));for(var l=1;l<r;l++)this.totalOptions[n+(this.pageNumber-1)*this.pageSize+l]["thumb"]=t,this.cacheInput({_pos:this.totalOptions[n+(this.pageNumber-1)*this.pageSize+l]._pos,key:"thumb",value:t})},resetOptionsThumb:function(){var e=this;this.totalOptions.forEach((function(t){t["thumb"]="",e.cacheInput({_pos:t._pos,key:"thumb",value:""})})),this.imgSelectCache={index:-1,current:"",row:{}}},handleSpan:function(e){var t=e.column,a=e.rowIndex,i=e.columnIndex,n=this.pageSize*(this.pageNumber-1),o=n+this.pageSize,s=n+a;if(i<this.local_columns.length){"thumb"===t.key&&(r=i,i-=1),r&&i>r&&(i-=1);for(var l=0,c=0,d=0;;d+=this.cacheRowSpan[i]){if(!(d<=s)){c=d;break}l=d}c=Math.min(c,o),l=Math.max(l,n);var u={rowspan:0,colspan:1};return s==l&&(u={rowspan:c-s,colspan:1}),u}return{rowspan:1,colspan:1}},getFixed:function(e){switch(e.key){case"price":case"original_price":case"cost_price":case"weight":return 2;case"stock":return 0;default:return}},getMaxValue:function(e){switch(e.key){case"price":case"original_price":case"cost_price":case"weight":return 9999999.99;case"stock":return 999999999;default:return}},getMinValue:function(e){switch(e.key){case"price":case"original_price":case"cost_price":case"weight":return 0;case"stock":return 0;default:return}},isNumberType:function(e){return["price","original_price","cost_price","stock","weight"].indexOf(e.key)>-1}}),watch:{cacheSpecsError:function(){for(var e in this.cacheSpecsError){this.$focusError(e);break}},cacheFormError:function(){var e=this;if(this.cacheError=this.cacheFormError||{},this.cacheFormError){this.$nextTick((function(){e.$focusError(document.querySelectorAll("#childSpec .error-input")[0])})),this.$Message.error("请完善规格设置"),this.$emit("form-error",this.cacheFormError);var t=Object.keys(this.cacheFormError)[0];this.pageNumber=Math.floor(t/this.pageSize)+1}},columns:{handler:function(e){this.local_columns=(0,o.default)(e)},immediate:!0,deep:!0},specs:{handler:function(e){this.local_specs=(0,o.default)(e)},immediate:!0,deep:!0},model_type:{handler:function(e){this.initColumns="2"==e?this.secretColumn:this.initCustom},immediate:!0,deep:!0}}};t.default=p;var h={price:"",original_price:"",cost_price:"",stock:"",goods_sku:"",bar_code:"",weight:"",virtual_account_id:""};function f(e,t){var a,i=["price","original_price","cost_price","weight"];return a=i.indexOf(t)>-1?parseFloat(e)?parseFloat(e).toFixed(2):0:"stock"===t?parseInt(e)?parseInt(e):0:e,a}},"07ac":function(e,t,a){var i=a("23e7"),n=a("6f53").values;i({target:"Object",stat:!0},{values:function(e){return n(e)}})},"086b":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("6062"),a("3ca3"),a("ddb0");var n=i(a("5530")),o=a("d51a"),s={data:function(){return{}},computed:(0,n.default)((0,n.default)((0,n.default)({},(0,o.modelMap)()),(0,o.stateMap)(["dispatchList"])),{},{dispatchEnable:function(){return this.$store.getters["goodAddEdit/dispatchEnable"]},isAddOperate:function(){return"undefined"==typeof this.$route.query.operate}}),watch:{},methods:{expressSelected:function(e){return new Set(this.$store.state.goodAddEdit.model.logistics_support).has(e)},refreshDispatchTemplate:function(){this.$store.dispatch("goodAddEdit/getDispatchTemplateList")},addDispatchTemplate:function(){this.$utils.openNewWindowPage("/order/ordinary-express/add")},fnJumpOrdinaryExpress:function(){this.$utils.openNewWindowPage("/order/ordinary-express")},choosePlace:function(){this.$refs.selector.setValue()},changeDispatchCount:function(e){this.model_dispatch_id="1"==e?"":"0"}}};t.default=s},"09bb":function(e,t,a){"use strict";a("f169")},"0a6e":function(e,t,a){"use strict";a.r(t);var i=a("2d9d"),n=a("5673");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("85dc");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"42e2186a",null);t["default"]=r.exports},"0aaf":function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_video.png"},"0b72":function(e,t,a){"use strict";a.r(t);var i=a("2a6e"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"0bcd":function(e,t,a){"use strict";a("9315")},"0c63":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3");var i={name:"MultiSelect",props:{value:{type:[Number,String],required:!0}},data:function(){return{type:""}},computed:{},watch:{value:{handler:function(e){this.type=e},immediate:!0,virtualAccount_flag:"0"}},mounted:function(){},methods:{isDisabled:function(e){switch(e){case"0":case"1":return!!this.$route.query.id;case"2":return!!this.$route.query.id||"2"===this.virtualAccount_flag||"3"===this.virtualAccount_flag}},handleInput:function(e){this.$emit("input",e)},goMoney:function(){this.$router.push({path:"/plugins/center/index"})}}};t.default=i},"0d87":function(e,t,a){"use strict";a.r(t);var i=a("a24f"),n=a("0f2a");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("232d");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"44d73282",null);t["default"]=r.exports},"0f2a":function(e,t,a){"use strict";a.r(t);var i=a("d476"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},1127:function(e,t,a){"use strict";a.r(t);var i=a("860c"),n=a("5ee8");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("2f46");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"25b073f2",null);t["default"]=r.exports},1188:function(e,t,a){"use strict";a("1b02")},"12a9":function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_market.png"},1808:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"0"===e.model_type||"1"===e.model_type?a("div",{staticClass:"level"},[a("kdx-form-title",{attrs:{content:"物流设置"}}),"1"===e.model_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"自动发货内容："}},[a("RadioGroup",{model:{value:e.model_auto_deliver,callback:function(t){e.model_auto_deliver=t},expression:"model_auto_deliver"}},[a("Radio",{attrs:{label:"1"}},[a("span",[e._v("支持")])]),a("Radio",{attrs:{label:"0"}},[a("span",[e._v("不支持")])])],1),"1"==e.model_auto_deliver?a("kdx-hint-text",[e._v("用户下单付款成功后订单自动完成")]):e._e(),"0"==e.model_auto_deliver?a("kdx-hint-text",[e._v("用户下单付款成功后商城自动发货，订单为待收货状态")]):e._e(),"1"===e.model_auto_deliver?a("div",{staticClass:"nest-box"},[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"自动发货内容：",prop:"auto_deliver_content"}},[a("Input",{staticClass:"width-430",attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入"},model:{value:e.model_auto_deliver_content,callback:function(t){e.model_auto_deliver_content=t},expression:"model_auto_deliver_content"}})],1)],1):e._e()],1):e._e(),"0"===e.model_type?a("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.logistics_support",modifiers:{logistics_support:!0}}],staticClass:"r-form-item-checkbox",attrs:{label:"物流支持：",prop:"logistics_support"}},[a("CheckboxGroup",{model:{value:e.model_logistics_support,callback:function(t){e.model_logistics_support=t},expression:"model_logistics_support"}},[a("div",{staticClass:"logistics-box"},[a("Checkbox",{attrs:{label:"1",disabled:0===e.dispatchEnable.express}},[e._v(" 快递发货 "),0===e.dispatchEnable.express?a("span",[e._v(" (当前不可用，请到 "),a("span",{staticStyle:{color:"#2D8CF0",cursor:"pointer"},on:{click:e.fnJumpOrdinaryExpress}},[e._v(" 【配送方式】 ")]),e._v(" 管理中开启) ")]):e._e()])],1)])],1):e._e(),"0"===e.model_type&&e.expressSelected("1")?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"运费设置：",prop:"dispatch_type"}},[a("RadioGroup",{on:{"on-change":e.changeDispatchCount},model:{value:e.model_dispatch_type,callback:function(t){e.model_dispatch_type=t},expression:"model_dispatch_type"}},[a("Radio",{attrs:{label:"0"}},[a("span",[e._v("包邮")])]),a("Radio",{attrs:{label:"1"}},[a("span",[e._v("选择模板")])]),a("Radio",{attrs:{label:"2"}},[a("span",[e._v("统一运费")])])],1),"1"===e.model_dispatch_type?a("div",{staticClass:"nest-box freight-setting"},[a("FormItem",{key:e.model_dispatch_id,attrs:{"label-width":0,prop:"dispatch_id"}},[a("Select",{staticClass:"width-430",model:{value:e.model_dispatch_id,callback:function(t){e.model_dispatch_id=t},expression:"model_dispatch_id"}},e._l(e.dispatchList,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.dispatch_name)+" ")])})),1),a("Button",{attrs:{type:"text"},on:{click:e.refreshDispatchTemplate}},[e._v(" 刷新 ")]),a("Button",{attrs:{type:"text"},on:{click:e.addDispatchTemplate}},[e._v(" 添加模板 ")]),a("kdx-hint-text",{attrs:{content:"运费模板支持按地区设置运费,按购买件数计算运费, 按重量计算运费等, 运费模板需要添加后刷新才能生效"}})],1)],1):e._e(),"2"===e.model_dispatch_type?a("div",{staticClass:"nest-box freight-setting"},[a("FormItem",{staticClass:"unify-freight",attrs:{prop:"dispatch_price"}},[a("kdx-rr-input",{staticClass:"width-340",attrs:{number:"",fixed:2,"min-value":0,"max-value":9999999.99,maxlength:10,placeholder:"请输入"},model:{value:e.model_dispatch_price,callback:function(t){e.model_dispatch_price=t},expression:"model_dispatch_price"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("元")])])],1)],1):e._e()],1):e._e()],1):e._e()},n=[]},"19b1":function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_tag.png"},"1ac4":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("5530")),o=i(a("ef19")),s=i(a("2917")),r=a("8812"),l=i(a("c6072")),c=a("2f62"),d={components:{MultiOption:o.default,CollapsePanel:s.default,RemindLabel:l.default},data:function(){return{}},computed:(0,n.default)((0,n.default)((0,n.default)((0,n.default)({},(0,r.modelMap)()),(0,r.stateMap)(["rules","isThumbAddSlide","isShowVideo","shopLabel","isMoreInventorySetting","actionType"])),(0,c.mapState)("goodAddEdit",{is_activity_goods:function(e){var t;return 1==(null===e||void 0===e||null===(t=e.model)||void 0===t?void 0:t.is_activity_goods)},virtualList:function(e){return null===e||void 0===e?void 0:e.virtualData}})),{},{isSeckill:function(){var e;return 1==(null===(e=this.$store.state.goodAddEdit.model)||void 0===e?void 0:e.is_seckill)}}),methods:{formError:function(e){this.$emit("form-error",e)},getMoreInventorySetting:function(){this.isMoreInventorySetting=!0},invoiceChange:function(e){var t=this;"0"==this.$store.state.config.business.invoice&&"1"===e&&this.$Modal.confirm({title:"您还未开启支持发票类型",content:"购买商品支持开发票时，需要在设置 [交易设置-发票设置] 中选择支持发票类型",okText:"去设置",onOk:function(){var e=t.$router.resolve({path:"/setting/business/index"});window.open(e.href,"_blank")},onCancel:function(){t.model_ext_field.invoice="0"}})}}};t.default=d},"1b02":function(e,t,a){},"1b91":function(e,t,a){},"1e52":function(e,t,a){"use strict";a.r(t);var i=a("a3ea"),n=a("81c2");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("1188");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=r.exports},"1f28":function(e,t,a){},2276:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-content-bar",{ref:"content_bar",attrs:{loading:e.loading},scopedSlots:e._u([{key:"btn",fn:function(){return[a("Button",{directives:[{name:"show",rawName:"v-show",value:"distribution"!==e.value,expression:"value !== 'distribution'"}],staticClass:"primary-long",on:{click:e.handleNextStep}},[e._v("下一步")]),a("Button",{staticClass:"default-long",on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[a("Tabs",{staticStyle:{background:"#fff","margin-top":"20px","min-height":"100%"},attrs:{animated:!1,name:"floor1"},on:{"on-click":e.tabClick},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("TabPane",{attrs:{label:e.tab.base,name:"base"}},[a("keep-alive",[a("base-add",{ref:"base",attrs:{curTab:e.value,form_status:e.form_status}})],1)],1),a("TabPane",{attrs:{label:e.tab.detail,name:"detail"}},[a("base-detail")],1),a("TabPane",{attrs:{label:e.tab.param,name:"param"}},[a("keep-alive",["param"===e.value?a("base-param",{ref:"param"}):e._e()],1)],1),a("TabPane",{attrs:{label:e.tab.limit,name:"limit"}},[a("keep-alive",["limit"===e.value?a("base-limit",{ref:"limit"}):e._e()],1)],1),a("TabPane",{attrs:{label:e.tab.market,name:"market"}},[a("keep-alive",[a("base-market",{ref:"market"})],1)],1),a("TabPane",{attrs:{label:e.tab.distribution,name:"distribution"}},[a("keep-alive",["distribution"===e.value?a("base-distribution",{ref:"distribution"}):e._e()],1)],1)],1)],1)},n=[]},2315:function(e,t,a){"use strict";a.r(t);var i=a("770e"),n=a("61c0");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("c139");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"08e0f100",null);t["default"]=r.exports},"232d":function(e,t,a){"use strict";a("1f28")},2917:function(e,t,a){"use strict";a.r(t);var i=a("fc45"),n=a("f3be");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("a226");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"1fe6b168",null);t["default"]=r.exports},"2a6e":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("5530"));a("a9e3");var o=a("8812"),s={props:{form_status:{type:[String,Number],default:-1}},data:function(){return{dateOptions:{disabledDate:function(e){return e.valueOf()<Date.now()}}}},computed:(0,n.default)({},(0,o.modelMap)()),methods:{changeAutoStatus:function(e){e&&(this.model_status="")},changeStatus:function(e){e&&(this.model_ext_field.auto_putaway="0")}}};t.default=s},"2bc1":function(e,t,a){"use strict";a.r(t);var i=a("2276"),n=a("5dd6");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("6113");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"1da65316",null);t["default"]=r.exports},"2cda":function(e,t,a){},"2d8f":function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_main_single.png"},"2d9d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"multi-select"},[a("RadioGroup",{attrs:{disabled:e.isDisabled("0")},on:{input:e.handleInput},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("Radio",{attrs:{label:"0",border:""}},[a("div",{staticClass:"tit"},[e._v("实体商品")]),a("div",{staticClass:"desc"},[e._v("物流发货")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1),a("Radio",{attrs:{label:"1",border:"",disabled:e.isDisabled("1")}},[a("div",{staticClass:"tit"},[e._v("虚拟商品")]),a("div",{staticClass:"desc"},[e._v("无需物流")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1),a("Radio",{attrs:{label:"2",border:"",disabled:e.isDisabled("2")}},[a("div",{staticClass:"tit"},[e._v("虚拟卡密")]),a("div",{staticClass:"desc"},[e._v("自动发卡 无需物流")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1)],1),e.$route.query.id?e._e():a("kdx-hint-text",[e._v("商品类型在商品保存后无法修改，请谨慎选择。")])],1)},n=[]},"2f46":function(e,t,a){"use strict";a("2cda")},3101:function(e,t,a){function i(e,t){var a=[];function i(t){t.forEach((function(t){if(new Set(e).has(t.value))if(t.children&&t.children.length){var n=t.children.map((function(e){return e.value})),o=n.some((function(t){return e.indexOf(t)>=0}));o||a.push(t.value),i(t.children)}else a.push(t.value);else t.children&&t.children.length&&i(t.children)}))}return i(t),a}Object.defineProperty(t,"__esModule",{value:!0}),t.formatData=i,a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("d81d")},"35c7":function(e,t,a){"use strict";a.r(t);var i=a("012c"),n=a("8fff");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("d38c");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"449bd1b3",null);t["default"]=r.exports},"382a":function(e,t,a){},"3a73":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3");var i={name:"RInput",props:{value:{type:String,required:!0},type:{type:String,default:"text"},closable:{type:Boolean,default:!1},placeholder:{type:String},width:{type:Number,default:120},maxlength:{type:Number},showWordLimit:{type:Boolean,default:!1},prefix:{type:String},suffix:{type:String},disabled:{type:Boolean,default:!1}},computed:{cacheValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{onBlur:function(){this.$emit("blur",this.cacheValue)},close:function(){this.$emit("close")}}};t.default=i},"43be":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"remind-label"},[a("span",{staticClass:"box"},[e._v(" "+e._s(e.title)+" "),a("span")])])},n=[]},"48af":function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_stock.png"},4996:function(e,t,a){"use strict";a.r(t);var i=a("1808"),n=a("b2de");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("09bb");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"43ba9236",null);t["default"]=r.exports},"4eb91":function(e,t,a){"use strict";a("c603")},"52a5":function(e,t,a){"use strict";a.r(t);var i=a("be78"),n=a("0b72");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("4eb91");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"85e27f76",null);t["default"]=r.exports},5381:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=i(a("1da1")),o=i(a("5530"));a("d3b7"),a("3ca3"),a("ddb0"),a("6062"),a("e9c4"),a("d81d"),a("498a"),a("159b"),a("b64b"),a("a15b");var s=i(a("7666")),r=a("3fdc"),l=i(a("7ac9")),c=a("2f62"),d={name:"add",components:{BaseAdd:s.default,BaseDetail:function(){return Promise.all([a.e(0),a.e(104)]).then(a.bind(null,"cc4d"))},BaseLimit:function(){return a.e(61).then(a.bind(null,"9b6f"))},BaseMarket:function(){return a.e(118).then(a.bind(null,"c3b6"))},BaseParam:function(){return a.e(105).then(a.bind(null,"3696"))},BaseDistribution:function(){return a.e(117).then(a.bind(null,"d94c"))}},data:function(){return{value:"base",id:0,subShopId:"",operate:"",type:"update",loading:!1,lastValue:"base",form_status:-1}},watch:{"$route.path":{handler:function(){this.id=this.$route.query.id,this.subShopId=this.$route.query.sb,this.operate=this.$route.query.operate,this.form_status=this.$route.query.status,this.$store.state.goodAddEdit.actionType=this.id?"update":"create"},immediate:!0}},computed:(0,o.default)((0,o.default)((0,o.default)({},(0,c.mapState)("goodAddEdit",{validateType:function(e){return e.validateType},virtualList:function(e){return null===e||void 0===e?void 0:e.virtualData}})),(0,c.mapState)("goodAddEdit/multiOptions",{cacheSpecsError:function(e){return e.cacheSpecsError},cacheFormError:function(e){return e.cacheFormError}})),{},{tab:function(){var e=this,t=this.$createElement;return{base:function(){var a;return e.validateType.indexOf("base")>-1&&(a=t("span",{class:"iconfont icon-tishi-prompt"})),t("div",[t("span",["基本"]),a])},detail:function(){var a;return e.validateType.indexOf("detail")>-1&&(a=t("span",{class:"iconfont icon-tishi-prompt"})),t("div",[t("span",["详情"]),a])},param:function(){var a;return e.validateType.indexOf("param")>-1&&(a=t("span",{class:"iconfont icon-tishi-prompt"})),t("div",[t("span",["参数"]),a])},limit:function(){var a;return e.validateType.indexOf("limit")>-1&&(a=t("span",{class:"iconfont icon-tishi-prompt"})),t("div",[t("span",["权限"]),a])},market:function(){var a;return e.validateType.indexOf("market")>-1&&(a=t("span",{class:"iconfont icon-tishi-prompt"})),t("div",[t("span",["营销"]),a])},distribution:function(){var a;return e.validateType.indexOf("distribution")>-1&&(a=t("span",{class:"iconfont icon-tishi-prompt"})),t("div",[t("span",["分销"]),a])}}},dispatchEnable:function(){return this.$store.getters["goodAddEdit/dispatchEnable"]}}),methods:(0,o.default)((0,o.default)((0,o.default)((0,o.default)({},(0,c.mapActions)("goodAddEdit/vipDiscount",["getVipGroup","getVipLevelList","getVipLevels"])),(0,c.mapActions)("goodAddEdit",["getShopClassify","getGoodData","getDispatchTemplateList","getDispatchEnable","getMShopClassify","getVirtualData"])),(0,c.mapActions)("goodAddEdit/multiOptions",{checkSpecSettings:"checkSpecSettings",checkSpecs:"checkSpecs"})),{},{tabClick:function(e){this.validate(),this.lastValue=e},handleSave:function(){var e=this;this.validate(!0).then((function(t){if(t){var a=e.formatParams();a&&(e.id&&"edit"===e.operate?e.editGood(a):e.addGood(a))}}))},handleNextStep:function(){var e;switch(null===(e=this.$refs["content_bar"])||void 0===e||e.returnToTop(),this.validate(),this.value){case"base":this.value="detail";break;case"detail":this.value="param";break;case"param":this.value="limit";break;case"limit":this.value="market";break;case"market":this.value="distribution";break}},formatParams:function(){var e=this.getGoods();"copy"===this.operate&&delete e.id;var t=this.$store.state.goodAddEdit.videoParams;"network"===t.type?(e.video=t.video_url,e.video_type="2"):"local"===t.type?e.video_type="1":(e.video_type="0",e.video=t.video_url);var a=this.$store.state.goodAddEdit.multiOptions.specs,i={};if(e.content&&(e.content=this.$utils.delmedia(e.content),e.content=this.$utils.alterVideo(e.content)),"2"===e.type&&"0"===e.has_option&&this.virtualList.some((function(t){t.id==e.virtual_account_id&&(e.stock=t.total_count)})),i="1"===e.has_option?Object.assign({goods:e,spec:a,options:this.getMultiOption(e)}):{goods:e},"0"===i.goods.type){if(i.goods.auto_deliver="0",i.goods.auto_deliver_content="",new Set(i.goods.logistics_support).has("1")?i.goods.dispatch_express="1":(i.goods.dispatch_express="0",i.goods.dispatch_type="0",i.goods.dispatch_id="0",i.goods.dispatch_price="0"),0===this.dispatchEnable.express)return this.$Message.error("请选择配送方式"),!1}else"1"===i.goods.type?(i.goods.weight="0",i.goods.dispatch_type="2",i.goods.dispatch_id="0",i.goods.dispatch_price="0",i.goods.ext_field.return="0",i.goods.ext_field.exchange="0",i.goods.ext_field.is_delivery_pay="0",i.goods.dispatch_express="0"):"2"===i.goods.type&&(i.goods.ext_field.is_delivery_pay="0",delete i.goods.weight,delete i.goods.dispatch_type,delete i.goods.dispatch_id,delete i.goods.dispatch_price,delete i.goods.ext_field.return,delete i.goods.ext_field.refund,delete i.goods.ext_field.exchange,delete i.goods.dispatch_express,delete i.goods.reduction_type,delete i.goods.single_full_unit_switch,delete i.goods.single_full_unit,delete i.goods.single_full_quota_switch,delete i.goods.single_full_quota);delete i.goods.logistics_support;var n={};for(var o in i)n[o]=JSON.stringify(i[o]);return n},addGood:function(e){var t=this;this.loading=!0,this.$api.goodsApi.addGood(e).then((function(e){if(t.loading=!1,0===e.error){var a;if(t.$Message.success("商品添加成功"),"plugin"===(null===(a=t.$route.query)||void 0===a?void 0:a.from))return void t.$router.push({path:"/goods/list/inSale"});t.$router.go(-1)}}))},editGood:function(e){var t=this;this.loading=!0,this.$api.goodsApi.editGood(e).then((function(e){t.loading=!1,0===e.error&&(t.$Message.success("商品修改成功"),t.$router.go(-1))}))},getGoods:function(){return(0,r.exchangeArrayToString)(this.$store.state.goodAddEdit.model)},getMultiOption:function(e){var t=this,a=this.$store.state.goodAddEdit.multiOptions.options.map((function(e){var t=Object.assign({},e);for(var a in t)"goods_sku"===a||"thumb"==a||(""+t[a]).trim()||(t[a]="0");return t}));return a.forEach((function(a){var i=[];"2"===e.type&&"1"===e.has_option&&t.virtualList.some((function(e){e.id==a.virtual_account_id&&(a.stock=e.total_count)})),Object.keys(a._pos).forEach((function(e){i.push(a._pos[e])})),a.title=a.childSpecVal.join("+"),a.specs=i,delete a._pos,delete a.childSpecVal,delete a.discount})),a},validate:function(e){var t=this;return new Promise((function(a){var i=t.getGoods(),n=[],o=[],s=["base","detail","param","limit","market"],r=["base","base","detail","param","limit","market"];t.$nextTick((function(){1==i.has_option&&(t.checkSpecs(),o.push(t.checkSpecSettings())),o.push(t.$refs["base"].validate()),o.push(t.validateDetail(i)),o.push(t.validateParams(i)),t.$refs["limit"]?o.push(t.$refs["limit"].validate()):o.push(t.validateLimit(i)),o.push(t.$refs["market"].validate()),Promise.all(o).then((function(o){o.forEach((function(e,t){e||(1==i.has_option?n.push(r[t]):n.push(s[t]))})),t.$store.commit("goodAddEdit/setValidateType",n),null!==n&&void 0!==n&&n.length?(e&&(t.value=n[0]),e&&(t.value=n[0],"detail"===t.value&&t.$Message.error("商品详情超过最大限制")),a(!1)):a(!0)})).catch((function(e){console.log("err",e)}))}))}))},validateDetail:function(e){function t(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=0;for(e=0;e<a.length;e++)t=a.charCodeAt(e),t<127?i+=1:128<=t&&t<=2047?i+=2:2048<=t&&t<=65535&&(i+=3);return i}var a=t(e.content);return!(a>1e7)||("detail"===this.value&&this.$Message.error("商品详情超过最大限制"),!1)},validateParams:function(e){return 0==e.params_switch||!!(e.params&&e.params.length>0)},validateLimit:function(e){for(var t=["browse_level_perm","browse_tag_perm","buy_level_perm","buy_tag_perm"],a=!0,i=0,n=t;i<n.length;i++){var o,s=n[i];if("1"==e[s]&&(!e["".concat(s,"_ids")]||null===(o=e["".concat(s,"_ids")])||void 0===o||!o.length)){a=!1;break}}return a}}),beforeDestroy:function(){l.default.clear(),this.$store.commit("goodAddEdit/resetModel")},created:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.$route.query.type&&e.$nextTick((function(){e.$store.commit("goodAddEdit/setModelProps",{type:e.$route.query.type})})),a={},e.getDispatchEnable(a),e.getDispatchTemplateList(e.subShopId),e.getVipLevels(),t.next=8,e.getShopClassify();case 8:return l.default.setStore(e.$store),e.$store.commit("goodAddEdit/setValidateType",[]),e.$store.dispatch("config/getDeduction"),e.$store.dispatch("config/getBusiness"),t.next=14,e.getGoodData({id:e.id,operate:e.operate});case 14:e.getVirtualData(),e.loading=!1;case 16:case"end":return t.stop()}}),t)})))()}};t.default=d},5673:function(e,t,a){"use strict";a.r(t);var i=a("0c63"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"583f":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=i(a("2909"));function o(e,t){var a=[];function i(e,o){e.forEach((function(e){var s=[].concat((0,n.default)(o),[e]);e.children&&e.children.length?i(e.children,s):t||a.push(s),t&&a.push(s)}))}return i(e,[]),a}a("d3b7"),a("159b"),a("99af")},"5dd6":function(e,t,a){"use strict";a.r(t);var i=a("5381"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"5ee8":function(e,t,a){"use strict";a.r(t);var i=a("acf3"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},6113:function(e,t,a){"use strict";a("a751")},"61c0":function(e,t,a){"use strict";a.r(t);var i=a("b4a8"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"622a":function(e,t,a){"use strict";a("f374")},"6dd0":function(e,t,a){function i(e,t,a){this.$children.forEach((function(n){var o=n.$options.name;o===e?n.$emit.apply(n,[t].concat(a)):i.apply(n,[e,t].concat([a]))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("159b"),a("b0c0"),a("99af");var n={methods:{dispatch:function(e,t,a){var i=this.$parent||this.$root,n=i.$options.name;while(i&&(!n||n!==e))i=i.$parent,i&&(n=i.$options.name);i&&i.$emit.apply(i,[t].concat(a))},broadcast:function(e,t,a){i.call(this,e,t,a)}}};t.default=n},"6e2e":function(e,t,a){},"6f53":function(e,t,a){var i=a("83ab"),n=a("e330"),o=a("df75"),s=a("fc6a"),r=a("d1e7").f,l=n(r),c=n([].push),d=function(e){return function(t){var a,n=s(t),r=o(n),d=r.length,u=0,p=[];while(d>u)a=r[u++],i&&!l(n,a)||c(p,e?[a,n[a]]:n[a]);return p}};e.exports={entries:d(!0),values:d(!1)}},"70cc":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i-select",e._b({ref:"select",staticClass:"ivu-tree-select",class:e.classes,attrs:{placeholder:e.placeholder,multiple:e.multiple,"transfer-class-name":e.transferClassName,transfer:e.transfer},on:{"on-change":e.handleChange,"on-open-change":e.handleOpenChange}},"i-select",e.$attrs,!1),[a("Tree",{ref:"tree",attrs:{data:e.tmpData,multiple:e.multiple,"check-strictly":e.checkStrictly,"show-checkbox":e.multiple&&e.showCheckbox,"check-directly":e.checkDirectly,"load-data":e.loadData},on:{"on-select-change":e.handleSelectNode,"on-check-change":e.handleSelectNode}})],1)},n=[]},"74c2":function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_specs.png"},7666:function(e,t,a){"use strict";a.r(t);var i=a("a69d"),n=a("bc9d");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("0bcd");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"c2adc720",null);t["default"]=r.exports},"770e":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"level"},[i("kdx-form-title",{attrs:{content:"基本信息"}}),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.title",modifiers:{title:!0}}],attrs:{label:"商品标题：",prop:"title"}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"textarea",rows:1,autosize:"",maxlength:"70","show-word-limit":"",placeholder:"请输入商品标题"},model:{value:e.model_title,callback:function(t){e.model_title=t},expression:"model_title"}})],1),i("FormItem",{attrs:{label:"商品副标题：",prop:"sub_name"}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"textarea",rows:1,autosize:"",maxlength:"80","show-word-limit":"",placeholder:"请输入商品副标题"},model:{value:e.model_sub_name,callback:function(t){e.model_sub_name=t},expression:"model_sub_name"}})],1),i("FormItem",{attrs:{label:"商品简称："}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"text",maxlength:"16","show-word-limit":"",placeholder:"请输入商品简称"},model:{value:e.model_short_name,callback:function(t){e.model_short_name=t},expression:"model_short_name"}})],1),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.thumb",modifiers:{thumb:!0}}],attrs:{label:"商品主图：",prop:"thumb"}},[i("kdx-image-video",{attrs:{type:"image",current:e.model_thumb},on:{"on-change":e.changeThumb}}),i("div",[i("kdx-hint-text",[i("span",[e._v("用于商城列表、双列三列商品组、分享头图。建议尺寸：800*800像素。")]),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("f28e")}})],1),i("kdx-hint-text",{staticStyle:{"padding-top":"6px"}},[i("span",[e._v("单列商品组建议尺寸：800*367像素，如选择此尺寸建议取消勾选显示为商品轮播图。")]),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("2d8f")}})],1)],1),i("Checkbox",{staticStyle:{"margin-top":"10px"},on:{"on-change":e.thumbAddSlideChange},model:{value:e.isThumbAddSlide,callback:function(t){e.isThumbAddSlide=t},expression:"isThumbAddSlide"}},[e._v("显示为商品轮播图")]),e.isShowVideo?e._e():i("Button",{staticStyle:{display:"block"},attrs:{type:"text"},on:{click:e.addVideo}},[e._v("+添加视频")])],1),e.isShowVideo?i("FormItem",{attrs:{label:"主图视频：",prop:"video"}},[i("kdx-image-video",{staticStyle:{"padding-bottom":"10px"},attrs:{type:"video",video:e.model_video,current:e.model_video_thumb},on:{"on-video-change":e.changeVideo,"on-change":e.changeVideoImage}}),i("kdx-hint-text",{staticClass:"marginT-10"},[e._v("添加主图视频可提升成交转化，有利于获取更多新流量；建议视频突出商品核心卖点，时长 9-30 秒，宽高比 16:9 "),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("0aaf")}})],1)],1):e._e(),i("FormItem",{attrs:{label:"商品轮播图：",prop:"thumb_all"}},[i("kdx-image-video",{staticClass:"swiper-img",attrs:{type:"image",limit:10,multiple:!0,"current-list":e.model_thumb_all,"is-drag":""},on:{"on-change":e.thumbAllChange}}),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"建议尺寸: 800*800像素, 轮播图可以拖拽图片调整顺序,最多上传10张"}}),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("baa5")}})],1)],1),i("FormItem",{attrs:{label:"商品分类：",prop:"category_id"}},[i("tree-select",{staticClass:"width-430",attrs:{transfer:!0,"show-checkbox":!0,data:e.shopLevel,multiple:!0,isHandlePath:!0},on:{"on-change":e.handleShopLevelChange,"change-data":e.changeData},model:{value:e.model_category_id,callback:function(t){e.model_category_id=t},expression:"model_category_id"}}),e.showErrContent?i("kdx-hint-text",{attrs:{errContent:e.emsg}}):e._e()],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"营销标签："}},[i("div",[i("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.model_is_recommand,callback:function(t){e.model_is_recommand=t},expression:"model_is_recommand"}},[e._v("推荐")]),i("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.model_is_new,callback:function(t){e.model_is_new=t},expression:"model_is_new"}},[e._v("新品")]),i("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.model_is_hot,callback:function(t){e.model_is_hot=t},expression:"model_is_hot"}},[e._v("热卖")])],1),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"给商品添加专属营销标签"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("12a9")}})],1)],1)]),i("FormItem",{attrs:{label:"商品标签：",prop:"label_id"}},[i("Button",{staticClass:"default-primary",on:{click:e.editShopLabel}},[e._v("编辑")]),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("19b1")}}),e.shopLabel.data.length>0?i("div",{staticClass:"label-list",staticStyle:{"margin-top":"10px","line-height":"0","margin-bottom":"-10px"}},e._l(e.shopLabel.data,(function(t,a){return i("kdx-tag-label",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"warning",closable:!0,border:""},on:{"on-close":function(t){return e.closeShopLabel(a)}}},[e._v(e._s(t.name||""))])})),1):e._e()],1),i("collapse-panel",{staticStyle:{"padding-top":"0"},attrs:{name:"展开更多基本信息设置","expand-name":"收起更多基本信息设置"}},[[i("FormItem",{attrs:{label:"商品排序：",prop:"sort_by"}},[i("Input",{staticClass:"width-160",attrs:{maxlength:"4",placeholder:"请输入"},model:{value:e.model_sort_by,callback:function(t){e.model_sort_by=e._n(t)},expression:"model_sort_by"}}),i("kdx-hint-text",{attrs:{content:"最多4位数字, 数字越大, 排名越靠前, 默认排序为创建时间"}})],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{prop:"ext_field.show_sales",label:"显示销量："}},[i("RadioGroup",{model:{value:e.model_ext_field.show_sales,callback:function(t){e.$set(e.model_ext_field,"show_sales",t)},expression:"model_ext_field.show_sales"}},[i("Radio",{attrs:{label:"1"}},[i("span",[e._v("是")])]),i("Radio",{attrs:{label:"0"}},[i("span",[e._v("否")])])],1),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"显示销量=实际销量+虚拟销量"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("9cb6")}})],1)],1)],1),i("FormItem",{attrs:{label:"虚拟销量：",prop:"sales"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{number:"",fixed:0,"max-value":999999999,placeholder:"请输入"},model:{value:e.model_sales,callback:function(t){e.model_sales=t},expression:"model_sales"}})],1),i("FormItem",{attrs:{label:"商品备注："}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.model_ext_field.note,callback:function(t){e.$set(e.model_ext_field,"note",t)},expression:"model_ext_field.note"}}),i("kdx-hint-text",{attrs:{content:"超链接需要以http/https开头，多个需要换行。"}})],1)]],2)],1)},n=[]},"81c2":function(e,t,a){"use strict";a.r(t);var i=a("3a73"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"85dc":function(e,t,a){"use strict";a("9444")},"860c":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods-type"},[a("kdx-form-title",{attrs:{content:"商品类型"}}),a("FormItem",{attrs:{label:"",prop:"type"}},[a("multi-select",{model:{value:e.model_type,callback:function(t){e.model_type=t},expression:"model_type"}})],1)],1)},n=[]},"870e":function(e,t,a){"use strict";a.r(t);var i=a("b50f"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},8812:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.stateMap=t.modelMap=void 0,a("ac1f"),a("5319"),a("d3b7"),a("159b");var n=i(a("ade3")),o=i(a("4360")),s=function(){var e={},t=o.default.state.goodAddEdit.model,a=function(t){e["model_".concat(t)]={get:function(){return o.default.state.goodAddEdit.model[t]},set:function(e){o.default.commit("goodAddEdit/setModelProps",(0,n.default)({},t,e))}}};for(var i in t)a(i);return e};t.modelMap=s;var r=function(e){var t={};return"string"===typeof e?t=(0,n.default)({},e,{get:function(){return o.default.state.goodAddEdit[e]},set:function(t){o.default.commit("goodAddEdit/set".concat(e.replace(/^./,(function(e){return e.toUpperCase()}))),t)}}):e instanceof Array&&e.forEach((function(e){t[e]={get:function(){return o.default.state.goodAddEdit[e]},set:function(t){o.default.commit("goodAddEdit/set".concat(e.replace(/^./,(function(e){return e.toUpperCase()}))),t)}}})),t};t.stateMap=r},"8fff":function(e,t,a){"use strict";a.r(t);var i=a("1ac4"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},9315:function(e,t,a){},9444:function(e,t,a){},"9cb6":function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_sale.png"},a226:function(e,t,a){"use strict";a("382a")},a24f:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-modal-frame",{attrs:{title:"添加标签","class-name":"shop-label-modal"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"shop-label"},[e.recommendList.length>0?a("div",{staticClass:"recommend"},[a("p",{staticClass:"title"},[e._v("推荐标签")]),a("div",{staticClass:"label-content-recommend"},e._l(e.recommendList,(function(t,i){return a("div",{key:i,staticClass:"shop-label-item",class:{checked:t.checked},on:{click:function(a){return e.setLabelChecked("recommend",i,!t.checked)}}},[a("span",[e._v(" "+e._s(t.name))]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin-y"}})],1)})),0)]):e._e(),a("div",{staticClass:"custom"},[a("div",{staticClass:"recommend"},[a("p",{staticClass:"title"},[a("span",{staticClass:"custom"},[e._v("自定义标签组")]),a("Button",{attrs:{type:"text"},on:{click:e.addLabel}},[e._v("+新建标签组")]),a("Button",{attrs:{type:"text"},on:{click:e.getLabelData}},[e._v("刷新")])],1),e.customList.length>0?a("div",{staticClass:"label-content"},e._l(e.customList,(function(t,i){return a("div",{key:i,staticClass:"label-content-box"},[a("div",{staticClass:"custom-title"},[e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"shop-label-item-box"},e._l(t.label,(function(t,n){return a("div",{key:n,staticClass:"shop-label-item",class:{checked:t.checked},on:{click:function(a){return e.setLabelChecked("custom",n,!t.checked,i)}}},[a("span",[e._v(" "+e._s(t.name))]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin-y"}})],1)})),0)])})),0):a("div",{staticClass:"label-no"},[e._v("暂无数据")])])]),a("Spin",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{fix:""}})],1)])},n=[]},a3ea:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"r-input",style:{width:e.width}},[a("div",{staticClass:"close"},[a("Input",{class:[e.type],attrs:{disabled:e.disabled,placeholder:e.placeholder,maxlength:e.maxlength,"show-word-limit":e.showWordLimit,prefix:e.prefix,suffix:e.suffix},on:{"on-blur":e.onBlur},model:{value:e.cacheValue,callback:function(t){e.cacheValue=t},expression:"cacheValue"}}),e._t("error")],2),a("Icon",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"close-icon",attrs:{type:"ios-close-circle"},on:{click:e.close}})],1)},n=[]},a69d:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"good-add-base"},[a("Form",{ref:"form",attrs:{model:e.goodAddEditModel,rules:e.$store.state.goodAddEdit.rules,"label-width":120},on:{"on-validate":e.onValidate}},[a("goods-type"),a("basic-info"),a("transaction-settings"),a("logistics-settingsms"),a("commodity-status",{attrs:{form_status:e.form_status}})],1),a("shop-label-selector",{attrs:{"current-list":e.shopLabel.data},on:{"on-change":e.shopLabelChange,"on-cancel":e.shopLabelCancel},model:{value:e.shopLabel.value,callback:function(t){e.$set(e.shopLabel,"value",t)},expression:"shopLabel.value"}})],1)},n=[]},a751:function(e,t,a){},aac5:function(e,t,a){},acf3:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("5530")),o=i(a("0a6e")),s=a("8812"),r={components:{MultiSelect:o.default},computed:(0,n.default)({},(0,s.modelMap)()),methods:{}};t.default=r},b23a:function(e,t,a){"use strict";a("6e2e")},b2de:function(e,t,a){"use strict";a.r(t);var i=a("086b"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},b434:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"multi-option"},[a("div",{staticClass:"single"},[e._l(e.local_specs,(function(t,i){return a("div",{key:i,staticClass:"spec"},[a("div",{staticClass:"column"},[a("Input",{directives:[{name:"error-item",rawName:"v-error-item",value:t.id,expression:"item.id"}],staticClass:"width-160 input",class:{errorInput:e.cacheSpecsError&&e.cacheSpecsError[t.id]},attrs:{placeholder:"如颜色、尺码、大小",disabled:e.is_activity_goods,maxlength:30},on:{"on-blur":function(t){return e.changeSpec(i,t)}},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}}),a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},on:{"on-change":function(t){return e.fnImageCheckedChange(i,t)}},model:{value:t.image_checked,callback:function(a){e.$set(t,"image_checked",a)},expression:"item.image_checked"}},[e._v(" 添加图片 ")]),e.cacheSpecsError?a("span",{staticClass:"error-span"},[e._v(" "+e._s(e.cacheSpecsError[t.id])+" ")]):e._e()],1),a("div",{staticClass:"data"},[e._l(t.items,(function(n,o){return a("r-input",{directives:[{name:"error-item",rawName:"v-error-item",value:n.id,expression:"val.id"}],key:o,staticClass:"width-160 input",class:{errorInput:e.cacheSpecsError&&e.cacheSpecsError[n.id]},attrs:{type:"close",closable:t.items.length>1,disabled:e.is_activity_goods,maxlength:30,placeholder:"请填写子规格，如L、M"},on:{blur:function(t){return e.editChildSpec({row:i,col:o,val:{title:t}})},close:function(t){return e.delChildSpec({row:i,col:o})}},model:{value:n.title,callback:function(t){e.$set(n,"title",t)},expression:"val.title"}},[e.cacheSpecsError?a("span",{staticClass:"error-span",attrs:{slot:"error"},slot:"error"},[e._v(" "+e._s(e.cacheSpecsError[n.id])+" ")]):e._e()])})),e.specs[i].items.length<50?a("Button",{attrs:{type:"text",disabled:e.is_activity_goods},on:{click:function(t){return e.addChildSpec(i)}}},[e._v(" +添加规格值 ")]):e._e()],2),a("div",{staticClass:"box"}),e.specs.length>1?a("Icon",{staticClass:"icon",attrs:{type:"ios-close-circle"},on:{click:function(t){return e.closeSpec(i)}}}):e._e()],1)})),e.specs.length<3?a("div",{staticClass:"addSpecItemBtn"},[a("Button",{staticClass:"add-item",attrs:{type:"text",disabled:e.is_activity_goods},on:{click:e.addSpec}},[e._v(" +添加规格项 ")])],1):e._e()],2),a("div",{staticClass:"setting"},[a("span",[e._v("批量设置:")]),e._l(e.initColumns,(function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:"thumb"!==t.key,expression:"item.key !== 'thumb'"}],key:i,staticClass:"setting-input"},[a("kdx-rr-input",{staticClass:"setting-input-wrapper",style:{background:"2"==e.model_type&&"库存"==t.title?"#f3f3f3":"transparent"},attrs:{disabled:e.is_activity_goods&&("price"==t.key||"stock"==t.key)||"2"==e.model_type&&"库存"==t.title,fixed:e.getFixed(t),maxValue:e.getMaxValue(t),minValue:e.getMinValue(t),number:e.isNumberType(t),type:"text"},on:{blur:function(a){return e.batchData(t.key,a.target.value)}},model:{value:e.catchBatchData[t.key],callback:function(a){e.$set(e.catchBatchData,t.key,a)},expression:"catchBatchData[item.key]"}}),a("span",{class:{"span-active":e.catchBatchData[t.key]||"0"==e.catchBatchData[t.key]}},[e._v(e._s(t.title))])],1)})),a("Button",{on:{click:function(t){return e.setUsing(e.catchBatchData)}}},[e._v("应用")])],2),a("div",{staticClass:"table",staticStyle:{padding:"0"}},[a("Table",{attrs:{id:"childSpec",columns:e.getColumns,data:e.tableData,"span-method":e.handleSpan},scopedSlots:e._u([{key:"thumb",fn:function(t){var i=t.row,n=t.column,o=t.index;return[a("div",{staticClass:"add-image",on:{click:function(t){return e.clickImgSelector({row:i,index:o})}}},[i.thumb?a("div",{staticClass:"image"},[a("img",{attrs:{src:e.$media(i.thumb),alt:""},on:{error:e.replaceImage}}),a("Icon",{staticClass:"close-icon",attrs:{type:"ios-close-circle"},on:{click:function(t){return t.stopPropagation(),e.deleteImage({row:i,column:n,index:o})}}}),a("div",{staticClass:"replace"},[e._v("替换")])],1):a("i",{staticClass:"icon ivu-icon ivu-icon-ios-add"})])]}}])}),e.total>10?a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:e.total,current:e.pageNumber,pageSize:e.pageSize,pageSizeOption:e.pageSizeOpts},on:{"on-change":e.changePage,"on-page-size-change":e.pageSizeChange}})],1):e._e()],1),a("image-selector",{ref:"image_selector",attrs:{current:e.imageSelector.current},on:{"on-change":e.changeImageSelector}})],1)},n=[]},b4a8:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("d81d"),a("4de4"),a("a434"),a("a15b");var n=i(a("5530")),o=i(a("2917")),s=i(a("f431")),r=a("8812"),l=a("2f62"),c={components:{CollapsePanel:o.default,TreeSelect:s.default},computed:(0,n.default)((0,n.default)((0,n.default)((0,n.default)({isEdit:function(){return!!this.$route.query.operate},emsg:function(){return"商品分类数据发生变化，请重新设置商品分类"}},(0,l.mapState)("goodAddEdit",{is_activity_goods:function(e){var t;return 1==(null===e||void 0===e||null===(t=e.model)||void 0===t?void 0:t.is_activity_goods)},goodsDecorate:function(e){return null===e||void 0===e?void 0:e.goodDecrate}})),(0,r.modelMap)()),(0,r.stateMap)(["isShowVideo","isThumbAddSlide","rules","shopLabel","shopLevel"])),{},{showErrContent:function(){var e=this,t=!1,a=function a(i){i.forEach((function(i){if(new Set(e.model_category_id).has(i.value)){if(i.children&&i.children.length){var n=i.children.map((function(e){return e.value})),o=n.filter((function(t){return e.model_category_id.indexOf(t)>=0}));n.length===o.length?a(i.children):t=!0}}else i.children&&i.children.length&&a(i.children)}))};return a(this.shopLevel),t}}),methods:{changeData:function(e){this.$store.commit("goodAddEdit/setShopLevel",e)},closeShopLabel:function(e){this.shopLabel.data.splice(e,1),this.model_label_id=this.shopLabel.data.map((function(e){return e.id})),this.shopLabel=(0,n.default)({},this.shopLabel)},editShopLabel:function(){this.shopLabel.value=!0,this.shopLabel=(0,n.default)({},this.shopLabel)},handleShopLevelChange:function(e){this.model_category_ids=e.join(",")},thumbAllChange:function(e){this.model_thumb_all=e},thumbAddSlideChange:function(){if(this.isThumbAddSlide)if(this.model_thumb_all.length>0){var e=this.model_thumb_all.indexOf(this.model_thumb);-1===e&&this.model_thumb_all.unshift(this.model_thumb)}else this.model_thumb_all=[this.model_thumb];else if(this.model_thumb_all.length>0){var t=this.model_thumb_all.indexOf(this.model_thumb);-1!==t&&this.model_thumb_all.splice(t,1)}else this.model_thumb_all=[]},changeVideo:function(e){this.model_video=e.path,this.$store.commit("goodAddEdit/setVideoParams",e)},changeVideoImage:function(e){this.model_video_thumb=e},addVideo:function(){this.isShowVideo=!0},changeThumb:function(e){if(this.isThumbAddSlide)if(this.model_thumb_all.length>0){var t=this.model_thumb_all.indexOf(this.model_thumb);t>-1?this.model_thumb_all[t]!==e&&(this.model_thumb_all.splice(t,1),e&&this.model_thumb_all.splice(t,0,e)):this.model_thumb_all.unshift(e)}else this.model_thumb_all=[e];this.model_thumb=e}}};t.default=c},b50f:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"RemindLabel",props:{title:{type:String}}};t.default=a},baa5:function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_swiper.png"},bc9d:function(e,t,a){"use strict";a.r(t);var i=a("eb66"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},be78:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"level"},[a("kdx-form-title",{attrs:{content:"商品状态"}}),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"上架设置：",prop:"status"}},[a("RadioGroup",{on:{"on-change":e.changeStatus},model:{value:e.model_status,callback:function(t){e.model_status=t},expression:"model_status"}},[a("Radio",{attrs:{label:"1"}},[a("span",[e._v("上架")])]),a("Radio",{attrs:{label:"0"}},[a("span",[e._v("保存至仓库")])]),a("Radio",{attrs:{label:"2"}},[a("span",[e._v("自动上架")])])],1),"2"===e.model_status?a("div",{staticClass:"nest-box"},[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选择时间：",prop:"putaway_time"}},[a("DatePicker",{staticClass:"width-430",attrs:{placeholder:"选择时间",type:"datetime",options:e.dateOptions},model:{value:e.model_putaway_time,callback:function(t){e.model_putaway_time=t},expression:"model_putaway_time"}})],1)],1):e._e()],1),"2"!==e.model_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"退换货："}},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.model_ext_field.refund,callback:function(t){e.$set(e.model_ext_field,"refund",t)},expression:"model_ext_field.refund"}},[e._v(" 退款 ")]),"0"===e.model_type?a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.model_ext_field.return,callback:function(t){e.$set(e.model_ext_field,"return",t)},expression:"model_ext_field.return"}},[e._v(" 退货退款 ")]):e._e(),"0"===e.model_type?a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.model_ext_field.exchange,callback:function(t){e.$set(e.model_ext_field,"exchange",t)},expression:"model_ext_field.exchange"}},[e._v(" 换货 ")]):e._e(),a("kdx-hint-text",[e._v(" 勾选后支持整单售后, 多个商品同时满足相同条件可发起售后, 如需单件商品支持售后时, 需要开启 "),a("Button",{attrs:{type:"text",to:"/setting/safeguard/index",target:"_blank"}},[e._v(" 【支持单品售后】 ")])],1)],1):e._e(),"0"===e.model_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"货到付款：",prop:"ext_field.is_delivery_pay"}},[a("RadioGroup",{model:{value:e.model_ext_field.is_delivery_pay,callback:function(t){e.$set(e.model_ext_field,"is_delivery_pay",t)},expression:"model_ext_field.is_delivery_pay"}},[a("Radio",{attrs:{label:"1"}},[a("span",[e._v("是")])]),a("Radio",{attrs:{label:"0"}},[a("span",[e._v("否")])])],1)],1):e._e()],1)},n=[]},c139:function(e,t,a){"use strict";a("1b91")},c603:function(e,t,a){},c6072:function(e,t,a){"use strict";a.r(t);var i=a("43be"),n=a("870e");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("622a");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"110ea137",null);t["default"]=r.exports},ca3f:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("b0c0");var i={name:"CollapsePanel",props:{name:{type:String},expandName:{type:String}},data:function(){return{value:this.name}},methods:{change:function(e){e.length>0?this.value=this.expandName||this.name:this.value=this.name}}};t.default=i},d38c:function(e,t,a){"use strict";a("aac5")},d476:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e9c4"),a("d3b7"),a("159b"),a("a434");var n=i(a("2909")),o={name:"ShopLabel",props:{value:{type:Boolean,default:!1},defaultCheckedList:{type:Array,default:function(){return[]}},currentList:{type:Array,required:!0}},data:function(){return{selectRows:[],recommendList:[],customList:[],loading:!1}},watch:{value:{handler:function(e){e&&(this.currentList.length>0?this.selectRows=(0,n.default)(this.currentList):this.defaultCheckedList.length>0&&(this.selectRows=(0,n.default)(this.defaultCheckedList)),this.getLabelData())},immediate:!0}},methods:{handleCancel:function(){this.$emit("on-cancel"),this.initData()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.initData()},addLabel:function(){this.handleCancel(),this.$utils.openNewWindowPage("/goods/label/add")},initDefaultChecked:function(){var e=this;this.selectRows.length>0&&this.selectRows.forEach((function(t){e.recommendList.forEach((function(a,i){a.id===t.id&&e.$set(e.recommendList[i],"checked",!0)})),e.customList.forEach((function(a,i){a.label&&a.label.forEach((function(a,n){a.id===t.id&&e.$set(e.customList[i].label[n],"checked",!0)}))}))}))},setLabelChecked:function(e,t,a,i){var n=this;if("recommend"===e)if(this.$set(this.recommendList[t],"checked",a),a)this.selectRows.push(this.recommendList[t]);else{var o=-1;this.selectRows.forEach((function(e,a){e.id===n.recommendList[t].id&&(o=a)})),this.selectRows.splice(o,1)}else if("custom"===e)if(this.$set(this.customList[i].label[t],"checked",a),a)this.selectRows.push(this.customList[i].label[t]);else{var s=-1;this.selectRows.forEach((function(e,a){e.id===n.customList[i].label[t].id&&(s=a)})),this.selectRows.splice(s,1)}},initData:function(){this.recommendList.forEach((function(e){e.checked=!1})),this.customList.forEach((function(e){e.label&&e.label.forEach((function(e){e.checked=!1}))}))},getLabelData:function(){var e=this;this.loading=!0,this.$api.goodsApi.getGoodLabel({pager:"0"}).then((function(t){e.loading=!1,0===t.error&&(e.customList=t.data||[],e.recommendList=t.recommend||[],e.initDefaultChecked())}))}}};t.default=o},d4a9:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("53ca"));a("a9e3"),a("e9c4"),a("d81d"),a("d3b7"),a("159b"),a("4de4"),a("a15b");var o=i(a("6dd0")),s=i(a("583f")),r=a("3101"),l=[],c={name:"TreeSelect",mixins:[o.default],props:{value:{type:[String,Number,Array]},data:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default:function(){return!(!this.$IVIEWPRO||""===this.$IVIEWPRO.transfer)&&this.$IVIEWPRO.transfer}},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择"},isHandlePath:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value,isChangeValueInTree:!1,isValueChangeByTree:!1,tmpData:[]}},watch:{value:{handler:function(e){var t;this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.currentValue=e,null===(t=this.$refs.select)||void 0===t||t.reset(),l=(0,s.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.tmpData,!0),this.tmpData=JSON.parse(JSON.stringify(this.tmpData)))},deep:!0},data:{handler:function(){var e;(this.tmpData=JSON.parse(JSON.stringify(this.data)),l=(0,s.default)(this.data,this.isHandlePath),this.isChangeValueInTree)?this.isChangeValueInTree=!1:(null===(e=this.$refs.select)||void 0===e||e.reset(),this.handleUpdateTreeNodes(this.tmpData,!0))},deep:!0}},computed:{valueToArray:function(){return"object"===(0,n.default)(this.currentValue)?this.isHandlePath?(0,r.formatData)(this.currentValue,this.tmpData):this.currentValue:[this.currentValue]},isCheckboxUsable:function(){return this.multiple&&this.showCheckbox},transferClassName:function(){return this.transfer?"ivu-tree-select-transfer":""},classes:function(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode:function(e,t){if(this.$emit("change-data",this.tmpData),this.multiple)e.length?(this.currentValue=e.map((function(e){return e.value})),this.handleUpdateSelectValue(t.value,t.title)):(this.currentValue=[],this.handleUpdateSelectValue("","")),this.traverseData(this.tmpData,this.currentValue);else if(e.length){var a=e[0];this.currentValue=a.value,this.handleUpdateSelectValue(a.value,a.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue),this.dispatch("FormItem","on-form-change",this.currentValue)},handleUpdateTreeNodes:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((function(e){t.valueToArray.indexOf(e.value)>=0?(t.isCheckboxUsable?e.checked=!0:e.selected=!0,t.handleUpdateSelectValue(e.value,e.title)):t.isCheckboxUsable?e.checked=!1:e.selected=!1,e.children&&e.children.length&&t.handleUpdateTreeNodes(e.children)})),a&&this.$refs.select&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue:function(e){if(""===e){var t;null===(t=this.$refs.select)||void 0===t||t.reset()}else{this.isValueChangeByTree=!0;var a=l.filter((function(t){return t[t.length-1].value==e}))[0];a&&a.length>0&&this.$refs.select&&this.$refs.select.onOptionClick({value:e,label:a.map((function(e){return e.title})).join("->")||""}),this.multiple||(this.isValueChangeByTree=!1)}},handleChange:function(e){var t,a=this;this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=e,this.$emit("input",e),this.$emit("on-change",e),this.dispatch("FormItem","on-form-change",e),null===(t=this.$refs.select)||void 0===t||t.reset(),this.handleUpdateTreeNodes(this.tmpData,!0),this.$emit("change-data",this.tmpData),this.$nextTick((function(){a.isValueChangeByTree=!1})))},handleOpenChange:function(e){this.$emit("on-open-change",e)},traverseData:function(e,t){var a=this;e.forEach((function(e){t.indexOf(e.value)>-1?e.checked=!0:e.checked=!1,e.children&&e.children.length>0&&a.traverseData(e.children,t)}))}},mounted:function(){var e;null!==(e=this.data)&&void 0!==e&&e.length&&(this.tmpData=JSON.parse(JSON.stringify(this.data))),l=(0,s.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.data,!0)}};t.default=c},d51a:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.stateMap=t.modelMap=void 0,a("ac1f"),a("5319"),a("d3b7"),a("159b");var n=i(a("ade3")),o=i(a("4360")),s=function(){var e={},t=o.default.state.goodAddEdit.model,a=function(t){e["model_".concat(t)]={get:function(){return o.default.state.goodAddEdit.model[t]},set:function(e){o.default.commit("goodAddEdit/setModelProps",(0,n.default)({},t,e))}}};for(var i in t)a(i);return e};t.modelMap=s;var r=function(e){var t={};return"string"===typeof e?t=(0,n.default)({},e,{get:function(){return o.default.state.goodAddEdit[e]},set:function(t){o.default.commit("goodAddEdit/set".concat(e.replace(/^./,(function(e){return e.toUpperCase()}))),t)}}):e instanceof Array&&e.forEach((function(e){t[e]={get:function(){return o.default.state.goodAddEdit[e]},set:function(t){o.default.commit("goodAddEdit/set".concat(e.replace(/^./,(function(e){return e.toUpperCase()}))),t)}}})),t};t.stateMap=r},eb66:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("ade3")),o=i(a("5530"));a("a9e3"),a("d81d"),a("d3b7");var s=i(a("0d87")),r=i(a("2315")),l=i(a("1127")),c=i(a("35c7")),d=i(a("4996")),u=i(a("52a5")),p=a("8812"),h={name:"index",components:{ShopLabelSelector:s.default,GoodsType:l.default,BasicInfo:r.default,TransactionSettings:c.default,CommodityStatus:u.default,LogisticsSettingsms:d.default},props:{curTab:{type:[String,Number],default:""},form_status:{type:[String,Number],default:-1}},computed:(0,o.default)((0,o.default)({},(0,p.stateMap)("shopLabel")),{},{goodAddEditModel:function(){return this.$store.state.goodAddEdit.model}}),methods:{onValidate:function(e,t){this.cacheError=(0,o.default)((0,o.default)({},this.cacheError),{},(0,n.default)({},e,t))},shopLabelChange:function(e){this.shopLabel=(0,o.default)((0,o.default)({},this.shopLabel),{},{data:e}),this.$store.state.goodAddEdit.model.label_id=e.map((function(e){return e.id})),this.shopLabelCancel()},shopLabelCancel:function(){this.shopLabel=(0,o.default)((0,o.default)({},this.shopLabel),{},{value:!1})},validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate((function(a){t(a),e.$nextTick((function(){if(!a)for(var t in e.cacheError)if(!e.cacheError[t]){e.$focusError(t);break}}))}))}))}},beforeDestroy:function(){this.$store.commit("goodAddEdit/multiOptions/init")}};t.default=h},ed26:function(e,t,a){"use strict";a.r(t);var i=a("d4a9"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},ef19:function(e,t,a){"use strict";a.r(t);var i=a("b434"),n=a("fdaa");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("b23a");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"35cce3c3",null);t["default"]=r.exports},f169:function(e,t,a){},f28e:function(e,t,a){e.exports=a.p+"static/dist/shop/img/shop_main.png"},f374:function(e,t,a){},f3be:function(e,t,a){"use strict";a.r(t);var i=a("ca3f"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},f431:function(e,t,a){"use strict";a.r(t);var i=a("70cc"),n=a("ed26");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=r.exports},fc45:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collapse-panel"},[a("Collapse",{attrs:{simple:""},on:{"on-change":e.change}},[a("Panel",{attrs:{"hide-arrow":""}},[a("i",{staticClass:"ivu-icon icon-full-right iconfont"}),e._v(e._s(e.value)+" "),a("p",{attrs:{slot:"content"},slot:"content"},[e._t("default")],2)])],1)],1)},n=[]},fdaa:function(e,t,a){"use strict";a.r(t);var i=a("04c9"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a}}]);