(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{"0245":function(t,e,a){"use strict";a("b621")},"02a1":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"presell-basic-info"},[a("Form",{ref:"form",attrs:{model:t.model,"label-width":120,rules:t.rule},nativeOn:{submit:function(t){t.preventDefault()}}},[a("kdx-form-title",[t._v("基本信息")]),a("FormItem",{attrs:{label:"活动名称：",prop:"title"}},[a("Input",{staticClass:"width-340",class:{"input-disabled":"add"!==t.type},attrs:{placeholder:"请输入活动名称",maxlength:"25","show-word-limit":"",disabled:"add"!==t.type},model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}})],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"活动渠道：",prop:"client_type"}},[a("CheckboxGroup",{model:{value:t.model.client_type,callback:function(e){t.$set(t.model,"client_type",e)},expression:"model.client_type"}},[a("Checkbox",{attrs:{label:"20",disabled:"add"!==t.type}},[t._v(" 微信公众号 ")]),a("Checkbox",{attrs:{label:"21",disabled:"add"!==t.type}},[t._v(" 微信小程序 ")]),a("Checkbox",{attrs:{label:"10",disabled:"add"!==t.type}},[t._v(" 手机浏览器H5 ")]),a("Checkbox",{attrs:{label:"30",disabled:"add"!==t.type}},[t._v(" 头条/抖音小程序 ")])],1)],1)],1)],1)},n=[]},"03957":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("487f")),s={name:"index",components:{noticeList:n.default},props:{},data:function(){return{type:{plugin_name:"presell",group_name:"buyer_notice",group_item_name:"buyer_notice"}}},computed:{},created:function(){},mounted:function(){},methods:{toDetail:function(t){this.$router.push({path:"/plugins/market/presell/message/index",query:{type_code:t.type_code,items:t.items}})}}};e.default=s},"03a3":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"presell-activity-data"},[a("market-overview",{attrs:{title:"预售活动营销概览",time:t.updateTime,icon_show:!0,"show-hover":!0,"count-data":t.statisticsData.count}}),a("div",{staticClass:"flex presell-echart"},[a("div",{staticClass:"left"},[a("div",{staticClass:"flex space-between presell-search"},[a("div",{staticClass:"title"},[t._v("活动曝光")]),a("div",[a("Form",{ref:"form",attrs:{"label-width":80,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"活动名称："}},[a("Select",{staticClass:"width-250 active-name",attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.model.activity_id,callback:function(e){t.$set(t.model,"activity_id",e)},expression:"model.activity_id"}},t._l(t.activeies,(function(t){return a("Option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)],1)],1)]),a("div",{staticClass:"chart-content"},[a("chart-bar",{ref:"chart_add_bar",attrs:{id:"add_bar",height:328,color:t.addChart.color,data:t.addChart.data,xAxis:t.addChart.xAxis,yAxis:t.addChart.yAxis,legend:t.addChart.legend,"legend-style":t.addChart.legendStyle,grid:t.addChart.grid}})],1)]),a("div",{staticClass:"right"},[a("div",{staticClass:"right-title"},[t._v("预售销售额占比")]),a("div",{staticClass:"right-echart"},[a("chart-pie",{ref:"presell_pie",attrs:{id:"presell_pie",legend:t.grade.legend,height:328,data:t.gradeData,center:t.grade.center,radius:t.grade.radius}})],1)])]),a("activity-list",{attrs:{list:t.list,total:t.total},on:{changePage:t.changePage}})],1)},n=[]},"05a4":function(t,e,a){"use strict";a.r(e);var i=a("3f4d"),n=a("d8c2");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("72d8");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"25448ad6",null);e["default"]=o.exports},"063d":function(t,e,a){"use strict";a("e82d")},"110e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"market-overview"},[i("div",{staticClass:"card-panel-title"},[i("span",{staticClass:"title"},[t._v(t._s(t.title))]),t.time?i("span",{staticClass:"time"},[t._v("数据更新于"+t._s(t.time)+"，每日更新一次")]):t._e()]),i("Row",{attrs:{gutter:20}},[i("Col",{attrs:{span:"6"}},[i("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[i("div",{staticClass:"flex card-panel-price"},[t.icon_show?i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("1324"),alt:""}})]):t._e(),i("div",[i("div",[t._v("预售成交总金额")]),i("div",{staticClass:"price"},[t._v("¥"+t._s(t.countData.order_pay_price_sum||0))])])]),i("div",{staticClass:"card-panel-description"},[i("div",{staticClass:"flex space-between"},[i("div",[t._v("已支付定金总金额：")]),i("div",[t._v("¥"+t._s(t.countData.order_pay_front_price_sum||0))])]),i("div",{staticClass:"flex space-between"},[i("div",[t._v("已支付尾款总金额：")]),i("div",[t._v("¥"+t._s(t.countData.order_pay_final_price_sum||0))])])])])]),i("Col",{attrs:{span:"6"}},[i("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[i("div",{staticClass:"flex card-panel-price"},[t.icon_show?i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("e7ea"),alt:""}})]):t._e(),i("div",[i("div",[t._v("预售总订单")]),i("div",{staticClass:"price"},[t._v(t._s(t.countData.order_count||0))])])]),i("div",{staticClass:"card-panel-description"},[i("div",{staticClass:"flex space-between"},[i("div",[t._v("已支付定金订单：")]),i("div",[t._v(t._s(t.countData.pay_front_order_count||0))])]),i("div",{staticClass:"flex space-between"},[i("div",[t._v("已支付尾款订单：")]),i("div",[t._v(t._s(t.countData.pay_final_order_count||0))])])])])]),i("Col",{attrs:{span:"6"}},[i("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[i("div",{staticClass:"flex card-panel-price"},[t.icon_show?i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("f736"),alt:""}})]):t._e(),i("div",[i("div",[t._v("预售商品总浏览量")]),i("div",{staticClass:"price"},[t._v(t._s(t.countData.goods_pv_count||0))])])]),i("div",{staticClass:"card-panel-description"},[i("div",{staticClass:"flex space-between"},[i("div",[t._v("支付定金总人数：")]),i("div",[t._v(t._s(t.countData.pay_front_member_count||0))])]),i("div",{staticClass:"flex space-between"},[i("div",[t._v("支付尾款总人数：")]),i("div",[t._v(t._s(t.countData.pay_final_member_count||0))])])])])]),i("Col",{attrs:{span:"6"}},[i("div",{staticClass:"card-panel-box",class:{"card-hover":t.showHover}},[i("div",{staticClass:"flex card-panel-price"},[t.icon_show?i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("fa68"),alt:""}})]):t._e(),i("div",[i("div",[t._v("预售优惠总金额")]),i("div",{staticClass:"price"},[t._v("¥"+t._s(t.countData.deduct_price_sum||0))])])]),i("div",{staticClass:"card-panel-description"},[i("div",{staticClass:"flex space-between"},[i("div",[t._v("定金优惠总金额：")]),i("div",[t._v("¥"+t._s(t.countData.deduct_front_price_sum||0))])]),i("div",{staticClass:"flex space-between"},[i("div",[t._v("全款优惠总金额：")]),i("div",[t._v("¥"+t._s(t.countData.deduct_all_price_sum||0))])])])])])],1)],1)},n=[]},1557:function(t,e,a){"use strict";a.r(e);var i=a("5038"),n=a("d490");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("3ab9");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"62aa605d",null);e["default"]=o.exports},"18d6":function(t,e,a){},1911:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-list"},[a("Table",{ref:"table",attrs:{columns:t.handleColumns,data:t.list},on:{"on-sort-change":t.changeSort},scopedSlots:t._u([{key:"title",fn:function(e){var i=e.row;return[a("div",{staticClass:"shop"},[a("div",{staticClass:"shop-image"},[a("img",{attrs:{src:t.$media(i.thumb),alt:""},on:{error:t.replaceImage}})]),a("div",{staticClass:"shop-information"},[a("div",{staticClass:"title"},[a("span",{staticClass:"mark",class:0==i.type?"real":1==i.type?"virtual":2==i.type?"secret":"appoint"},[t._v(t._s(0==i.type?"实":1==i.type?"虚":2==i.type?"密":"预"))]),t._v(" "+t._s(i.title)+" ")]),a("div",{staticClass:"shop-label"},[i.plugin_identification&&"1"==i.plugin_identification.is_commission?a("kdx-tag-label",{attrs:{type:"warning",size:"small"}},[a("div",[a("span",{staticClass:"iconfont icon-fenxiao"}),a("span",[t._v("分销商品")])])]):t._e(),i.option_title?a("kdx-tag-label",{attrs:{type:"info",size:"small"}},[t._v(t._s(i.option_title))]):t._e()],1)])])]}}])}),a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1)},n=[]},"1bf7":function(t,e,a){"use strict";a.r(e);var i=a("3d4e"),n=a("f26e");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("9c63");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"465c59f2",null);e["default"]=o.exports},"1d7b":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530")),s={data:function(){return{model:{keyword:"",status:"all",type:"all",start_time:"",end_time:""},date:[],statusList:[{value:"all",label:"全部"},{value:"1",label:"进行中"},{value:"0",label:"未开始"},{value:"-1",label:"停止"},{value:"-2",label:"手动停止"}],typeList:[{value:"all",label:"全部"},{value:"0",label:"定金预售"},{value:"1",label:"全款预售"}]}},methods:{addActivity:function(){this.$router.push({path:"/plugins/market/presell/activity/index",query:{type:"add"}})},changeDate:function(t){this.model.start_time=t[0],this.model.end_time=t[1]},handleSearch:function(){var t=(0,n.default)((0,n.default)({},this.model),{},{status:"all"===this.model.status?"":this.model.status,type:"all"===this.model.type?"":this.model.type});this.$emit("on-search",t)},handleReset:function(){this.reset(),this.handleSearch()},reset:function(){this.model={keyword:"",status:"all",type:"all",start_time:"",end_time:""},this.date=[]}}};e.default=s},"1ec4":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("4e82");var n=i(a("5530")),s=i(a("05a4")),r=i(a("a929")),o=i(a("c9d7")),l={name:"data",components:{activityInfo:s.default,marketOverview:r.default,activityList:o.default},props:{},data:function(){return{loading:!1,total:2,page:{pageSize:10,pageNumber:1},statisticsData:{detail:{},count:{}},type:0,list:[],sort:{},updateTime:""}},computed:{},created:function(){},mounted:function(){this.getData(this.$route.query.id),this.type=this.$route.query.type,this.getTime()},methods:{getData:function(t){var e=this;this.loading=!0;var a={id:t};this.$api.presellApi.getStatisticsData(a).then((function(a){e.getList(t),e.loading=!1,0===a.error&&(e.statisticsData={detail:a.detail,count:a.statistics})}))},getList:function(t){var e=this;this.loading=!0;var a=(0,n.default)({id:t,pagesize:this.page.pageSize,page:this.page.pageNumber},this.sort);this.$api.presellApi.getGoodStatisticsList(a).then((function(t){e.loading=!1,0===t.error&&(e.list=t.data.list)}))},changePage:function(t){this.page=t,this.getList()},changeSort:function(t){this.sort=t,this.refreshTable()},getTime:function(){var t=this;this.$api.presellApi.getUpdateTime().then((function(e){0==e.error&&(t.updateTime=e.time)}))},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.getList(this.$route.query.id)}}};e.default=l},"2023d":function(t,e,a){"use strict";a("b4ae")},"213a":function(t,e,a){},"237e":function(t,e,a){"use strict";a("4ba8")},"26c1":function(t,e,a){"use strict";a.r(e);var i=a("4b48"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"29df":function(t,e,a){"use strict";a.r(e);var i=a("feb1"),n=a("3118");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"93564486",null);e["default"]=o.exports},"2b34":function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7");var i={name:"BasicInfo",components:{},props:{type:{type:String,default:""},value:{type:Object,default:function(){}}},data:function(){return{model:{title:"",client_type:[]},rule:{title:[{required:!0,message:"请填写活动名称"}],client_type:[{required:!0,message:"请选择活动渠道"}]}}},watch:{value:{handler:function(t){this.model=t}},model:{handler:function(t){this.$emit("input",t)},deep:!0}},computed:{},created:function(){},mounted:function(){},methods:{validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate((function(t){t?e(t):a()}))}))}}};e.default=i},"305a":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("1da1")),s=i(a("5530"));a("ac1f"),a("1276"),a("5319"),a("a15b"),a("e9c4");var r=i(a("5892")),o=i(a("e924")),l=i(a("1bf7")),d={components:{preview:r.default,basicInfo:o.default,rulesInfo:l.default},data:function(){return{activityData:{presell_type:"0",pay_front_time:[],pay_front_start_time:"",pay_front_end_time:"",pay_final_time:[],pay_final_start_time:"",pay_final_end_time:"",start_time:"",end_time:"",activity_time:[],is_commission:"0",send_type:"0",send_time:"",send_day:"",limit_num:"",cancel_type:"0",cancel_time:"",goods_info:[],goods_list:[]},basicInfoData:{title:"",client_type:[]},loading:!1,submitLoading:!1,id:"",type:""}},created:function(){var t=this.$route.query,e=t.id,a=t.type;this.id=e,this.type=a,this.id&&this.getPresellDetail()},methods:{getPresellDetail:function(){var t=this;this.loading=!0,this.$api.presellApi.getPresellDetail({id:this.id}).then((function(e){var a;(t.loading=!1,0===e.error)&&(e.data.client_type=null===(a=e.data)||void 0===a?void 0:a.client_type.split(","),0==e.data.presell_type?(e.data.pay_front_time=[e.data.pay_front_start_time,e.data.pay_front_end_time],e.data.pay_final_time=[e.data.pay_final_start_time,e.data.pay_final_end_time],e.data.activity_time=[e.data.pay_front_start_time,e.data.pay_final_end_time]):1==e.data.presell_type&&(e.data.activity_time=[e.data.start_time,e.data.end_time]),e.data.limit_num<=0&&delete e.data.limit_num,t.activityData=(0,s.default)((0,s.default)({},e.data),{},{goods_list:e.data.goods_info}),t.basicInfoData={title:e.data.title,client_type:e.data.client_type})}))},handleSave:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.submitLoading=!0,e.prev=1,e.next=4,t.$refs.basicInfo.validateForm();case 4:return e.next=6,t.$refs.rulesInfo.validateForm();case 6:t.activityData.goods_info=e.sent,t.formatParams(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.submitLoading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},submit:function(t){var e=this;this.$api.presellApi.addPresellActivity(t).then((function(t){e.submitLoading=!1,0==t.error&&(e.$Message.success("保存成功"),e.$router.replace({path:"/plugins/market/presell/activity/list"}))}))},formatParams:function(){var t=(0,s.default)((0,s.default)((0,s.default)({},this.basicInfoData),this.activityData),{},{client_type:this.basicInfoData.client_type.join(",")});0==t.presell_type?(t.start_time=this.activityData.pay_front_start_time,t.end_time=this.activityData.pay_final_end_time):1==t.presell_type&&(delete t.pay_front_start_time,delete t.pay_front_end_time,delete t.pay_final_start_time,delete t.pay_final_end_time),0==t.send_type?delete t.send_day:delete t.send_time,0==t.cancel_type&&delete t.cancel_time,t.limit_num||delete t.limit_num,delete t.goods_list,delete t.pay_front_time,delete t.pay_final_time,delete t.activity_time,t.goods_info=JSON.stringify(t.goods_info),this.submit(t)}}};e.default=d},3118:function(t,e,a){"use strict";a.r(e);var i=a("1d7b"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"362b":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("1da1")),s=i(a("2909")),r=i(a("5530"));a("a9e3"),a("ac1f"),a("1276"),a("d3b7"),a("d81d"),a("99af"),a("4e82"),a("159b");var o={name:"SpecificationsRules",components:{},props:{value:{type:Boolean,default:!1},goodsId:{type:[String,Number],default:""},type:{type:String,default:""},spaceRules:{type:Array,default:function(){return[]}},presellType:{type:[String,Number],default:"1"}},data:function(){var t=this;this.$createElement;return{loading:!1,modal:!1,specs:[],form:{goodsList:[]},colspan:{0:1,1:1,2:1},batchData:{presell_stock:"",front_money_deduct:"",front_money:"",is_presell:"0"},submitValid:!1,columns:[{title:"售卖价",key:"price",render:function(t,e){return t("div",["￥"+e.row.price])}},{title:"总库存",key:"stock",width:80,render:function(t,e){return t("div",[e.row.stock])}},{title:"参与预售",slot:"is_presell",width:80},{title:"预售库存",slot:"presell_stock"},{title:"定金",slot:"front_money"},{title:"定金抵扣金额",slot:"front_money_deduct"}],defaultColumns:[{title:"售卖价",key:"price",render:function(t,e){return t("div",["￥"+e.row.price])}},{title:"总库存",key:"stock",width:80,render:function(t,e){return t("div",[e.row.stock])}},{title:"参与预售",slot:"is_presell",width:100},{title:"预售库存",slot:"presell_stock"},{title:"定金",slot:"front_money"},{title:"定金抵扣金额",slot:"front_money_deduct"}],rules:{is_presell:[],front_money:[{validator:function(e,a,i){var n=e.field.split(".")[1],s="0"==t.presellType?"定金":"预售价格",r=t.form.goodsList[n],o=r.price,l=r.is_presell;if("1"!=l)return i();Number(o)<=Number(a)?i(new Error("".concat(s,"需小于售价"))):"1"!=l||a?0===Number(a)&&"1"==l?i(new Error("".concat(s,"不能为0"))):i():i(new Error("".concat(s,"不能为空")))}}],front_money_deduct:[{validator:function(e,a,i){var n=e.field.split(".")[1],s=t.form.goodsList[n],r=s.front_money,o=s.price,l=s.is_presell;if("1"!=l)return i();Number(r)>Number(a)?i(new Error("定金抵扣小于定金")):Number(a)>=Number(o)?i(new Error("定金抵扣大于售价")):"1"!=l||a?0===Number(a)&&"1"==l?i(new Error("定金抵扣不能为0")):i():i(new Error("定金抵扣不能为空"))}}],presell_stock:[{validator:function(e,a,i){var n=e.field.split(".")[1],s=t.form.goodsList[n],r=s.stock,o=s.is_presell;if("1"!=o)return i();Number(r)<Number(a)?i(new Error("预售库存大于库存")):"1"!=o||a?0===Number(a)&&"1"==o?i(new Error("预售库存不能为0")):i():i(new Error("预售库存不能为空"))}}]}}},watch:{goodsId:{handler:function(t){t&&this.getGoodsData(t)},immediate:!0},value:function(t){this.getGoodsData(this.goodsId),this.handleColumns(),this.refreshInput(),this.modal=t}},computed:{allPresell:{get:function(){return this.form.goodsList.every((function(t){return"1"==t.is_presell}))?"1":"0"},set:function(t){this.batchData.is_presell=t}}},created:function(){},mounted:function(){},methods:{getGoodsData:function(t){var e=this;this.loading=!0,this.$api.goodsApi.getGoodInformation({id:t}).then((function(t){if(0===t.error){e.specs=t.data.spec;var a=t.data.options.map((function(t){return e.spaceRules.length>0?e.spaceRules.map((function(a){var i="add"==e.type?"option_id":"id";t.id==a[i]&&(t.presell_stock=(null===a||void 0===a?void 0:a.presell_stock)||"",t.front_money_deduct=(null===a||void 0===a?void 0:a.front_money_deduct)||"",t.front_money=(null===a||void 0===a?void 0:a.front_money)||"",t.is_presell=(null===a||void 0===a?void 0:a.is_presell)||"0")})):(t.presell_stock="",t.front_money_deduct="",t.front_money="",t.is_presell="0"),(0,r.default)({},t)}));e.handleColumns(),e.initTable(a),e.initColspan(),e.loading=!1}}))},handleColumns:function(){this.$createElement;var t=(0,s.default)(this.defaultColumns);1==this.presellType&&(t=[{title:"售卖价",key:"price",render:function(t,e){return t("div",["￥"+e.row.price])}},{title:"总库存",key:"stock",render:function(t,e){return t("div",[e.row.stock+"件"])}},{title:"参与预售",slot:"is_presell"},{title:"预售库存",slot:"presell_stock"},{title:"预售价格",slot:"front_money"}]),this.initColumns(t)},initColumns:function(t){this.$createElement;var e=this.specs.map((function(t,e){return{title:t.title,key:"",render:function(t,a){return t("div",[a.row.childSpecVal[e]])}}}));this.columns=[].concat((0,s.default)(e),(0,s.default)(t))},initTable:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>1?this.form.goodsList=e.sort((function(t,e){for(var a=t.specs.split(",").map((function(t){return parseInt(t)})),i=e.specs.split(",").map((function(t){return parseInt(t)})),n=Math.min(a.length,i.length),s=0;s<n;s++)if(a[s]!==i[s])return a[s]-i[s]})):this.form.goodsList=e,this.form.goodsList.forEach((function(e){var a=[];t.specs.forEach((function(t){t.items.forEach((function(t){e.specs.indexOf(t.id)>-1&&a.push(t.title)}))})),e.childSpecVal=a}))},initColspan:function(){var t={0:1,1:1,2:1};this.specs.forEach((function(e,a){e.items.length>0&&(t[a]=e.items.length)})),t[0]=t[1]*(t[2]||1)||1,t[1]=t[2]||1,t[2]=t[2]?1:0,this.colspan=t},handleSpan:function(t){var e=t.rowIndex,a=t.columnIndex,i={rowspan:0,colspan:1};return a<this.specs.length?(e%this.colspan[a]==0&&(i={rowspan:this.colspan[a],colspan:1}),i):[1,1]},handleCancel:function(){this.modal=!1,this.$emit("input",this.modal)},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["goodsForm"].validate((function(i){t.submitValid=!1,i?t.form.goodsList.some((function(t){return"1"==t.is_presell}))?e():(t.$Message.error("请至少选择一个规格参加活动"),a()):a()}))}))},handleOK:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.submitValid=!0,e.next=3,t.validateForm();case 3:a={id:t.goodsId,rules:t.form.goodsList.map((function(t){return{option_id:t.id,presell_stock:t.presell_stock,front_money:t.front_money,front_money_deduct:t.front_money_deduct||0,is_presell:t.is_presell}}))},t.$emit("spaceGoods",a),t.handleCancel();case 6:case"end":return e.stop()}}),e)})))()},changePresell:function(t){this.form.goodsList.map((function(e){e.is_presell=t}))},handleBatchChange:function(){var t=this;(this.batchData.front_money||this.batchData.front_money_deduct||this.batchData.presell_stock)&&this.form.goodsList.map((function(e){e.front_money=t.batchData.front_money,e.front_money_deduct=t.batchData.front_money_deduct||0,e.presell_stock=t.batchData.presell_stock}))},refreshInput:function(){this.batchData=(0,r.default)((0,r.default)({},this.batchData),{},{front_money:"",front_money_deduct:"",presell_stock:""})}}};e.default=o},"36b5":function(t,e,a){},"36d1":function(t,e,a){"use strict";a.r(e);var i=a("ff17"),n=a("8322");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("c3e2");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"12b8682b",null);e["default"]=o.exports},"3ab9":function(t,e,a){"use strict";a("213a")},"3abd":function(t,e,a){"use strict";a.r(e);var i=a("c8d5"),n=a("7386");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("2023d");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"b156c496",null);e["default"]=o.exports},"3c30":function(t,e,a){"use strict";a.r(e);var i=a("f0f1"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"3d39":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("9794")),s={name:"index",components:{noticeIndex:n.default},props:{},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{}};e.default=s},"3d4e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"presell-rules-info"},[a("Form",{ref:"form",attrs:{model:t.model,"label-width":120,rules:t.rule}},[a("kdx-form-title",[t._v("规则设置")]),a("FormItem",{staticClass:"presell-item",attrs:{label:"预售方式：",prop:"presell_type"}},[a("RadioGroup",{on:{"on-change":t.prsellChange},model:{value:t.model.presell_type,callback:function(e){t.$set(t.model,"presell_type",e)},expression:"model.presell_type"}},[a("Radio",{attrs:{label:"0",disabled:"add"!==t.type}},[t._v("定金")]),a("Radio",{attrs:{label:"1",disabled:"add"!==t.type}},[t._v("全款")])],1),a("div",{staticClass:"next-box error-tip"},[a("FormItem",{ref:"goods_list",attrs:{label:"预售商品：",prop:"goods_list"}},[a("Button",{staticClass:"default-primary",attrs:{disabled:"add"!==t.type},on:{click:t.chooseShop}},[t._v("选择商品")]),t.model.goods_list&&t.model.goods_list.length>0?a("div",{staticClass:"goods-box"},[a("rules-goods",{ref:"goodsRule",attrs:{type:t.type,"presell-type":t.model.presell_type},on:{delete:t.handleDelete},model:{value:t.model.goods_list,callback:function(e){t.$set(t.model,"goods_list",e)},expression:"model.goods_list"}})],1):t._e()],1),"0"===t.model.presell_type?a("FormItem",{attrs:{label:"支付定金时间：",prop:"pay_front_time"}},[a("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择支付定金时间",disabled:"add"!==t.type},on:{"on-change":t.changePayFrontTime},model:{value:t.model.pay_front_time,callback:function(e){t.$set(t.model,"pay_front_time",e)},expression:"model.pay_front_time"}})],1):t._e(),"0"===t.model.presell_type?a("FormItem",{attrs:{label:"支付尾款时间：",prop:"pay_final_time"}},[a("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择支付尾款时间",disabled:"add"!==t.type},on:{"on-change":t.changePayFinalTime},model:{value:t.model.pay_final_time,callback:function(e){t.$set(t.model,"pay_final_time",e)},expression:"model.pay_final_time"}})],1):t._e(),"0"===t.model.presell_type?a("FormItem",{key:"presell_type0",ref:"active_time_range",attrs:{label:"活动期限："}},[a("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"支付定金开始时间～支付尾款结束时间",disabled:""},model:{value:t.model.activity_time,callback:function(e){t.$set(t.model,"activity_time",e)},expression:"model.activity_time"}})],1):t._e(),"1"===t.model.presell_type?a("FormItem",{key:"presell_type1",attrs:{label:"活动期限：",prop:"activity_time"}},[a("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动期限",disabled:"add"!==t.type},on:{"on-change":t.changeActivityTime},model:{value:t.model.activity_time,callback:function(e){t.$set(t.model,"activity_time",e)},expression:"model.activity_time"}})],1):t._e()],1)],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"适用人群："}},[a("div",[t._v("全部会员")])]),t.hiddenCommision?t._e():a("FormItem",{attrs:{label:"是否参与分销：",prop:"is_commission"}},[a("RadioGroup",{model:{value:t.model.is_commission,callback:function(e){t.$set(t.model,"is_commission",e)},expression:"model.is_commission"}},[a("Radio",{attrs:{label:"0",disabled:"add"!==t.type||!t.canUse}},[t._v("不参与")]),a("Radio",{attrs:{label:"1",disabled:"add"!==t.type||!t.canUse}},[t._v("参与")])],1),t.canUse?a("kdx-hint-text",{staticStyle:{"max-width":"610px"}},[t._v("如果活动内包含未设置分销的商品，选择后也不会产生分佣")]):t._e(),t.canUse?t._e():a("kdx-hint-text",{staticStyle:{"max-width":"610px"}},[t._v("暂无分销权限")])],1),a("FormItem",{attrs:{label:"预计发货时间：",prop:"send_type"}},[a("RadioGroup",{model:{value:t.model.send_type,callback:function(e){t.$set(t.model,"send_type",e)},expression:"model.send_type"}},[a("Radio",{attrs:{label:"0",disabled:"add"!==t.type}},[t._v("特定时间")]),a("Radio",{attrs:{label:"1",disabled:"add"!==t.type}},[t._v("付款成功")])],1),a("div",{staticClass:"next-box"},["0"===t.model.send_type?a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"send_time"}},[a("div",{staticClass:"flex"},[a("DatePicker",{staticClass:"width-250",attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"请选择发货时间",disabled:"add"!==t.type,value:t.model.send_time},on:{"on-change":function(e){t.model.send_time=e}}}),a("div",{staticClass:"marginL-10"},[t._v("开始发货")])],1)]):t._e(),"1"===t.model.send_type?a("FormItem",{attrs:{label:"",prop:"send_day"}},[a("div",{staticClass:"flex"},[a("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",number:"",fixed:0,maxValue:999999999,disabled:"add"!==t.type},model:{value:t.model.send_day,callback:function(e){t.$set(t.model,"send_day",e)},expression:"model.send_day"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("天")])]),a("div",{staticClass:"marginL-10"},[t._v("后开始发货")])],1)]):t._e()],1)],1),a("FormItem",{attrs:{label:"限购数量："}},[a("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",number:"",fixed:0,maxValue:999999999,"min-value":1,disabled:"add"!==t.type},model:{value:t.model.limit_num,callback:function(e){t.$set(t.model,"limit_num",e)},expression:"model.limit_num"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])]),a("kdx-hint-text",[t._v("只读取活动限制")])],1),a("FormItem",{attrs:{label:"未支付取消时间：",prop:"cancel_type","label-width":140}},[a("RadioGroup",{model:{value:t.model.cancel_type,callback:function(e){t.$set(t.model,"cancel_type",e)},expression:"model.cancel_type"}},[a("Radio",{attrs:{label:"0",disabled:"add"!==t.type}},[t._v("商城系统规则")]),a("Radio",{attrs:{label:"1",disabled:"add"!==t.type}},[t._v("活动规则")])],1),"1"===t.model.cancel_type?a("div",{staticClass:"next-box"},[a("FormItem",{attrs:{label:"",prop:"cancel_time"}},[a("kdx-rr-input",{staticClass:"width-160",attrs:{placeholder:"请输入",number:"",minValue:20,maxValue:1440,fixed:0,disabled:"add"!==t.type},model:{value:t.model.cancel_time,callback:function(e){t.$set(t.model,"cancel_time",e)},expression:"model.cancel_time"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("分钟")])]),a("kdx-hint-text",{staticClass:"ml-150"},[t._v("订单取消时间必须在20-1440分钟之间。")])],1)],1):t._e()],1)],1),a("goods-selector",{attrs:{flag:"presell",multiple:!0,"current-list":t.model.goods_list,show_activity:1},on:{"on-change":t.changeGoodList,"on-cancel":t.cancelGoodSelector},model:{value:t.goodSelector.value,callback:function(e){t.$set(t.goodSelector,"value",e)},expression:"goodSelector.value"}})],1)},n=[]},"3d67":function(t,e,a){"use strict";a("7568")},"3f4d":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-info"},[a("kdx-form-title",[t._v("活动信息")]),a("div",{staticClass:"activity-dec flex"},[a("div",[a("span",[t._v("活动标题：")]),a("span",[t._v(t._s(t.info.title))])]),a("div",[a("span",[t._v("预售方式：")]),a("span",[a("kdx-tag-label",{attrs:{type:"1"===t.info.presell_type?"info":"warning"}},[t._v(t._s("0"===t.info.presell_type?"定金预售":"全款预售"))])],1)]),a("div",[a("span",[t._v("活动时间：")]),a("span",[t._v(t._s(t.info.start_time)+"-"+t._s(t.info.end_time))])]),a("div",[a("span",[t._v("活动状态：")]),a("span",["1"==t.info.status?a("kdx-status-text",{attrs:{type:"success"}},[t._v("进行中")]):t._e(),"-1"==t.info.status?a("kdx-status-text",{attrs:{type:"danger"}},[t._v("停止")]):t._e(),"-2"==t.info.status?a("kdx-status-text",{attrs:{type:"danger"}},[t._v("手动停止")]):t._e(),"0"==t.info.status?a("kdx-status-text",{attrs:{type:"warning"}},[t._v("未开始")]):t._e()],1)])])],1)},n=[]},"444b":function(t,e,a){"use strict";a("36b5")},"4a71":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{title:"修改预售商品信息",value:t.modal,width:"1000","mask-closable":!1,loading:t.loading,footerHide:"add"!==t.type},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOK}},[a("div",{staticClass:"multi-specification"},[a("div",{staticClass:"setting flex"},[a("span",[t._v("批量设置：")]),a("div",{staticClass:"setting-input flex"},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0",disabled:"add"!==t.type},on:{"on-change":t.changePresell},model:{value:t.allPresell,callback:function(e){t.allPresell=e},expression:"allPresell"}},[t._v("参与预售 ")]),a("kdx-rr-input",{attrs:{type:"text",placeholder:"预售库存",number:"",fixed:0,maxValue:999999999,disabled:"add"!==t.type},model:{value:t.batchData.presell_stock,callback:function(e){t.$set(t.batchData,"presell_stock",e)},expression:"batchData.presell_stock"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])]),a("kdx-rr-input",{attrs:{type:"text",placeholder:0==t.presellType?"定金":"预售价格",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==t.type},model:{value:t.batchData.front_money,callback:function(e){t.$set(t.batchData,"front_money",e)},expression:"batchData.front_money"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),0==t.presellType?a("kdx-rr-input",{attrs:{type:"text",placeholder:"定金抵扣金额",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==t.type},model:{value:t.batchData.front_money_deduct,callback:function(e){t.$set(t.batchData,"front_money_deduct",e)},expression:"batchData.front_money_deduct"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]):t._e(),a("Button",{staticClass:"default-primary",attrs:{disabled:"add"!==t.type},on:{click:t.handleBatchChange}},[t._v("应用")])],1)]),a("div",{staticClass:"table-list"},[a("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.form.goodsList,"span-method":t.handleSpan},scopedSlots:t._u([{key:"is_presell",fn:function(e){var i=e.index;return[a("FormItem",{attrs:{prop:"goodsList."+i+".is_presell",rules:t.rules.is_presell}},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0",disabled:"add"!==t.type},model:{value:t.form.goodsList[i].is_presell,callback:function(e){t.$set(t.form.goodsList[i],"is_presell",e)},expression:"form.goodsList[index].is_presell"}},[t._v("参与 ")])],1)]}},{key:"presell_stock",fn:function(e){var i=e.index;return[a("FormItem",{attrs:{prop:"goodsList."+i+".presell_stock",rules:t.rules.presell_stock}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:"add"!==t.type},model:{value:t.form.goodsList[i].presell_stock,callback:function(e){t.$set(t.form.goodsList[i],"presell_stock",e)},expression:"form.goodsList[index].presell_stock"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)]}},{key:"front_money",fn:function(e){var i=e.index;return[a("FormItem",{attrs:{prop:"goodsList."+i+".front_money",rules:t.rules.front_money}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==t.type},model:{value:t.form.goodsList[i].front_money,callback:function(e){t.$set(t.form.goodsList[i],"front_money",e)},expression:"form.goodsList[index].front_money"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)]}},{key:"front_money_deduct",fn:function(e){var i=e.index;return[a("FormItem",{attrs:{prop:"goodsList."+i+".front_money_deduct",rules:t.rules.front_money_deduct}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==t.type},model:{value:t.form.goodsList[i].front_money_deduct,callback:function(e){t.$set(t.form.goodsList[i],"front_money_deduct",e)},expression:"form.goodsList[index].front_money_deduct"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)]}}])})],1)],1)])])},n=[]},"4b48":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("4de4"),a("d3b7");var n=i(a("5530")),s={name:"Preview",components:{},props:{activityData:{type:Object,default:function(){}}},data:function(){return{presellData:{}}},watch:{activityData:{handler:function(t){var e;if(null!==t&&void 0!==t&&null!==(e=t.goods_list)&&void 0!==e&&e.length){var a=(0,n.default)({},null===t||void 0===t?void 0:t.goods_list[0]);if(1==a.has_option){var i,s,r=null===(i=a)||void 0===i||null===(s=i.rules)||void 0===s?void 0:s.filter((function(t){return 1==t.is_presell}))[0];a=(0,n.default)((0,n.default)({},a),{},{front_money:(null===r||void 0===r?void 0:r.front_money)||10,front_money_deduct:(null===r||void 0===r?void 0:r.front_money_deduct)||30,presell_stock:(null===r||void 0===r?void 0:r.presell_stock)||100})}this.presellData=(0,n.default)((0,n.default)({},t),{},{goods_list:a})}else this.presellData=(0,n.default)((0,n.default)({},t),{},{goods_list:{thumb:this.$utils.staticImg("decorate/default_goods3.jpg"),price:"334.00",title:"衬衫男女长袖夏季日系ins风文艺薄款亚麻港风男士女士小清新棉麻条纹白衬女士",has_option:0,front_money:"10",front_money_deduct:"30",presell_stock:100,stock:100,sales:45,sub_name:"条纹棉麻衬衫，慵随性饭，自然、舒适、透气、吸湿散湿快，可单穿当外套搭配T恤都很好看，整个风格"}})},deep:!0,immediate:!0}},computed:{},created:function(){},mounted:function(){},methods:{}};e.default=s},"4ba8":function(t,e,a){},5038:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"data_charts_line"},[a("div",{style:{width:"100%",height:t.height+"px"},attrs:{id:"line_"+t.id}})])},n=[]},5892:function(t,e,a){"use strict";a.r(e);var i=a("799e"),n=a("26c1");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("aa65");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"265d811a",null);e["default"]=o.exports},"5e9f":function(t,e,a){"use strict";a.r(e);var i=a("dbced"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},60692:function(t,e,a){"use strict";a("cc899")},"618b":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d81d"),a("b0c0"),a("b64b");var n=i(a("a929")),s=i(a("1557")),r=i(a("2e16")),o=i(a("847e")),l={name:"index",components:{marketOverview:n.default,ChartBar:s.default,ChartPie:r.default,activityList:o.default},props:{},data:function(){return{loading:!1,total:2,page:{pageSize:10,pageNumber:1},model:{activity_id:""},list:[],statisticsData:{},grade:{legend:{orient:"vertical",left:60,top:90,bottom:0,data:[]},radius:["40%","60%"],center:["70%","50%"]},gradeData:[],addChart:{color:["#4A67FF","#F66000"],data:[],legend:["浏览量（PV）","访客量（UV）"],xAxis:{minInterval:1,data:[]},yAxis:{name:"单位(人)",minInterval:1},legendStyle:{right:"30",top:"25"},grid:{left:60,right:40,bottom:30}},activeies:[],updateTime:""}},watch:{"model.activity_id":function(){this.getView()}},computed:{},created:function(){this.getAllActivies(),this.getData(),this.getTime()},methods:{getData:function(){var t=this;this.loading=!0,this.getView(),this.getList(),this.$api.presellApi.getStatistics({}).then((function(e){t.loading=!1,0===e.error&&(t.statisticsData=e.data,t.gradeData=e.data.channel,t.grade.legend.data=e.data.channel.map((function(t){return t.name})),t.$nextTick((function(){t.$refs["presell_pie"].render()})))}))},getView:function(){var t=this,e={};this.model.activity_id&&(e.activity_id=this.model.activity_id),this.$api.presellApi.getStatisticsView(e).then((function(e){0===e.error&&(t.addChart.xAxis.data=Object.keys(e.data),t.addChart.data=[t.addChart.xAxis.data.map((function(t){return e.data[t].goods_pv_count||0})),t.addChart.xAxis.data.map((function(t){return e.data[t].member_pv_count||0}))],t.$nextTick((function(){t.$refs["chart_add_bar"].render()})))}))},getList:function(){var t=this,e={pagesize:this.page.pageSize,page:this.page.pageNumber};this.$api.presellApi.getStatisticsList(e).then((function(e){0===e.error&&(t.list=e.list,t.total=e.total)}))},getAllActivies:function(){var t=this;this.$api.presellApi.getPresellActivityList({is_all:1}).then((function(e){0==e.error&&(t.activeies=e.list)}))},getTime:function(){var t=this;this.$api.presellApi.getUpdateTime().then((function(e){0==e.error&&(t.updateTime=e.time)}))},changePage:function(t){this.page=t,this.getList()},handleSearch:function(){}}};e.default=l},6452:function(t,e,a){"use strict";a("f005")},"68cd":function(t,e,a){"use strict";a.r(e);var i=a("2b34"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"6ac0":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-wrap"},[a("search-header",{ref:"search_header",on:{"on-search":t.handleSearch}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-list"},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},scopedSlots:t._u([{key:"type",fn:function(e){var i=e.row;return[a("div",[a("kdx-tag-label",{attrs:{type:"1"===i.presell_type?"info":"warning"}},[t._v(" "+t._s("0"===i.presell_type?"定金预售":"全款预售")+" ")])],1)]}},{key:"date",fn:function(e){var i=e.row;return[a("div",{staticClass:"time"},[t._v("起："+t._s(i.start_time))]),a("div",{staticClass:"time"},[t._v("止："+t._s(i.end_time))])]}},{key:"status",fn:function(e){var i=e.row;return["1"===i.status?a("kdx-status-text",{attrs:{type:"success"}},[t._v("进行中")]):t._e(),"-1"===i.status?a("kdx-status-text",{attrs:{type:"danger"}},[t._v("停止")]):t._e(),"-2"===i.status?a("kdx-status-text",{attrs:{type:"danger"}},[t._v("手动停止")]):t._e(),"0"===i.status?a("kdx-status-text",{attrs:{type:"warning"}},[t._v("未开始")]):t._e()]}},{key:"action",fn:function(e){var i=e.row;return[a("div",{staticClass:"btn-box"},[a("Button",{attrs:{type:"text",disabled:0==i.status||-1==i.status||-2==i.status},on:{click:function(e){return t.handleStop(i.id,i.presell_type)}}},[t._v("停止")]),a("Button",{attrs:{type:"text"},on:{click:function(e){return t.handleView(i.id)}}},[t._v("查看")]),"0"!==i.status?a("Button",{attrs:{type:"text"},on:{click:function(e){return t.handleActivityData(i.id,i.presell_type)}}},[t._v("数据")]):t._e(),a("Button",{attrs:{type:"text"},on:{click:function(e){return t.handleDelete(i.id)}}},[t._v("删除")])],1)]}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.length>0,expression:"data.length > 0"}],staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1),t._t("default")],2)},n=[]},"6fde":function(t,e,a){"use strict";a.r(e);var i=a("618b"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},7154:function(t,e,a){"use strict";a("efe4")},"72d8":function(t,e,a){"use strict";a("76a9")},7386:function(t,e,a){"use strict";a.r(e);var i=a("ca6d"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},7568:function(t,e,a){},76661:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"MarketOverview",components:{},props:{title:{type:String,default:"预售活动营销概览"},icon_show:{type:Boolean,default:!1},countData:{type:Object,default:function(){return{byte_dance_order_price_sum:"0",deduct_all_price_sum:"0",deduct_front_price_sum:"0",deduct_price_sum:"0",goods_pv_count:"0",h5_order_price_sum:"0",order_count:"0",order_pay_final_price_sum:"0",order_pay_front_price_sum:"0",order_pay_price_sum:"0",pay_final_member_count:"0",pay_final_order_count:"0",pay_front_member_count:"0",pay_front_order_count:"0",wechat_order_price_sum:"0",wxapp_order_price_sum:"0"}}},time:{type:String,default:""},showHover:{type:Boolean,default:!1}},data:function(){return{data:{}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}};e.default=a},"76a9":function(t,e,a){},7746:function(t,e,a){"use strict";a.r(e);var i=a("c0379"),n=a("ff7a");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("063d");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"11ce6c00",null);e["default"]=o.exports},"799e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"preview-index"},[i("div",{staticClass:"preview-title"},[t._v("商品预售预览")]),i("div",{staticClass:"preview-box"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:a("3084"),alt:""}})]),i("div",{staticClass:"img"},[i("img",{attrs:{src:a("bb47"),alt:""}})]),i("div",{staticClass:"goods-img"},[i("img",{attrs:{src:t.$utils.media(t.presellData.goods_list.thumb),alt:""}})]),i("div",{staticClass:"detail-info-activity"},[i("div",{staticClass:"activity-price flex",style:"background-image: url("+t.$utils.staticImg("presell/bg.png")+")"},[i("div",{staticClass:"left flex"},[i("div",{staticClass:"price"},[i("div",{staticClass:"price-text"},[i("span",{staticClass:"presell-text"},[t._v(t._s(1==t.presellData.presell_type?"预售价":"定金"))]),i("span",{staticClass:"price-unit"},[t._v("￥")])]),i("span",[i("span",{staticClass:"price-begin"},[t._v(t._s(t.presellData.goods_list.front_money||10))])]),0==t.presellData.presell_type?i("span",[i("span",{staticClass:"price-deduct"},[t._v("可抵扣￥"+t._s(Number(t.presellData.goods_list.front_money_deduct)||20))])]):t._e()]),i("p",{staticClass:"del-price"},[i("span",[t._v("原价")]),t.presellData.goods_list&&1==t.presellData.goods_list.has_option?i("span",{staticClass:"money"},[t._v("￥"+t._s(t.presellData.goods_list.min_price))]):i("span",{staticClass:"money"},[t._v("￥"+t._s(t.presellData.goods_list.price))])])]),i("div",{staticClass:"right"},[i("div",{},[i("img",{staticClass:"text-img",attrs:{src:t.$utils.staticImg("presell/text.png"),alt:""}})]),i("div",[t._v("距结束还剩")]),t._m(0)])])]),i("div",{staticClass:"detail_info"},[i("div",{staticClass:"container"},[i("div",{staticClass:"title-floor floor flex"},[i("p",{staticClass:"title"},[t._v(t._s(t.presellData.goods_list.title))]),t._m(1)]),t.presellData.goods_list.sub_name?i("div",{staticClass:"desc-floor floor"},[t._v(t._s(t.presellData.goods_list.sub_name))]):t._e(),i("div",{staticClass:"express-floor floor"},[t._m(2),i("p",{staticClass:"sales"},[i("i",{staticClass:"icon-m-shangpinxiangqing-xiaoliang iconfont-m-"}),i("span",{staticClass:"floor-text"},[t._v("销量："+t._s(t.presellData.goods_list.sales||100)+"件")])]),i("p",{staticClass:"addr"},[i("i",{staticClass:"icon-m-kucun iconfont-m-"}),i("span",{staticClass:"floor-text"},[t._v("库存："+t._s(t.presellData.goods_list.presell_stock||100)+"件")])])])])]),i("div",{staticClass:"detail-info-presell"},[1==t.presellData.presell_type?i("div",{staticClass:"full-box flex",style:"background-image: url("+t.$utils.staticImg("presell/bg2.png")+")"},[i("p",{staticClass:"full-text"},[t._v("全款预售")]),1==t.presellData.send_type?i("p",[t._v("预售商品发货时间：付款成功"+t._s(t.presellData.send_day||3)+"天后开始发货")]):t._e(),0==t.presellData.send_type?i("p",[t._v("预售商品发货时间："+t._s(t.presellData.send_time||"2020-07-18 12:00:00")+" 开始发货")]):t._e()]):i("div",{staticClass:"deposit-box"},[i("div",{staticClass:"deposit-container flex"},[i("div",{staticClass:"item flex-column after"},[i("img",{staticClass:"step-img",attrs:{src:t.$utils.staticImg("presell/icon1_hover.png"),alt:""}}),i("span",{staticClass:"active uni-color-primary"},[t._v("支付定金")]),i("span",{staticClass:"time"},[t._v(t._s(t.presellData.pay_front_start_time||"2020-07-12 12:00:00"))])]),i("div",{staticClass:"item flex-column after"},[i("img",{staticClass:"step-img",attrs:{src:t.$utils.staticImg("presell/icon2.png"),alt:""}}),i("span",[t._v("支付尾款")]),i("span",{staticClass:"time"},[t._v(t._s(t.presellData.pay_final_start_time||"2020-07-15 12:00:00"))])]),i("div",{staticClass:"item flex-column"},[i("img",{staticClass:"step-img",attrs:{src:t.$utils.staticImg("presell/icon3.png"),alt:""}}),i("span",[t._v("预计发货")]),0==t.presellData.send_type?i("span",{staticClass:"time"},[t._v(t._s(t.presellData.send_time||"2020-07-18 12:00:00"))]):i("span",{staticClass:"time"},[t._v("付款成功"+t._s(t.presellData.send_day||3)+"天后发货")])])])])]),i("div",{staticClass:"detail_navbar"},[t._m(3),t._m(4),t._m(5),i("div",{staticClass:"btns-box"},[i("p",{staticClass:"btn buy-btn"},[t._v(t._s(1==t.presellData.presell_type?"立即购买":"支付定金"+(t.presellData.goods_list.front_money||10)))])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"presell-count"},[a("span",{staticClass:"time"},[t._v("23")]),a("span",{staticClass:"colon"},[t._v(":")]),a("span",{staticClass:"time"},[t._v("23")]),a("span",{staticClass:"colon"},[t._v(":")]),a("span",{staticClass:"time"},[t._v("23")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"share-commission"},[a("div",{staticClass:"commission"},[a("p",{staticClass:"money"},[a("span",{staticClass:"money-unit"},[t._v("￥")]),a("span",{staticClass:"num"},[t._v("5")])]),a("p",{staticClass:"word"},[t._v("预计佣金")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"express"},[a("i",{staticClass:"icon-m-shangpinxiangqing-kuaidi iconfont-m-"}),a("span",{staticClass:"floor-text"},[t._v("运费：¥10.00")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"like nav-icon"},[a("i",{staticClass:"myicon iconfont-m- icon-m-xingxingkongxin"}),a("span",[t._v("收藏")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shop nav-icon"},[a("i",{staticClass:"myicon iconfont-m- icon-m-iconfontshop"}),a("span",[t._v("店铺")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart nav-icon"},[a("i",{staticClass:"myicon iconfont-m- icon-m-cart"}),a("span",[t._v("购物车")])])}]},"7d76":function(t,e,a){"use strict";a.r(e);var i=a("ff69"),n=a("bc62");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports},"7fed":function(t,e,a){},8244:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"ActivityInfo",components:{},props:{info:{type:Object,default:function(){}}},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{}};e.default=a},8322:function(t,e,a){"use strict";a.r(e);var i=a("305a"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"847e":function(t,e,a){"use strict";a.r(e);var i=a("eb29"),n=a("3c30");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("60692");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"42fef275",null);e["default"]=o.exports},"8c33":function(t,e,a){"use strict";a("b7f7")},"972c":function(t,e,a){"use strict";a.r(e);var i=a("03957"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"9a26":function(t,e,a){"use strict";a.r(e);var i=a("f2e4"),n=a("f9da");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("8c33");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"fa9174d0",null);e["default"]=o.exports},"9c63":function(t,e,a){"use strict";a("f0ff")},a112:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("841c"),a("d81d");var n=i(a("5530")),s=i(a("29df")),r={name:"list",components:{searchHeader:s.default},props:{},data:function(){return{loading:!1,page:{pageSize:10,pageNumber:1},search:{keyword:"",status:"",type:"",start_time:"",end_time:""},data:[],total:0,columns:[{title:"活动名称",key:"title"},{title:"预售方式",slot:"type"},{title:"活动时间",slot:"date"},{title:"停止时间",key:"stop_time"},{title:"活动状态",slot:"status",width:160},{title:"操作",slot:"action"}]}},computed:{},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this;this.loading=!0;var e=(0,n.default)((0,n.default)({},this.search),{},{pagesize:this.page.pageSize,page:this.page.pageNumber});this.$api.presellApi.getPresellActivityList(e).then((function(e){t.loading=!1,0===e.error&&(t.data=e.list,t.total=e.total)}))},handleSearch:function(t){this.search=(0,n.default)((0,n.default)({},this.search),t),this.refreshTable()},changePage:function(t){this.page=t,this.getList()},handleView:function(t){this.$router.push({path:"/plugins/market/presell/activity/index",query:{id:t,type:"view"}})},handleEdit:function(t){this.$router.push({path:"/plugins/market/presell/activity/index",query:{id:t,type:"edit"}})},handleStop:function(t,e){var a=this,i=1==e?"手动停止活动后用户将不能继续参与该活动，是否要手动停止活动？":"手动停止活动，已付定金未付尾款的订单将退还定金，已付尾款的订单正常发货，是否确认停止活动？";this.$Modal.confirm({title:"提示",content:i,onOk:function(){a.stopPresellActivity(t)},onCancel:function(){}})},stopPresellActivity:function(t){var e=this;this.$api.presellApi.stopPresellActivity({id:t}).then((function(t){var a,i;0===t.error&&(null!==t&&void 0!==t&&null!==(a=t.close_ids)&&void 0!==a&&a.length&&(null===t||void 0===t||t.close_ids.map((function(t){e.closeOrder(t,0)}))),null!==t&&void 0!==t&&null!==(i=t.refund_front_ids)&&void 0!==i&&i.length&&(null===t||void 0===t||t.refund_front_ids.map((function(t){e.closeOrder(t,1)}))),e.refreshTable(),e.$Message.success("操作成功"))}))},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要删除该活动？",onOk:function(){e.delPresellActivity(t)},onCancel:function(){}})},delPresellActivity:function(t){var e=this;this.$api.presellApi.delPresellActivity({id:t}).then((function(t){0===t.error&&(e.refreshTable(),e.$Message.success("删除成功"))}))},handleActivityData:function(t,e){this.$router.push({path:"/plugins/market/presell/activity/data",query:{id:t,type:e}})},refreshTable:function(){this.page={pageSize:10,pageNumber:1},this.$refs["page"].reset(),this.getList()},closeOrder:function(t,e){var a={id:t,remark:"停止活动",is_refund_front:e,close_presell_activity:1};this.$api.orderApi.closeOrder(a,{nomessage:!0}).then((function(t){console.log(t)}))}}};e.default=r},a929:function(t,e,a){"use strict";a.r(e);var i=a("110e"),n=a("d8fe");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("0245");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"0c347998",null);e["default"]=o.exports},aa1d:function(t,e,a){"use strict";a.r(e);var i=a("4a71"),n=a("c0ed");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("7154");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"1b118723",null);e["default"]=o.exports},aa65:function(t,e,a){"use strict";a("7fed")},ad4e9:function(t,e,a){"use strict";a("18d6")},b4ae:function(t,e,a){},b621:function(t,e,a){},b720:function(t,e,a){"use strict";a.r(e);var i=a("03a3"),n=a("6fde");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("237e");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"49cb7ccc",null);e["default"]=o.exports},b7f7:function(t,e,a){},bc62:function(t,e,a){"use strict";a.r(e);var i=a("3d39"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},be13:function(t,e,a){"use strict";a.r(e);var i=a("6ac0"),n=a("d77d");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("444b");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"565c5982",null);e["default"]=o.exports},c0379:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"activity-data"},[a("activity-info",{attrs:{info:t.statisticsData.detail}}),a("market-overview",{attrs:{title:"活动预售概览",time:t.updateTime,"count-data":t.statisticsData.count}}),a("activity-list",{attrs:{type:t.type,list:t.list,total:t.total},on:{changePage:t.changePage,"on-sort":t.changeSort}})],1)},n=[]},c0ed:function(t,e,a){"use strict";a.r(e);var i=a("362b"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},c3e2:function(t,e,a){"use strict";a("e6c8")},c8d5:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"presell-set-index"},[a("kdx-form-title",[t._v("支付设置")]),a("Form",{ref:"form",attrs:{model:t.paymentData,rules:t.rules,"label-width":120}},[a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"定金预售："}},[a("RadioGroup",{model:{value:t.paymentData.front_money_type,callback:function(e){t.$set(t.paymentData,"front_money_type",e)},expression:"paymentData.front_money_type"}},[a("Radio",{attrs:{label:"0"}},[a("span",[t._v("系统设置")])]),a("Radio",{attrs:{label:"1"}},[a("span",[t._v("自定义")])])],1),1==t.paymentData.front_money_type?a("div",{staticClass:"payment-setting-main"},[a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"定金支付方式：",prop:"front_pay_type"}},[a("CheckboxGroup",{model:{value:t.paymentData.front_pay_type,callback:function(e){t.$set(t.paymentData,"front_pay_type",e)},expression:"paymentData.front_pay_type"}},[a("Checkbox",{attrs:{label:"30"}},[t._v("支付宝支付")]),a("Checkbox",{attrs:{label:"20"}},[t._v("微信支付")]),a("Checkbox",{attrs:{label:"10"}},[t._v("余额支付")])],1)],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"尾款支付方式：",prop:"final_pay_type"}},[a("CheckboxGroup",{model:{value:t.paymentData.final_pay_type,callback:function(e){t.$set(t.paymentData,"final_pay_type",e)},expression:"paymentData.final_pay_type"}},[a("Checkbox",{attrs:{label:"30"}},[t._v("支付宝支付")]),a("Checkbox",{attrs:{label:"20"}},[t._v("微信支付")]),a("Checkbox",{attrs:{label:"10"}},[t._v("余额支付")])],1)],1)],1):t._e()],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"全款预售："}},[a("RadioGroup",{model:{value:t.paymentData.final_money_type,callback:function(e){t.$set(t.paymentData,"final_money_type",e)},expression:"paymentData.final_money_type"}},[a("Radio",{attrs:{label:"0"}},[a("span",[t._v("系统设置")])])],1)],1)],1)],1)])},n=[]},c9d7:function(t,e,a){"use strict";a.r(e);var i=a("1911"),n=a("5e9f");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("ad4e9");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"63cad3e2",null);e["default"]=o.exports},ca6d:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("1276"),a("a15b");var i={name:"index",components:{},props:{},data:function(){return{loading:!1,paymentData:{front_pay_type:["10","20","30"],final_pay_type:["10","20","30"],front_money_type:"1",final_money_type:"0"},rules:{front_pay_type:[{required:!0,type:"array",min:1,message:"请选择定金支付方式"}],final_pay_type:[{required:!0,type:"array",min:1,message:"请选择尾款支付方式"}]}}},computed:{},created:function(){},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,this.$api.presellApi.getPresellSet().then((function(e){t.loading=!1,0===e.error&&(t.paymentData={front_pay_type:e.settings.front_pay_type?e.settings.front_pay_type.split(","):[],final_pay_type:e.settings.final_pay_type?e.settings.final_pay_type.split(","):[],front_money_type:e.settings.front_money_type,final_money_type:"0"})}))},handleSave:function(){var t=this;1==this.paymentData.front_money_type?this.$refs["form"].validate((function(e){console.log(e,"valid"),e&&t.submit()})):this.submit()},submit:function(){var t=this,e={front_money_type:this.paymentData.front_money_type};1==e.front_money_type&&(e.front_pay_type=this.paymentData.front_pay_type.join(","),e.final_pay_type=this.paymentData.final_pay_type.join(",")),this.$api.presellApi.setPresellSet(e).then((function(e){0===e.error&&(t.$Message.success("保存成功"),t.getData())}))}}};e.default=i},cc899:function(t,e,a){},ce52:function(t,e,a){"use strict";a.r(e);var i=a("f3d9"),n=a("972c");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("3d67");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports},d490:function(t,e,a){"use strict";a.r(e);var i=a("d706"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},d706:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530"));a("a9e3"),a("e9c4"),a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("99af");var s=i(a("313e")),r=i(a("89bd")),o={name:"ChartBar",props:{id:{type:String,required:!0},data:{type:Array,default:function(){return[]}},legend:{type:Array,default:function(){return[]},required:!0},isLegend:{type:Boolean,default:!1},legendStyle:{type:Object,default:function(){return{right:"0",top:"25"}}},xAxis:{type:[Array,Object],default:function(){return[]}},yAxis:{type:[Array,Object],default:function(){}},height:{type:Number,default:450},loading:{type:Boolean,default:!1},typeXAxis:{type:String,default:"category"},grid:{type:Object,default:function(){}},barMaxWidth:{type:Number,default:24},color:{type:Array,default:function(){return[]}},showBackground:{type:Boolean,default:!1},backgroundStyle:{type:Object,default:function(){}}},data:function(){return{myCharts:null,option:{title:{},grid:{left:"5%",right:"4%",bottom:"10%",containLabel:!1},color:this.color||[],tooltip:{trigger:"axis",axisPointer:{animation:!0,type:"shadow",lineStyle:{color:"#BFBFBF"},shadowStyle:{shadowColor:"#ccd6ec",opacity:.3}},padding:[0],textStyle:{color:"#262B30",fontSize:12}},legend:(0,n.default)({icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:"#939799"},data:this.legend},this.legendStyle),xAxis:{type:this.typeXAxis,boundaryGap:!0,data:this.xAxis,minInterval:1,axisTick:{alignWithLabel:!0}},yAxis:{nameTextStyle:{color:"#262B30"},splitLine:{lineStyle:{type:"dashed"}},axisTick:{alignWithLabel:!0},minInterval:1},series:this.data}}},methods:{init:function(){s.default.registerTheme("theme",r.default),this.myCharts=s.default.init(document.getElementById("line_".concat(this.id)),r.default)},render:function(){var t=this;this.myCharts||this.init();var e=JSON.parse(JSON.stringify(this.option));this.isLegend&&(e.legend.data=this.legend),Object.assign(e.grid,this.grid),Object.assign(e.xAxis,this.xAxis),this.yAxis instanceof Array?e.yAxis=this.yAxis||[]:this.yAxis instanceof Object&&(e.yAxis=Object.assign(e.yAxis,this.yAxis)),this.legend.length>1?e.series=this.legend.map((function(e,a){var i={name:e,type:"bar",data:t.data[a]||[],showBackground:t.showBackground,backgroundStyle:t.backgroundStyle};return i})):e.series=[{name:this.legend[0],type:"bar",data:this.data||[],barMaxWidth:this.barMaxWidth,showBackground:this.showBackground,backgroundStyle:this.backgroundStyle,emphasis:{itemStyle:{}}}],e.tooltip.formatter=function(t){var e="",a=t[0].name;return t.forEach((function(t){var a=t.seriesName,i=t.value,n=t.color;e+='\n                              <div style="display:flex;align-items:center;margin-top:4px;">\n                              <span style="display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:8px;background:'.concat(n,';"></span>\n                              <span style="color:#636669;">').concat(a,"：").concat(i,"</span>\n                              </div>")})),'<div style="background:#fff;border-radius: 2px;padding: 12px 48px 12px 12px;box-shadow: 0px 4px 10px rgba(0, 49, 95, 0.08);">\n                            <div>'.concat(a,"</div>\n                            ").concat(e,"\n                    </div>")},this.myCharts.setOption(e)},handleResize:function(){this.myCharts&&this.myCharts.resize()}},mounted:function(){window.addEventListener("resize",this.handleResize)}};e.default=o},d77d:function(t,e,a){"use strict";a.r(e);var i=a("a112"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},d8c2:function(t,e,a){"use strict";a.r(e);var i=a("8244"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},d8fe:function(t,e,a){"use strict";a.r(e);var i=a("76661"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},dbced:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i={name:"ActivityList",components:{},props:{list:{type:Array,default:function(){return[]}},total:{type:[String,Number],default:0},type:{type:[String,Number],default:0}},data:function(){this.$createElement;return{columns:[{title:"商品信息",slot:"title",minWidth:120},{title:"商品价格",key:"price",render:function(t,e){return t("div",["￥",e.row[e.column.key]||"0"])}},{title:"支付定金",key:"front_price_sum",render:function(t,e){return t("div",["￥",e.row[e.column.key]||"0"])}},{title:"尾款金额",key:"pay_final_price_sum",render:function(t,e){return t("div",["￥",e.row[e.column.key]||"0"])}},{title:"优惠金额",key:"deduct_sum",render:function(t,e){return t("div",["￥",e.row.deduct_sum||"0"])}},{title:"订单总数",key:"order_count"},{title:"支付定金订单",key:"pay_front_count"},{title:"支付尾款订单",key:"order_pay_count"},{title:"退款金额",key:"refund_price",render:function(t,e){return t("div",["￥",e.row[e.column.key]||"0"])}},{title:"销售额",key:"order_price_sum",render:function(t,e){return t("div",["￥",e.row[e.column.key]||"0"])}}]}},computed:{handleColumns:function(){var t=this.columns;return 1==this.type&&(t=[{title:"商品信息",slot:"title"},{title:"商品价格",key:"price"},{title:"预售金额",key:"front_money"},{title:"优惠金额",key:"deduct_sum"},{title:"订单总数",key:"order_count"},{title:"支付订单数",key:"order_pay_count"},{title:"退款金额",key:"refund_price"},{title:"活动收益",key:"order_price_sum"}]),t}},created:function(){},mounted:function(){},methods:{changePage:function(t){this.$emit("changePage",t)},changeSort:function(t){var e=t.key,a=t.order;"normal"===a?this.$emit("on-sort",{}):this.$emit("on-sort",{sort:e,by:a})}}};e.default=i},e447:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf"),a("a434"),a("d3b7"),a("d81d");var n=i(a("1da1")),s=i(a("5530")),r=i(a("9a26")),o=i(a("0659")),l=a("2f62"),d={name:"RulesInfo",components:{rulesGoods:r.default,goodsSelector:o.default},props:{type:{type:String,default:""},activityData:{type:Object,default:function(){}}},data:function(){var t=this;return{canUse:null,goodSelector:{value:!1},model:{presell_type:"0",pay_front_time:[],pay_front_start_time:"",pay_front_end_time:"",pay_final_time:[],pay_final_start_time:"",pay_final_end_time:"",start_time:"",end_time:"",activity_time:[],is_commission:"0",send_type:"0",send_time:"",send_day:"",limit_num:null,cancel_type:"0",cancel_time:"",goods_info:[],goods_list:[]},rule:{presell_type:[{required:!0,message:"请选择预售方式"}],is_commission:[{required:!0,message:"请选择是否参与分销"}],send_type:[{required:!0,message:"请选择预计发货时间"}],send_time:[{required:!0,message:"请选择预计发货时间"},{validator:function(e,a,i){var n,s;if(0==t.model.presell_type&&(null===(n=t.model)||void 0===n?void 0:n.pay_front_time.length)>0){var r=t.model.pay_front_time[0]?new Date(t.model.pay_front_time[0]):"",o=new Date(a);o>r?i():i(new Error("预计发货时间需大于支付定金开始时间"))}else if(1==t.model.presell_type&&(null===(s=t.model)||void 0===s?void 0:s.pay_front_time.length)>0){var l=t.model.activity_time[0]?new Date(t.model.activity_time[0]):"",d=new Date(a);d>l?i():i(new Error("预计发货时间需大于活动开始时间"))}else i()}}],send_day:[{required:!0,message:"请输入预计发货日期"}],cancel_type:[{required:!0,message:"请选择未支付定金取消时间"}],cancel_time:[{required:!0,message:"请输入未支付定金取消时间"}],pay_front_time:[{required:!0,type:"array",fields:{0:{type:"date",required:!0,message:"请选择支付定金时间"},1:{type:"date",required:!0,message:"请选择支付定金时间"}}},{validator:function(e,a,i){var n=new Date(t.model.pay_final_time[0]),s=new Date(t.model.pay_final_time[1]),r=new Date(a[0]),o=new Date(a[1]);n<r?i(new Error("支付定金开始时间必须大于等于支付尾款开始时间")):s<o?i(new Error("支付定金结束时间必须小于支付尾款结束时间")):i()}}],pay_final_time:[{required:!0,type:"array",fields:{0:{type:"date",required:!0,message:"请选择支付尾款时间"},1:{type:"date",required:!0,message:"请选择支付尾款时间"}}},{validator:function(e,a,i){var n=new Date(t.model.pay_front_time[0]),s=new Date(t.model.pay_front_time[1]),r=new Date(a[0]),o=new Date(a[1]);r<n?i(new Error("支付尾款开始时间必须小于等于支付定金开始时间")):s>o?i(new Error("支付尾款结束时间必须大于支付定金结束时间")):i()}}],activity_time:[{required:!0,type:"array",fields:{0:{type:"date",required:!0,message:"请选择活动日期"},1:{type:"date",required:!0,message:"请选择活动日期"}}}],goods_list:[{required:!0,type:"array",min:1,message:"请选择商品"}]}}},watch:{activityData:{handler:function(t){console.log(t,"rulesInfo?????????????????????"),this.model=t}},model:{handler:function(t){this.$emit("update:activityData",t)},deep:!0}},computed:(0,s.default)((0,s.default)((0,s.default)({},(0,l.mapGetters)("config",["getAppPermMap"])),(0,l.mapState)("config",["apps"])),{},{hiddenCommision:function(){return void 0===this.getAppPermMap("commission")||!1===this.getAppPermMap("commission")}}),created:function(){this.isExpire()},methods:{handleDelete:function(t){this.model.goods_list.splice(t,1)},isExpire:function(){this.canUse=!(!1===this.getAppPermMap("commission"))},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate(function(){var i=(0,n.default)(regeneratorRuntime.mark((function i(n){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!n){i.next=16;break}return i.prev=1,i.next=4,t.$refs.goodsRule.validateForm();case 4:return i.next=6,t.handleGoodsRules();case 6:s=i.sent,s.some((function(t){return"1"==t.has_option&&!t.rules}))&&(t.$Message.error("每个商品必须有一个规格参加活动"),a()),e(s),i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](1),a();case 14:i.next=17;break;case 16:a();case 17:case"end":return i.stop()}}),i,null,[[1,11]])})));return function(t){return i.apply(this,arguments)}}())}))},chooseShop:function(){this.goodSelector.value=!0},changeGoodList:function(t){this.model.goods_list=t.map((function(t){return(0,s.default)((0,s.default)({},t),{},{presell_stock:(null===t||void 0===t?void 0:t.presell_stock)||"",front_money_deduct:(null===t||void 0===t?void 0:t.front_money_deduct)||"",front_money:(null===t||void 0===t?void 0:t.front_money)||""})})),this.cancelGoodSelector(),this.$refs.goods_list.validateState=""},cancelGoodSelector:function(){this.goodSelector.value=!1},changePayFrontTime:function(t){this.model.pay_front_start_time=t[0],this.model.pay_front_end_time=t[1],this.changeActivity()},changePayFinalTime:function(t){this.model.pay_final_start_time=t[0],this.model.pay_final_end_time=t[1],this.changeActivity()},changeActivity:function(){this.model.pay_final_time.length&&this.model.pay_front_time.length&&(this.model.activity_time=[this.model.pay_front_start_time,this.model.pay_final_end_time])},changeActivityTime:function(t){this.model.start_time=t[0],this.model.end_time=t[1]},handleGoodsRules:function(){var t=this.model.goods_list.map((function(t){return t=0==t.has_option?{goods_id:t.id,has_option:t.has_option,option_id:0,presell_stock:t.presell_stock,front_money:t.front_money,front_money_deduct:t.front_money_deduct||0}:{goods_id:t.id,has_option:t.has_option,rules:t.rules},t}));return t},prsellChange:function(t){var e=this;"0"==t&&this.$nextTick((function(){e.$refs.active_time_range.validateState=""}))}}};e.default=d},e6c8:function(t,e,a){},e82d:function(t,e,a){},e924:function(t,e,a){"use strict";a.r(e);var i=a("02a1"),n=a("68cd");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("6452");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"68e8658e",null);e["default"]=o.exports},eb29:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-list"},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.list},scopedSlots:t._u([{key:"presell_type",fn:function(e){var i=e.row;return[a("div",[a("kdx-tag-label",{attrs:{type:"1"===i.presell_type?"info":"warning"}},[t._v(" "+t._s("0"===i.presell_type?"定金预售":"全款预售")+" ")])],1)]}},{key:"date",fn:function(e){var i=e.row;return[a("div",{staticClass:"time"},[t._v("起："),a("span",{staticStyle:{"word-break":"normal"}},[t._v(t._s(i.start_time))])]),a("div",{staticClass:"time"},[t._v("止："),a("span",{staticStyle:{"word-break":"normal"}},[t._v(t._s(i.end_time))])])]}}])}),a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1)},n=[]},efe4:function(t,e,a){},f005:function(t,e,a){},f0f1:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i={name:"ActivityList",components:{},props:{list:{type:Array,default:function(){return[]}},total:{type:[String,Number],default:0}},data:function(){var t=this;this.$createElement;return{columns:[{title:"活动昵称",key:"title",minWidth:100},{title:"预售方式",slot:"presell_type",minWidth:110,maxWidth:300},{title:"活动时间",slot:"date",minWidth:130,maxWidth:300},{title:"停止时间",key:"stop_time",minWidth:130,maxWidth:300,render:function(e,a){return e("div",{style:"word-break: normal;"},[t.getTime(a.row.stop_time)])}},{title:"预售订单",key:"order_count",minWidth:90,maxWidth:300},{title:"成交金额",key:"order_price_sum",minWidth:90,render:function(t,e){return t("div",["￥",e.row[e.column.key]])}},{title:"优惠总金额",key:"deduct_price_sum",minWidth:90,render:function(t,e){return t("div",["￥",e.row[e.column.key]])}},{title:"退款金额",key:"refund_price_sum",minWidth:90,render:function(t,e){return t("div",["￥",e.row[e.column.key]])}},{title:"参与人数",key:"member_count",minWidth:90,maxWidth:200}]}},computed:{},created:function(){},mounted:function(){},methods:{changePage:function(t){this.$emit("changePage",t)},getTime:function(t){return"0000-00-00 00:00:00"===t?"-":t}}};e.default=i},f0ff:function(t,e,a){},f26e:function(t,e,a){"use strict";a.r(e);var i=a("e447"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},f2e4:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rules-goods-table"},[a("Form",{ref:"goodsForm",attrs:{model:t.form,rules:t.rules}},[a("Table",{attrs:{columns:t.columns,data:t.form.goodsList},scopedSlots:t._u([{key:"shop",fn:function(e){var i=e.row;return[a("div",{staticClass:"shop-box"},[a("div",{staticClass:"image"},[a("img",{attrs:{src:t.$media(i.thumb)},on:{error:t.replaceImage}})]),a("div",{staticClass:"title-content"},[a("div",{staticClass:"content-text"},[a("span",{staticClass:"mark",style:1==i.has_option?"display:inline-block":"display:none"},[t._v("多")]),a("span",{staticClass:"mark",class:0==i.type?"real":"virtual"},[t._v(t._s(0==i.type?"实":"虚"))]),a("span",{staticClass:"text"},[t._v(t._s(i.title))])])])])]}},{key:"price",fn:function(e){var i=e.row;return[a("div",{staticClass:"price"},[1==i.has_option?a("div",{staticClass:"flex-wrap"},[a("div",[t._v("￥"+t._s(i.min_price))]),a("div",[t._v("~")]),a("div",[t._v("￥"+t._s(i.max_price))])]):a("span",[t._v("￥"+t._s(i.price))])])]}},{key:"stock",fn:function(e){var i=e.row;return[a("div",[t._v(t._s(parseInt(i.stock)>999?"999+":parseInt(i.stock)))])]}},{key:"rules",fn:function(e){var i=e.row,n=e.index;return[1==i.has_option?a("div",{staticClass:"deposit-btn"},[t.isSetRules(i)?a("Button",{staticClass:"default-primary on-set",on:{click:function(e){return t.handleSelectOption(i.id)}}},[t._v("已设置（可点击修改）")]):a("Button",{staticClass:"default-primary off-set",on:{click:function(e){return t.handleSelectOption(i.id)}}},[t._v("未设置预售库存及价格")])],1):a("div",{staticClass:"flex"},[a("div",{key:t.presellType+"0",staticClass:"table-input"},[a("FormItem",{attrs:{prop:"goodsList."+n+".presell_stock",rules:t.rules.presell_stock}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:0,maxValue:999999999,disabled:"add"!==t.type},model:{value:t.form.goodsList[n].presell_stock,callback:function(e){t.$set(t.form.goodsList[n],"presell_stock",e)},expression:"form.goodsList[index].presell_stock"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)],1),a("div",{key:t.presellType+"1",staticClass:"table-input"},[a("FormItem",{attrs:{prop:"goodsList."+n+".front_money",rules:t.rules.front_money}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==t.type},model:{value:t.form.goodsList[n].front_money,callback:function(e){t.$set(t.form.goodsList[n],"front_money",e)},expression:"form.goodsList[index].front_money"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),0==t.presellType?a("div",{key:t.presellType+"2",staticClass:"table-input"},[a("FormItem",{attrs:{prop:"goodsList."+n+".front_money_deduct",rules:t.rules.front_money_deduct}},[a("kdx-rr-input",{attrs:{type:"text",number:"",fixed:2,maxValue:9999999.99,disabled:"add"!==t.type},model:{value:t.form.goodsList[n].front_money_deduct,callback:function(e){t.$set(t.form.goodsList[n],"front_money_deduct",e)},expression:"form.goodsList[index].front_money_deduct"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1):t._e()])]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.goodsList&&t.form.goodsList.length>0,expression:"form.goodsList && form.goodsList.length > 0"}],staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1),a("specifications-rules",{attrs:{goodsId:t.specificationsData.goodsId,type:t.type,"presell-type":t.presellType,spaceRules:t.specificationsData.spaceRules},on:{spaceGoods:t.handleSpaceGoods},model:{value:t.specificationsData.rulesModal,callback:function(e){t.$set(t.specificationsData,"rulesModal",e)},expression:"specificationsData.rulesModal"}})],1)},n=[]},f3d9:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"presell-message-list"},[a("div",{staticClass:"presell-message-list-index"},[a("notice-list",{attrs:{type:t.type},on:{toDetail:t.toDetail}})],1)])},n=[]},f736:function(t,e){t.exports="data:image/png;base64,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"},f9da:function(t,e,a){"use strict";a.r(e);var i=a("fe37"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},fa68:function(t,e){t.exports="data:image/png;base64,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"},fe37:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3"),a("ac1f"),a("1276"),a("d3b7"),a("fb6a"),a("d81d");var n=i(a("aa1d")),s={name:"RulesGoods",components:{specificationsRules:n.default},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:""},presellType:{type:[String,Number],default:"1"}},data:function(){var t=this,e=this.$createElement;return{page:{pageSize:10,pageNumber:1},total:0,specificationsData:{rulesModal:!1,goodsId:"",spaceRules:[]},form:{goodsList:[]},columns:[{title:"商品",slot:"shop",minWidth:220},{title:"价格",slot:"price",minWidth:130},{title:"库存",slot:"stock",minWidth:80},{slot:"rules",minWidth:350,renderHeader:function(){return 0==t.presellType?e("div",{class:"flex"},[e("p",{class:"table-title"},["预售库存"]),e("p",{class:"table-title"},["定金"]),e("p",{class:"table-title"},["定金可抵金额"])]):e("div",{class:"flex"},[e("p",{class:"table-title"},["预售库存"]),e("p",{class:"table-title"},["预售价格"])])}},{title:"操作",key:"action",width:80,render:function(e,a){return e("Button",{attrs:{type:"text",disabled:"add"!==t.type},class:"action-btn",on:{click:function(){t.handleDelete(a.index)}}},["删除"])}}],rules:{front_money:[{validator:function(e,a,i){var n=e.field.split(".")[1],s="0"==t.presellType?"定金":"预售价格";Number(t.form.goodsList[n].price)<=Number(a)?i(new Error("".concat(s,"需小于售价"))):a?0===Number(a)?i(new Error("".concat(s,"不能为0"))):i():i(new Error("".concat(s,"不能为空")))}}],front_money_deduct:[{required:!0,message:"定金抵扣不能为空"},{validator:function(e,a,i){var n=e.field.split(".")[1];Number(t.form.goodsList[n].front_money)>Number(a)?i(new Error("定金抵扣小于定金")):Number(a)>=Number(t.form.goodsList[n].price)?i(new Error("定金抵扣大于售价")):0===Number(a)?i(new Error("定金抵扣不能为0")):i()}}],presell_stock:[{required:!0,message:"请填写预售库存"},{validator:function(e,a,i){var n=e.field.split(".")[1];Number(t.form.goodsList[n].stock)<Number(a)?i(new Error("预售库存大于库存")):0===Number(a)?i(new Error("预售库存不能为0")):i()}}]}}},watch:{value:{handler:function(){var t=this;this.$nextTick((function(){t.reset()}))},immediate:!0}},created:function(){},mounted:function(){},methods:{validateForm:function(){var t=this;return new Promise((function(e,a){t.form.goodsList.some((function(t){return 0==t.has_option}))?t.$refs["goodsForm"].validate((function(t){t?e():a()})):e()}))},reset:function(){var t;null===(t=this.$refs["page"])||void 0===t||t.reset(),this.page={pageSize:10,pageNumber:1},this.getPageData()},getPageData:function(){this.total=this.value.length;var t=this.page.pageSize*(this.page.pageNumber-1),e=this.page.pageSize*this.page.pageNumber;this.form.goodsList=this.value.slice(t,e)},changePage:function(t){this.page=t,this.getPageData()},handleDelete:function(t){var e=(this.page.pageNumber-1)*this.page.pageSize+t;this.$emit("delete",e)},handleSelectOption:function(t){var e=this;this.specificationsData.rulesModal=!0,this.specificationsData.goodsId=t,this.form.goodsList.map((function(a){var i;a.id==t&&(null===a||void 0===a||null===(i=a.rules)||void 0===i?void 0:i.length)>0&&(e.specificationsData.spaceRules=a.rules)}))},handleSpaceGoods:function(t){var e=this.value.map((function(e){return e.id==t.id&&(e.goods_id=e.id,e.rules=t.rules),e}));this.$emit("input",e)},isSetRules:function(t){var e,a;return(null===(e=t.rules)||void 0===e?void 0:e.length)>0&&(null===(a=t.rules)||void 0===a?void 0:a.some((function(t){return"1"==t.is_presell})))}}};e.default=s},feb1:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-header-bar",{scopedSlots:t._u([{key:"header",fn:function(){return[a("Button",{attrs:{type:"primary"},on:{click:t.addActivity}},[t._v("+添加活动")])]},proxy:!0}])},[a("Form",{ref:"form",attrs:{model:t.model,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"活动名称："}},[a("i-input",{staticClass:"width-340",attrs:{type:"text",placeholder:"活动名称"},on:{"on-enter":t.handleSearch},model:{value:t.model.keyword,callback:function(e){t.$set(t.model,"keyword",e)},expression:"model.keyword"}})],1),a("FormItem",{attrs:{label:"预售方式："}},[a("Select",{staticClass:"width-160",model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.typeList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),a("FormItem",{attrs:{label:"活动状态："}},[a("Select",{staticClass:"width-160",model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}},t._l(t.statusList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),a("FormItem",{attrs:{label:"活动时间："}},[a("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"活动时间"},on:{"on-change":t.changeDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"ivu-form-item-btn"},[a("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),a("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)},n=[]},ff17:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"flex activity-add-wrap"},[a("preview",{attrs:{activityData:t.activityData}}),a("div",{staticClass:"right"},[a("kdx-content-bar",{scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",attrs:{type:"primary",loading:t.submitLoading,disabled:"add"!==t.type&&"edit"!==t.type},on:{click:t.handleSave}},[t._v("保存")]),a("Button",{staticClass:"default-long",attrs:{to:"/plugins/market/presell/activity/list"}},[t._v("取消")])]},proxy:!0}])},[a("div",{staticClass:"content"},[a("basic-info",{ref:"basicInfo",attrs:{type:t.type},model:{value:t.basicInfoData,callback:function(e){t.basicInfoData=e},expression:"basicInfoData"}}),a("rules-info",{ref:"rulesInfo",attrs:{type:t.type,activityData:t.activityData},on:{"update:activityData":function(e){t.activityData=e},"update:activity-data":function(e){t.activityData=e}}})],1)])],1)],1)},n=[]},ff69:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("notice-index")],1)},n=[]},ff7a:function(t,e,a){"use strict";a.r(e);var i=a("1ec4"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a}}]);