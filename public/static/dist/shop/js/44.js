(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{"012c":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"level"},[i("kdx-form-title",{attrs:{content:"交易设置"}}),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"规格设置：",prop:"has_option"}},[i("RadioGroup",{staticClass:"flex",model:{value:t.model_has_option,callback:function(e){t.model_has_option=e},expression:"model_has_option"}},[i("Radio",{attrs:{label:"0",disabled:t.is_activity_goods}},[i("span",[t._v("单规格")])]),i("Radio",{attrs:{label:"1",disabled:t.is_activity_goods}},[i("span",[t._v("多规格")])]),i("div",{staticClass:"flex"},[i("kdx-hint-text",{staticStyle:{"padding-top":"0"},attrs:{content:"如有颜色、尺码等多种规格，请添加商品规格"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("74c2")}})],1)],1)],1),i("kdx-hint-alert",{staticStyle:{"margin-top":"10px"}},[t._v("如切换规格后，会员折扣需要重新设置，如果不设置则为系统默认该商品不支持会员折扣")]),i("div",{staticClass:"nest-box",staticStyle:{padding:"0"}},["0"===t.model_has_option?i("div",{staticClass:"single-one",staticStyle:{"padding-top":"30px"}},[i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.price",modifiers:{price:!0}}],attrs:{label:"售卖价：",prop:"price"}},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入",disabled:t.is_activity_goods,number:"",fixed:2,"min-value":0,"max-value":9999999.99},model:{value:t.model_price,callback:function(e){t.model_price=e},expression:"model_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1),i("FormItem",{attrs:{label:"划线价：",prop:"original_price"}},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入",number:"",fixed:2,"min-value":0,"max-value":9999999.99},model:{value:t.model_original_price,callback:function(e){t.model_original_price=e},expression:"model_original_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1),i("FormItem",{attrs:{prop:"cost_price"},scopedSlots:t._u([{key:"label",fn:function(){return[i("div",[i("span",[t._v("成本价")]),i("kdx-hint-tooltip",[t._v("尽量填写完整, 有助于商品销售的数据分析")]),i("span",[t._v("：")])],1)]},proxy:!0}],null,!1,2197376682)},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入",number:"",fixed:2,"min-value":0,"max-value":9999999.99},model:{value:t.model_cost_price,callback:function(e){t.model_cost_price=e},expression:"model_cost_price"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1):t._e(),"0"===t.model_has_option?i("div",{staticStyle:{"padding-bottom":"30px"}},["2"!=t.model_type?i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.stock",modifiers:{stock:!0}}],staticStyle:{"margin-bottom":"0",display:"flex"},attrs:{label:"库存：",prop:"stock"}},[i("kdx-rr-input",{staticClass:"width-172",attrs:{placeholder:"请输入库存",disabled:t.is_activity_goods,number:"",fixed:0,"max-value":999999999},model:{value:t.model_stock,callback:function(e){t.model_stock=e},expression:"model_stock"}})],1):i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.virtual_account_id",modifiers:{virtual_account_id:!0}}],staticStyle:{"margin-bottom":"0",display:"flex"},attrs:{label:"卡密库：",prop:"virtual_account_id"}},[i("Select",{staticStyle:{width:"520px"},attrs:{filterable:"",clearable:"","not-found-text":"暂无卡密库数据"},model:{value:t.model_virtual_account_id,callback:function(e){t.model_virtual_account_id=e},expression:"model_virtual_account_id"}},t._l(t.virtualList,(function(e){return i("Option",{key:e.id,attrs:{value:e.id,label:e.name}},[i("span",[t._v(t._s(e.name))]),i("span",{staticStyle:{float:"right",color:"#ccc"}},[t._v("库存："+t._s(e.total_count))])])})),1)],1)],1):"1"===t.model_has_option?i("div",{staticClass:"single-more"},[i("multi-option",{attrs:{model_type:t.model_type,actionType:t.actionType,flag:1},on:{"form-error":t.formError}})],1):t._e()])],1),"2"!=t.model_type?i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"库存设置：",prop:"reduction_type"}},[i("RadioGroup",{staticStyle:{"margin-bottom":"-10px"},model:{value:t.model_reduction_type,callback:function(e){t.model_reduction_type=e},expression:"model_reduction_type"}},[i("div",{staticClass:"inventory-settings"},[i("Radio",{attrs:{label:"0",disabled:t.isSeckill}},[i("span",[t._v("下单减库存")]),i("remind-label",{attrs:{title:"推荐"}})],1),i("Button",{directives:[{name:"show",rawName:"v-show",value:!t.isMoreInventorySetting,expression:"!isMoreInventorySetting"}],staticStyle:{display:"block","font-size":"12px",height:"inherit","padding-top":"10px"},attrs:{type:"text"},on:{click:t.getMoreInventorySetting}},[t._v("更多选项 "),i("span",{staticClass:"iconfont icon-line-right"})]),i("kdx-hint-text",{directives:[{name:"show",rawName:"v-show",value:t.isMoreInventorySetting,expression:"isMoreInventorySetting"}],attrs:{errContent:"恶意占用库存风险"}},[t._v("买家提交订单, 扣减库存数量, 可能会存在 ")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isMoreInventorySetting,expression:"isMoreInventorySetting"}],staticClass:"inventory-settings"},[i("Radio",{attrs:{label:"1",disabled:t.isSeckill}},[i("span",[t._v("付款减库存")])]),i("kdx-hint-text",{attrs:{errContent:"超卖风险"}},[t._v("买家支付成功, 扣减库存数量, 可能会存在")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isMoreInventorySetting,expression:"isMoreInventorySetting"}],staticClass:"inventory-settings"},[i("Radio",{attrs:{label:"2",disabled:t.isSeckill}},[i("span",[t._v("永不减库存")])]),i("kdx-hint-text",[t._v(" 无论在下单还是在支付成功, 该商品永远不会扣减库存数量 ")])],1)])],1):t._e(),i("collapse-panel",{attrs:{name:"展开更多交易设置","expand-name":"收起更多交易设置"}},[["0"===t.model_has_option?[2!=t.model_type?i("FormItem",{attrs:{label:"商品编码：",prop:"goods_sku"}},[i("Input",{staticClass:"width-430",attrs:{placeholder:"请输入商品编码"},model:{value:t.model_goods_sku,callback:function(e){t.model_goods_sku=e},expression:"model_goods_sku"}})],1):t._e(),2!=t.model_type?i("FormItem",{attrs:{label:"商品条码：",prop:"bar_code"}},[i("Input",{staticClass:"width-430",attrs:{placeholder:"请输入商品条码"},model:{value:t.model_bar_code,callback:function(e){t.model_bar_code=e},expression:"model_bar_code"}})],1):t._e(),"0"===t.model_type?i("FormItem",{attrs:{label:"商品重量：",prop:"weight"}},[i("kdx-rr-input",{staticClass:"width-430",attrs:{number:"",fixed:2,"min-value":0,"max-value":999999999.99,maxlength:12,placeholder:"请输入"},model:{value:t.model_weight,callback:function(e){t.model_weight=e},expression:"model_weight"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("克")])])],1):t._e()]:t._e(),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{prop:"ext_field.show_stock",label:"显示库存："}},[i("RadioGroup",{model:{value:t.model_ext_field.show_stock,callback:function(e){t.$set(t.model_ext_field,"show_stock",e)},expression:"model_ext_field.show_stock"}},[i("Radio",{attrs:{label:"1"}},[i("span",[t._v("是")])]),i("Radio",{attrs:{label:"0"}},[i("span",[t._v("否")])])],1),i("kdx-hint-text",{attrs:{content:"商品详情页中是否显示库存字段"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("48af")}})],1)],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"支持发票：",prop:"ext_field.invoice"}},[i("RadioGroup",{on:{"on-change":t.invoiceChange},model:{value:t.model_ext_field.invoice,callback:function(e){t.$set(t.model_ext_field,"invoice",e)},expression:"model_ext_field.invoice"}},[i("Radio",{attrs:{label:"1"}},[i("span",[t._v("是")])]),i("Radio",{attrs:{label:"0"}},[i("span",[t._v("否")])])],1)],1)]],2)],1)},n=[]},"04c9":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("ade3")),o=i(a("2909")),s=i(a("5530"));a("a9e3"),a("99af"),a("d81d"),a("b0c0"),a("c7cd"),a("fb6a"),a("c740"),a("07ac"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("a15b"),a("a434"),a("b64b"),a("b680");var r,l=a("2f62"),c=i(a("1e52")),d=i(a("7177")),u=a("6904"),p={name:"MultiOption",props:{model_type:{type:[String,Number]},actionType:{type:String}},components:{RInput:c.default,ImageSelector:d.default},data:function(){var t=this.$createElement;return{pageSizeOpts:[10,20,50],pageSize:10,pageNumber:1,cacheError:{},catchBatchData:Object.assign({},h),imageSelector:{index:-1,current:""},imgSelectCache:{index:-1,row:{optionImage:[]}},initColumns:[],initCustom:[{title:"售卖价(元)",key:"price",renderHeader:function(){return t("div",{class:"required-content"},["售卖价(元)"])}},{title:"划线价(元)",key:"original_price"},{title:"成本价",key:"cost_price"},{title:"库存",key:"stock",renderHeader:function(){return t("div",{class:"required-content"},["库存"])}},{title:"商品编码",key:"goods_sku"},{title:"商品条码",key:"bar_code"},{title:"重量(g)",key:"weight"}],local_columns:[],local_specs:[],secretColumn:[{title:"库存",key:"virtual_account_id",width:550,renderHeader:function(){return t("div",{class:"required-content"},["卡密库"])}},{title:"售卖价(元)",key:"price",renderHeader:function(){return t("div",{class:"required-content"},["售卖价(元)"])}},{title:"划线价(元)",key:"original_price"},{title:"成本价",key:"cost_price"}]}},computed:(0,s.default)((0,s.default)((0,s.default)({},(0,l.mapState)("goodAddEdit/multiOptions",{columns:function(t){return t.columns},specs:function(t){return t.specs},cacheRowSpan:function(t){return t.cacheRowSpan},cacheFormError:function(t){return t.cacheFormError},cacheSpecsError:function(t){return t.cacheSpecsError}})),(0,l.mapState)("goodAddEdit",{is_activity_goods:function(t){var e;return 1==(null===t||void 0===t||null===(e=t.model)||void 0===e?void 0:e.is_activity_goods)},virtualList:function(t){return(null===t||void 0===t?void 0:t.virtualData)||[]}})),{},{getColumns:function(){var t=this;this.$createElement;return[].concat((0,o.default)(this.local_columns),(0,o.default)(this.initColumns.map((function(e){return e.render=function(a,i){var n,o,s=t.pageSize*(t.pageNumber-1),r="".concat(i.index+s,"_").concat(i.column.key),l={},c=t.is_activity_goods&&("price"==e.key||"stock"==e.key);switch(i.column.key&&"2"!=t.model_type){case"price":case"original_price":case"cost_price":case"weight":l={maxValue:9999999.99,minValue:0,fixed:2,number:!0};break;case"stock":l={fixed:0,maxValue:999999999,number:!0};break;case"goods_sku":case"bar_code":l={fixed:0,number:!1};break}if("2"==t.model_type&&"virtual_account_id"==i.column.key){var d,u=function(a){i.row[e.key]=a,t.trackError(i.index+s,e.key,a),t.inputOptionVal(a,i,e.key)},p=t.virtualList.length>0?t.virtualList.map((function(t){return a("Option",{attrs:{value:t.id,label:t.name}},[a("span",[" ",t.name," "]),a("span",{style:"float:right;color: #ccc"},["库存：",t.total_count," "])])})):"";return a("div",[a("Select",{attrs:{value:i.row[e.key],disabled:c,fixed:l.fixed,filterable:!0,clearable:!0,"not-found-text":"暂无卡密库数据"},key:r,on:{"on-change":u}},[p]),a("p",{style:"color:red;font-size:12px;"},[(null===(d=t.cacheError[i.index+s])||void 0===d?void 0:d[e.key])||""])])}return a("div",[a("kdx-rr-input",{attrs:{className:"table-input "+(void 0!==(null===(n=t.cacheError[i.index+s])||void 0===n?void 0:n[e.key])?"error-input":""),disabled:c,value:i.row[e.key],number:l.number,maxValue:l.maxValue,minValue:l.minValue,fixed:l.fixed,maxlength:l.maxlength},key:r,on:{"on-blur":function(a){i.row[e.key]=a.target.value,t.trackError(i.index+s,e.key,a.target.value),t.inputOptionVal(a.target.value,i,e.key)}}}),a("p",{style:"color:red;font-size:12px;"},[(null===(o=t.cacheError[i.index+s])||void 0===o?void 0:o[e.key])||""])])},e}))))},total:function(){return this.$store.state.goodAddEdit.multiOptions.options.length},totalOptions:function(){return this.$store.state.goodAddEdit.multiOptions.options},tableData:{get:function(){var t=this.pageSize*(this.pageNumber-1),e=this.pageSize*this.pageNumber;return this.$store.state.goodAddEdit.multiOptions.options.slice(t,e)}}}),methods:(0,s.default)((0,s.default)((0,s.default)({},(0,l.mapMutations)("goodAddEdit/multiOptions",["addSpec","setBatch","delSpecs","addChildSpec","delChildSpec","editChildSpec","editSpec","cacheInput"])),(0,l.mapActions)("goodAddEdit/multiOptions",{checkSpecSettings:"checkSpecSettings",checkSpecs:"checkSpecs"})),{},{pageSizeChange:function(t){this.pageNumber=t.pageNumber,this.pageSize=t.pageSize},trackError:function(t,e,a){this.cacheError[t]?this.cacheError[t][e]=(0,u.trackError)(e,a):this.cacheError[t]=(0,n.default)({},e,(0,u.trackError)(e,a))},changePage:function(t){this.pageNumber=t.pageNumber,this.pageSize=t.pageSize},changeSpec:function(t,e){this.cacheSpecsError&&this.checkSpecs(),this.editSpec({row:t,val:{title:e.target.value}}),this.cacheSpecsError&&this.checkSpecs()},closeSpec:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定删除该规格值？",onOk:function(){e.delSpecs(t)}})},batchData:function(t,e){this.catchBatchData[t]=f(e,t)},clickImgSelector:function(t){this.imageSelector=t,this.imageSelector.current=t.row.thumb,this.$refs["image_selector"].setValue(!0,this.imageSelector.current)},deleteImage:function(t){var e=this,a=this.local_specs.findIndex((function(t){return"1"===t.image_checked}));if(a+1!==this.local_specs.length){console.log(a);var i=Object.values(t.row._pos).slice(0,a+1);console.log(i),this.totalOptions.forEach((function(t){t._posArr=Object.values(t._pos),t._posArr.join("").includes(i.join(""))&&(t.thumb="",e.cacheInput({_pos:t._pos,key:"thumb",value:""}))}))}else this.totalOptions[t.index+(this.pageNumber-1)*this.pageSize][t.column.key]=""},thumbAllChange:function(t){this.inputOptionVal(t,this.imgSelectCache,"thumb")},fnImageCheckedChange:function(t,e){var a=this;r=0,this.resetOptionsThumb(),this.local_columns.forEach((function(t,e){"thumb"===t.key&&a.local_columns.splice(e,1)})),"1"===e&&(this.local_specs.forEach((function(t){t.image_checked="0"})),this.local_specs[t].image_checked="1",this.local_columns.splice(t+1,0,{title:"规格图片",key:"thumb",slot:"thumb"}))},setUsing:function(t){this.setBatch(t),this.catchBatchData=Object.assign({},h),this.checkSpecSettings(),this.cacheError=this.cacheFormError||{}},changeImageSelector:function(t){this.inputOptionVal(t,this.imageSelector,"thumb")},inputOptionVal:function(t,e,a){var i=f(t,a);"thumb"!==a?(this.tableData[e.index][a]=i,this.cacheInput({_pos:e.row._pos,key:a,value:i})):this.formatOptionsThumb(e,i)},formatOptionsThumb:function(t,e){var a=this;this.imageSelector.current=e;var i=t.row,n=t.index;this.totalOptions[n+(this.pageNumber-1)*this.pageSize]["thumb"]=e,this.cacheInput({_pos:i._pos,key:"thumb",value:e});var o=0,s=[];this.local_columns.forEach((function(t,e){"thumb"===t.key&&(o=e),0!==o&&e>o&&s.push(e-1)}));var r=0;s.length&&(r=1),s.forEach((function(t){r*=a.local_specs[t].items.length}));for(var l=1;l<r;l++)this.totalOptions[n+(this.pageNumber-1)*this.pageSize+l]["thumb"]=e,this.cacheInput({_pos:this.totalOptions[n+(this.pageNumber-1)*this.pageSize+l]._pos,key:"thumb",value:e})},resetOptionsThumb:function(){var t=this;this.totalOptions.forEach((function(e){e["thumb"]="",t.cacheInput({_pos:e._pos,key:"thumb",value:""})})),this.imgSelectCache={index:-1,current:"",row:{}}},handleSpan:function(t){var e=t.column,a=t.rowIndex,i=t.columnIndex,n=this.pageSize*(this.pageNumber-1),o=n+this.pageSize,s=n+a;if(i<this.local_columns.length){"thumb"===e.key&&(r=i,i-=1),r&&i>r&&(i-=1);for(var l=0,c=0,d=0;;d+=this.cacheRowSpan[i]){if(!(d<=s)){c=d;break}l=d}c=Math.min(c,o),l=Math.max(l,n);var u={rowspan:0,colspan:1};return s==l&&(u={rowspan:c-s,colspan:1}),u}return{rowspan:1,colspan:1}},getFixed:function(t){switch(t.key){case"price":case"original_price":case"cost_price":case"weight":return 2;case"stock":return 0;default:return}},getMaxValue:function(t){switch(t.key){case"price":case"original_price":case"cost_price":case"weight":return 9999999.99;case"stock":return 999999999;default:return}},getMinValue:function(t){switch(t.key){case"price":case"original_price":case"cost_price":case"weight":return 0;case"stock":return 0;default:return}},isNumberType:function(t){return["price","original_price","cost_price","stock","weight"].indexOf(t.key)>-1}}),watch:{cacheSpecsError:function(){for(var t in this.cacheSpecsError){this.$focusError(t);break}},cacheFormError:function(){var t=this;if(this.cacheError=this.cacheFormError||{},this.cacheFormError){this.$nextTick((function(){t.$focusError(document.querySelectorAll("#childSpec .error-input")[0])})),this.$Message.error("请完善规格设置"),this.$emit("form-error",this.cacheFormError);var e=Object.keys(this.cacheFormError)[0];this.pageNumber=Math.floor(e/this.pageSize)+1}},columns:{handler:function(t){this.local_columns=(0,o.default)(t)},immediate:!0,deep:!0},specs:{handler:function(t){this.local_specs=(0,o.default)(t)},immediate:!0,deep:!0},model_type:{handler:function(t){this.initColumns="2"==t?this.secretColumn:this.initCustom},immediate:!0,deep:!0}}};e.default=p;var h={price:"",original_price:"",cost_price:"",stock:"",goods_sku:"",bar_code:"",weight:"",virtual_account_id:""};function f(t,e){var a,i=["price","original_price","cost_price","weight"];return a=i.indexOf(e)>-1?parseFloat(t)?parseFloat(t).toFixed(2):0:"stock"===e?parseInt(t)?parseInt(t):0:t,a}},"07ac":function(t,e,a){var i=a("23e7"),n=a("6f53").values;i({target:"Object",stat:!0},{values:function(t){return n(t)}})},"086b":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("6062"),a("3ca3"),a("ddb0");var n=i(a("5530")),o=a("d51a"),s={data:function(){return{}},computed:(0,n.default)((0,n.default)((0,n.default)({},(0,o.modelMap)()),(0,o.stateMap)(["dispatchList"])),{},{dispatchEnable:function(){return this.$store.getters["goodAddEdit/dispatchEnable"]},isAddOperate:function(){return"undefined"==typeof this.$route.query.operate}}),watch:{},methods:{expressSelected:function(t){return new Set(this.$store.state.goodAddEdit.model.logistics_support).has(t)},refreshDispatchTemplate:function(){this.$store.dispatch("goodAddEdit/getDispatchTemplateList")},addDispatchTemplate:function(){this.$utils.openNewWindowPage("/order/ordinary-express/add")},fnJumpOrdinaryExpress:function(){this.$utils.openNewWindowPage("/order/ordinary-express")},fnJumpSamecityDelivery:function(){this.$ismultiMerchant?this.$utils.openNewWindowPage("/order/delivery-setting"):this.$utils.openNewWindowPage("/order/same-city-delivery")},choosePlace:function(){this.$refs.selector.setValue()},changeDispatchCount:function(t){this.model_dispatch_id="1"==t?"":"0"}}};e.default=s},"0a6e":function(t,e,a){"use strict";a.r(e);var i=a("2d9d"),n=a("5673");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("85dc");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"42e2186a",null);e["default"]=r.exports},"0aaf":function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_video.png"},"0b72":function(t,e,a){"use strict";a.r(e);var i=a("2a6e"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"0bcd":function(t,e,a){"use strict";a("9315")},"0c63":function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i={name:"MultiSelect",props:{value:{type:[Number,String],required:!0}},data:function(){return{type:""}},computed:{},watch:{value:{handler:function(t){this.type=t},immediate:!0,virtualAccount_flag:"0"}},mounted:function(){},methods:{isDisabled:function(t){switch(t){case"0":case"1":return!!this.$route.query.id;case"2":return!!this.$route.query.id||"2"===this.virtualAccount_flag||"3"===this.virtualAccount_flag}},handleInput:function(t){this.$emit("input",t)},goMoney:function(){this.$router.push({path:"/plugins/center/index"})}}};e.default=i},"0d87":function(t,e,a){"use strict";a.r(e);var i=a("a24f"),n=a("0f2a");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("232d");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"44d73282",null);e["default"]=r.exports},"0f2a":function(t,e,a){"use strict";a.r(e);var i=a("d476"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},1127:function(t,e,a){"use strict";a.r(e);var i=a("860c"),n=a("5ee8");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("2f46");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"25b073f2",null);e["default"]=r.exports},1188:function(t,e,a){"use strict";a("1b02")},"12a9":function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_market.png"},"19b1":function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_tag.png"},"1ac4":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530")),o=i(a("ef19")),s=i(a("2917")),r=a("8812"),l=i(a("c6072")),c=a("2f62"),d={components:{MultiOption:o.default,CollapsePanel:s.default,RemindLabel:l.default},data:function(){return{}},computed:(0,n.default)((0,n.default)((0,n.default)((0,n.default)({},(0,r.modelMap)()),(0,r.stateMap)(["rules","isThumbAddSlide","isShowVideo","shopLabel","isMoreInventorySetting","actionType"])),(0,c.mapState)("goodAddEdit",{is_activity_goods:function(t){var e;return 1==(null===t||void 0===t||null===(e=t.model)||void 0===e?void 0:e.is_activity_goods)},virtualList:function(t){return null===t||void 0===t?void 0:t.virtualData}})),{},{isSeckill:function(){var t;return 1==(null===(t=this.$store.state.goodAddEdit.model)||void 0===t?void 0:t.is_seckill)}}),methods:{formError:function(t){this.$emit("form-error",t)},getMoreInventorySetting:function(){this.isMoreInventorySetting=!0},invoiceChange:function(t){var e=this;"0"==this.$store.state.config.business.invoice&&"1"===t&&this.$Modal.confirm({title:"您还未开启支持发票类型",content:"购买商品支持开发票时，需要在设置 [交易设置-发票设置] 中选择支持发票类型",okText:"去设置",onOk:function(){var t=e.$router.resolve({path:"/setting/business/index"});window.open(t.href,"_blank")},onCancel:function(){e.model_ext_field.invoice="0"}})}}};e.default=d},"1b02":function(t,e,a){},"1b91":function(t,e,a){},"1e52":function(t,e,a){"use strict";a.r(e);var i=a("a3ea"),n=a("81c2");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("1188");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"1f28":function(t,e,a){},2315:function(t,e,a){"use strict";a.r(e);var i=a("770e"),n=a("61c0");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("c139");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"08e0f100",null);e["default"]=r.exports},"232d":function(t,e,a){"use strict";a("1f28")},2917:function(t,e,a){"use strict";a.r(e);var i=a("fc45"),n=a("f3be");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("a226");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"1fe6b168",null);e["default"]=r.exports},"2a6e":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530"));a("a9e3");var o=a("8812"),s={props:{form_status:{type:[String,Number],default:-1}},data:function(){return{dateOptions:{disabledDate:function(t){return t.valueOf()<Date.now()}}}},computed:(0,n.default)({},(0,o.modelMap)()),methods:{changeAutoStatus:function(t){t&&(this.model_status="")},changeStatus:function(t){t&&(this.model_ext_field.auto_putaway="0")}}};e.default=s},"2bc1":function(t,e,a){"use strict";a.r(e);var i=a("7084"),n=a("5dd6");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("bb01");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"3b943bca",null);e["default"]=r.exports},"2cda":function(t,e,a){},"2d8f":function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_main_single.png"},"2d9d":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"multi-select"},[a("RadioGroup",{attrs:{disabled:t.isDisabled("0")},on:{input:t.handleInput},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("Radio",{attrs:{label:"0",border:""}},[a("div",{staticClass:"tit"},[t._v("实体商品")]),a("div",{staticClass:"desc"},[t._v("物流发货")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1),a("Radio",{attrs:{label:"1",border:"",disabled:t.isDisabled("1")}},[a("div",{staticClass:"tit"},[t._v("虚拟商品")]),a("div",{staticClass:"desc"},[t._v("无需物流")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1),a("Radio",{attrs:{label:"2",border:"",disabled:t.isDisabled("2")}},[a("div",{staticClass:"tit"},[t._v("虚拟卡密")]),a("div",{staticClass:"desc"},[t._v("自动发卡 无需物流")]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1)],1),t.$route.query.id?t._e():a("kdx-hint-text",[t._v("商品类型在商品保存后无法修改，请谨慎选择。")])],1)},n=[]},"2f46":function(t,e,a){"use strict";a("2cda")},3101:function(t,e,a){function i(t,e){var a=[];function i(e){e.forEach((function(e){if(new Set(t).has(e.value))if(e.children&&e.children.length){var n=e.children.map((function(t){return t.value})),o=n.some((function(e){return t.indexOf(e)>=0}));o||a.push(e.value),i(e.children)}else a.push(e.value);else e.children&&e.children.length&&i(e.children)}))}return i(e),a}Object.defineProperty(e,"__esModule",{value:!0}),e.formatData=i,a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("d81d")},"35c7":function(t,e,a){"use strict";a.r(e);var i=a("012c"),n=a("8fff");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("d38c");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"449bd1b3",null);e["default"]=r.exports},"382a":function(t,e,a){},"3a73":function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i={name:"RInput",props:{value:{type:String,required:!0},type:{type:String,default:"text"},closable:{type:Boolean,default:!1},placeholder:{type:String},width:{type:Number,default:120},maxlength:{type:Number},showWordLimit:{type:Boolean,default:!1},prefix:{type:String},suffix:{type:String},disabled:{type:Boolean,default:!1}},computed:{cacheValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{onBlur:function(){this.$emit("blur",this.cacheValue)},close:function(){this.$emit("close")}}};e.default=i},"43be":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"remind-label"},[a("span",{staticClass:"box"},[t._v(" "+t._s(t.title)+" "),a("span")])])},n=[]},"468f5":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"0"===t.model_type||"1"===t.model_type?a("div",{staticClass:"level"},[a("kdx-form-title",{attrs:{content:"物流设置"}}),"1"===t.model_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"自动发货内容："}},[a("RadioGroup",{model:{value:t.model_auto_deliver,callback:function(e){t.model_auto_deliver=e},expression:"model_auto_deliver"}},[a("Radio",{attrs:{label:"1"}},[a("span",[t._v("支持")])]),a("Radio",{attrs:{label:"0"}},[a("span",[t._v("不支持")])])],1),"1"==t.model_auto_deliver?a("kdx-hint-text",[t._v("用户下单付款成功后订单自动完成")]):t._e(),"0"==t.model_auto_deliver?a("kdx-hint-text",[t._v("用户下单付款成功后商城自动发货，订单为待收货状态")]):t._e(),"1"===t.model_auto_deliver?a("div",{staticClass:"nest-box"},[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"自动发货内容：",prop:"auto_deliver_content"}},[a("Input",{staticClass:"width-430",attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入"},model:{value:t.model_auto_deliver_content,callback:function(e){t.model_auto_deliver_content=e},expression:"model_auto_deliver_content"}})],1)],1):t._e()],1):t._e(),"0"===t.model_type?a("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.logistics_support",modifiers:{logistics_support:!0}}],staticClass:"r-form-item-checkbox",attrs:{label:"物流支持：",prop:"logistics_support"}},[a("CheckboxGroup",{model:{value:t.model_logistics_support,callback:function(e){t.model_logistics_support=e},expression:"model_logistics_support"}},[a("div",{staticClass:"logistics-box"},[a("Checkbox",{attrs:{label:"1",disabled:0===t.dispatchEnable.express}},[t._v(" 快递发货 "),0===t.dispatchEnable.express?a("span",[t._v(" (当前不可用，请到 "),a("span",{staticStyle:{color:"#2D8CF0",cursor:"pointer"},on:{click:t.fnJumpOrdinaryExpress}},[t._v(" 【配送方式】 ")]),t._v(" 管理中开启) ")]):t._e()])],1),a("div",{staticClass:"logistics-box"},[a("Checkbox",{attrs:{label:"2",disabled:0===t.dispatchEnable.intracity}},[t._v(" 同城配送 "),0===t.dispatchEnable.intracity?a("span",[t._v(" (当前不可用，请到 "),a("span",{staticStyle:{color:"#2D8CF0",cursor:"pointer"},on:{click:t.fnJumpSamecityDelivery}},[t._v(" 【配送方式】 ")]),t._v(" 管理中开启) ")]):t._e()])],1)])],1):t._e(),"0"===t.model_type&&t.expressSelected("1")?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"运费设置：",prop:"dispatch_type"}},[a("RadioGroup",{on:{"on-change":t.changeDispatchCount},model:{value:t.model_dispatch_type,callback:function(e){t.model_dispatch_type=e},expression:"model_dispatch_type"}},[a("Radio",{attrs:{label:"0"}},[a("span",[t._v("包邮")])]),a("Radio",{attrs:{label:"1"}},[a("span",[t._v("选择模板")])]),a("Radio",{attrs:{label:"2"}},[a("span",[t._v("统一运费")])])],1),"1"===t.model_dispatch_type?a("div",{staticClass:"nest-box freight-setting"},[a("FormItem",{key:t.model_dispatch_id,attrs:{"label-width":0,prop:"dispatch_id"}},[a("Select",{staticClass:"width-430",model:{value:t.model_dispatch_id,callback:function(e){t.model_dispatch_id=e},expression:"model_dispatch_id"}},t._l(t.dispatchList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.dispatch_name)+" ")])})),1),a("Button",{attrs:{type:"text"},on:{click:t.refreshDispatchTemplate}},[t._v(" 刷新 ")]),a("Button",{attrs:{type:"text"},on:{click:t.addDispatchTemplate}},[t._v(" 添加模板 ")]),a("kdx-hint-text",{attrs:{content:"运费模板支持按地区设置运费,按购买件数计算运费, 按重量计算运费等, 运费模板需要添加后刷新才能生效"}})],1)],1):t._e(),"2"===t.model_dispatch_type?a("div",{staticClass:"nest-box freight-setting"},[a("FormItem",{staticClass:"unify-freight",attrs:{prop:"dispatch_price"}},[a("kdx-rr-input",{staticClass:"width-340",attrs:{number:"",fixed:2,"min-value":0,"max-value":9999999.99,maxlength:10,placeholder:"请输入"},model:{value:t.model_dispatch_price,callback:function(e){t.model_dispatch_price=e},expression:"model_dispatch_price"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1):t._e()],1):t._e()],1):t._e()},n=[]},"48af":function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_stock.png"},4996:function(t,e,a){"use strict";a.r(e);var i=a("468f5"),n=a("b2de");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("4cca");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"30a0beee",null);e["default"]=r.exports},"4cca":function(t,e,a){"use strict";a("d810")},"4eb91":function(t,e,a){"use strict";a("c603")},"52a5":function(t,e,a){"use strict";a.r(e);var i=a("be78"),n=a("0b72");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("4eb91");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"85e27f76",null);e["default"]=r.exports},5381:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("c7eb")),o=i(a("1da1")),s=i(a("5530"));a("d3b7"),a("3ca3"),a("ddb0"),a("6062"),a("e9c4"),a("d81d"),a("498a"),a("159b"),a("b64b"),a("a15b");var r=i(a("7666")),l=a("3fdc"),c=i(a("7ac9")),d=a("2f62"),u={name:"add",components:{BaseAdd:r.default,BaseDetail:function(){return Promise.all([a.e(0),a.e(118)]).then(a.bind(null,"cc4d"))},BaseLimit:function(){return a.e(71).then(a.bind(null,"9b6f"))},BaseMarket:function(){return a.e(133).then(a.bind(null,"c3b6"))},BaseParam:function(){return a.e(119).then(a.bind(null,"3696"))},BaseDistribution:function(){return a.e(132).then(a.bind(null,"d94c"))}},data:function(){return{value:"base",id:0,subShopId:"",operate:"",type:"update",loading:!1,lastValue:"base",form_status:-1}},watch:{"$route.path":{handler:function(){this.id=this.$route.query.id,this.subShopId=this.$route.query.sb,this.operate=this.$route.query.operate,this.form_status=this.$route.query.status,this.$store.state.goodAddEdit.actionType=this.id?"update":"create"},immediate:!0}},computed:(0,s.default)((0,s.default)((0,s.default)({},(0,d.mapState)("goodAddEdit",{validateType:function(t){return t.validateType},virtualList:function(t){return null===t||void 0===t?void 0:t.virtualData}})),(0,d.mapState)("goodAddEdit/multiOptions",{cacheSpecsError:function(t){return t.cacheSpecsError},cacheFormError:function(t){return t.cacheFormError}})),{},{tab:function(){var t=this,e=this.$createElement;return{base:function(){var a;return t.validateType.indexOf("base")>-1&&(a=e("span",{class:"iconfont icon-tishi-prompt"})),e("div",[e("span",["基本"]),a])},detail:function(){var a;return t.validateType.indexOf("detail")>-1&&(a=e("span",{class:"iconfont icon-tishi-prompt"})),e("div",[e("span",["详情"]),a])},param:function(){var a;return t.validateType.indexOf("param")>-1&&(a=e("span",{class:"iconfont icon-tishi-prompt"})),e("div",[e("span",["参数"]),a])},limit:function(){var a;return t.validateType.indexOf("limit")>-1&&(a=e("span",{class:"iconfont icon-tishi-prompt"})),e("div",[e("span",["权限"]),a])},market:function(){var a;return t.validateType.indexOf("market")>-1&&(a=e("span",{class:"iconfont icon-tishi-prompt"})),e("div",[e("span",["营销"]),a])},distribution:function(){var a;return t.validateType.indexOf("distribution")>-1&&(a=e("span",{class:"iconfont icon-tishi-prompt"})),e("div",[e("span",["分销"]),a])}}},dispatchEnable:function(){return this.$store.getters["goodAddEdit/dispatchEnable"]}}),methods:(0,s.default)((0,s.default)((0,s.default)((0,s.default)({},(0,d.mapActions)("goodAddEdit/vipDiscount",["getVipGroup","getVipLevelList","getVipLevels"])),(0,d.mapActions)("goodAddEdit",["getShopClassify","getGoodData","getDispatchTemplateList","getDispatchEnable","getMShopClassify","getVirtualData"])),(0,d.mapActions)("goodAddEdit/multiOptions",{checkSpecSettings:"checkSpecSettings",checkSpecs:"checkSpecs"})),{},{tabClick:function(t){this.validate(),this.lastValue=t},handleSave:function(){var t=this;this.validate(!0).then((function(e){if(e){var a=t.formatParams();a&&(t.id&&"edit"===t.operate?t.editGood(a):t.addGood(a))}}))},handleNextStep:function(){var t;switch(null===(t=this.$refs["content_bar"])||void 0===t||t.returnToTop(),this.validate(),this.value){case"base":this.value="detail";break;case"detail":this.value="param";break;case"param":this.value="limit";break;case"limit":this.value="market";break;case"market":this.value="distribution";break}},formatParams:function(){var t=this.getGoods();"copy"===this.operate&&delete t.id;var e=this.$store.state.goodAddEdit.videoParams;"network"===e.type?(t.video=e.video_url,t.video_type="2"):"local"===e.type?t.video_type="1":(t.video_type="0",t.video=e.video_url);var a=this.$store.state.goodAddEdit.multiOptions.specs,i={};if(t.content&&(t.content=this.$utils.delmedia(t.content),t.content=this.$utils.alterVideo(t.content)),"2"===t.type&&"0"===t.has_option&&this.virtualList.some((function(e){e.id==t.virtual_account_id&&(t.stock=e.total_count)})),i="1"===t.has_option?Object.assign({goods:t,spec:a,options:this.getMultiOption(t)}):{goods:t},"0"===i.goods.type){if(i.goods.auto_deliver="0",i.goods.auto_deliver_content="",new Set(i.goods.logistics_support).has("1")?i.goods.dispatch_express="1":(i.goods.dispatch_express="0",i.goods.dispatch_type="0",i.goods.dispatch_id="0",i.goods.dispatch_price="0"),new Set(i.goods.logistics_support).has("2")?i.goods.dispatch_intracity="1":i.goods.dispatch_intracity="0",0===this.dispatchEnable.express&&"0"===i.goods.dispatch_intracity&&"0"==i.goods.dispatch_verify)return this.$Message.error("请选择配送方式"),!1;if(0===this.dispatchEnable.intracity&&"0"===i.goods.dispatch_express&&"0"==i.goods.dispatch_verify)return this.$Message.error("请选择配送方式"),!1}else"1"===i.goods.type?(i.goods.weight="0",i.goods.dispatch_type="2",i.goods.dispatch_id="0",i.goods.dispatch_price="0",i.goods.ext_field.return="0",i.goods.ext_field.exchange="0",i.goods.ext_field.is_delivery_pay="0",i.goods.dispatch_express="0",i.goods.dispatch_intracity="0"):"2"===i.goods.type&&(i.goods.ext_field.is_delivery_pay="0",delete i.goods.weight,delete i.goods.dispatch_type,delete i.goods.dispatch_id,delete i.goods.dispatch_price,delete i.goods.ext_field.return,delete i.goods.ext_field.refund,delete i.goods.ext_field.exchange,delete i.goods.dispatch_express,delete i.goods.dispatch_intracity,delete i.goods.reduction_type,delete i.goods.single_full_unit_switch,delete i.goods.single_full_unit,delete i.goods.single_full_quota_switch,delete i.goods.single_full_quota);delete i.goods.logistics_support;var n={};for(var o in i)n[o]=JSON.stringify(i[o]);return n},addGood:function(t){var e=this;this.loading=!0,this.$api.goodsApi.addGood(t).then((function(t){if(e.loading=!1,0===t.error){var a;if(e.$Message.success("商品添加成功"),"plugin"===(null===(a=e.$route.query)||void 0===a?void 0:a.from))return void e.$router.push({path:"/goods/list/inSale"});e.$router.go(-1)}}))},editGood:function(t){var e=this;this.loading=!0,this.$api.goodsApi.editGood(t).then((function(t){e.loading=!1,0===t.error&&(e.$Message.success("商品修改成功"),e.$router.go(-1))}))},getGoods:function(){return(0,l.exchangeArrayToString)(this.$store.state.goodAddEdit.model)},getMultiOption:function(t){var e=this,a=this.$store.state.goodAddEdit.multiOptions.options.map((function(t){var e=Object.assign({},t);for(var a in e)"goods_sku"===a||"thumb"==a||(""+e[a]).trim()||(e[a]="0");return e}));return a.forEach((function(a){var i=[];"2"===t.type&&"1"===t.has_option&&e.virtualList.some((function(t){t.id==a.virtual_account_id&&(a.stock=t.total_count)})),Object.keys(a._pos).forEach((function(t){i.push(a._pos[t])})),a.title=a.childSpecVal.join("+"),a.specs=i,delete a._pos,delete a.childSpecVal,delete a.discount})),a},validate:function(t){var e=this;return new Promise((function(a){var i=e.getGoods(),n=[],o=[],s=["base","detail","param","limit","market"],r=["base","base","detail","param","limit","market"];e.$nextTick((function(){1==i.has_option&&(e.checkSpecs(),o.push(e.checkSpecSettings())),o.push(e.$refs["base"].validate()),o.push(e.validateDetail(i)),o.push(e.validateParams(i)),e.$refs["limit"]?o.push(e.$refs["limit"].validate()):o.push(e.validateLimit(i)),o.push(e.$refs["market"].validate()),Promise.all(o).then((function(o){o.forEach((function(t,e){t||(1==i.has_option?n.push(r[e]):n.push(s[e]))})),e.$store.commit("goodAddEdit/setValidateType",n),null!==n&&void 0!==n&&n.length?(t&&(e.value=n[0]),t&&(e.value=n[0],"detail"===e.value&&e.$Message.error("商品详情超过最大限制")),a(!1)):a(!0)})).catch((function(t){console.log("err",t)}))}))}))},validateDetail:function(t){function e(){var t,e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=0;for(t=0;t<a.length;t++)e=a.charCodeAt(t),e<127?i+=1:128<=e&&e<=2047?i+=2:2048<=e&&e<=65535&&(i+=3);return i}var a=e(t.content);return!(a>1e7)||("detail"===this.value&&this.$Message.error("商品详情超过最大限制"),!1)},validateParams:function(t){return 0==t.params_switch||!!(t.params&&t.params.length>0)},validateLimit:function(t){for(var e=["browse_level_perm","browse_tag_perm","buy_level_perm","buy_tag_perm"],a=!0,i=0,n=e;i<n.length;i++){var o,s=n[i];if("1"==t[s]&&(!t["".concat(s,"_ids")]||null===(o=t["".concat(s,"_ids")])||void 0===o||!o.length)){a=!1;break}}return a}}),beforeDestroy:function(){c.default.clear(),this.$store.commit("goodAddEdit/resetModel")},created:function(){var t=this;return(0,o.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.$route.query.type&&t.$nextTick((function(){t.$store.commit("goodAddEdit/setModelProps",{type:t.$route.query.type})})),a={},t.getDispatchEnable(a),t.getDispatchTemplateList(t.subShopId),t.getVipLevels(),e.next=8,t.getShopClassify();case 8:return c.default.setStore(t.$store),t.$store.commit("goodAddEdit/setValidateType",[]),t.$store.dispatch("config/getDeduction"),t.$store.dispatch("config/getBusiness"),e.next=14,t.getGoodData({id:t.id,operate:t.operate});case 14:t.getVirtualData(),t.loading=!1;case 16:case"end":return e.stop()}}),e)})))()}};e.default=u},5673:function(t,e,a){"use strict";a.r(e);var i=a("0c63"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"583f":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=i(a("2909"));function o(t,e){var a=[];function i(t,o){t.forEach((function(t){var s=[].concat((0,n.default)(o),[t]);t.children&&t.children.length?i(t.children,s):e||a.push(s),e&&a.push(s)}))}return i(t,[]),a}a("d3b7"),a("159b"),a("99af")},"5dd6":function(t,e,a){"use strict";a.r(e);var i=a("5381"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"5ee8":function(t,e,a){"use strict";a.r(e);var i=a("acf3"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"61c0":function(t,e,a){"use strict";a.r(e);var i=a("b4a8"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"622a":function(t,e,a){"use strict";a("f374")},"6dd0":function(t,e,a){function i(t,e,a){this.$children.forEach((function(n){var o=n.$options.name;o===t?n.$emit.apply(n,[e].concat(a)):i.apply(n,[t,e].concat([a]))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("b0c0"),a("99af");var n={methods:{dispatch:function(t,e,a){var i=this.$parent||this.$root,n=i.$options.name;while(i&&(!n||n!==t))i=i.$parent,i&&(n=i.$options.name);i&&i.$emit.apply(i,[e].concat(a))},broadcast:function(t,e,a){i.call(this,t,e,a)}}};e.default=n},"6e2e":function(t,e,a){},"6f53":function(t,e,a){var i=a("83ab"),n=a("e330"),o=a("df75"),s=a("fc6a"),r=a("d1e7").f,l=n(r),c=n([].push),d=function(t){return function(e){var a,n=s(e),r=o(n),d=r.length,u=0,p=[];while(d>u)a=r[u++],i&&!l(n,a)||c(p,t?[a,n[a]]:n[a]);return p}};t.exports={entries:d(!0),values:d(!1)}},7084:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{ref:"content_bar",attrs:{loading:t.loading},scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{directives:[{name:"show",rawName:"v-show",value:"distribution"!==t.value,expression:"value !== 'distribution'"}],staticClass:"primary-long",on:{click:t.handleNextStep}},[t._v("下一步")]),a("Button",{staticClass:"default-long",on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("Tabs",{staticStyle:{background:"#fff","margin-top":"20px","min-height":"100%"},attrs:{animated:!1,name:"floor1"},on:{"on-click":t.tabClick},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("TabPane",{attrs:{label:t.tab.base,name:"base"}},[a("keep-alive",[a("base-add",{ref:"base",attrs:{curTab:t.value,form_status:t.form_status}})],1)],1),a("TabPane",{attrs:{label:t.tab.detail,name:"detail"}},[a("base-detail")],1),a("TabPane",{attrs:{label:t.tab.param,name:"param"}},[a("keep-alive",["param"===t.value?a("base-param",{ref:"param"}):t._e()],1)],1),a("TabPane",{attrs:{label:t.tab.limit,name:"limit"}},[a("keep-alive",["limit"===t.value?a("base-limit",{ref:"limit"}):t._e()],1)],1),a("TabPane",{attrs:{label:t.tab.market,name:"market"}},[a("keep-alive",[a("base-market",{ref:"market"})],1)],1),a("TabPane",{attrs:{label:t.tab.distribution,name:"distribution"}},[a("keep-alive",["distribution"===t.value?a("base-distribution",{ref:"distribution"}):t._e()],1)],1)],1)],1)},n=[]},"70cc":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-select",t._b({ref:"select",staticClass:"ivu-tree-select",class:t.classes,attrs:{placeholder:t.placeholder,multiple:t.multiple,"transfer-class-name":t.transferClassName,transfer:t.transfer},on:{"on-change":t.handleChange,"on-open-change":t.handleOpenChange}},"i-select",t.$attrs,!1),[a("Tree",{ref:"tree",attrs:{data:t.tmpData,multiple:t.multiple,"check-strictly":t.checkStrictly,"show-checkbox":t.multiple&&t.showCheckbox,"check-directly":t.checkDirectly,"load-data":t.loadData},on:{"on-select-change":t.handleSelectNode,"on-check-change":t.handleSelectNode}})],1)},n=[]},"74c2":function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_specs.png"},7666:function(t,e,a){"use strict";a.r(e);var i=a("a69d"),n=a("bc9d");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("0bcd");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"c2adc720",null);e["default"]=r.exports},"770e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"level"},[i("kdx-form-title",{attrs:{content:"基本信息"}}),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.title",modifiers:{title:!0}}],attrs:{label:"商品标题：",prop:"title"}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"textarea",rows:1,autosize:"",maxlength:"70","show-word-limit":"",placeholder:"请输入商品标题"},model:{value:t.model_title,callback:function(e){t.model_title=e},expression:"model_title"}})],1),i("FormItem",{attrs:{label:"商品副标题：",prop:"sub_name"}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"textarea",rows:1,autosize:"",maxlength:"80","show-word-limit":"",placeholder:"请输入商品副标题"},model:{value:t.model_sub_name,callback:function(e){t.model_sub_name=e},expression:"model_sub_name"}})],1),i("FormItem",{attrs:{label:"商品简称："}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"text",maxlength:"16","show-word-limit":"",placeholder:"请输入商品简称"},model:{value:t.model_short_name,callback:function(e){t.model_short_name=e},expression:"model_short_name"}})],1),i("FormItem",{directives:[{name:"error-item",rawName:"v-error-item.thumb",modifiers:{thumb:!0}}],attrs:{label:"商品主图：",prop:"thumb"}},[i("kdx-image-video",{attrs:{type:"image",current:t.model_thumb},on:{"on-change":t.changeThumb}}),i("div",[i("kdx-hint-text",[i("span",[t._v("用于商城列表、双列三列商品组、分享头图。建议尺寸：800*800像素。")]),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("f28e")}})],1),i("kdx-hint-text",{staticStyle:{"padding-top":"6px"}},[i("span",[t._v("单列商品组建议尺寸：800*367像素，如选择此尺寸建议取消勾选显示为商品轮播图。")]),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("2d8f")}})],1)],1),i("Checkbox",{staticStyle:{"margin-top":"10px"},on:{"on-change":t.thumbAddSlideChange},model:{value:t.isThumbAddSlide,callback:function(e){t.isThumbAddSlide=e},expression:"isThumbAddSlide"}},[t._v("显示为商品轮播图")]),t.isShowVideo?t._e():i("Button",{staticStyle:{display:"block"},attrs:{type:"text"},on:{click:t.addVideo}},[t._v("+添加视频")])],1),t.isShowVideo?i("FormItem",{attrs:{label:"主图视频：",prop:"video"}},[i("kdx-image-video",{staticStyle:{"padding-bottom":"10px"},attrs:{type:"video",video:t.model_video,current:t.model_video_thumb},on:{"on-video-change":t.changeVideo,"on-change":t.changeVideoImage}}),i("kdx-hint-text",{staticClass:"marginT-10"},[t._v("添加主图视频可提升成交转化，有利于获取更多新流量；建议视频突出商品核心卖点，时长 9-30 秒，宽高比 16:9 "),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("0aaf")}})],1)],1):t._e(),i("FormItem",{attrs:{label:"商品轮播图：",prop:"thumb_all"}},[i("kdx-image-video",{staticClass:"swiper-img",attrs:{type:"image",limit:10,multiple:!0,"current-list":t.model_thumb_all,"is-drag":""},on:{"on-change":t.thumbAllChange}}),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"建议尺寸: 800*800像素, 轮播图可以拖拽图片调整顺序,最多上传10张"}}),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("baa5")}})],1)],1),i("FormItem",{attrs:{label:"商品分类：",prop:"category_id"}},[i("tree-select",{staticClass:"width-430",attrs:{transfer:!0,"show-checkbox":!0,data:t.shopLevel,multiple:!0,isHandlePath:!0},on:{"on-change":t.handleShopLevelChange,"change-data":t.changeData},model:{value:t.model_category_id,callback:function(e){t.model_category_id=e},expression:"model_category_id"}}),t.showErrContent?i("kdx-hint-text",{attrs:{errContent:t.emsg}}):t._e()],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"营销标签："}},[i("div",[i("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.model_is_recommand,callback:function(e){t.model_is_recommand=e},expression:"model_is_recommand"}},[t._v("推荐")]),i("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.model_is_new,callback:function(e){t.model_is_new=e},expression:"model_is_new"}},[t._v("新品")]),i("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.model_is_hot,callback:function(e){t.model_is_hot=e},expression:"model_is_hot"}},[t._v("热卖")])],1),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"给商品添加专属营销标签"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("12a9")}})],1)],1)]),i("FormItem",{attrs:{label:"商品标签：",prop:"label_id"}},[i("Button",{staticClass:"default-primary",on:{click:t.editShopLabel}},[t._v("编辑")]),i("kdx-hint-tooltip",{attrs:{type:"image",image:a("19b1")}}),t.shopLabel.data.length>0?i("div",{staticClass:"label-list",staticStyle:{"margin-top":"10px","line-height":"0","margin-bottom":"-10px"}},t._l(t.shopLabel.data,(function(e,a){return i("kdx-tag-label",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"warning",closable:!0,border:""},on:{"on-close":function(e){return t.closeShopLabel(a)}}},[t._v(t._s(e.name||""))])})),1):t._e()],1),i("collapse-panel",{staticStyle:{"padding-top":"0"},attrs:{name:"展开更多基本信息设置","expand-name":"收起更多基本信息设置"}},[[i("FormItem",{attrs:{label:"商品排序：",prop:"sort_by"}},[i("Input",{staticClass:"width-160",attrs:{maxlength:"4",placeholder:"请输入"},model:{value:t.model_sort_by,callback:function(e){t.model_sort_by=t._n(e)},expression:"model_sort_by"}}),i("kdx-hint-text",{attrs:{content:"最多4位数字, 数字越大, 排名越靠前, 默认排序为创建时间"}})],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{prop:"ext_field.show_sales",label:"显示销量："}},[i("RadioGroup",{model:{value:t.model_ext_field.show_sales,callback:function(e){t.$set(t.model_ext_field,"show_sales",e)},expression:"model_ext_field.show_sales"}},[i("Radio",{attrs:{label:"1"}},[i("span",[t._v("是")])]),i("Radio",{attrs:{label:"0"}},[i("span",[t._v("否")])])],1),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"显示销量=实际销量+虚拟销量"}},[i("kdx-hint-tooltip",{attrs:{type:"image",image:a("9cb6")}})],1)],1)],1),i("FormItem",{attrs:{label:"虚拟销量：",prop:"sales"}},[i("kdx-rr-input",{staticClass:"width-160",attrs:{number:"",fixed:0,"max-value":999999999,placeholder:"请输入"},model:{value:t.model_sales,callback:function(e){t.model_sales=e},expression:"model_sales"}})],1),i("FormItem",{attrs:{label:"商品备注："}},[i("Input",{staticClass:"width-430 limit-input",attrs:{type:"textarea",placeholder:"请输入"},model:{value:t.model_ext_field.note,callback:function(e){t.$set(t.model_ext_field,"note",e)},expression:"model_ext_field.note"}}),i("kdx-hint-text",{attrs:{content:"超链接需要以http/https开头，多个需要换行。"}})],1)]],2)],1)},n=[]},"81c2":function(t,e,a){"use strict";a.r(e);var i=a("3a73"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"85dc":function(t,e,a){"use strict";a("9444")},"860c":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-type"},[a("kdx-form-title",{attrs:{content:"商品类型"}}),a("FormItem",{attrs:{label:"",prop:"type"}},[a("multi-select",{model:{value:t.model_type,callback:function(e){t.model_type=e},expression:"model_type"}})],1)],1)},n=[]},"870e":function(t,e,a){"use strict";a.r(e);var i=a("b50f"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},8812:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.stateMap=e.modelMap=void 0,a("ac1f"),a("5319"),a("d3b7"),a("159b");var n=i(a("ade3")),o=i(a("4360")),s=function(){var t={},e=o.default.state.goodAddEdit.model,a=function(e){t["model_".concat(e)]={get:function(){return o.default.state.goodAddEdit.model[e]},set:function(t){o.default.commit("goodAddEdit/setModelProps",(0,n.default)({},e,t))}}};for(var i in e)a(i);return t};e.modelMap=s;var r=function(t){var e={};return"string"===typeof t?e=(0,n.default)({},t,{get:function(){return o.default.state.goodAddEdit[t]},set:function(e){o.default.commit("goodAddEdit/set".concat(t.replace(/^./,(function(t){return t.toUpperCase()}))),e)}}):t instanceof Array&&t.forEach((function(t){e[t]={get:function(){return o.default.state.goodAddEdit[t]},set:function(e){o.default.commit("goodAddEdit/set".concat(t.replace(/^./,(function(t){return t.toUpperCase()}))),e)}}})),e};e.stateMap=r},"8fff":function(t,e,a){"use strict";a.r(e);var i=a("1ac4"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},9315:function(t,e,a){},9444:function(t,e,a){},"9cb6":function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_sale.png"},a226:function(t,e,a){"use strict";a("382a")},a24f:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{title:"添加标签","class-name":"shop-label-modal"},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"shop-label"},[t.recommendList.length>0?a("div",{staticClass:"recommend"},[a("p",{staticClass:"title"},[t._v("推荐标签")]),a("div",{staticClass:"label-content-recommend"},t._l(t.recommendList,(function(e,i){return a("div",{key:i,staticClass:"shop-label-item",class:{checked:e.checked},on:{click:function(a){return t.setLabelChecked("recommend",i,!e.checked)}}},[a("span",[t._v(" "+t._s(e.name))]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin-y"}})],1)})),0)]):t._e(),a("div",{staticClass:"custom"},[a("div",{staticClass:"recommend"},[a("p",{staticClass:"title"},[a("span",{staticClass:"custom"},[t._v("自定义标签组")]),a("Button",{attrs:{type:"text"},on:{click:t.addLabel}},[t._v("+新建标签组")]),a("Button",{attrs:{type:"text"},on:{click:t.getLabelData}},[t._v("刷新")])],1),t.customList.length>0?a("div",{staticClass:"label-content"},t._l(t.customList,(function(e,i){return a("div",{key:i,staticClass:"label-content-box"},[a("div",{staticClass:"custom-title"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"shop-label-item-box"},t._l(e.label,(function(e,n){return a("div",{key:n,staticClass:"shop-label-item",class:{checked:e.checked},on:{click:function(a){return t.setLabelChecked("custom",n,!e.checked,i)}}},[a("span",[t._v(" "+t._s(e.name))]),a("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin-y"}})],1)})),0)])})),0):a("div",{staticClass:"label-no"},[t._v("暂无数据")])])]),a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{fix:""}})],1)])},n=[]},a3ea:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"r-input",style:{width:t.width}},[a("div",{staticClass:"close"},[a("Input",{class:[t.type],attrs:{disabled:t.disabled,placeholder:t.placeholder,maxlength:t.maxlength,"show-word-limit":t.showWordLimit,prefix:t.prefix,suffix:t.suffix},on:{"on-blur":t.onBlur},model:{value:t.cacheValue,callback:function(e){t.cacheValue=e},expression:"cacheValue"}}),t._t("error")],2),a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.closable,expression:"closable"}],staticClass:"close-icon",attrs:{type:"ios-close-circle"},on:{click:t.close}})],1)},n=[]},a69d:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"good-add-base"},[a("Form",{ref:"form",attrs:{model:t.goodAddEditModel,rules:t.$store.state.goodAddEdit.rules,"label-width":120},on:{"on-validate":t.onValidate}},[a("goods-type"),a("basic-info"),a("transaction-settings"),a("logistics-settingsms"),a("commodity-status",{attrs:{form_status:t.form_status}})],1),a("shop-label-selector",{attrs:{"current-list":t.shopLabel.data},on:{"on-change":t.shopLabelChange,"on-cancel":t.shopLabelCancel},model:{value:t.shopLabel.value,callback:function(e){t.$set(t.shopLabel,"value",e)},expression:"shopLabel.value"}})],1)},n=[]},aac5:function(t,e,a){},acf3:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530")),o=i(a("0a6e")),s=a("8812"),r={components:{MultiSelect:o.default},computed:(0,n.default)({},(0,s.modelMap)()),methods:{}};e.default=r},b23a:function(t,e,a){"use strict";a("6e2e")},b2de:function(t,e,a){"use strict";a.r(e);var i=a("086b"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},b434:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"multi-option"},[a("div",{staticClass:"single"},[t._l(t.local_specs,(function(e,i){return a("div",{key:i,staticClass:"spec"},[a("div",{staticClass:"column"},[a("Input",{directives:[{name:"error-item",rawName:"v-error-item",value:e.id,expression:"item.id"}],staticClass:"width-160 input",class:{errorInput:t.cacheSpecsError&&t.cacheSpecsError[e.id]},attrs:{placeholder:"如颜色、尺码、大小",disabled:t.is_activity_goods,maxlength:30},on:{"on-blur":function(e){return t.changeSpec(i,e)}},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"item.title"}}),a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},on:{"on-change":function(e){return t.fnImageCheckedChange(i,e)}},model:{value:e.image_checked,callback:function(a){t.$set(e,"image_checked",a)},expression:"item.image_checked"}},[t._v(" 添加图片 ")]),t.cacheSpecsError?a("span",{staticClass:"error-span"},[t._v(" "+t._s(t.cacheSpecsError[e.id])+" ")]):t._e()],1),a("div",{staticClass:"data"},[t._l(e.items,(function(n,o){return a("r-input",{directives:[{name:"error-item",rawName:"v-error-item",value:n.id,expression:"val.id"}],key:o,staticClass:"width-160 input",class:{errorInput:t.cacheSpecsError&&t.cacheSpecsError[n.id]},attrs:{type:"close",closable:e.items.length>1,disabled:t.is_activity_goods,maxlength:30,placeholder:"请填写子规格，如L、M"},on:{blur:function(e){return t.editChildSpec({row:i,col:o,val:{title:e}})},close:function(e){return t.delChildSpec({row:i,col:o})}},model:{value:n.title,callback:function(e){t.$set(n,"title",e)},expression:"val.title"}},[t.cacheSpecsError?a("span",{staticClass:"error-span",attrs:{slot:"error"},slot:"error"},[t._v(" "+t._s(t.cacheSpecsError[n.id])+" ")]):t._e()])})),t.specs[i].items.length<50?a("Button",{attrs:{type:"text",disabled:t.is_activity_goods},on:{click:function(e){return t.addChildSpec(i)}}},[t._v(" +添加规格值 ")]):t._e()],2),a("div",{staticClass:"box"}),t.specs.length>1?a("Icon",{staticClass:"icon",attrs:{type:"ios-close-circle"},on:{click:function(e){return t.closeSpec(i)}}}):t._e()],1)})),t.specs.length<3?a("div",{staticClass:"addSpecItemBtn"},[a("Button",{staticClass:"add-item",attrs:{type:"text",disabled:t.is_activity_goods},on:{click:t.addSpec}},[t._v(" +添加规格项 ")])],1):t._e()],2),a("div",{staticClass:"setting"},[a("span",[t._v("批量设置:")]),t._l(t.initColumns,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:"thumb"!==e.key,expression:"item.key !== 'thumb'"}],key:i,staticClass:"setting-input"},[a("kdx-rr-input",{staticClass:"setting-input-wrapper",style:{background:"2"==t.model_type&&"库存"==e.title?"#f3f3f3":"transparent"},attrs:{disabled:t.is_activity_goods&&("price"==e.key||"stock"==e.key)||"2"==t.model_type&&"库存"==e.title,fixed:t.getFixed(e),maxValue:t.getMaxValue(e),minValue:t.getMinValue(e),number:t.isNumberType(e),type:"text"},on:{blur:function(a){return t.batchData(e.key,a.target.value)}},model:{value:t.catchBatchData[e.key],callback:function(a){t.$set(t.catchBatchData,e.key,a)},expression:"catchBatchData[item.key]"}}),a("span",{class:{"span-active":t.catchBatchData[e.key]||"0"==t.catchBatchData[e.key]}},[t._v(t._s(e.title))])],1)})),a("Button",{on:{click:function(e){return t.setUsing(t.catchBatchData)}}},[t._v("应用")])],2),a("div",{staticClass:"table",staticStyle:{padding:"0"}},[a("Table",{attrs:{id:"childSpec",columns:t.getColumns,data:t.tableData,"span-method":t.handleSpan},scopedSlots:t._u([{key:"thumb",fn:function(e){var i=e.row,n=e.column,o=e.index;return[a("div",{staticClass:"add-image",on:{click:function(e){return t.clickImgSelector({row:i,index:o})}}},[i.thumb?a("div",{staticClass:"image"},[a("img",{attrs:{src:t.$media(i.thumb),alt:""},on:{error:t.replaceImage}}),a("Icon",{staticClass:"close-icon",attrs:{type:"ios-close-circle"},on:{click:function(e){return e.stopPropagation(),t.deleteImage({row:i,column:n,index:o})}}}),a("div",{staticClass:"replace"},[t._v("替换")])],1):a("i",{staticClass:"icon ivu-icon ivu-icon-ios-add"})])]}}])}),t.total>10?a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total,current:t.pageNumber,pageSize:t.pageSize,pageSizeOption:t.pageSizeOpts},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1):t._e()],1),a("image-selector",{ref:"image_selector",attrs:{current:t.imageSelector.current},on:{"on-change":t.changeImageSelector}})],1)},n=[]},b4a8:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("d81d"),a("4de4"),a("a434"),a("a15b");var n=i(a("5530")),o=i(a("2917")),s=i(a("f431")),r=a("8812"),l=a("2f62"),c={components:{CollapsePanel:o.default,TreeSelect:s.default},computed:(0,n.default)((0,n.default)((0,n.default)((0,n.default)({isEdit:function(){return!!this.$route.query.operate},emsg:function(){return"商品分类数据发生变化，请重新设置商品分类"}},(0,l.mapState)("goodAddEdit",{is_activity_goods:function(t){var e;return 1==(null===t||void 0===t||null===(e=t.model)||void 0===e?void 0:e.is_activity_goods)},goodsDecorate:function(t){return null===t||void 0===t?void 0:t.goodDecrate}})),(0,r.modelMap)()),(0,r.stateMap)(["isShowVideo","isThumbAddSlide","rules","shopLabel","shopLevel"])),{},{showErrContent:function(){var t=this,e=!1,a=function a(i){i.forEach((function(i){if(new Set(t.model_category_id).has(i.value)){if(i.children&&i.children.length){var n=i.children.map((function(t){return t.value})),o=n.filter((function(e){return t.model_category_id.indexOf(e)>=0}));n.length===o.length?a(i.children):e=!0}}else i.children&&i.children.length&&a(i.children)}))};return a(this.shopLevel),e}}),methods:{changeData:function(t){this.$store.commit("goodAddEdit/setShopLevel",t)},closeShopLabel:function(t){this.shopLabel.data.splice(t,1),this.model_label_id=this.shopLabel.data.map((function(t){return t.id})),this.shopLabel=(0,n.default)({},this.shopLabel)},editShopLabel:function(){this.shopLabel.value=!0,this.shopLabel=(0,n.default)({},this.shopLabel)},handleShopLevelChange:function(t){this.model_category_ids=t.join(",")},thumbAllChange:function(t){this.model_thumb_all=t},thumbAddSlideChange:function(){if(this.isThumbAddSlide)if(this.model_thumb_all.length>0){var t=this.model_thumb_all.indexOf(this.model_thumb);-1===t&&this.model_thumb_all.unshift(this.model_thumb)}else this.model_thumb_all=[this.model_thumb];else if(this.model_thumb_all.length>0){var e=this.model_thumb_all.indexOf(this.model_thumb);-1!==e&&this.model_thumb_all.splice(e,1)}else this.model_thumb_all=[]},changeVideo:function(t){this.model_video=t.path,this.$store.commit("goodAddEdit/setVideoParams",t)},changeVideoImage:function(t){this.model_video_thumb=t},addVideo:function(){this.isShowVideo=!0},changeThumb:function(t){if(this.isThumbAddSlide)if(this.model_thumb_all.length>0){var e=this.model_thumb_all.indexOf(this.model_thumb);e>-1?this.model_thumb_all[e]!==t&&(this.model_thumb_all.splice(e,1),t&&this.model_thumb_all.splice(e,0,t)):this.model_thumb_all.unshift(t)}else this.model_thumb_all=[t];this.model_thumb=t}}};e.default=c},b50f:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"RemindLabel",props:{title:{type:String}}};e.default=a},baa5:function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_swiper.png"},bb01:function(t,e,a){"use strict";a("ff05")},bc9d:function(t,e,a){"use strict";a.r(e);var i=a("eb66"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},be78:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level"},[a("kdx-form-title",{attrs:{content:"商品状态"}}),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"上架设置：",prop:"status"}},[a("RadioGroup",{on:{"on-change":t.changeStatus},model:{value:t.model_status,callback:function(e){t.model_status=e},expression:"model_status"}},[a("Radio",{attrs:{label:"1"}},[a("span",[t._v("上架")])]),a("Radio",{attrs:{label:"0"}},[a("span",[t._v("保存至仓库")])]),a("Radio",{attrs:{label:"2"}},[a("span",[t._v("自动上架")])])],1),"2"===t.model_status?a("div",{staticClass:"nest-box"},[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"选择时间：",prop:"putaway_time"}},[a("DatePicker",{staticClass:"width-430",attrs:{placeholder:"选择时间",type:"datetime",options:t.dateOptions},model:{value:t.model_putaway_time,callback:function(e){t.model_putaway_time=e},expression:"model_putaway_time"}})],1)],1):t._e()],1),"2"!==t.model_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"退换货："}},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.model_ext_field.refund,callback:function(e){t.$set(t.model_ext_field,"refund",e)},expression:"model_ext_field.refund"}},[t._v(" 退款 ")]),"0"===t.model_type?a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.model_ext_field.return,callback:function(e){t.$set(t.model_ext_field,"return",e)},expression:"model_ext_field.return"}},[t._v(" 退货退款 ")]):t._e(),"0"===t.model_type?a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.model_ext_field.exchange,callback:function(e){t.$set(t.model_ext_field,"exchange",e)},expression:"model_ext_field.exchange"}},[t._v(" 换货 ")]):t._e(),a("kdx-hint-text",[t._v(" 勾选后支持整单售后, 多个商品同时满足相同条件可发起售后, 如需单件商品支持售后时, 需要开启 "),a("Button",{attrs:{type:"text",to:"/setting/safeguard/index",target:"_blank"}},[t._v(" 【支持单品售后】 ")])],1)],1):t._e(),"0"===t.model_type?a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"货到付款：",prop:"ext_field.is_delivery_pay"}},[a("RadioGroup",{model:{value:t.model_ext_field.is_delivery_pay,callback:function(e){t.$set(t.model_ext_field,"is_delivery_pay",e)},expression:"model_ext_field.is_delivery_pay"}},[a("Radio",{attrs:{label:"1"}},[a("span",[t._v("是")])]),a("Radio",{attrs:{label:"0"}},[a("span",[t._v("否")])])],1)],1):t._e()],1)},n=[]},c139:function(t,e,a){"use strict";a("1b91")},c603:function(t,e,a){},c6072:function(t,e,a){"use strict";a.r(e);var i=a("43be"),n=a("870e");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("622a");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"110ea137",null);e["default"]=r.exports},ca3f:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("b0c0");var i={name:"CollapsePanel",props:{name:{type:String},expandName:{type:String}},data:function(){return{value:this.name}},methods:{change:function(t){t.length>0?this.value=this.expandName||this.name:this.value=this.name}}};e.default=i},d38c:function(t,e,a){"use strict";a("aac5")},d476:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("e9c4"),a("d3b7"),a("159b"),a("a434");var n=i(a("2909")),o={name:"ShopLabel",props:{value:{type:Boolean,default:!1},defaultCheckedList:{type:Array,default:function(){return[]}},currentList:{type:Array,required:!0}},data:function(){return{selectRows:[],recommendList:[],customList:[],loading:!1}},watch:{value:{handler:function(t){t&&(this.currentList.length>0?this.selectRows=(0,n.default)(this.currentList):this.defaultCheckedList.length>0&&(this.selectRows=(0,n.default)(this.defaultCheckedList)),this.getLabelData())},immediate:!0}},methods:{handleCancel:function(){this.$emit("on-cancel"),this.initData()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.initData()},addLabel:function(){this.handleCancel(),this.$utils.openNewWindowPage("/goods/label/add")},initDefaultChecked:function(){var t=this;this.selectRows.length>0&&this.selectRows.forEach((function(e){t.recommendList.forEach((function(a,i){a.id===e.id&&t.$set(t.recommendList[i],"checked",!0)})),t.customList.forEach((function(a,i){a.label&&a.label.forEach((function(a,n){a.id===e.id&&t.$set(t.customList[i].label[n],"checked",!0)}))}))}))},setLabelChecked:function(t,e,a,i){var n=this;if("recommend"===t)if(this.$set(this.recommendList[e],"checked",a),a)this.selectRows.push(this.recommendList[e]);else{var o=-1;this.selectRows.forEach((function(t,a){t.id===n.recommendList[e].id&&(o=a)})),this.selectRows.splice(o,1)}else if("custom"===t)if(this.$set(this.customList[i].label[e],"checked",a),a)this.selectRows.push(this.customList[i].label[e]);else{var s=-1;this.selectRows.forEach((function(t,a){t.id===n.customList[i].label[e].id&&(s=a)})),this.selectRows.splice(s,1)}},initData:function(){this.recommendList.forEach((function(t){t.checked=!1})),this.customList.forEach((function(t){t.label&&t.label.forEach((function(t){t.checked=!1}))}))},getLabelData:function(){var t=this;this.loading=!0,this.$api.goodsApi.getGoodLabel({pager:"0"}).then((function(e){t.loading=!1,0===e.error&&(t.customList=e.data||[],t.recommendList=e.recommend||[],t.initDefaultChecked())}))}}};e.default=o},d4a9:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("53ca"));a("a9e3"),a("e9c4"),a("d81d"),a("d3b7"),a("159b"),a("4de4"),a("a15b");var o=i(a("6dd0")),s=i(a("583f")),r=a("3101"),l=[],c={name:"TreeSelect",mixins:[o.default],props:{value:{type:[String,Number,Array]},data:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default:function(){return!(!this.$IVIEWPRO||""===this.$IVIEWPRO.transfer)&&this.$IVIEWPRO.transfer}},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择"},isHandlePath:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value,isChangeValueInTree:!1,isValueChangeByTree:!1,tmpData:[]}},watch:{value:{handler:function(t){var e;this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.currentValue=t,null===(e=this.$refs.select)||void 0===e||e.reset(),l=(0,s.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.tmpData,!0),this.tmpData=JSON.parse(JSON.stringify(this.tmpData)))},deep:!0},data:{handler:function(){var t;(this.tmpData=JSON.parse(JSON.stringify(this.data)),l=(0,s.default)(this.data,this.isHandlePath),this.isChangeValueInTree)?this.isChangeValueInTree=!1:(null===(t=this.$refs.select)||void 0===t||t.reset(),this.handleUpdateTreeNodes(this.tmpData,!0))},deep:!0}},computed:{valueToArray:function(){return"object"===(0,n.default)(this.currentValue)?this.isHandlePath?(0,r.formatData)(this.currentValue,this.tmpData):this.currentValue:[this.currentValue]},isCheckboxUsable:function(){return this.multiple&&this.showCheckbox},transferClassName:function(){return this.transfer?"ivu-tree-select-transfer":""},classes:function(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode:function(t,e){if(this.$emit("change-data",this.tmpData),this.multiple)t.length?(this.currentValue=t.map((function(t){return t.value})),this.handleUpdateSelectValue(e.value,e.title)):(this.currentValue=[],this.handleUpdateSelectValue("","")),this.traverseData(this.tmpData,this.currentValue);else if(t.length){var a=t[0];this.currentValue=a.value,this.handleUpdateSelectValue(a.value,a.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue),this.dispatch("FormItem","on-form-change",this.currentValue)},handleUpdateTreeNodes:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.forEach((function(t){e.valueToArray.indexOf(t.value)>=0?(e.isCheckboxUsable?t.checked=!0:t.selected=!0,e.handleUpdateSelectValue(t.value,t.title)):e.isCheckboxUsable?t.checked=!1:t.selected=!1,t.children&&t.children.length&&e.handleUpdateTreeNodes(t.children)})),a&&this.$refs.select&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue:function(t){if(""===t){var e;null===(e=this.$refs.select)||void 0===e||e.reset()}else{this.isValueChangeByTree=!0;var a=l.filter((function(e){return e[e.length-1].value==t}))[0];a&&a.length>0&&this.$refs.select&&this.$refs.select.onOptionClick({value:t,label:a.map((function(t){return t.title})).join("->")||""}),this.multiple||(this.isValueChangeByTree=!1)}},handleChange:function(t){var e,a=this;this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=t,this.$emit("input",t),this.$emit("on-change",t),this.dispatch("FormItem","on-form-change",t),null===(e=this.$refs.select)||void 0===e||e.reset(),this.handleUpdateTreeNodes(this.tmpData,!0),this.$emit("change-data",this.tmpData),this.$nextTick((function(){a.isValueChangeByTree=!1})))},handleOpenChange:function(t){this.$emit("on-open-change",t)},traverseData:function(t,e){var a=this;t.forEach((function(t){e.indexOf(t.value)>-1?t.checked=!0:t.checked=!1,t.children&&t.children.length>0&&a.traverseData(t.children,e)}))}},mounted:function(){var t;null!==(t=this.data)&&void 0!==t&&t.length&&(this.tmpData=JSON.parse(JSON.stringify(this.data))),l=(0,s.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.data,!0)}};e.default=c},d51a:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.stateMap=e.modelMap=void 0,a("ac1f"),a("5319"),a("d3b7"),a("159b");var n=i(a("ade3")),o=i(a("4360")),s=function(){var t={},e=o.default.state.goodAddEdit.model,a=function(e){t["model_".concat(e)]={get:function(){return o.default.state.goodAddEdit.model[e]},set:function(t){o.default.commit("goodAddEdit/setModelProps",(0,n.default)({},e,t))}}};for(var i in e)a(i);return t};e.modelMap=s;var r=function(t){var e={};return"string"===typeof t?e=(0,n.default)({},t,{get:function(){return o.default.state.goodAddEdit[t]},set:function(e){o.default.commit("goodAddEdit/set".concat(t.replace(/^./,(function(t){return t.toUpperCase()}))),e)}}):t instanceof Array&&t.forEach((function(t){e[t]={get:function(){return o.default.state.goodAddEdit[t]},set:function(e){o.default.commit("goodAddEdit/set".concat(t.replace(/^./,(function(t){return t.toUpperCase()}))),e)}}})),e};e.stateMap=r},d810:function(t,e,a){},eb66:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("ade3")),o=i(a("5530"));a("a9e3"),a("d81d"),a("d3b7");var s=i(a("0d87")),r=i(a("2315")),l=i(a("1127")),c=i(a("35c7")),d=i(a("4996")),u=i(a("52a5")),p=a("8812"),h={name:"index",components:{ShopLabelSelector:s.default,GoodsType:l.default,BasicInfo:r.default,TransactionSettings:c.default,CommodityStatus:u.default,LogisticsSettingsms:d.default},props:{curTab:{type:[String,Number],default:""},form_status:{type:[String,Number],default:-1}},computed:(0,o.default)((0,o.default)({},(0,p.stateMap)("shopLabel")),{},{goodAddEditModel:function(){return this.$store.state.goodAddEdit.model}}),methods:{onValidate:function(t,e){this.cacheError=(0,o.default)((0,o.default)({},this.cacheError),{},(0,n.default)({},t,e))},shopLabelChange:function(t){this.shopLabel=(0,o.default)((0,o.default)({},this.shopLabel),{},{data:t}),this.$store.state.goodAddEdit.model.label_id=t.map((function(t){return t.id})),this.shopLabelCancel()},shopLabelCancel:function(){this.shopLabel=(0,o.default)((0,o.default)({},this.shopLabel),{},{value:!1})},validate:function(){var t=this;return new Promise((function(e){t.$refs["form"].validate((function(a){e(a),t.$nextTick((function(){if(!a)for(var e in t.cacheError)if(!t.cacheError[e]){t.$focusError(e);break}}))}))}))}},beforeDestroy:function(){this.$store.commit("goodAddEdit/multiOptions/init")}};e.default=h},ed26:function(t,e,a){"use strict";a.r(e);var i=a("d4a9"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},ef19:function(t,e,a){"use strict";a.r(e);var i=a("b434"),n=a("fdaa");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("b23a");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"35cce3c3",null);e["default"]=r.exports},f28e:function(t,e,a){t.exports=a.p+"static/dist/shop/img/shop_main.png"},f374:function(t,e,a){},f3be:function(t,e,a){"use strict";a.r(e);var i=a("ca3f"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},f431:function(t,e,a){"use strict";a.r(e);var i=a("70cc"),n=a("ed26");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},fc45:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collapse-panel"},[a("Collapse",{attrs:{simple:""},on:{"on-change":t.change}},[a("Panel",{attrs:{"hide-arrow":""}},[a("i",{staticClass:"ivu-icon icon-full-right iconfont"}),t._v(t._s(t.value)+" "),a("p",{attrs:{slot:"content"},slot:"content"},[t._t("default")],2)])],1)],1)},n=[]},fdaa:function(t,e,a){"use strict";a.r(e);var i=a("04c9"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},ff05:function(t,e,a){}}]);