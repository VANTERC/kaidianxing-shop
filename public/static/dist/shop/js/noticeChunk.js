(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"0847":function(t,e,a){},"09e3":function(t,e,a){"use strict";a.r(e);var n=a("e0d5"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"0a3c":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("1da1"));a("d3b7");var s={components:{},props:{},data:function(){return{loading:!1,submitLoading:!1,data:{type:"aliyun",aliyun:{access_key_id:"",access_key_secret:""},juhe:{app_key:""}},rule:{"aliyun.access_key_secret":[{required:!0,message:"请填写Access Key Secret",trigger:"blur"}],"aliyun.access_key_id":[{required:!0,message:"请填写Access Key ID",trigger:"blur"}],"juhe.app_key":[{required:!0,message:"请填写App Key",trigger:"blur"}]}}},computed:{},created:function(){},mounted:function(){this.getDetail()},methods:{getDetail:function(){var t=this;this.loading=!0,this.$api.noticeApi.getAccessKey({}).then((function(e){t.data=e.settings,console.log(t.data,"data----"),t.loading=!1}))},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate((function(t){t?e(t):a()}))}))},handleSave:function(){this.submitLoading=!0,this.customForm(this.data)},customForm:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.validateForm();case 3:e.submit(t),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),e.submitLoading=!1;case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},submit:function(t){var e=this;this.$api.noticeApi.setAccessKey(t).then((function(t){0==t.error&&(e.$Message.success("保存成功"),e.getDetail()),e.submitLoading=!1}))}}};e.default=s},"0ab6":function(t,e,a){"use strict";a("3c6c")},"0f59":function(t,e,a){"use strict";a("5475")},"0f9e":function(t,e,a){"use strict";a("0847")},"12ae":function(t,e,a){"use strict";a.r(e);var n=a("9788"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"168d":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice-buyer-list-box"},[a("div",{staticClass:"line"}),a("div",{staticClass:"notice-buyer-list-index"},[a("notice-list",{attrs:{type:t.type},on:{toDetail:t.toDetail}})],1)])},i=[]},"1a5d":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice-seller-list-box"},[a("div",{staticClass:"line"}),a("div",{staticClass:"notice-seller-list-index"},[a("notice-list",{attrs:{type:t.type},on:{toDetail:t.toDetail}})],1)])},i=[]},"1c10":function(t,e,a){"use strict";a.r(e);var n=a("d844"),i=a("68a8");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("0f59");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"1c75":function(t,e,a){"use strict";a("9723")},"302f":function(t,e,a){"use strict";a.r(e);var n=a("4e2b"),i=a("d8e2");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("0ab6");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,"6ea671f4",null);e["default"]=r.exports},3869:function(t,e,a){"use strict";a.r(e);var n=a("1a5d"),i=a("12ae");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("c2a8");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"3ac9":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("487f")),s={name:"index",components:{noticeList:i.default},props:{},data:function(){return{type:{}}},computed:{},watch:{"$route.params":{handler:function(t){this.type={group_name:"buyer_notice",group_item_name:t.type}},immediate:!0}},created:function(){},mounted:function(){},methods:{toDetail:function(t){this.$router.push({path:"/notice/buyer/".concat(this.type.group_item_name,"/index"),query:{type_code:t.type_code,items:t.items}})}}};e.default=s},"3af6":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("5530")),s=n(a("1da1"));a("ac1f"),a("00b4"),a("5319"),a("d3b7"),a("b64b");var l=n(a("8f03")),r=n(a("fc21")),o={name:"index",components:{smsTest:r.default},props:{},data:function(){return{type:"添加短信模板",id:"",loading:!1,temData:{type:"aliyun",sms_tpl_id:"",name:"",scene_code:"",content:"",sms_sign:"",state:1},tableData:[],codeList:l.default,sceneList:[],errors:"未找到任何变量",rules:{sms_tpl_id:[{required:!0,message:"请填写模板ID"}],name:[{required:!0,message:"请填写模板名称"}],scene_code:[{required:!0,message:"请填写模板名称"}],content:[{required:!0,message:"请填写模板内容"}],sms_sign:[{required:!0,message:"请填写短信签名"}],state:[{required:!0,message:"请选择状态"}]}}},computed:{},created:function(){},mounted:function(){"edit"==this.$route.params.type&&(this.type="编辑短信模板",this.id=this.$route.query.id,this.getDetail()),this.getList()},methods:{getDetail:function(){var t=this;this.$api.noticeApi.getSmsTemDetail({id:this.id}).then((function(e){if(0==e.error){for(var a in t.temData=e,e.data.temp_code)t.tableData.push({data_temp:a,data_shop:e.data.temp_code[a]});0==t.tableData.length?t.errors="未找到任何变量":t.errors=""}}))},getList:function(){var t=this;this.$api.noticeApi.getSmsScene().then((function(e){0==e.error&&(t.sceneList=e.list)}))},format:function(t,e){var a=e.length-1,n=e[a]||!1;if(n&&n.value)return n.value},getVars:function(){var t=!0,e=this.temData.type;if(""!=e){var a=this.temData.content;if(this.temData.content)if(this.tableData=[],this.errors="","juhe"!=e&&"aliyun"!=e||-1==a.indexOf("【")&&-1==a.indexOf("】"))if("ihuyi"!=e||"【变量】"!=a.substr(0,4)){if("ihuyi"==e||"dxton"==e){var n=/【变量】/gi,i=0;while(t){var s=n.test(a);if(!(s>0))break;i++}if(i<=0)return void(this.tableData=[]);for(var l=1;l<=i;l++)this.tableData.push({data_temp:"",data_shop:[]})}else if("juhe"==e||"aliyun"==e||"smscn"==e||"submail"==e){var r=/\\#(\w+)\\#/gi;"aliyun"==e?r=/\$\{(\w+)\}/gi:"smscn"==e?r=/\{\$(\w+)\}/gi:"submail"==e&&(r=/@var\((\w+)\)/gi);while(t){var o=r.exec(a);if(null==o)break;if("aliyun"==e&&("id"==o[1]||"site"==o[1]||"email"==o[1]||"mobile"==o[1]||"nick"==o[1])){this.errors="模板内容不能使用${email},${mobile},${id},${nick},${site} 变量!";var c=a.replace(/\$\{id\}/gi,"");return c=c.replace(/\$\{site\}/gi,""),c=c.replace(/\$\{nick\}/gi,""),c=c.replace(/\$\{email\}/gi,""),c=c.replace(/\$\{mobile\}/gi,""),void console.log(c,"nvaluenvaluenvalue")}this.tableData.push({data_temp:o[1],data_shop:[]})}}0==this.tableData.length&&(this.errors="未找到任何变量")}else this.errors="模板内容不以【变量】开头!";else this.errors="模板内容不能包含【 或 】字符!"}},handleSave:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.validateForm();case 4:t.submit(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.loading=!1;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate((function(t){t?e(t):a()}))}))},submit:function(){var t=this,e=(0,i.default)((0,i.default)({},this.temData),{},{data:{data:{},temp_code:{}}});this.id&&(e.id=this.id);for(var a=0;a<this.tableData.length;a++)console.log(a,this.tableData[a]),e.data.data[this.tableData[a].data_temp]=this.tableData[a].data_shop[this.tableData[a].data_shop.length-1],e.data.temp_code[this.tableData[a].data_temp]=this.tableData[a].data_shop;console.log(e),this.$api.noticeApi[e.id?"editSms":"addSms"](e).then((function(e){0==e.error&&(t.$Message.success("提交成功"),t.$router.push({path:"/notice/smsTemplate/list"})),t.loading=!1}))},send:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateForm();case 2:return e.next=4,t.$refs.testSms.validateTestForm().then((function(e){var a={mobile:e.mobile,data:e.data,sms_sign:t.temData.sms_sign,sms_tpl_id:t.temData.sms_tpl_id,type:t.temData.type};t.id&&(a.id=t.id);var n=Object.keys(a.data);0===n.length&&(a.data=""),t.$api.noticeApi.sendData(a).then((function(e){0==e.error&&t.$Message.success("操作成功")}))}));case 4:case"end":return e.stop()}}),e)})))()}}};e.default=o},"3c6c":function(t,e,a){},"40bf":function(t,e,a){"use strict";a.r(e);var n=a("8df4d"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"45e9":function(t,e,a){"use strict";a("4a97")},4743:function(t,e,a){},"477a":function(t,e,a){"use strict";a.r(e);var n=a("d4d4"),i=a("4ed1b");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("45e9");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"487f":function(t,e,a){"use strict";a.r(e);var n=a("8294"),i=a("c20b");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("1c75");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,"5df3f399",null);e["default"]=r.exports},"496b":function(t,e,a){},"4a97":function(t,e,a){},"4b25":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("841c"),a("d81d"),a("d3b7"),a("159b"),a("b680");var i=n(a("5530")),s={props:{},data:function(){var t=this;this.$createElement;return{loading:!1,sendModal:!1,sendData:{},sms_template_quantity:"",submitSendData:{mobile:""},page:{pageSize:10,pageNumber:1},isSelectAll:!1,selectRows:[],search:{name:""},type:[{id:"all",text:"全部"},{id:"aliyun",text:"阿里云"},{id:"juhe",text:"聚合"}],status:[{id:"all",text:"全部"},{id:0,text:"禁用"},{id:1,text:"启用"}],data:[],columns:[{type:"selection",width:40,align:"center"},{title:"模板ID",key:"sms_tpl_id"},{title:"模板名称",key:"name"},{title:"短信内容",key:"content"},{title:"发送条件",key:"scene"},{title:"状态",key:"state",render:function(t,e){return 1==e.row.state?t("kdx-tag-label",{attrs:{type:"success"}},["应用中"]):t("kdx-tag-label",{attrs:{type:"disabled"}},["未应用"])}},{title:"创建时间",key:"created_at"},{title:"操作",key:"action",align:"right",render:function(e,a){return e("div",[e("Button",{attrs:{type:"text"},class:"rr-brand-color",on:{click:function(){return t.changeState(a.row)}}},[1==a.row.state?"禁用":"启用"]),e("Button",{attrs:{type:"text"},class:"rr-brand-color marginL-10",on:{click:function(){t.handleEdit(a.row.id,a.row.audit)}}},["编辑"]),e("Button",{attrs:{type:"text"},class:"rr-brand-color marginL-10",on:{click:function(){t.handleDelete(a.row.id)}}},["删除"])])}}],sendRule:{mobile:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^1(3|4|5|6|7|8|9)\d{9}$/,message:"手机号错误",trigger:"blur"}]},recharge:{list:[]}}},computed:{selectDisabled:function(){return 0===this.selectRows.length},rechargeDisabled:function(){var t,e,a,n=null===(t=this.$store.state)||void 0===t||null===(e=t.config)||void 0===e||null===(a=e.apps)||void 0===a?void 0:a.notice;return 1!=(null===n||void 0===n?void 0:n.is_forever)&&1==(null===n||void 0===n?void 0:n.about_expire)&&1!==(null===n||void 0===n?void 0:n.is_free)&&0==(null===n||void 0===n?void 0:n.shop_app_status)}},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0;var e=(0,i.default)((0,i.default)({},this.search),{},{type:"all"==this.search.type?"":this.search.type,state:"all"==this.search.state?"":this.search.state,pagesize:this.page.pageSize,page:this.page.pageNumber,pager:1});this.$api.noticeApi.getSmsList(e).then((function(e){0==e.error&&(t.page.total=e.total,t.data=e.list,t.sms_template_quantity=e.sms_template_quantity),t.loading=!1}))},handlerAdd:function(){0!=this.sms_template_quantity?this.$router.push({path:"/notice/smsTemplate/add"}):this.$Message.error("您的短信模板数量已用完")},selectChange:function(t){this.selectRows=t,this.isSelectAll=this.selectRows.length===this.data.length},checkboxChange:function(t){this.$refs["table"].selectAll(t)},handleEdit:function(t,e){this.$router.push({path:"/notice/smsTemplate/edit",query:{id:t,disabled:0!=e}})},changeState:function(t){var e=this;this.$api.noticeApi.changeSmsState({id:t.id,state:0==t.state?1:0}).then((function(t){0==t.error&&(e.getList(),e.$Message.success("修改成功"))}))},bulkchangeState:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认批量修改",onOk:function(){var a=e.selectRows.map((function(t){return t.id}));e.$api.noticeApi.changeSmsState({id:a,state:t}).then((function(t){0==t.error&&(e.getList(),e.$Message.success("修改成功"))}))},onCancel:function(){}})},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除",onOk:function(){e.$api.noticeApi.deleteSms({id:t}).then((function(t){0==t.error&&(e.getList(),e.$Message.success("删除成功"))}))},onCancel:function(){}})},bulkDelete:function(){var t=this;this.$Modal.confirm({title:"提示",content:"确认批量删除",onOk:function(){var e=t.selectRows.map((function(t){return t.id}));t.$api.noticeApi.deleteSms({id:e}).then((function(e){0==e.error&&(t.getList(),t.$Message.success("删除成功"))}))},onCancel:function(){}})},reset:function(){this.$refs["page"].reset()},changePage:function(t){this.page=t,this.getList()},handleSearch:function(){this.getList()},handleCancel:function(){this.sendModal=!1},handleOk:function(){var t=this;this.$refs["sendModal"].validate((function(e){if(e){var a=t.sendData.data.every((function(t){return t.data_shop}));a?t.submitSend():t.$Message.error("请填写数据值")}}))},submitSend:function(){for(var t=this,e={id:this.sendData.id,mobile:this.submitSendData.mobile},a={},n=0;n<this.sendData.data.length;n++)a[this.sendData.data[n].data_temp]=this.sendData.data[n].data_shop;e.data=a,this.$api.noticeApi.setSendData(e).then((function(e){0==e.error&&t.$Message.success("发送成功"),t.sendModal=!1}))},handleRecharge:function(){this.getBuyList()},rechargeRefresh:function(){this.reset(),this.getList()},handleReset:function(){this.search={type:"all",state:"all",keyword:""},this.getList()},getBuyList:function(){var t=this;this.loading=!0,this.$api.noticeApi.getSmsPlan().then((function(e){var a;t.loading=!1;var n=[];null!==(a=e.template_plan)&&void 0!==a&&a.length?(e.template_plan.forEach((function(t){n.push({id:t.id,app_id:t.app_id,title:"".concat(t.duration,"条"),price:t.price,number:t.duration,priceItem:parseFloat(t.price/t.duration).toFixed(3),unit:"条"})})),t.recharge.list=n,t.$nextTick((function(){t.$refs["plan_recharge"].setValue()}))):t.$Modal.confirm({title:"提示",content:"还未配置短信模板购买套餐，请联系管理员进行配置",onOk:function(){}})}))}}};e.default=s},"4df8":function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d81d"),a("ac1f"),a("841c");var n={components:{},props:{},data:function(){var t=this;this.$createElement;return{loading:!1,isSelectAll:!1,selectRows:[],search:{keyword:""},data:[],industry:[],columns:[{type:"selection",width:40,align:"center"},{title:"模板名称",key:"title"},{title:"所属行业",key:"primary_industry",render:function(t,e){return t("div",[e.row.primary_industry+(e.row.deputy_industry?"/"+e.row.deputy_industry:"")])}},{title:"操作",key:"action",render:function(e,a){return e("div",[e("span",{class:"rr-brand-color pointer",on:{click:function(){t.handleEdit(a.row.template_id)}}},["查看"]),e("span",{class:"rr-brand-color marginL-10 pointer",on:{click:function(){t.handleDelete(a.row.template_id)}}},["删除"])])}}]}},computed:{selectDisabled:function(){return 0===this.selectRows.length}},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,this.$api.noticeApi.getWexinTemplate({}).then((function(e){t.loading=!1,0==e.error&&(t.data=e.template_list,t.industry=e.industry)}))},selectChange:function(t){this.selectRows=t,this.isSelectAll=this.selectRows.length===this.data.length},checkboxChange:function(t){this.$refs["table"].selectAll(t)},handleEdit:function(t){this.$router.push({path:"/notice/wxappTemplate/index",query:{id:t}})},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除该模板",onOk:function(){e.$api.noticeApi.deleteWexinTemplate({id:t}).then((function(t){0==t.error&&(e.getList(),e.$Message.success("删除成功"))}))},onCancel:function(){}})},bulkDelete:function(){var t=this;this.$Modal.confirm({title:"提示",content:"确认批量删除",onOk:function(){var e=t.selectRows.map((function(t){return t.template_id}));t.$api.noticeApi.bulkDeleteWexinTemplate({ids:e}).then((function(e){0==e.error&&(t.getList(),t.$Message.success("删除成功"))}))},onCancel:function(){}})},reset:function(){this.$refs["page"].reset()},add:function(){var t=this;this.search.keyword?this.$api.noticeApi.addWexinTemplate({id:this.search.keyword}).then((function(e){0==e.error&&(t.getList(),t.$Message.success("添加成功"))})):this.$Message.error("请输入模板编码")}}};e.default=n},"4e2b":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("kdx-content-bar",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"btn",fn:function(){return[n("Button",{staticClass:"primary-long",attrs:{loading:t.submitLoading},on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[n("div",{staticClass:"content"},[n("Form",{ref:"form",attrs:{model:t.model,rules:t.rules,"label-width":180}},[n("kdx-form-title",[t._v("基础信息")]),n("FormItem",{attrs:{label:"邮箱开启："}},[n("RadioGroup",{model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}},[n("Radio",{attrs:{label:1}},[t._v("开启")]),n("Radio",{attrs:{label:0}},[t._v("关闭")])],1),n("kdx-hint-text",[t._v("开启邮箱后虚拟卡密商品可以通过邮件形式发送到用户。")])],1),1===t.model.status?n("div",[n("FormItem",{attrs:{label:"选择邮箱：",prop:"type"}},[n("div",{staticClass:"multi-select"},[n("RadioGroup",{on:{"on-change":t.changeType},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},[n("Radio",{attrs:{border:"",label:"qq"}},[n("div",[n("img",{staticClass:"select-img",attrs:{src:a("de1e"),alt:""}})]),n("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1),n("Radio",{attrs:{border:"",label:"wangyi"}},[n("div",[n("img",{staticClass:"select-img",attrs:{src:a("e403"),alt:""}})]),n("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1),n("Radio",{attrs:{border:"",label:"customize"}},[n("div",{staticClass:"flex customize"},[n("i",{staticClass:"iconfont icon-youxiang"}),n("span",{staticStyle:{"font-size":"16px"}},[t._v("自定义")])]),n("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-yes1"}})],1)],1)],1)]),"customize"===t.model.type?n("FormItem",{key:t.model.type+"host",attrs:{label:"SMTP服务器：",prop:"host"}},[n("Input",{staticClass:"width-340",attrs:{placeholder:"请输入SMTP服务器"},model:{value:t.model.host,callback:function(e){t.$set(t.model,"host",e)},expression:"model.host"}})],1):t._e(),"customize"===t.model.type?n("FormItem",{key:t.model.type+"port",attrs:{label:"SMTP端口：",prop:"port"}},[n("Input",{staticClass:"width-340",attrs:{placeholder:"请输入SMTP端口"},model:{value:t.model.port,callback:function(e){t.$set(t.model,"port",e)},expression:"model.port"}})],1):t._e(),n("FormItem",{key:t.model.type+"username",attrs:{label:"发件人邮件地址：",prop:"username"}},[n("Input",{staticClass:"width-340",attrs:{placeholder:"请输入发件人邮件地址"},model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}}),n("kdx-hint-text",[t._v("商城统一发送给用户的邮件地址")])],1),n("FormItem",{key:t.model.type+"shop_name",attrs:{label:"发件人名称：",prop:"shop_name"}},[n("Input",{staticClass:"width-340",attrs:{placeholder:"请输入发件人名称"},model:{value:t.model.shop_name,callback:function(e){t.$set(t.model,"shop_name",e)},expression:"model.shop_name"}}),n("kdx-hint-text",[n("span",[t._v("发送邮件中发件人名称")]),n("kdx-hint-tooltip",{attrs:{width:"300px",type:"image",image:a("f62b")}})],1)],1),n("FormItem",{attrs:{label:"发送主题："}},[n("Input",{staticClass:"width-340",attrs:{placeholder:"请输入发送主题"},model:{value:t.model.mailer_title,callback:function(e){t.$set(t.model,"mailer_title",e)},expression:"model.mailer_title"}}),n("kdx-hint-text",[n("span",[t._v("发送邮件的主题内容")]),n("kdx-hint-tooltip",{attrs:{width:"300px",type:"image",image:a("bca7c")}})],1)],1),n("FormItem",{key:t.model.type+"password",attrs:{label:"SMTP身份验证码：",prop:"password"}},[n("Input",{staticClass:"width-340",attrs:{placeholder:"请输入SMTP身份验证码"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}}),n("kdx-hint-text",[n("span",[t._v("添加该邮箱的SMTP身份验证码")]),"qq"===t.model.type?n("Button",{staticClass:"marginL-10",attrs:{type:"text",to:"https://service.mail.qq.com/cgi-bin/help?subtype=1&&no=1001256&&id=28",target:"_blank"}},[t._v("点击查看如何获取")]):t._e(),"wangyi"===t.model.type?n("Button",{staticClass:"marginL-10",attrs:{type:"text",to:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac2cda80145a1742516",target:"_blank"}},[t._v("点击查看如何获取")]):t._e()],1)],1),n("FormItem",{attrs:{label:"是否使用安全链接："}},[n("RadioGroup",{model:{value:t.model.ssl,callback:function(e){t.$set(t.model,"ssl",e)},expression:"model.ssl"}},[n("Radio",{attrs:{label:"1"}},[t._v("开启")]),n("Radio",{attrs:{label:"0"}},[t._v("关闭")])],1),n("kdx-hint-text",[t._v("开启后发送邮件以加密形式发送，邮件更加安全可靠")])],1),n("FormItem",{attrs:{label:"测试接收邮件地址："}},[n("Input",{staticClass:"width-340",attrs:{placeholder:"请输入接收邮件地址"},model:{value:t.model.test_address,callback:function(e){t.$set(t.model,"test_address",e)},expression:"model.test_address"}}),n("Button",{staticClass:"marginL-10",attrs:{type:"text"},on:{click:t.testSend}},[t._v("测试发送")])],1)],1):t._e()],1)],1)])},i=[]},"4eb9":function(t,e,a){"use strict";a.r(e);var n=a("acd9"),i=a("8878");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("8edb");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"4ed1":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf"),a("d3b7"),a("25f0");var i=n(a("ade3")),s=n(a("1da1")),l=n(a("5530")),r=n(a("15fd")),o=["status","type"],c=["status","type"],d={name:"index",components:{},props:{},data:function(){return{loading:!0,submitLoading:!1,model:{status:0,type:"qq",host:"",port:"",username:"",shop_name:"",mailer_title:"",password:"",ssl:"0",test_address:""},cacheData:{},rules:{type:[{required:!0,message:"邮箱必选"}],host:[{required:!0,message:"SMTP服务器必填"}],port:[{required:!0,message:"SMTP端口必填"}],username:[{required:!0,message:"发件人邮件地址必填"}],shop_name:[{required:!0,message:"发件平台名称必填"}],password:[{required:!0,message:"SMTP身份验证码必填"}]}}},computed:{},created:function(){this.getData()},mounted:function(){},methods:{getData:function(){var t=this;this.$api.noticeApi.getMailer({}).then((function(e){if(0===e.error){var a=e.status,n=e.type,i=(0,r.default)(e,o);t.cacheData=i,t.model=(0,l.default)((0,l.default)({status:+a,type:n},i[n]),{},{ssl:i[n].ssl.toString()})}t.loading=!1}))},changeType:function(t){this.model=(0,l.default)((0,l.default)({status:1,type:t},this.cacheData[t]),{},{ssl:this.cacheData[t].ssl.toString()})},testSend:function(){var t=this,e=this.handleParams();this.$api.noticeApi.testSendMailer(e).then((function(e){0===e.error&&t.$Message.success("发送成功")}))},handleSave:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.submitLoading=!0,e.prev=1,1!=t.model.status){e.next=5;break}return e.next=5,t.validateForm();case 5:t.submit(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.submitLoading=!1;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},validateForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate((function(t){t?e(t):a()}))}))},handleParams:function(){var t=this.model,e=t.status,a=t.type,n=(0,r.default)(t,c),s=(0,i.default)({status:e,type:a},a,n);return s},submit:function(){var t=this,e=this.handleParams();this.$api.noticeApi.setMailer(e).then((function(e){t.submitLoading=!1,0===e.error&&t.$Message.success("保存成功")}))}}};e.default=d},"4ed1b":function(t,e,a){"use strict";a.r(e);var n=a("0a3c"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},5475:function(t,e,a){},5983:function(t,e,a){"use strict";a("7d2b")},"5a61":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("b64b");var i=n(a("579b")),s={name:"list",components:{},props:{type:{type:Object,default:function(){}},is_title:{type:Boolean,default:!0}},data:function(){return{loading:!1,templateCode:i.default,list:[],typeTitle:{basic:"基础通知",sale:"营销通知",verify_code:"验证码",buyer_notice:"买家通知",seller_notice:"卖家通知"}}},watch:{type:{handler:function(t){this.getList(t)},deep:!0,immediate:!0}},computed:{},created:function(){},mounted:function(){},methods:{getList:function(t){var e=this;this.loading=!0,this.$api.noticeApi.getNoticeList(t).then((function(t){e.loading=!1,e.list=t.data}))},toDetail:function(t,e){var a={type_code:t,items:Object.keys(e)};this.$emit("toDetail",a)}}};e.default=s},"5cd6":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("9794")),s={name:"index",components:{noticeIndex:i.default},props:{},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{}};e.default=s},"68a8":function(t,e,a){"use strict";a.r(e);var n=a("4df8"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"73b6":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sms-test"},[a("kdx-form-title",[t._v("短信测试")]),a("Form",{ref:"form",attrs:{"label-width":120,model:t.smsTest,rules:t.rules}},[a("FormItem",{attrs:{label:"手机号：",prop:"mobile"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"请输入手机号码"},model:{value:t.smsTest.mobile,callback:function(e){t.$set(t.smsTest,"mobile",e)},expression:"smsTest.mobile"}})],1),a("FormItem",{attrs:{label:"测试数据："}},[t.tableData.length<1?a("div",[t._v(t._s(t.errors))]):t._e(),t._l(t.tableData,(function(e,n){return a("div",{key:n,staticClass:"flex var-box"},[a("Input",{staticClass:"width-300",attrs:{readonly:!0},model:{value:e.data_temp,callback:function(a){t.$set(e,"data_temp",a)},expression:"item.data_temp"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("短信模板变量")])]),a("Input",{staticClass:"width-300",model:{value:e.data_temp_test,callback:function(a){t.$set(e,"data_temp_test",a)},expression:"item.data_temp_test"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("短信模板变量值")])])],1)})),a("Button",{attrs:{type:"text"},on:{click:t.send}},[t._v("发送测试")])],2)],1)],1)},i=[]},"7ab2":function(t,e,a){"use strict";a.r(e);var n=a("5cd6"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"7d2b":function(t,e,a){},8294:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"notice-buyer-index"},[t.is_title?a("kdx-form-title",[t._v(t._s(t.typeTitle[t.type.group_item_name]))]):t._e(),a("div",{staticClass:"flex notice-buyer-index-box"},t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"notice-list-box",on:{click:function(a){return t.toDetail(e.scene_code,e.item)}}},[a("Card",{staticClass:"notice-list"},[a("div",{staticClass:"card-title flex space-between",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"flex align-center"},[a("i",{staticClass:"iconfont",class:t.templateCode[e.scene_code].icon}),a("span",{staticClass:"title-name"},[t._v(t._s(t.templateCode[e.scene_code].title))])]),a("div",[a("i",{staticClass:"iconfont icon-line-right"})])]),e.item?a("div",{staticClass:"list-card-content"},[e.item.wechat?a("div",{staticClass:"flex list-card-child"},[a("div",[t._v("微信模板消息")]),a("i",{staticClass:"iconfont",class:1==e.item.wechat.status?"icon-chenggong-shixin success-color":"icon-del danger-color"})]):t._e(),e.item.sms?a("div",{staticClass:"flex list-card-child"},[a("div",[t._v(t._s("verify_code"==t.type.group_item_name?"短信验证":"短信通知"))]),a("i",{staticClass:"iconfont",class:1==e.item.sms.status?"icon-chenggong-shixin success-color":"icon-del danger-color"})]):t._e(),e.item.wxapp?a("div",{staticClass:"flex list-card-child"},[a("div",[t._v("微信小程序订阅消息")]),a("i",{staticClass:"iconfont",class:1==e.item.wxapp.status?"icon-chenggong-shixin success-color":"icon-del danger-color"})]):t._e(),e.item.subscribe?a("div",{staticClass:"flex list-card-child"},[a("div",[t._v("微信公众号订阅通知")]),a("i",{staticClass:"iconfont",class:1==e.item.subscribe.status?"icon-chenggong-shixin success-color":"icon-del danger-color"})]):t._e()]):t._e()])],1)})),0)],1)])},i=[]},8878:function(t,e,a){"use strict";a.r(e);var n=a("4b25"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"8ddb":function(t,e,a){"use strict";a.r(e);var n=a("945a"),i=a("d762");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("b9e0");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,"dcec1c6a",null);e["default"]=r.exports},"8df4d":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("9794")),s={name:"index",components:{noticeIndex:i.default},props:{},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{}};e.default=s},"8edb":function(t,e,a){"use strict";a("ddc1")},"8f03":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=[{value:"[订单类]",label:"订单类",children:[{value:"[订单信息]",label:"订单信息",children:[{value:"[商城名称]",label:"商城名称"},{value:"[商品名称]",label:"商品名称"},{value:"[会员昵称]",label:"会员昵称"},{value:"[订单编号]",label:"订单编号"},{value:"[支付金额]",label:"支付金额"},{value:"[运费]",label:"运费"},{value:"[商品详情]",label:"商品详情"},{value:"[快递公司]",label:"快递公司"},{value:"[快递单号]",label:"快递单号"},{value:"[买家姓名]",label:"买家姓名"},{value:"[买家电话]",label:"买家电话"},{value:"[收货地址]",label:"收货地址"},{value:"[下单时间]",label:"下单时间"},{value:"[支付时间]",label:"支付时间"},{value:"[发货时间]",label:"发货时间"},{value:"[收货时间]",label:"收货时间"},{value:"[积分变动]",label:"积分变动"},{value:"[积分余额]",label:"积分余额"},{value:"[订单状态]",label:"订单状态"},{value:"[买家备注]",label:"买家备注"}]},{label:"售后相关",value:"[售后相关]",children:[{value:"[订单编号]",label:"订单编号"},{value:"[售后类型]",label:"售后类型"},{value:"[申请时间]",label:"申请时间"},{value:"[退款金额]",label:"退款金额"},{value:"[退货地址]",label:"退货地址"},{value:"[换货快递公司]",label:"换货快递公司"},{value:"[换货快递单号]",label:"换货快递单号"},{value:"[退款状态]",label:"退款状态"}]}]},{value:"[账户变动类]",label:"账户变动类",children:[{value:"[变动账户]",label:"变动账户"},{value:"[变动时间]",label:"变动时间",children:[{value:"[充值时间]",label:"充值时间"},{value:"[退款时间]",label:"退款时间"},{value:"[提现时间]",label:"提现时间"}]},{value:"[变动金额]",label:"变动金额",children:[{value:"[充值金额]",label:"充值金额"},{value:"[退款金额]",label:"退款金额"},{value:"[提现金额]",label:"提现金额"}]},{value:"[账户余额]",label:"账户余额",children:[{value:"[账户余额]",label:"账户余额"},{value:"[账户积分]",label:"账户积分"},{value:"[变动类型]",label:"变动类型"}]},{value:"[优惠券类型]",label:"优惠券类型"},{value:"[发放状态]",label:"发放状态"},{value:"[发放时间]",label:"发放时间"}]},{value:"[注册登录类]",label:"注册登录类",children:[{value:"[验证码]",label:"验证码"}]},{value:"[分销类]",label:"分销类",children:[{value:"[分销身份变更]",label:"分销身份变更",children:[{value:"[商城名称]",label:"商城名称"},{value:"[用户昵称]",label:"用户昵称"},{value:"[手机号]",label:"手机号"},{value:"[变动时间]",label:"变动时间"},{value:"[下级昵称]",label:"下级昵称"},{value:"[下级等级]",label:"下级等级"},{value:"[旧等级]",label:"旧等级"},{value:"[新等级]",label:"新等级"}]},{value:"[分销订单]",label:"分销订单",children:[{value:"[订单编号]",label:"订单编号"},{value:"[订单金额]",label:"订单金额"},{value:"[佣金金额]",label:"佣金金额"},{value:"[商品名称]",label:"商品名称"},{value:"[付款时间]",label:"付款时间"},{value:"[下级层级]",label:"下级层级"}]},{value:"[佣金与提现]",label:"佣金与提现",children:[{value:"[提现时间]",label:"提现时间"},{value:"[提现金额]",label:"提现金额"},{value:"[审核结果]",label:"审核结果"}]}]}],n=a;e.default=n},"945a":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",[a("div",{staticClass:"weixin-template-add"},[a("Form",{ref:"form",attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"模板ID："}},[a("span",[t._v(t._s(t.templateData.template_id))])]),a("FormItem",{attrs:{label:"模板名称："}},[a("span",[t._v(t._s(t.templateData.title))])]),a("FormItem",{attrs:{label:"所属行业："}},[a("span",[t._v(t._s(t.templateData.deputy_industry))])]),a("FormItem",{attrs:{label:"模板格式："}},[a("div",{staticClass:"template-content"},[t._v(t._s(t.templateData.content))])]),a("FormItem",{attrs:{label:"模板示例："}},[a("div",{staticClass:"template-content"},[t._v(t._s(t.templateData.example))])])],1)],1)])},i=[]},9723:function(t,e,a){},9788:function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("487f")),s={name:"index",components:{noticeList:i.default},props:{},data:function(){return{type:{group_name:"seller_notice",group_item_name:"seller_notice"}}},computed:{},created:function(){},mounted:function(){},methods:{toDetail:function(t){this.$router.push({path:"/notice/seller/seller_notice/index",query:{type_code:t.type_code,items:t.items}})}}};e.default=s},"97d7":function(t,e,a){"use strict";a.r(e);var n=a("3af6"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},a324:function(t,e,a){"use strict";a.r(e);var n=a("168d"),i=a("d22c");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("0f9e");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},a3a4:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("notice-index",{attrs:{is_showNoticeMember:!0}})},i=[]},a7f5:function(t,e,a){"use strict";a.r(e);var n=a("d564"),i=a("40bf");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},acd9:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"notice-sms-list"},[a("kdx-header-bar",{scopedSlots:t._u([{key:"header",fn:function(){return[a("Button",{attrs:{type:"primary"},on:{click:t.handlerAdd}},[t._v("+添加模板")])]},proxy:!0}])},[a("Form",{ref:"form",attrs:{model:t.search,"label-width":120,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"模板名称："}},[a("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入关键字"},on:{"on-enter":t.handleSearch},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),a("div",{staticClass:"ivu-form-item-btn"},[a("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),a("Button",{staticClass:"mL-20",attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"sms-list"},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},on:{"on-selection-change":t.selectChange}}),t.data.length>0?a("div",{staticClass:"footer-action"},[a("Checkbox",{on:{"on-change":t.checkboxChange},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}}),a("Button",{attrs:{disabled:t.selectDisabled},on:{click:t.bulkDelete}},[t._v("删除")])],1):t._e(),a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.page.total},on:{"on-change":t.changePage}})],1)],1),a("kdx-modal-frame",{attrs:{title:"测试发送"},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.sendModal,callback:function(e){t.sendModal=e},expression:"sendModal"}},[a("div",{staticClass:"send-modal"},[a("Form",{ref:"sendModal",attrs:{"label-width":120,model:t.submitSendData,rules:t.sendRule}},[a("FormItem",{staticStyle:{"margin-top":"20px"},attrs:{label:"手机号：",prop:"mobile"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"请输入被发送手机号"},model:{value:t.submitSendData.mobile,callback:function(e){t.$set(t.submitSendData,"mobile",e)},expression:"submitSendData.mobile"}})],1),a("FormItem",{attrs:{label:"数据值：",required:""}},t._l(t.sendData.data,(function(e,n){return a("div",{key:n,staticClass:"data-value",staticStyle:{"margin-bottom":"20px"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"此处请填写变量"},model:{value:e.data_shop,callback:function(a){t.$set(e,"data_shop",a)},expression:"item.data_shop"}},[a("span",{staticStyle:{padding:"4px 32px"},attrs:{slot:"prepend"},slot:"prepend"},[t._v(t._s(e.data_temp))])])],1)})),0)],1)],1)]),t._t("default")],2)},i=[]},b9e0:function(t,e,a){"use strict";a("4743")},bca7c:function(t,e,a){t.exports=a.p+"static/dist/shop/img/send-theme.png"},c069:function(t,e,a){"use strict";a.r(e);var n=a("e533"),i=a("97d7");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("5983");var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},c20b:function(t,e,a){"use strict";a.r(e);var n=a("5a61"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},c2a8:function(t,e,a){"use strict";a("496b")},cba3:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={components:{},props:{},data:function(){return{id:"",templateData:{}}},computed:{},created:function(){},mounted:function(){this.id=this.$route.query.id,this.getData()},methods:{getData:function(){var t=this;this.$api.noticeApi.getWexinTemplateDetail({template_id:this.id}).then((function(e){t.templateData=e}))}}};e.default=a},d22c:function(t,e,a){"use strict";a.r(e);var n=a("3ac9"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},d4d4:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"sms-set"},[a("div",{staticClass:"header"},[a("kdx-form-title",{attrs:{"has-margin":!1}},[t._v("短信接口")])],1),a("Form",{ref:"form",attrs:{"label-width":160,model:t.data,rules:t.rule}},[a("FormItem",{attrs:{label:"短信平台："}},[a("RadioGroup",{model:{value:t.data.type,callback:function(e){t.$set(t.data,"type",e)},expression:"data.type"}},[a("Radio",{attrs:{label:"aliyun"}},[a("span",[t._v("阿里云短信")])])],1),a("div",{staticClass:"sms-set-block"},[a("FormItem",{attrs:{label:"Access Key ID：",prop:"aliyun.access_key_id"}},[a("Input",{staticClass:"width-330",model:{value:t.data.aliyun.access_key_id,callback:function(e){t.$set(t.data.aliyun,"access_key_id",e)},expression:"data.aliyun.access_key_id"}}),a("kdx-hint-text",[t._v("点击"),a("a",{staticClass:"brand-color",attrs:{target:"_blank",href:"https://home.console.aliyun.com/"}},[t._v("【立即申请】")]),t._v("，注册完毕后输入保存后生效。")])],1),a("FormItem",{attrs:{label:"Access Key Secret：",prop:"aliyun.access_key_secret"}},[a("Input",{staticClass:"width-330",model:{value:t.data.aliyun.access_key_secret,callback:function(e){t.$set(t.data.aliyun,"access_key_secret",e)},expression:"data.aliyun.access_key_secret"}})],1)],1),"juhe"==t.data.type?a("div",{staticClass:"sms-set-block"},[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"App Key：",prop:"juhe.app_key"}},[a("Input",{staticClass:"width-330",model:{value:t.data.juhe.app_key,callback:function(e){t.$set(t.data.juhe,"app_key",e)},expression:"data.juhe.app_key"}}),a("kdx-hint-text",[t._v("没有这个地址id请"),a("a",{staticClass:"brand-color",attrs:{target:"_blank",href:"http://www.juhe.cn"}},[t._v("【立即申请】")])])],1)],1):t._e()],1)],1)],1)])},i=[]},d564:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("notice-index")},i=[]},d762:function(t,e,a){"use strict";a.r(e);var n=a("cba3"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},d844:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wechat-list"},[a("div",{staticClass:"wechat-list-alert"},[a("kdx-hint-alert",{attrs:{"show-icon":!1}},[a("p",[t._v("注意：")]),a("p",[t._v("请将公众平台模板消息所在行业选择为："),a("span",{staticClass:"bold warning-color"},[t._v("IT科技 / 互联网|电子商务 / 其他/其他")]),t._v("，所选行业不一致将会导致模板消息不可用。")]),a("p",[t._v("您的公众平台模板消息目前所属行业为："),a("span",{staticClass:"bold warning-color"},[t._v(t._s(t.industry.join(" / ")))])]),a("p",[t._v("当前列表内的模板消息为您已申请的模板消息，您可以点击查看详情或者删除处理。")])])],1),a("kdx-header-bar",[a("Form",{ref:"form",attrs:{model:t.search,"label-width":30,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",[a("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入模板编码"},on:{"on-enter":t.add},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1),a("div",{staticClass:"ivu-form-item-btn"},[a("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加微信模板")])],1)],1)],1),a("div",{staticClass:"weixin-template"},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.data},on:{"on-selection-change":t.selectChange}}),t.data.length>0?a("div",{staticClass:"footer-action"},[a("Checkbox",{on:{"on-change":t.checkboxChange},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}}),a("Button",{attrs:{disabled:t.selectDisabled},on:{click:t.bulkDelete}},[t._v("删除")])],1):t._e()],1),t._t("default")],2)},i=[]},d8e2:function(t,e,a){"use strict";a.r(e);var n=a("4ed1"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},dbeb:function(t,e,a){"use strict";a.r(e);var n=a("a3a4"),i=a("7ab2");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},ddc1:function(t,e,a){},de1e:function(t,e,a){t.exports=a.p+"static/dist/shop/img/qq.png"},e0d5:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7");var n={name:"SmsTest",components:{},props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{errors:"未找到任何变量",smsTest:{mobile:"",test_data:""},rules:{mobile:[{pattern:/^[1][3,4,5,6,7,8,9][0-9]{9}$/,message:"请输入11位手机号"}]}}},computed:{},created:function(){},mounted:function(){},methods:{validateTestForm:function(){var t=this;return new Promise((function(e,a){t.$refs["form"].validate((function(n){if(n){for(var i={mobile:t.smsTest.mobile,data:{}},s=0;s<t.tableData.length;s++)i.data[t.tableData[s].data_temp]=t.tableData[s].data_temp_test;e(i)}else a()}))}))},send:function(){this.$emit("send")}}};e.default=n},e403:function(t,e,a){t.exports=a.p+"static/dist/shop/img/163.png"},e533:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"sms-template-index"},[a("kdx-form-title",[t._v(t._s(t.type))]),a("Form",{ref:"form",attrs:{"label-width":120,model:t.temData,rules:t.rules}},[a("FormItem",{attrs:{label:"模板ID：",prop:"sms_tpl_id"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"请输入模板ID"},model:{value:t.temData.sms_tpl_id,callback:function(e){t.$set(t.temData,"sms_tpl_id",e)},expression:"temData.sms_tpl_id"}}),a("kdx-hint-text",[t._v("在阿里云短信平台申请且审核通过的短信模板ID（模版CODE）")])],1),a("FormItem",{attrs:{label:"模板名称：",prop:"name"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"请输入模板名称",maxlength:"30","show-word-limit":""},model:{value:t.temData.name,callback:function(e){t.$set(t.temData,"name",e)},expression:"temData.name"}}),a("kdx-hint-text",[t._v("自定义填写，便于后台搜索查询选择。")])],1),a("FormItem",{attrs:{label:"发送条件",prop:"scene_code"}},[a("Select",{staticClass:"width-340",model:{value:t.temData.scene_code,callback:function(e){t.$set(t.temData,"scene_code",e)},expression:"temData.scene_code"}},t._l(t.sceneList,(function(e){return a("Option",{key:e.scene_code,attrs:{value:e.scene_code}},[t._v(t._s(e.title)+" ")])})),1),a("kdx-hint-text",[t._v("选择模板发送的业务场景")])],1),a("FormItem",{attrs:{label:"模板内容：",prop:"content"}},[a("Input",{staticClass:"width-340",attrs:{type:"textarea",placeholder:"变量格式：${code}；示例：您的验证码${code}，该验证码5分钟内有效，请勿泄漏于他人！"},on:{"on-change":t.getVars},model:{value:t.temData.content,callback:function(e){t.$set(t.temData,"content",e)},expression:"temData.content"}}),a("kdx-hint-text",[a("p",[t._v("验证码模板只支持验证码作为变量；变量替换值<=6位数字或字母")]),a("p",[t._v("不能发送营销/贷款/借款/中奖/抽奖类短信,不支持金融理财&房产通知类短信(验证码除外)")])])],1),a("FormItem",{attrs:{label:"数据值："}},[a("span",[t._v(t._s(t.errors))]),t._l(t.tableData,(function(e,n){return a("div",{key:n,staticClass:"flex var-box"},[a("Input",{staticClass:"width-300",attrs:{readonly:!0},model:{value:e.data_temp,callback:function(a){t.$set(e,"data_temp",a)},expression:"item.data_temp"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("短信模板变量")])]),a("div",{staticClass:"shop-var"},[t._v("商城变量")]),a("Cascader",{attrs:{data:t.codeList,"render-format":t.format},model:{value:e.data_shop,callback:function(a){t.$set(e,"data_shop",a)},expression:"item.data_shop"}})],1)})),a("kdx-hint-text",[t._v("阿里短信数据只是用${号，如${code}。需在数据值中填写商城的变量")])],2),a("FormItem",{attrs:{label:"短信签名：",prop:"sms_sign"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"请输入签名",maxlength:"12","show-word-limit":""},model:{value:t.temData.sms_sign,callback:function(e){t.$set(t.temData,"sms_sign",e)},expression:"temData.sms_sign"}}),a("kdx-hint-text",[t._v("在阿里云短息平台申请且审核通过的短信签名")])],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"状态：",prop:"state"}},[a("RadioGroup",{model:{value:t.temData.state,callback:function(e){t.$set(t.temData,"state",e)},expression:"temData.state"}},[a("Radio",{attrs:{label:1}},[a("span",[t._v("启用")])]),a("Radio",{attrs:{label:0}},[a("span",[t._v("禁用")])])],1),a("kdx-hint-text",[t._v("关闭后将不能调用")])],1)],1),a("sms-test",{ref:"testSms",attrs:{tableData:t.tableData},on:{send:t.send}})],1)])},i=[]},f62b:function(t,e,a){t.exports=a.p+"static/dist/shop/img/send-name.png"},fc21:function(t,e,a){"use strict";a.r(e);var n=a("73b6"),i=a("09e3");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);var l=a("2877"),r=Object(l["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports}}]);