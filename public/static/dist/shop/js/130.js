(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[130],{26665:function(e,t,i){},"48f7":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-content-bar",{attrs:{loading:e.loading},scopedSlots:e._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",attrs:{disabled:e.noManagePerm},on:{click:e.handleSave}},[e._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"article-settings"},[a("kdx-form-title",[e._v("功能设置")]),a("Form",{ref:"form",attrs:{model:e.model,"label-width":160,rules:e.rule},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{staticClass:"title",attrs:{label:"文章标题栏自定义：",prop:"title"}},[a("Input",{staticClass:"width-430",attrs:{type:"text"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}}),a("kdx-hint-text",[e._v(" 支持专题页面名称自定义 "),a("kdx-hint-tooltip",{staticClass:"tooltip",attrs:{type:"image",image:i("d82c")}})],1)],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"文章模板：",prop:"template_type"}},[a("RadioGroup",{staticClass:"radio-box",on:{"on-change":e.handleChange},model:{value:e.model.template_type,callback:function(t){e.$set(e.model,"template_type",t)},expression:"model.template_type"}},[a("Radio",{attrs:{label:"1"}},[e._v(" 小图模式 "),a("kdx-hint-tooltip",{staticClass:"tooltip",attrs:{type:"image",hintText:"",image:i("a896")}})],1),a("Radio",{attrs:{label:"2"}},[e._v(" 瀑布流 "),a("kdx-hint-tooltip",{staticClass:"tooltip",attrs:{type:"image",hintText:"",image:i("d077")}})],1)],1)],1),a("FormItem",{staticClass:"add-img",attrs:{label:"文章页面banner：",prop:"banner"}},[a("DragSortableItems",{staticClass:"banner-item",attrs:{list:e.model.banner},on:{delItem:e.delItem},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("AddImg",{attrs:{draggable:!1,tip:"图片宽度建议750px",item:i,url:"imgurl",link:"linkurl"},on:{"change-img":e.changeImg,"change-link":e.changeLink}})]}}])}),e.model.banner.length<5?a("i-button",{style:{width:"100%",color:e.$css["--brand-color"],marginTop:"10px"},on:{click:e.addItem}},[e._v("+添加图片")]):e._e()],1),a("FormItem",{attrs:{label:"文章详情页客服：",prop:"customer"}},[e.customerList.length?a("MyRadioGroup",{key:"index",staticClass:"customer-radio",attrs:{items:e.customerList},on:{change:e.chooseCustomer},model:{value:e.model.customer,callback:function(t){e.$set(e.model,"customer",t)},expression:"model.customer"}},["wechat"==e.model.customer?a("div",[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"link_url","label-width":0}},[a("WxCustomerService",{attrs:{currentUrl:e.model},on:{"on-change":e.selectCustomerLink}})],1)],1):e._e()]):e._e()],1),a("FormItem",{staticClass:"time",attrs:{label:"转发奖励时间：",prop:"reward_time_limit"}},[e._v(" 被分享者阅读 "),a("kdx-rr-input",{staticClass:"time-input width-100",attrs:{placeholder:"请输入",number:"",fixed:0,"min-value":10,"max-value":60},model:{value:e.model.reward_time_limit,callback:function(t){e.$set(e.model,"reward_time_limit",t)},expression:"model.reward_time_limit"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("秒")])]),e._v(" 进行奖励发放 ")],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"文章页面菜单：",prop:"bottom_menu"}},[a("RadioGroup",{staticClass:"radio-box",model:{value:e.model.bottom_menu,callback:function(t){e.$set(e.model,"bottom_menu",t)},expression:"model.bottom_menu"}},[a("Radio",{attrs:{label:"1"}},[e._v(" 显示 ")]),a("Radio",{attrs:{label:"0"}},[e._v(" 隐藏 ")])],1),a("kdx-hint-text",[e._v("支持专题文章列表页面自定义显示商城默认底部导航")])],1)],1)],1)])},n=[]},8739:function(e,t,i){"use strict";i.r(t);var a=i("48f7"),n=i("9a6a");for(var r in n)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("abb1"),i("b46d");var l=i("2877"),o=Object(l["a"])(n["default"],a["a"],a["b"],!1,null,"3d2508fe",null);t["default"]=o.exports},"92ac":function(e,t,i){},"9a6a":function(e,t,i){"use strict";i.r(t);var a=i("b34b"),n=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},a896:function(e,t,i){e.exports=i.p+"static/dist/shop/img/article_small.png"},abb1:function(e,t,i){"use strict";i("26665")},b34b:function(e,t,i){var a=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("5530"));i("d3b7"),i("159b"),i("a434"),i("b0c0"),i("d81d"),i("e9c4"),i("9911");var r=a(i("5471")),l=a(i("352d")),o=a(i("c833")),s=a(i("6238")),m={renxinyun:"rr",wx_service:"wx",customer_service:"tx",wechat_customer_service:"wechat"},c={provide:{chooseTab:"article"},components:{MyRadioGroup:r.default,DragSortableItems:l.default,AddImg:o.default,WxCustomerService:s.default},data:function(){return{loading:!1,model:{title:"",template_type:"1",bottom_menu:"0",banner:[{imgurl:"",linkurl:""}],customer:"0",customerChannel:"0",link_url:"",customerName:"",reward_time_limit:15,click_save_type:"0"},rule:{title:[{required:!0,message:"专题页面名称必填"}],banner:[{validator:function(e,t,i){var a=!1;t.forEach((function(e){e.linkurl&&!e.imgurl&&(a=!0)})),a?i(new Error("图片必选")):i()}}],reward_time_limit:[{required:!0,message:"转发奖励时间必填"}],customer:[{required:!0,message:"请选择文章详情页客服"}],link_url:[{required:!0,message:"请选择客服"}]},customer_service:null,customerList:[],customerChannelList:[{label:"原生客服",id:"0"},{label:"企业微信客服",id:"1"}]}},created:function(){this.getCustomerLink(),this.getData()},computed:{noManagePerm:function(){return!this.$getPermMap("article.settings.manage")}},methods:{clear:function(){var e=this;this.$Modal.confirm({title:"提示",content:"确定清除附件缓存",onOk:function(){e.$api.articleApi.clearData().then((function(t){0===t.error&&e.$Message.success("清除成功")}))}})},getData:function(){var e=this;this.loading=!0,this.$api.articleApi.getArticleSettings().then((function(t){0===t.error&&(t.data.customerChannel=t.data.customer_channel,t.data.customerName=t.data.customer_name,delete t.data.customer_channel,delete t.data.customer_name,e.model=t.data)})).finally((function(){e.loading=!1}))},handleChange:function(e){"2"==e&&this.$Modal.info({title:"提示",content:"切换模式可能会导致封面图片适配问题，如有问题，请前往文章进行相应编辑"})},delItem:function(e){for(var t=0;t<this.model.banner.length;t++)if(e===this.model.banner[t]){this.model.banner.splice(t,1);break}},addItem:function(){this.model.banner.length<5&&this.model.banner.push({imgurl:"",linkurl:""})},changeLink:function(e,t){t.linkurl=e.url,t.linkurl_name=e.name},changeImg:function(e,t){t.imgurl=e},handleSave:function(){var e=this;this.loading=!0,this.$refs["form"].validate((function(t){if(t){var i=e.model.banner.map((function(e){return{imgurl:e.imgurl,linkurl:e.linkurl,linkurl_name:e.linkurl_name}})),a=(0,n.default)({},e.model);a.banner=i,a.customer_channel=a.customerChannel,a.customer_name=a.customerName,delete a.customerChannel,delete a.customerName,e.$api.articleApi.setArticleSettings({data:JSON.stringify(a)}).then((function(t){0===t.error&&(e.$Message.success("操作成功"),e.getData())}))}})).finally((function(){e.loading=!1}))},getCustomerLink:function(){var e=this;this.$api.shopApi.getLinkList().then((function(t){if(0===t.error){var i,a;for(var n in e.customerList=[],t.service)e.customerList.push({id:m[n],label:t.service[n].name});e.customerList.push({id:"0",label:"关闭"}),e.customer_service=(null===t||void 0===t||null===(i=t.service)||void 0===i||null===(a=i.customer_service)||void 0===a?void 0:a.url)||null}}))},chooseCustomer:function(e){"wx"===e?this.model.link_url="wx_service":"rr"===e?"0"===this.model.customerChannel?this.model.link_url="/pagesCustomer/index":(this.model.link_url="",this.model.customerName=""):"tx"===e?this.model.link_url=this.customer_service:"wechat"==e&&(this.model.link_url="",this.model.customerName="")},chooseCustomerChannel:function(e){this.model.customerChannel=e,"0"===e?this.model.link_url="/pagesCustomer/index":(this.model.link_url="",this.model.customerName="")},selectCustomerLink:function(e){e.link?(this.model.link_url=e.link,this.model.customerName=e.username||e.name):(this.model.link_url="",this.model.customerName="")}}};t.default=c},b46d:function(e,t,i){"use strict";i("92ac")},d077:function(e,t,i){e.exports=i.p+"static/dist/shop/img/article_waterfall.png"},d82c:function(e,t,i){e.exports=i.p+"static/dist/shop/img/article_title.png"}}]);