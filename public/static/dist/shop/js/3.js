(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0b05":function(e,t,a){"use strict";a.r(t);var i=a("80fd"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"1c03":function(e,t,a){"use strict";a.r(t);var i=a("4928"),s=a("f518");for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("413a");var r=a("2877"),l=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"71c5881c",null);t["default"]=l.exports},2206:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-express"},[a("Select",{attrs:{filterable:""},on:{"on-change":e.handleChange},model:{value:e.express,callback:function(t){e.express=t},expression:"express"}},e._l(e.optionData,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+" ")])})),1),a("div",{staticClass:"express-tag"},e._l(e.common,(function(t){return a("span",{key:t.id,class:{checked:t.id===e.express},on:{click:function(a){return e.handleChange(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0)],1)},s=[]},"294d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-modal-frame",{attrs:{title:"查看物流",width:700,loading:e.loading,"cancel-text":"关闭","is-ok":!1},on:{"on-cancel":e.handleCancel},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"order-list-package-express"},[a("div",{staticClass:"logistics"},[a("div",{staticClass:"name"},[e._v(e._s(e.express_com))]),a("div",{staticClass:"number"},[e._v(e._s(e.express_sn))]),a("kdx-copy-text",{attrs:{text:e.express_sn}},[a("Button",{attrs:{type:"text",size:"small"}},[e._v("复制")])],1)],1),e.data&&e.data.length>0?a("ul",[a("li",{staticClass:"header"},[a("div",{staticClass:"time"},[e._v(" 时间 ")]),a("div",{staticClass:"schedule"},[e._v(" 地址和跟踪进度 ")])]),e._l(e.data,(function(t,i){return a("li",{key:i,class:0===i?"active":"disabled"},[a("div",{staticClass:"time",domProps:{innerHTML:e._s(e.getTime(t.date_time))}}),a("div",{staticClass:"schedule"},[e._v(" "+e._s(t.step)+" ")]),i!==e.data.length-1?a("div",{staticClass:"line"}):e._e(),3==e.status&&0===i?a("Icon",{staticClass:"icon",attrs:{type:"ios-checkmark-circle"}}):3!==e.status&&0===i||i===e.data.length-1?a("Icon",{staticClass:"icon",attrs:{type:"md-radio-button-on"}}):a("Icon",{staticClass:"icon",attrs:{type:"ios-arrow-dropup-circle"}})],1)}))],2):a("div",{staticStyle:{"text-align":"center","padding-top":"20px"}},[e._v(" 暂无物流信息 ")])])])},s=[]},3025:function(e,t,a){"use strict";a.r(t);var i=a("ddfc"),s=a("4b07");for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("aee2");var r=a("2877"),l=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"59c33896",null);t["default"]=l.exports},"392e":function(e,t,a){"use strict";a.r(t);var i=a("2206"),s=a("df89");for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("9ad5");var r=a("2877"),l=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"83c54aaa",null);t["default"]=l.exports},"3db5":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a("3025")),n={name:"CommissionEdit",props:{visible:{type:Boolean,default:!1},orderId:String,orderNo:String,memberId:String},components:{CommisionTable:s.default},data:function(){return{value:!1,list:[],member_info:{},editable:!1}},watch:{visible:{handler:function(){this.value=this.visible,this.visible&&this.getInfo()},immediate:!0}},methods:{getInfo:function(){var e=this;this.$api.orderApi.getCommisionInfo({order_id:this.orderId,member_id:this.memberId}).then((function(t){if(0===t.error){var a=t.member_info,i=t.commission_info,s=t.is_can_edit;e.list=i,e.member_info=a,e.editable=s}}))},goMember:function(){this.$utils.openNewWindowPage("/member/detail",{id:this.memberId})},cancelHandler:function(){this.$emit("update:visible",!1),this.value=!1},resetTable:function(){this.$refs.table.refreshData()},sureHandler:function(){var e=this,t=this.$refs.table.dealData(),a={order_id:this.orderId,member_id:this.memberId,commission_info:t};this.$api.orderApi.editCommisionInfo(a).then((function(t){0===t.error&&(e.cancelHandler(),e.$emit("on-success"),e.$Message.success("操作成功"))}))}}};t.default=n},"413a":function(e,t,a){"use strict";a("fc03")},4928:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-modal-frame",{attrs:{title:"修改佣金",width:970},on:{"on-cancel":e.cancelHandler},scopedSlots:e._u([{key:"footer",fn:function(){return[a("Button",{staticClass:"default-long",on:{click:e.cancelHandler}},[e._v("取消")]),a("Button",{staticClass:"default-long",on:{click:e.resetTable}},[e._v("恢复默认")]),a("Button",{staticClass:"primary-long",attrs:{disabled:!e.editable},on:{click:e.sureHandler}},[e._v("确认修改")])]},proxy:!0}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("会员名称：")]),a("img",{staticClass:"user-avatar",attrs:{src:e.member_info.avatar||e.$utils.staticImg("decorate/avatar_mobile.png")}}),a("span",{staticClass:"user-name",on:{click:e.goMember}},[e._v(e._s(e.member_info.nickname))]),a("span",{staticClass:"label"},[e._v("手机号码：")]),a("span",{staticClass:"value"},[e._v(e._s(e.member_info.mobile))])]),a("div",{staticClass:"item order"},[a("div",[a("span",{staticClass:"label"},[e._v("订单编号：")]),a("span",{staticClass:"value"},[e._v(e._s(e.orderNo))])]),a("span",{staticClass:"tip"},[e._v("提示：不能修改的佣金为已申请或已结算佣金")])]),a("commision-table",{ref:"table",attrs:{editable:e.editable,data:e.list}})],1)])},s=[]},"4b07":function(e,t,a){"use strict";a.r(t);var i=a("e701"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"4e2c":function(e,t,a){"use strict";a("a4cb")},"5d73":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"SelectTableList",props:{data:{type:Array,default:function(){return[]},required:!0},multiple:{type:Boolean,default:!1}},data:function(){return{columns:[{title:"包裹",key:"checkbox",width:100},{title:"商品",key:"shop",width:350},{title:"数量",key:"number",width:100}]}},methods:{handleChange:function(e,t){this.$emit("on-change",e,t)}}};t.default=a},7789:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("kdx-modal-frame",{attrs:{title:"修改物流信息",width:700,loading:e.loading},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"order-list-edit-express"},[e.isMultiple?[a("kdx-hint-alert",{staticClass:"marginB-10",attrs:{"show-icon":!1,type:"info"}},[e._v("选择需要修改物流信息的包裹")]),a("div",{staticClass:"table-list"},[a("select-table-list",{attrs:{data:e.data.packages},on:{"on-change":e.selectChange}})],1)]:e._e(),a("Form",{ref:"form",attrs:{model:e.model,rules:e.rules,"label-width":120},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormItem",{staticClass:"r-form-item-text",attrs:{label:"收货人姓名："}},[e._v(" "+e._s(e.data.buyer_name)+" ")]),a("FormItem",{staticClass:"r-form-item-text",attrs:{label:"联系方式："}},[e._v(" "+e._s(e.data.buyer_mobile)+" ")]),a("FormItem",{staticClass:"r-form-item-text",attrs:{label:"收货地址："}},[e._v(" "+e._s(e.data.address)+" ")]),a("FormItem",{attrs:{label:"选择快递公司：",prop:"express_id"}},[a("select-express",{staticClass:"width-340",attrs:{value:e.model.express_id,"option-data":e.data.express},on:{"update:value":function(t){return e.$set(e.model,"express_id",t)}}})],1),96==e.model.express_id?a("FormItem",{attrs:{label:"自定义名称：",prop:"express_name"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"请输入",maxlength:"6","show-word-limit":""},on:{"on-enter":e.handleOk},model:{value:e.model.express_name,callback:function(t){e.$set(e.model,"express_name",t)},expression:"model.express_name"}}),a("kdx-hint-text",[e._v("其他快递不支持物流查询，不支持打印电子面单")])],1):e._e(),a("FormItem",{attrs:{label:"快递单号：",prop:"express_sn"}},[a("Input",{staticClass:"width-340",attrs:{placeholder:"请输入"},on:{"on-enter":e.handleOk},model:{value:e.model.express_sn,callback:function(t){e.$set(e.model,"express_sn",t)},expression:"model.express_sn"}})],1)],1)],2)])},s=[]},"80fd":function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a("5530"));a("a9e3"),a("d3b7"),a("159b");var n=i(a("839a")),r=i(a("392e")),l={name:"index",components:{SelectTableList:n.default,SelectExpress:r.default},props:{id:{type:[Number,String],required:!0},packageId:{type:[Number,String]}},data:function(){return{model:{package_id:"",express_id:"",express_sn:"",no_express:"0",express_name:"其他快递"},value:!1,data:{},isMultiple:!1,message:"",loading:!1,rules:{express_id:[{required:!0,message:"快递公司必选"}],express_sn:[{required:!0,message:"快递单号必填"}],express_name:[{required:!0,message:"自定义名称必填"}]}}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.resetModel(),this.getData())},handleCancel:function(){this.setValue()},handleOk:function(){var e=this;this.message?this.$Message.error(this.message):this.$refs["form"].validate((function(t){if(t){var a=Object.assign({},e.model);if(e.isMultiple){if(a.package_id=e.model.goodsId,!a.package_id)return void e.$Message.error("请选择正确的包裹")}else a.package_id=e.data.packages[0].id;delete a.goodsId,96!=e.model.express_id&&delete a.express_name,e.$api.orderApi.editExpress({package_data:[a]}).then((function(t){0===t.error&&(e.$Message.success("物流信息修改成功"),e.setValue(),e.$emit("on-refresh"))}))}}))},selectChange:function(e,t){var a=this;this.model.goodsId=t.id,this.data.packages.forEach((function(e,t){e.checked&&a.$set(a.data.packages[t],"checked",!1)})),this.$set(this.data.packages[e],"checked",!0)},getData:function(){var e=this;this.loading=!0,this.$api.orderApi.getSendPackage({order_id:this.id,package_id:this.packageId}).then((function(t){e.loading=!1,0===t.error?(e.message="",t.packages&&t.packages.length>0&&(e.isMultiple=!0,t.packages[0].checked=!0,e.model.goodsId=t.packages[0].id),e.data=(0,s.default)({},t)):e.message=t.message}))},resetModel:function(){this.$refs["form"].resetFields(),this.model={package_id:"",express_id:"",express_sn:"",no_express:"0",express_name:"其他快递"}}}};t.default=l},8266:function(e,t,a){"use strict";a.r(t);var i=a("5d73"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"839a":function(e,t,a){"use strict";a.r(t);var i=a("a67c"),s=a("8266");for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("4e2c");var r=a("2877"),l=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"6b248802",null);t["default"]=l.exports},"90e30":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3");var i={name:"SelectExpress",props:{value:{type:[String,Number],required:!0},optionData:{type:Array,default:function(){return[]},required:!0}},data:function(){return{express:"",common:[{id:"1",name:"顺丰"},{id:"2",name:"申通"},{id:"3",name:"韵达"},{id:"5",name:"圆通"},{id:"6",name:"中通"}]}},watch:{value:{handler:function(){this.express=this.value},immediate:!0}},methods:{handleChange:function(e){e!==this.express&&(this.express=e),this.$emit("update:value",e)}}};t.default=i},9229:function(e,t,a){},"999e":function(e,t,a){e.exports=a.p+"static/dist/shop/img/full-reduction.png"},"9ad5":function(e,t,a){"use strict";a("9229")},a4a3:function(e,t,a){"use strict";a.r(t);var i=a("c1c0"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},a4cb:function(e,t,a){},a67c:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-table-list"},[a("div",{staticClass:"table-header"},[a("table",{attrs:{width:"100%"}},[a("colgroup",{attrs:{align:"left"}},e._l(e.columns,(function(e,t){return a("col",{key:t,attrs:{width:e.width}})})),0),a("tr",e._l(e.columns,(function(t,i){return a("th",{key:i},[a("div",{staticClass:"table-cell"},[e._v(e._s(t.title))])])})),0)])]),a("div",{staticClass:"table-body"},[a("table",{attrs:{width:"100%"}},[a("colgroup",{attrs:{align:"left"}},e._l(e.columns,(function(e,t){return a("col",{key:t,attrs:{width:e.width}})})),0),e.data&&e.data.length>0?[e._l(e.data,(function(t,i){return e._l(t.order_goods,(function(s,n){return a("tr",{key:s.id},[0===n?[a("td",{attrs:{rowspan:t.order_goods.length}},[e.multiple?[a("Checkbox",{staticStyle:{"margin-right":"0"},on:{"on-change":function(a){return e.handleChange(i,t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"list.checked"}},[e._v(" 包裹 "+e._s(i+1)+" ")])]:[a("Radio",{staticStyle:{"margin-right":"0"},on:{"on-change":function(a){return e.handleChange(i,t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"list.checked"}},[e._v(" 包裹 "+e._s(i+1)+" ")])]],2)]:e._e(),a("td",[a("div",{staticClass:"shop"},[a("div",{staticClass:"shop-image"},[a("img",{attrs:{src:e.$media(s.thumb),alt:""},on:{error:e.replaceImage}})]),a("div",{staticClass:"shop-information"},[a("p",{staticClass:"title two-line-hide"},[e._v(" "+e._s(s.title)+" ")]),s.option_title?a("div",{staticClass:"shop-label"},[a("span",[e._v(e._s(s.option_title))])]):e._e()])])]),a("td",[a("div",{staticClass:"shop-price-number"},[a("p",[e._v("X"+e._s(s.total))])])])],2)}))}))]:a("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center"}},[e._v(" 暂无数据 ")])],2)])])},s=[]},aeb3:function(e,t,a){},aee2:function(e,t,a){"use strict";a("d4e8b")},b08a:function(e,t,a){},b19a:function(e,t,a){"use strict";a("aeb3")},c1c0:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3"),a("99af");var i={name:"index",props:{id:{type:[String,Number],required:!0},packageId:{type:[String,Number]}},data:function(){return{value:!1,data:[],status:"",loading:!1,express_com:"",express_sn:""}},methods:{setValue:function(){this.value=!this.value,this.value&&this.getData()},getData:function(){var e=this;this.loading=!0,this.$api.orderApi.getExpress({order_id:this.id,package_id:this.packageId}).then((function(t){var a,i,s,n;(e.loading=!1,0===t.error)&&(e.data=(null===(a=t.data)||void 0===a?void 0:a.data)||[],e.status=null===(i=t.data)||void 0===i?void 0:i.state,e.express_com=null===(s=t.data)||void 0===s?void 0:s.express_com,e.express_sn=null===(n=t.data)||void 0===n?void 0:n.express_sn)}))},handleCancel:function(){this.setValue()},getTime:function(e){var t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];return"".concat(e,"<br/>").concat(t[new Date(e).getDay()])}}};t.default=i},d4e8b:function(e,t,a){},d63e:function(e,t,a){"use strict";a.r(t);var i=a("294d"),s=a("a4a3");for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("eb41");var r=a("2877"),l=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"8485dc14",null);t["default"]=l.exports},ddfc:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-table-list"},[a("Table",{ref:"table",attrs:{columns:e.columns,data:e.list}})],1)},s=[]},df89:function(e,t,a){"use strict";a.r(t);var i=a("90e30"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},e701:function(e,t,a){var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e9c4"),a("b680"),a("d81d"),a("d3b7");var s=i(a("2909")),n={name:"ChangePriceList",props:{data:{type:Array,default:function(){return[]},required:!0},editable:{type:Boolean,default:!1}},watch:{data:{handler:function(){this.list=(0,s.default)(JSON.parse(JSON.stringify(this.data)))},immediate:!0}},data:function(){var e=this;this.$createElement;return{list:[],columns:[{title:"商品",key:"shop",width:262,render:function(t,a){var i;return a.row.option_title&&(i=t("div",{class:"shop-label"},[t("span",[a.row.option_title])])),t("div",{class:"shop"},[t("div",{class:"shop-image"},[t("img",{attrs:{src:e.$media(a.row.thumb),alt:""},on:{error:function(t){e.replaceImage(t)}}})]),t("div",{class:"shop-information"},[t("p",{class:" title two-line-hide"},[a.row.title]),i])])}},{title:"数量",key:"number",width:56,render:function(e,t){return e("div",{class:"shop-price-number"},[e("p",["X",t.row.total])])}},{title:"小计",key:"total",width:135,render:function(e,t){return e("div",{class:"shop-price-number"},[e("p",["￥",t.row.price])])}},{title:"一级佣金",key:"",width:152,render:function(t,a){var i,s=a.row,n=a.index;return s.level_1.ladder_commission>0&&(i=t("div",{attrs:{className:"default-commision"}},["阶梯佣金:￥",s.level_1.ladder_commission])),s.level_1?t("div",[t("kdx-rr-input",{attrs:{number:!0,value:s.level_1.commission,disabled:!e.editable},class:"first-input",on:{input:function(t){var a=t?parseFloat(t):t;e.$set(e.list[n].level_1,"commission",a)},"on-blur":function(){var t=e.list[n].level_1.commission?parseFloat(e.list[n].level_1.commission).toFixed(2):0;e.$set(e.list[n].level_1,"commission",t)}}},[t("template",{slot:"prepend"},[t("div",["¥"])])]),t("div",{class:"default-commision"},["默认佣金:￥",s.level_1.original_commission]),i]):t("div",[t("div",{class:"text-center"},["-"])])}},{title:"二级佣金",key:"",width:152,render:function(t,a){var i=a.row,s=a.index;return i.level_2?t("div",[t("kdx-rr-input",{attrs:{number:!0,value:i.level_2.commission,disabled:!e.editable},class:"first-input",on:{input:function(t){var a=t?parseFloat(t):t;e.$set(e.list[s].level_2,"commission",a)},"on-blur":function(){var t=e.list[s].level_2.commission?parseFloat(e.list[s].level_2.commission).toFixed(2):0;e.$set(e.list[s].level_2,"commission",t)}}},[t("template",{slot:"prepend"},[t("div",["¥"])])]),t("div",{class:"default-commision"},["默认佣金:￥",i.level_2.original_commission])]):t("div",[t("div",{class:"text-center"},["-"])])}}]}},methods:{refreshData:function(){var e=["level_1","level_2","level_3"];this.list=(0,s.default)(JSON.parse(JSON.stringify(this.data))).map((function(t){return e.forEach((function(e){t[e]&&(t[e].commission=t[e].original_commission)})),t}))},dealData:function(){var e=["level_1","level_2","level_3","goods_id","option_id"],t=this.list.map((function(t){var a={};return e.forEach((function(e){"goods_id"==e||"option_id"==e?a[e]=t[e]:t[e]&&(a[e]={commission:t[e].commission})})),a}));return t}}};t.default=n},eb41:function(e,t,a){"use strict";a("b08a")},eb94:function(e,t,a){"use strict";a.r(t);var i=a("7789"),s=a("0b05");for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);a("b19a");var r=a("2877"),l=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"7a4e2816",null);t["default"]=l.exports},f518:function(e,t,a){"use strict";a.r(t);var i=a("3db5"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},fc03:function(e,t,a){}}]);