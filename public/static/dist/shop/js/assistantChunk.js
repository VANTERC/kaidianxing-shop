(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{"03f3":function(t,e,s){"use strict";s.r(e);var n=s("a099"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"0586":function(t,e,s){"use strict";s.r(e);var n=s("4015"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"0af6":function(t,e,s){t.exports=s.p+"static/dist/shop/img/wxapp.png"},"0f72":function(t,e,s){"use strict";s.r(e);var n=s("94f6"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},1405:function(t,e,s){"use strict";s("96d1")},1457:function(t,e,s){},"1c78":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={methods:{createVersion:function(){this.$emit("on-create")}}};e.default=s},"218b":function(t,e,s){"use strict";s.r(e);var n=s("eaa3"),a=s("cfac");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("583c");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"16a92818",null);e["default"]=o.exports},2568:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"status-upload"},[s("div",{staticClass:"icon"},["0"===t.status?s("span",{staticClass:"iconfont icon-xitong-shangchuan"}):"1"===t.status?s("span",{staticClass:"iconfont icon-yes"}):"-1"===t.status?s("span",{staticClass:"iconfont icon-del"}):t._e()]),s("div",{staticClass:"upload-progress"},[s("progress-bar",{ref:"progress",attrs:{status:t.progress.status,message:t.message}})],1),"0"===t.status?s("div",{staticClass:"version-btn"},[s("Button",{class:{wx:"wx"===t.type},attrs:{disabled:""}},[t._v(" 代码上传中... ")])],1):"1"===t.status?s("div",{staticClass:"version-btn active-btn"},[s("Button",{class:{wx:"wx"===t.type},on:{click:t.manageVersion}},[t._v(" 去看看 ")]),s("Button",{staticClass:"default-primary",class:{wx:"wx"===t.type},on:{click:t.newUpload}},[t._v(" 重新上传 ")])],1):"-1"===t.status?s("div",{staticClass:"version-btn active-btn"},[s("Button",{staticClass:"default-primary",class:{wx:"wx"===t.type},on:{click:t.newUpload}},[t._v(" 重新上传 ")])],1):t._e()])},a=[]},2617:function(t,e,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("d3b7"),s("6062"),s("3ca3"),s("ddb0");var n={props:["module"],data:function(){return{codeLine:s("7b9b"),qrCode:s("b971"),status:"0",uuid:"",qrcode_url:"",delayed:null}},created:function(){this.status="0"},beforeDestroy:function(){this.delayed&&clearTimeout(this.delayed)},methods:{fnGetCode:function(){"channel"===this.module&&this.getWxAppQrCode()},getWxAppQrCode:function(){var t=this;this.$api.channelApi.getWxAppQrCodeAssistant().then((function(e){0===e.error&&(t.uuid=null===e||void 0===e?void 0:e.uuid,t.qrcode_url=null===e||void 0===e?void 0:e.qrcode_url,t.status="1",t.pollLoginStatus())}))},pollLoginStatus:function(){var t=this;this.delayed=setTimeout((function(){"channel"===t.module&&t.getWxAppLoginStatus(),t.delayed=null}),3e3)},getWxAppLoginStatus:function(){var t=this;this.$api.assistantAPi.getWxAppLoginStatusAssistant({uuid:this.uuid},{nomessage:!0}).then((function(e){0===e.error?t.$emit("on-change",1):new Set([147023,500501,631031]).has(e.error)?t.pollLoginStatus():t.$Message.error(e.message)}))}}};e.default=n},"292f":function(t,e,s){"use strict";s("db3c")},"2a05":function(t,e,s){"use strict";s.r(e);var n=s("c980"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"2a6a":function(t,e,s){"use strict";s("2c2d")},"2c20":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={props:{qrCode:{type:String,default:""}}};e.default=s},"2c2d":function(t,e,s){},"32ba":function(t,e,s){},3384:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={props:["module","type"],data:function(){return{value:!1,columns:[{title:"版本号",key:"version"},{title:"提交时间",key:"publish_time"}],data:[],total:0,page:{pageSize:10,pageNumber:1},loading:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&this.resetPage()},getList:function(){"channel"===this.module&&this.getWxVersionList()},getWxVersionList:function(){var t=this;this.loading=!0,this.$api.assistantAPi.getVersionListAssistant({pagesize:this.page.pageSize,page:this.page.pageNumber}).then((function(e){t.loading=!1,0===e.error&&(t.data=e.list||[],t.total=e.total)}))},handlePageChange:function(t){this.page=t,this.getList()},resetPage:function(){var t;this.page={pageSize:10,pageNumber:1},null===(t=this.$refs["page"])||void 0===t||t.reset(),this.getList()},handleCancel:function(){this.setValue()}}};e.default=s},"3a43":function(t,e,s){"use strict";s.r(e);var n=s("fd18"),a=s("2a05");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("6b0c");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"4d128954",null);e["default"]=o.exports},4015:function(t,e,s){var n=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(s("3a43")),i=n(s("bf7d")),r=n(s("68c3")),o=n(s("bf5b")),u={components:{VersionCard:a.default,CurrentVersion:i.default,NoVersion:r.default,VersionRecord:o.default},props:["module","type","server","last_audit","qrCode","preview_qrcode"],data:function(){return{info:{wx:{image:s("0af6"),title:"微信小程序",describe:"绑定微信公众号，集沉淀、运营、唤醒粉丝功能于一体，提高转化率",style:{color:"#677DE0",backgroundColor:"#FAFAFF",backgroundImage:"url(".concat(s("501f"),")")}}}}},methods:{createVersion:function(){this.$emit("on-create")},publishVersion:function(){this.$emit("on-publish")},handleRecord:function(){this.$refs["version_record"].setValue()}}};e.default=u},"501f":function(t,e,s){t.exports=s.p+"static/dist/shop/img/bg-wxapp.png"},5075:function(t,e,s){"use strict";s.r(e);var n=s("2568"),a=s("8681");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("c1ca");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"16e05bc4",null);e["default"]=o.exports},5465:function(t,e,s){var n=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("ac1f"),s("5319");var a=n(s("5530")),i=n(s("659c")),r=n(s("bed3")),o={components:{PublishStatus:i.default,VersionManage:r.default},data:function(){return{module:"",type:"",server:{version:"",created_at:"",publish_time:""},plugins:[],last_audit:{version:"",publish_time:"",describe:"",server_version:"",wx_audio_qrcode:""},qrCode:"",preview_qrcode:"",step:""}},created:function(){var t=this.$route.params,e=t.module,s=void 0===e?"channel":e,n=t.type,a=void 0===n?"wx":n;this.module=s,this.type=a,this.init()},methods:{init:function(){"channel"===this.module&&this.getWxAppVersion()},getWxAppVersion:function(){var t=this;this.loading=!0,this.$api.assistantAPi.getWxAppVersionDataAssistant({},{nomessage:!0}).then((function(e){t.loading=!1,0===e.error?(t.server=(0,a.default)((0,a.default)({},t.server),e.last_audit?e.last_audit:e.server),t.plugins=(0,a.default)({},null===e||void 0===e?void 0:e.plugins),t.last_audit=(0,a.default)((0,a.default)({},t.last_audit),null===e||void 0===e?void 0:e.last_audit),t.qrCode=null===e||void 0===e?void 0:e.wxacode_path,t.step=t.server.version?"manage":"publish","manage"===t.step&&t.getNewWxApp()):148016===e.error?t.$router.replace({path:"/channel/config/wx"}):t.$Message.error(e.message)}))},getNewWxApp:function(){var t=this;this.$api.channelApi.getNewWxAppAssistant().then((function(e){0===e.error&&(e.wx_audio_qrcode?t.last_audit.wx_audio_qrcode=e.wx_audio_qrcode:t.last_audit.wx_audio_qrcode="")}))},createVersion:function(){this.step="publish"},manageVersion:function(){this.init(),this.step="manage"},publishVersion:function(){var t=this;this.$Modal.confirm({title:"注意",content:"如果当前推送版本预览无问题，可发布为线上版本",onOk:function(){switch(t.type){case"wx":window.open("https://mp.weixin.qq.com/");break;case"tt":window.open("https://microapp.bytedance.com/");break;case"douyin":window.open("https://microapp.bytedance.com/");break;default:window.open("https://mp.weixin.qq.com/");break}}})}}};e.default=o},5581:function(t,e,s){"use strict";s("1457")},"583c":function(t,e,s){"use strict";s("b7c7")},"5c04":function(t,e,s){"use strict";s.r(e);var n=s("1c78"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"62c9":function(t,e,s){},"659c":function(t,e,s){"use strict";s.r(e);var n=s("d174"),a=s("82f8");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("1405");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"f320e408",null);e["default"]=o.exports},"68c3":function(t,e,s){"use strict";s.r(e);var n=s("7f0e"),a=s("5c04");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("2a6a");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"47271811",null);e["default"]=o.exports},"6b0c":function(t,e,s){"use strict";s("32ba")},"7b8e":function(t,e,s){var n=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(s("218b")),i=n(s("f972")),r=n(s("5075")),o={components:{StatusCode:a.default,StatusVersion:i.default,StatusUpload:r.default},props:{module:{type:String},type:{type:String},server_version:{type:String},plugins:{type:[Array,Object],default:function(){return[]}}},data:function(){return{loading:!1,status:0,stepTitle_1:"扫码上传",stepContent_1:"公众平台账号授权绑定",stepTitle_2:"填写版本信息",stepContent_2:"填写小程序版本信息，上传代码",stepTitle_3:"提交微信审核",stepContent_3:"跳转微信页面提交审核"}},methods:{changeStatus:function(t){this.status=t},createVersion:function(){this.$emit("on-create")},manageVersion:function(){this.$emit("on-manage")}}};e.default=o},"7b9b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAEEAgMAAACzZqKZAAAADFBMVEVHcEzq7vDp7fDp7e9MtRwvAAAAA3RSTlMAlDNQi+rWAAAAnElEQVR42u3csQ2DQAxAUW+QLi0lU6IskT6jsBRKB0cbIoyQLBr0fnvn17txjC1pit8+2bclspc2b4RX+u9K4bsRugMhahEIBAKBQCAQCAQCgUAgEAgEAoFAINxRGIrCEO+iUJ2XJEmSJP33LM/Xt0V7N4FAIBAIBAKBQCAQCAQCgUAgEAgEwo5w5v5D31rxekN3rTCeuf/wyIFlBWetKcwwxwGUAAAAAElFTkSuQmCC"},"7f0e":function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"no-version"},[s("div",{staticClass:"version-box"},[s("div",{staticClass:"box"},[s("p",{staticClass:"title"},[t._v("暂无线上版本")]),s("p",{staticClass:"text"},[t._v(" 请先 "),s("Button",{attrs:{type:"text"},on:{click:t.createVersion}},[t._v(" 【创建推送版本】 ")]),t._v(" ， 再发布线上版本 ")],1)])])])},a=[]},"82f8":function(t,e,s){"use strict";s.r(e);var n=s("7b8e"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},8564:function(t,e,s){"use strict";s.r(e);var n=s("5465"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},8681:function(t,e,s){"use strict";s.r(e);var n=s("fc596"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},8730:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("kdx-content-bar",[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"channel-publish"},["manage"===t.step?s("version-manage",{attrs:{module:t.module,type:t.type,server:t.server,last_audit:t.last_audit,qrCode:t.qrCode,preview_qrcode:t.preview_qrcode},on:{"on-create":t.createVersion,"on-publish":t.publishVersion}}):t._e(),"publish"===t.step?s("publish-status",{attrs:{module:t.module,type:t.type,server_version:t.server.version,plugins:t.plugins},on:{"on-create":t.createVersion,"on-manage":t.manageVersion}}):t._e()],1)])},a=[]},"8c38":function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("kdx-modal-frame",{attrs:{value:t.value,title:"提交记录",width:"800","cancel-text":"关闭","is-ok":!1},on:{"on-cancel":t.handleCancel}},[s("div",{staticClass:"version-record"},[s("div",{staticClass:"version-record-content"},[s("Table",{ref:"table",attrs:{columns:t.columns,data:t.data,loading:t.loading}})],1),s("div",{staticClass:"footer-page"},[s("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.handlePageChange}})],1)])])},a=[]},"8f43":function(t,e,s){},"94f6":function(t,e,s){var n=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(s("5530")),i={props:{module:{type:String},type:{type:String},server_version:{type:String},plugins:{type:[Array,Object],default:function(){return[]}}},data:function(){return{model:{version:"",desc:""},savePlugin:{},rules:{version:[{required:!0,message:"版本号必填"},{pattern:/\d+(\.\d+){2}/,message:"版本号格式不正确"}],desc:[{required:!0,message:"版本描述必填"}]}}},methods:{handleUpload:function(){var t=this;this.$refs["form"].validate((function(e){if(e){for(var s in t.plugins)t.savePlugin[t.plugins[s].key]=t.plugins[s].checked?"1":"0";if("channel"===t.module)switch(t.type){case"wx":t.uploadWxAppC();break}}}))},uploadWxAppC:function(){var t=this;this.$api.assistantAPi.uploadWxAppAssistant((0,a.default)((0,a.default)((0,a.default)({},this.model),this.savePlugin),{},{server_version:this.server_version||""})).then((function(e){0===e.error&&(t.$store.commit("channel/setUploadId",e.upload_id),t.$emit("on-change",3))}))}}};e.default=i},"96d1":function(t,e,s){},"9f61":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"index",data:function(){return{model:{app_id:"",app_secret:""},rules:{app_id:[{required:!0,message:"小程序APPID必填"}],app_secret:[{required:!0,message:"小程序APP Secret必填"}]}}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.$api.channelApi.getWxAppBaseAssistant().then((function(e){var s=e.error,n=e.settings,a=void 0===n?{app_id:"",app_secret:""}:n;0===s&&(t.model=a)}))},handleSave:function(){var t=this;this.$refs["form"].validate((function(e){e&&t.$api.assistantAPi.setWxAppBaseAssistant(t.model).then((function(e){0===e.error&&t.$Message.success("基本配置保存成功")}))}))}}};e.default=s},a099:function(t,e,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("a9e3");var n={name:"ProgressBar",props:{strokeWidth:{type:Number,default:5},strokeColor:{type:[String,Array]},status:{type:String,default:"normal"},hideInfo:{type:Boolean,default:!0},message:{type:String,default:""}},data:function(){return{progress:0,delayed:null}},methods:{setProgress:function(t){this.progress=t,t<100&&this.progressRun()},progressRun:function(){var t=this;this.delayed=setTimeout((function(){t.progress<60?(t.progress+=2,t.progressRun()):t.progress<80?(t.progress+=1,t.progressRun()):t.progress<90&&(t.progress+=.5,t.progressRun()),t.delayed=null}),1e3)}},beforeDestroy:function(){this.delayed&&clearTimeout(this.delayed)}};e.default=n},ada4:function(t,e,s){},b3a1:function(t,e,s){"use strict";s("62c9")},b58a:function(t,e,s){"use strict";s.r(e);var n=s("cb34"),a=s("03f3");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("ecec");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"8d52933c",null);e["default"]=o.exports},b7c7:function(t,e,s){},b971:function(t,e,s){t.exports=s.p+"static/dist/shop/img/qr-code.png"},ba66:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"version-manage"},[s("div",{staticClass:"top-image flex",style:t.info[t.type].style},[s("div",{staticClass:"channel-img"},[s("img",{attrs:{src:t.info[t.type].image,alt:""}})]),s("div",{staticClass:"channel-desc"},[s("div",{staticClass:"title"},[t._v(t._s(t.info[t.type].title))]),s("div",{staticClass:"desc"},[t._v(t._s(t.info[t.type].describe))])])]),s("div",{staticClass:"top-line"}),s("div",{staticClass:"content"},[s("kdx-form-title",[t._v("版本管理")]),s("div",{staticClass:"version-box"},[s("Row",{attrs:{type:"flex"}},[t.last_audit.version?s("i-col",{staticClass:"version-style",attrs:{xs:24,sm:24,md:24,lg:24,xl:24,xxl:8}},[s("current-version",{attrs:{qrCode:t.qrCode}})],1):s("i-col",{staticClass:"version-style",attrs:{xs:24,sm:24,md:24,lg:24,xl:24,xxl:8}},[s("no-version",{on:{"on-create":t.createVersion}})],1),s("i-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24,xxl:16}},[s("version-card",{attrs:{type:t.type,server:t.server,last_audit:t.last_audit,preview_qrcode:t.preview_qrcode},on:{"on-create":t.createVersion,"on-publish":t.publishVersion,"on-record":t.handleRecord}})],1)],1)],1)],1),s("version-record",{ref:"version_record",attrs:{module:t.module,type:t.type}})],1)},a=[]},bcf8:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"status-version"},[s("p",{staticClass:"title"},[t._v("填写版本信息")]),s("p",{staticClass:"text"},[t._v("填写小程序版本信息，上传代码")]),s("Form",{ref:"form",attrs:{model:t.model,rules:t.rules,"label-width":120},nativeOn:{submit:function(t){t.preventDefault()}}},[s("FormItem",{attrs:{label:"版本号：",prop:"version"}},[s("i-input",{staticClass:"width-430 limit-input",attrs:{placeholder:"请输入版本号，格式：0.0.0",maxlength:"100","show-word-limit":""},model:{value:t.model.version,callback:function(e){t.$set(t.model,"version",e)},expression:"model.version"}}),s("p",{staticClass:"version"},[t._v(" 当前版本为 "),s("span",[t._v(t._s(t.server_version||""))])])],1),s("FormItem",{attrs:{label:"版本描述:",prop:"desc"}},[s("i-input",{staticClass:"width-430",attrs:{type:"textarea",placeholder:"请输入版本描述"},model:{value:t.model.desc,callback:function(e){t.$set(t.model,"desc",e)},expression:"model.desc"}})],1),s("FormItem",{attrs:{label:""}},t._l(t.plugins,(function(e){return s("Checkbox",{key:e.key,attrs:{checked:e.checked},model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}},[t._v(t._s(e.name))])})),1)],1),s("div",{staticClass:"version-btn"},[s("Button",{class:{wx:"wx"===t.type},on:{click:t.handleUpload}},[t._v(" 上传代码 ")])],1)],1)},a=[]},bed3:function(t,e,s){"use strict";s.r(e);var n=s("ba66"),a=s("0586");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("b3a1");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"3cdfe538",null);e["default"]=o.exports},bf5b:function(t,e,s){"use strict";s.r(e);var n=s("8c38"),a=s("f3cc");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("e10c");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"0449f153",null);e["default"]=o.exports},bf7d:function(t,e,s){"use strict";s.r(e);var n=s("f9f9"),a=s("e155");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("d4c6");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"290cda5e",null);e["default"]=o.exports},c1ca:function(t,e,s){"use strict";s("c7cb")},c4ff:function(t,e,s){},c7cb:function(t,e,s){},c980:function(t,e,s){var n=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(s("d858")),i={components:{QrCode:a.default},props:{type:{type:String},server:{type:Object,default:function(){}},last_audit:{type:Object,default:function(){}},preview_qrcode:{type:String}},computed:{isPush:function(){return this.last_audit.server_version===this.server.version},version:function(){return this.isPush?this.last_audit.version:this.server.version},describe:function(){return this.isPush?this.last_audit.describe:"-"},publish_time:function(){return this.isPush?this.server.publish_time:""},url:function(){return"wx"===this.type?this.last_audit.wx_audio_qrcode:this.preview_qrcode}},methods:{getVersionRecord:function(){this.$emit("on-record")},createVersion:function(){this.$emit("on-create")},publishVersion:function(){this.$emit("on-publish")}}};e.default=i},cb34:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"progress-bar"},[s("div",{staticClass:"progress-text"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"wrong"!==t.status&&t.progress<100,expression:"status !== 'wrong' && progress < 100"}]},[t._v(" "+t._s(t.message||"正在上传代码")+" "),s("span",[t._v(t._s(t.progress)+"%")])]),s("span",{directives:[{name:"show",rawName:"v-show",value:"wrong"!==t.status&&t.progress>=100,expression:"status !== 'wrong' && progress >= 100"}]},[t._v(" "+t._s(t.message||"上传成功")+" "),s("span",[t._v(t._s(t.progress)+"%")])]),s("span",{directives:[{name:"show",rawName:"v-show",value:"wrong"===t.status,expression:"status === 'wrong'"}]},[t._v(" "+t._s(t.message||"上传失败")+" "),s("span",[t._v(t._s(t.progress)+"%")])])]),s("Progress",{attrs:{percent:t.progress,status:t.status,"stroke-width":t.strokeWidth,"stroke-color":t.strokeColor,"hide-info":t.hideInfo}})],1)},a=[]},cfac:function(t,e,s){"use strict";s.r(e);var n=s("2617"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},d174:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"channel-publish-status"},[s("Card",{staticClass:"status-steps",attrs:{"dis-hover":!0}},[s("Steps",{attrs:{current:t.status}},[s("Step",{attrs:{title:t.stepTitle_1,content:t.stepContent_1}}),s("Step",{attrs:{title:t.stepTitle_2,content:t.stepContent_2}}),s("Step",{attrs:{title:t.stepTitle_3,content:t.stepContent_3}})],1)],1),s("div",{staticClass:"line"}),s("div",{staticClass:"status-content-box"},[s("div",{staticClass:"status-content"},[0===t.status&&"wx"===t.type?s("status-code",{attrs:{module:t.module},on:{"on-change":t.changeStatus}}):1===t.status?s("status-version",{attrs:{module:t.module,server_version:t.server_version,type:t.type,plugins:t.plugins},on:{"on-change":t.changeStatus}}):2===t.status||3===t.status?s("status-upload",{attrs:{module:t.module,type:t.type},on:{"on-change":t.changeStatus,"on-create":t.createVersion,"on-manage":t.manageVersion}}):t._e()],1)])],1)},a=[]},d4c6:function(t,e,s){"use strict";s("8f43")},d516:function(t,e,s){"use strict";s.r(e);var n=s("8730"),a=s("8564");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("5581");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"0a899812",null);e["default"]=o.exports},db3c:function(t,e,s){},de2e:function(t,e,s){"use strict";s("c4ff")},e10c:function(t,e,s){"use strict";s("ada4")},e155:function(t,e,s){"use strict";s.r(e);var n=s("2c20"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},e65e:function(t,e,s){"use strict";s.r(e);var n=s("f2a2"),a=s("f9af");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("292f");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"3e4e8cbd",null);e["default"]=o.exports},e950:function(t,e,s){},eaa3:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"status-code"},[s("p",{staticClass:"title"},[t._v("扫码上传")]),s("p",{staticClass:"text"},[t._v("公众平台账号授权绑定")]),"0"===t.status?s("div",{staticClass:"get-code"},[s("div",{staticClass:"qr-code-icon"},[s("img",{attrs:{src:t.codeLine,alt:""}}),s("span",{staticClass:"iconfont icon-weixinxiaochengxu"})]),s("div",{staticClass:"btn-code"},[s("Button",{on:{click:t.fnGetCode}},[t._v("获取授权二维码")])],1)]):t._e(),"1"===t.status?s("div",{staticClass:"qr-code"},[s("img",{attrs:{src:t.qrcode_url,alt:""}}),s("p",{staticClass:"qr-title"},[t._v("请用微信扫描上方二维码进行绑定授权")])]):t._e()])},a=[]},ecec:function(t,e,s){"use strict";s("e950")},f2a2:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("kdx-content-bar",{scopedSlots:t._u([{key:"btn",fn:function(){return[s("Button",{staticClass:"primary-long",on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[s("div",{staticClass:"base-config"},[s("kdx-hint-alert",{staticClass:"marginB-10",attrs:{"show-icon":!1}},[s("p",{staticClass:"title"},[t._v("温情提示")]),s("p",{staticClass:"text"},[t._v(" 1.请先在 微信公众平台注册小程序")]),s("p",{staticClass:"text"},[t._v(" 2.填写小程序基本信息，包括名称、头像、介绍及服务范围等")]),s("p",{staticClass:"text"},[t._v(" 3.完成小程序开发者绑定，开发信息配置")])]),s("Form",{ref:"form",attrs:{model:t.model,rules:t.rules,"label-width":160}},[s("FormItem",{attrs:{label:"小程序APP ID：",prop:"app_id"}},[s("Input",{staticClass:"width-430",attrs:{placeholder:"请输入小程序APP ID"},model:{value:t.model.app_id,callback:function(e){t.$set(t.model,"app_id",e)},expression:"model.app_id"}})],1),s("FormItem",{attrs:{label:"小程序APP Secret：",prop:"app_secret"}},[s("Input",{staticClass:"width-430",attrs:{placeholder:"请输入小程序APP Secret"},model:{value:t.model.app_secret,callback:function(e){t.$set(t.model,"app_secret",e)},expression:"model.app_secret"}})],1)],1)],1)])},a=[]},f3cc:function(t,e,s){"use strict";s.r(e);var n=s("3384"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},f972:function(t,e,s){"use strict";s.r(e);var n=s("bcf8"),a=s("0f72");for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s("de2e");var r=s("2877"),o=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"376a6a66",null);e["default"]=o.exports},f9af:function(t,e,s){"use strict";s.r(e);var n=s("9f61"),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},f9f9:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"current-version"},[s("div",{staticClass:"current-box"},[t._m(0),s("div",{staticClass:"right"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:t.$media(t.qrCode),alt:""}})]),s("div",{staticClass:"text"},[t._v("线上版本入口")])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left"},[s("div",{staticClass:"title-box"},[s("span",{staticClass:"iconfont icon-airplay"}),s("span",{staticClass:"title"},[t._v("当前版本")])]),s("div",{staticClass:"version-describe"},[t._v(" 如需更新当前版本，请去小程序后台发布推送版本 ")])])}]},fc596:function(t,e,s){var n=s("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(s("b58a")),i={props:["module","type"],components:{ProgressBar:a.default},data:function(){return{progress:{status:"active"},status:"0",delayed:null,message:""}},mounted:function(){var t=this;this.getUploadStatus(),this.status="0",this.$nextTick((function(){t.$refs["progress"].setProgress(0)}))},beforeDestroy:function(){this.delayed&&clearTimeout(this.delayed)},methods:{getUploadStatus:function(){if("channel"===this.module)switch(this.type){case"wx":this.getWxAppCUploadStatus();break}},getWxAppCUploadStatus:function(){var t=this;this.$api.assistantAPi.getWxAppUploadStatusAssistant({upload_id:this.$store.state.channel.uploadId},{nomessage:!0}).then((function(e){0===e.error?(t.message=e.status_text,"11"==e.status||"31"==e.status?t.setProgressError():"32"==e.status?t.setProgressSuccess():t.delayed=setTimeout((function(){t.getUploadStatus(),t.delayed=null}),2e3)):t.setProgressError()}))},setProgressError:function(){this.progress.status="wrong",this.$refs["progress"].setProgress(100),this.status=-1},setProgressSuccess:function(){this.progress.status="success",this.status="1",this.$refs["progress"].setProgress(100)},createVersion:function(){this.$emit("on-create")},manageVersion:function(){this.$emit("on-manage")},newUpload:function(){this.$emit("on-change",0)}}};e.default=i},fd18:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"version-card"},[s("div",{staticClass:"card-box",attrs:{id:"left"}},[s("div",{staticClass:"left"},[s("div",{staticClass:"title-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"iconfont icon-send"}),s("span",{staticClass:"title"},[t._v("推送版本 "+t._s(t.version))])]),s("div",{staticClass:"version"},[s("Button",{attrs:{type:"text"},on:{click:t.getVersionRecord}},[t._v(" 版本记录 "),s("span",{staticClass:"iconfont icon-line-right"})])],1)]),s("div",{staticClass:"version-describe"},[s("div",{staticClass:"version-label"},[t._v(" 版本描述 ")]),s("div",{staticClass:"version-text"},[s("div",{staticClass:"text"},[t._v(t._s(t.describe))]),s("div",{staticClass:"action"},[s("Button",{class:{wx:"wx"===t.type,tt:"tt"===t.type||"douyin"===t.type},on:{click:t.createVersion}},[t._v(" 创建推送版本 ")]),t.isPush?t._e():s("Button",{class:{wx:"wx"===t.type,tt:"tt"===t.type||"douyin"===t.type},on:{click:t.publishVersion}},[t._v(" 去小程序后台发布 ")])],1)])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"image",class:{"image-null":!t.isPush}},[t.url?["wx"===t.type?s("qr-code",{attrs:{url:t.url,size:160}}):t._e(),"tt"===t.type||"douyin"===t.type?s("div",{staticStyle:{padding:"10px"},domProps:{innerHTML:t._s(t.url)}}):t._e()]:t._e(),t.isPush&&!t.url?s("div",{staticClass:"surname"},[s("div",{staticClass:"surname-image",on:{click:t.createVersion}},[s("span",{staticClass:"iconfont icon-tupianyulan-xuanzhuan-you"}),s("p",[t._v("二维码已失效 请点击刷新")])])]):t._e()],2),s("span",[t._v("预览推送版本")])]),t.isPush?s("div",{staticClass:"label-box",class:{wx:"wx"===t.type,tt:"tt"===t.type||"douyin"===t.type}},[t._v(" 已推送 "+t._s(t.publish_time)+" "),s("span",{staticClass:"shape"})]):s("div",{staticClass:"label-box-null"},[t._v(" 未推送 "),s("span",{staticClass:"shape"})])])])},a=[]}}]);