(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{43625:function(t,e,a){"use strict";a("ce00")},"62f6":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("b0c0"),a("d81d");var n=i(a("aee3")),s=i(a("86c9")),c={components:{ClassSelector:s.default},props:{currentInfo:{type:Object,default:function(){}}},mixins:[n.default],data:function(){var t=this;this.$createElement;return{show:!1,componentData:{},columns:[{key:"thumb",title:"分类名称",align:"left",render:function(e,a){return e("div",{class:"category"},[e("img",{attrs:{src:t.$utils.media(a.row.thumb),alt:""},style:{width:"40px",height:"40px"}}),e("div",{class:"title"},[a.row.title])])}},{key:"option",title:"操作",align:"center",width:100,render:function(e,a){return e("p",{class:"option",style:"text-align:center;"},[e("span",{on:{click:function(){t.selectLink(a)}}},["替换"]),e("span",{on:{click:function(){t.delete(a)}}},["删除"])])}}]}},computed:{getCate:function(){var t=[{thumb:this.componentData.params.catethumb,title:this.componentData.params.catename,id:this.componentData.params.cateid}];return this.componentData.params.cateid?t:[]}},watch:{"componentData.params.goodssort":{immediate:!0,handler:function(){}}},created:function(){this.componentData=this.currentInfo||this.currentModal},methods:{delete:function(){this.componentData.params.cateid="",this.componentData.params.catethumb="",this.componentData.params.catename="",this.componentData.data=[]},selectLink:function(){this.show=!this.show},handleCancel:function(){this.show=!1},handleChange:function(){var t,e,a,i,n,s=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null===(t=this.componentData.params)||void 0===t?void 0:t.cateid,name:null===(e=this.componentData.params)||void 0===e?void 0:e.catename,thumb:null===(a=this.componentData.params)||void 0===a?void 0:a.catethumb};if("goods"==(null===(i=this.errorInfo)||void 0===i?void 0:i.id)&&this.$emit("validateGoodsForm"),c.id){var o={0:{key:"",by:"desc"},1:{key:"sales",by:"desc"},2:{key:"price",by:"desc"},3:{key:"price",by:"asc"}};this.componentData.params.cateid=null===c||void 0===c?void 0:c.id,this.componentData.params.catename=null===c||void 0===c?void 0:c.name,this.componentData.params.catethumb=null===c||void 0===c?void 0:c.thumb;var l={pageCount:1,pagesize:50,status:1,category_id:null!==(n=null===c||void 0===c?void 0:c.id)&&void 0!==n?n:"",label_field:isNaN(1*this.componentData.params.goodsdata)?this.componentData.params.goodsdata:"",sort:o[this.componentData.params.goodssort].key,by:o[this.componentData.params.goodssort].by};this.$api.goodsApi.goodsList(l).then((function(t){0===t.error&&(s.componentData.data=t.list.map((function(t){return{thumb:t.thumb,price:t.price,productprice:t.original_price,sales:1*t.sales+1*t.real_sales,title:t.title,sub_name:t.sub_name,gid:t.id,bargain:0,credit:0,ctype:0}})))})).catch()}else this.componentData.data=[]}}};e.default=c},6385:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-good-type"},[a("div",{staticClass:"type-table"},[a("Table",{attrs:{border:"",columns:t.columns,data:t.getCate,size:"small"}}),t.getCate.length?t._e():a("div",{staticClass:"add",on:{click:t.selectLink}},[t._v("+添加分类")])],1),a("class-selector",{attrs:{current:t.getCate[0]},on:{"on-cancel":t.handleCancel,"on-change":t.handleChange},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},n=[]},"722b":function(t,e,a){"use strict";a.r(e);var i=a("62f6"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"86c9":function(t,e,a){"use strict";a.r(e);var i=a("8872"),n=a("d92e");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("43625");var c=a("2877"),o=Object(c["a"])(n["default"],i["a"],i["b"],!1,null,"23cb2b6e",null);e["default"]=o.exports},8872:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{value:t.value,title:"商品分类选择器",width:"1000",loading:t.loading,"ok-text":"保存"},on:{"on-ok":t.handleSave,"on-cancel":t.handleCancel}},[a("div",{staticClass:"goods-classification-link"},[a("div",{staticClass:"header"},[a("div",{staticClass:"name-box"},[t._v("分类名称")]),a("div",{staticClass:"image-box"},[t._v("分类图片")]),a("div",{staticClass:"action-box"},[t._v("操作")])]),t.data&&t.data.length>0?[a("ul",{staticClass:"first-class"},t._l(t.data,(function(e){return a("li",{key:e.id,staticClass:"first-class-item class-item"},[a("div",{staticClass:"first-class-item-content class-item-content"},[a("div",{staticClass:"name-box tree"},[a("div",{staticClass:"content"},[a("span",{staticClass:"title"},[t._v("一级")]),a("Input",{staticClass:"width-100",attrs:{disabled:""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1)]),a("div",{staticClass:"image-box"},[a("img",{attrs:{src:t.$media(e.thumb),alt:""},on:{error:t.replaceImage}})]),a("div",{staticClass:"action-box"},[a("Button",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"item.checked"}],attrs:{type:"primary"},on:{click:function(a){return t.setChecked(e,!1)}}},[t._v(" 已选 ")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:!e.checked,expression:"!item.checked"}],staticClass:"default-primary",on:{click:function(a){return t.setChecked(e,!0)}}},[t._v(" 选择 ")])],1)]),e.children&&e.children.length?a("ul",{staticClass:"second-class"},t._l(e.children,(function(e){return a("li",{key:e.id,staticClass:"second-class-item class-item"},[a("div",{staticClass:"second-class-item-content class-item-content"},[a("div",{staticClass:"name-box tree"},[a("div",{staticClass:"link"},[a("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-cengji"}})],1),a("div",{staticClass:"content"},[a("span",{staticClass:"title"},[t._v("二级")]),a("Input",{staticClass:"width-100",attrs:{disabled:""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item_sec.name"}})],1)]),a("div",{staticClass:"image-box"},[a("img",{attrs:{src:t.$media(e.thumb),alt:""},on:{error:t.replaceImage}})]),a("div",{staticClass:"action-box"},[a("Button",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"item_sec.checked"}],attrs:{type:"primary"},on:{click:function(a){return t.setChecked(e,!1)}}},[t._v(" 已选 ")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:!e.checked,expression:"!item_sec.checked"}],staticClass:"default-primary",on:{click:function(a){return t.setChecked(e,!0)}}},[t._v(" 选择 ")])],1)]),e.children&&e.children.length?a("ul",{staticClass:"third-class"},t._l(e.children,(function(e){return a("li",{key:e.id,staticClass:"third-class-item class-item"},[a("div",{staticClass:"third-class-item-content class-item-content"},[a("div",{staticClass:"name-box tree"},[a("div",{staticClass:"link"},[a("kdx-svg-icon",{staticClass:"iconfont",attrs:{type:"icon-cengji"}})],1),a("div",{staticClass:"content"},[a("span",{staticClass:"title"},[t._v("三级")]),a("Input",{staticClass:"width-100",attrs:{disabled:""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item_thi.name"}})],1)]),a("div",{staticClass:"image-box"},[a("img",{attrs:{src:t.$media(e.thumb),alt:""},on:{error:t.replaceImage}})]),a("div",{staticClass:"action-box"},[a("Button",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"item_thi.checked"}],attrs:{type:"primary"},on:{click:function(a){return t.setChecked(e,!1)}}},[t._v(" 已选 ")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:!e.checked,expression:"!item_thi.checked"}],staticClass:"default-primary",on:{click:function(a){return t.setChecked(e,!0)}}},[t._v(" 选择 ")])],1)])])})),0):t._e()])})),0):t._e()])})),0)]:a("div",{staticStyle:{"text-align":"center"}},[t._v(" 暂无数据 ")])],2)])},n=[]},b24d:function(t,e,a){"use strict";a.r(e);var i=a("6385"),n=a("722b");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("eed10");var c=a("2877"),o=Object(c["a"])(n["default"],i["a"],i["b"],!1,null,"923425b2",null);e["default"]=o.exports},b7b0:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("fb6a");var n=i(a("5530")),s={name:"goodsClassifySelector",props:{value:{type:Boolean,default:!1},current:{type:[Object,String],default:function(){}}},data:function(){return{data:[],selectRow:{},loading:!1}},watch:{value:function(t){t&&this.getList()}},methods:{getList:function(){var t=this;this.loading=!0,this.$api.goodsApi.goodClassifyList().then((function(e){var a;if((t.loading=!1,0===e.error)&&(t.data=e.list,null!==(a=t.current)&&void 0!==a&&a.id)){var i,n=(null===(i=t.current)||void 0===i?void 0:i.id)||t.current;t.defaultChecked(n)}}))},setChecked:function(t,e){e?(this.selectRow=(0,n.default)({},t),this.defaultChecked(t.id)):this.selectRow=(0,n.default)({},{})},defaultChecked:function(t){this.data.forEach((function(e){e.checked=!1,e.id===t&&(e.checked=!0),e.children&&e.children.length&&e.children.forEach((function(e){e.checked=!1,e.id===t&&(e.checked=!0),e.children&&e.children.length&&e.children.forEach((function(e){e.checked=!1,e.id===t&&(e.checked=!0)}))}))})),this.data=this.data.slice(0)},handleSave:function(){this.$emit("on-change",this.selectRow),this.handleCancel()},handleCancel:function(){this.$emit("on-cancel")}}};e.default=s},c0ac:function(t,e,a){},ce00:function(t,e,a){},d92e:function(t,e,a){"use strict";a.r(e);var i=a("b7b0"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},eed10:function(t,e,a){"use strict";a("c0ac")}}]);