(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[103],{"1e44":function(e,t,l){var n=l("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,l("55dd"),l("5df3"),l("96cf");var i=n(l("3b8d"));l("ac6a");var o=n(l("bd1b")),a=n(l("3f3c")),s=0,d={mixins:[a.default],components:{GoodsInfo:o.default},data:function(){return{userInfo:{},scrollTo:0,scrolling:!1,bar:"",bar2:"",levels:[],currentLevel:{demon:{}}}},computed:{unitLength:function(){return uni.upx2px(270)},myLevel:function(){var e=this,t={level_id:"",level:""};return this.userInfo&&this.levels.forEach((function(l,n){l.level_id==e.userInfo.level_id&&(t={level_id:l.level_id,level:l.level,index:n},e.currentLevel=l,e.$nextTick((function(){e.scrollTo=n*e.unitLength})))})),t}},watch:{scrolling:function(){if(!this.scrolling){var e=Math.abs(Math.round(this.scrollTo/s));this.currentLevel=this.levels[e],this.scrollTo-e*s>s&&(e+=1),this.scrollTo!=e*s&&this.clickItem(e)}}},mounted:function(){var e=this;s=uni.upx2px(270),uni.upx2px(10)/10,this.$api.memberApi.levelList().then(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(l){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=l.error){t.next=6;break}return t.next=3,Promise.all(l.data.sort((function(e,t){return e.level-t.level})).map((function(t,l){return e.asyncWorker(t,l)})));case 3:e.levels=t.sent,t.next=7;break;case 6:e.$toast(l.message);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.$api.memberApi.getUserInfo().then((function(t){var l=t.data;0==t.error?e.userInfo=l:e.$toast(t.message)}))},methods:{scroll:function(e){var t=this;this.scrolling=!0,clearTimeout(this.bar2),this.bar2=setTimeout((function(){t.scrollTo=e.detail.scrollLeft,t.scrolling=!1}),34)},clickItem:function(e){clearTimeout(this.bar2),this.currentLevel=this.levels[e],this.scrollTo=e*s},asyncWorker:function(e,t){var l=this;return new Promise(function(){var n=(0,i.default)(regeneratorRuntime.mark((function n(i,o){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("3"!==e.update_condition){n.next=6;break}return n.next=3,l.goodList(e.goods_ids);case 3:a=n.sent,n.next=7;break;case 6:a=[];case 7:i({level:e.level,index:t,level_name:e.level_name,level_id:e.id,demon:{demon:"1"===e.is_default?"系统默认会员等级。":"0"===e.update_condition?"商城用户不可自动升级成为该等级下的用户。":"".concat(e.update_text,"可升级到该等级(").concat(e.level_name,")，可享受").concat(parseFloat(e.discount),"折权益哦"),update_condition:e.update_condition,update_text:"1"===e.is_default?"无":"0"===e.update_condition?"不自动升级":e.update_text,is_discount:e.is_discount,discount:parseFloat(e.discount),goodsList:a}});case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},goodList:function(e){var t=this;return new Promise((function(l,n){t.$api.goodsApi.goodList({id:e}).then((function(e){0===e.error?l(e.list):l([])}))}))}},beforeDestroy:function(){clearInterval(this.bar)}};t.default=d},"20ca":function(e,t,l){var n=l("c149");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=l("4f06").default;i("28be187a",n,!0,{sourceMap:!1,shadowMode:!1})},"50eb":function(e,t,l){"use strict";l.r(t);var n=l("1e44"),i=l.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){l.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"73a9":function(e,t,l){"use strict";var n;l.d(t,"b",(function(){return i})),l.d(t,"c",(function(){return o})),l.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("kdx-page-box",[l("div",{staticClass:"level-demon"},[l("img",{staticClass:"page-bg",attrs:{src:e.$utils.staticImg("level-bg.png"),alt:""}}),l("img",{staticClass:"avart",attrs:{"lazy-load":!0,mode:"aspectFill",src:e.$utils.media(e.userInfo.avatar,e.$utils.staticImg("decorate/gotop.png")),alt:""}}),l("div",{staticClass:"info"},[l("p",{staticClass:"name"},[e._v(e._s(e.userInfo?e.userInfo.nickname:""))])]),l("v-uni-scroll-view",{staticClass:"levels-scroll scroll-view",attrs:{"scroll-x":!0,"scroll-with-animation":!0,"scroll-left":e.scrollTo},on:{scroll:function(t){arguments[0]=t=e.$handleEvent(t),e.scroll.apply(void 0,arguments)}}},[l("v-uni-view",{staticClass:"_ul"},[l("v-uni-view",{staticClass:"level first"}),e._l(e.levels,(function(t,n){return l("v-uni-view",{key:n,staticClass:"level",class:{myLevel:e.myLevel.level_id==t.level_id,curIndex:e.currentLevel.index==n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickItem(n)}}},[l("v-uni-view",{staticClass:"name",class:{current:e.myLevel.level_id==t.level_id}},[e._v(e._s(t.level_name))]),l("v-uni-view",{staticClass:"line",class:{"last-child":n==e.levels.length-1,active:t.index<e.myLevel.index}},[l("v-uni-view",{staticClass:"dot",class:{active:t.index<=e.myLevel.index}})],1),e.myLevel.level_id==t.level_id?l("v-uni-view",{staticClass:"limit"},[e._v("当前等级")]):e._e()],1)})),l("v-uni-view",{staticClass:"level last"})],2)],1),l("v-uni-scroll-view",{staticClass:"demon scroll-view",attrs:{"scroll-y":!0}},["1"===e.currentLevel.demon.is_discount?l("div",{staticClass:"body"},[l("div",[l("p",{staticClass:"body-title"},[e._v("等级说明")]),l("p",{staticClass:"body-content"},[e._v(e._s(e.currentLevel.demon.demon))])]),l("div",[l("p",{staticClass:"body-title"},[e._v("等级权益")]),l("p",{staticClass:"body-content"},[e._v(e._s(e.currentLevel.level_name)+"会员购买商品"),l("span",{staticClass:"key"},[e._v(e._s(e.currentLevel.demon.discount)+"折")])])]),l("div",[l("p",{staticClass:"body-title"},[e._v("升级条件")]),l("p",{staticClass:"body-content",staticStyle:{border:"none"}},[e._v(e._s(e.currentLevel.demon.update_text))]),"3"===e.currentLevel.demon.update_condition?l("div",{staticClass:"goods-list"},[l("ul",e._l(e.currentLevel.demon.goodsList,(function(e,t){return l("li",{key:t},[l("goods-info",{attrs:{goodsData:e,type:"applyGoods"}})],1)})),0)]):e._e()])]):l("div",{staticClass:"commonVip"},[l("img",{staticClass:"vip-level",attrs:{src:e.$utils.staticImg("default/vip-level.png"),alt:""}}),l("p",{staticClass:"common-demon"},[e._v("当前等级没有任何优惠")])])])],1)])},o=[]},b0ed:function(e,t,l){"use strict";l.r(t);var n=l("73a9"),i=l("50eb");for(var o in i)["default"].indexOf(o)<0&&function(e){l.d(t,e,(function(){return i[e]}))}(o);l("e71a");var a,s=l("f0c5"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"bd3f24b2",null,!1,n["a"],a);t["default"]=d.exports},c149:function(e,t,l){var n=l("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.scroll-view[data-v-bd3f24b2] ::-webkit-scrollbar{width:0;height:0;background-color:initial}.level-demon[data-v-bd3f24b2]{width:100%;height:100vh;position:absolute;top:0;bottom:0;left:0}.level-demon .page-bg[data-v-bd3f24b2]{position:absolute;width:100%;height:100%;top:0;left:0}.level-demon .avart[data-v-bd3f24b2]{position:relative;z-index:10;width:%?100?%;height:%?100?%;display:block;border-radius:50%;margin:%?48?% auto %?16?%}.level-demon .info[data-v-bd3f24b2]{text-align:center;margin:0 auto %?64?%;position:relative;color:#fff}.level-demon .info .name[data-v-bd3f24b2]{line-height:%?40?%}.level-demon .demon[data-v-bd3f24b2]{width:auto;height:calc(100vh - %?450?%);height:calc(100vh - %?538?%);position:relative;border-radius:%?12?%;background:#fff;padding-top:%?2?%;margin-left:%?24?%;margin-right:%?24?%;margin-bottom:%?32?%;padding-top:%?32?%;padding-bottom:%?32?%;box-sizing:border-box}.level-demon .demon[data-v-bd3f24b2]::before{content:"";width:%?20?%;height:%?20?%;background:#fff;position:absolute;top:%?-10?%;left:0;right:0;margin:0 auto;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.level-demon .demon .title[data-v-bd3f24b2]{height:%?108?%;font-size:%?32?%;line-height:%?32?%;padding:%?38?% %?48?%;border-bottom:%?1?% solid #e6e7eb;color:#212121;font-weight:700}.level-demon .demon .body[data-v-bd3f24b2]{padding-left:%?48?%}.level-demon .demon .body > div:nth-child(1) .body-title[data-v-bd3f24b2]{margin-top:0}.level-demon .demon .body > div:nth-child(3) .body-content[data-v-bd3f24b2]{padding-bottom:%?16?%}.level-demon .demon .body .body-title[data-v-bd3f24b2]{font-size:%?32?%;line-height:%?44?%;margin:%?32?% 0 %?16?% 0;color:#212121;font-weight:700}.level-demon .demon .body .body-content[data-v-bd3f24b2]{font-size:%?24?%;line-height:%?34?%;border-bottom:%?1?% solid #e6e7eb;padding-right:%?48?%;padding-bottom:%?32?%;color:#969696}.level-demon .demon .body .goods-list[data-v-bd3f24b2]{padding-right:%?48?%}.level-demon .demon .body .goods-list[data-v-bd3f24b2] .goods-card-item{padding-top:%?16?%;padding-bottom:%?16?%}.level-demon .demon .body .goods-list li[data-v-bd3f24b2]:last-child .goods-card-item:after{border-bottom:none}.level-demon .demon .key[data-v-bd3f24b2]{color:#ff3c29}.level-demon .commonVip[data-v-bd3f24b2]{padding-top:%?128?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.level-demon .commonVip .vip-level[data-v-bd3f24b2]{margin-bottom:%?32?%;width:%?200?%;height:%?200?%}.level-demon .commonVip .common-demon[data-v-bd3f24b2]{font-size:%?24?%;line-height:%?34?%;text-align:center;color:#969696}.level-demon[data-v-bd3f24b2] .levels-scroll{width:100%}.level-demon[data-v-bd3f24b2] .levels-scroll ._ul{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap}.level-demon[data-v-bd3f24b2] .levels-scroll .level{width:%?270?%;height:%?150?%;-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;color:#fff}.level-demon[data-v-bd3f24b2] .levels-scroll .level .name{font-size:%?24?%;line-height:%?34?%;-webkit-transform:translate(-53%);transform:translate(-53%);text-align:center;margin-bottom:%?22?%;white-space:nowrap}.level-demon[data-v-bd3f24b2] .levels-scroll .level .name.current{color:#ebbe59;line-height:%?36?%}.level-demon[data-v-bd3f24b2] .levels-scroll .level .limit{font-size:%?24?%;line-height:%?34?%;-webkit-transform:translate(-50%);transform:translate(-50%);text-align:center;padding:%?28?% 0 %?22?%}.level-demon[data-v-bd3f24b2] .levels-scroll .level .line{width:%?270?%;height:%?4?%;background:#969696;position:relative}.level-demon[data-v-bd3f24b2] .levels-scroll .level .line .dot{width:%?16?%;height:%?16?%;background:#969696;border-radius:50%;top:0;left:0;-webkit-transform:translate(-100%,-35%);transform:translate(-100%,-35%)}.level-demon[data-v-bd3f24b2] .levels-scroll .level .line .dot.active{background:#ebbe59}.level-demon[data-v-bd3f24b2] .levels-scroll .level .line.last-child{width:0}.level-demon[data-v-bd3f24b2] .levels-scroll .level .line.active{background:#ebbe59}.level-demon[data-v-bd3f24b2] .levels-scroll .level.first{width:%?380?%}.level-demon[data-v-bd3f24b2] .levels-scroll .level.last{width:%?110?%}.level-demon[data-v-bd3f24b2] .levels-scroll .level.curIndex .name{-webkit-transform:translate(-53%,-10%);transform:translate(-53%,-10%);font-size:%?32?%}',""]),e.exports=t},e71a:function(e,t,l){"use strict";var n=l("20ca"),i=l.n(n);i.a}}]);