(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[84],{"0e0a":function(e,t,n){var o=n("2d58");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=n("4f06").default;r("c7129656",o,!0,{sourceMap:!1,shadowMode:!1})},"145e":function(e,t,n){var o=n("288e");n("8e6e"),n("ac6a"),n("456d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=o(n("3b8d")),i=o(n("bd86")),a=o(n("0497")),c=o(n("1498")),s=n("2f62"),u=n("74b8");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={components:{LongBtn:c.default,LoginInput:a.default},data:function(){return{model:{mobile:"",password:""},rules:{mobile:[{validator:u.validMobile}],password:[{required:!0,message:"密码不能为空"}]},errStatus:{}}},methods:d(d({},(0,s.mapMutations)("login",["setLogin","setModal","setBind"])),{},{toRegister:function(){this.$Router.auto("/pagesLogin/register")},switchCode:function(){this.$emit("switch","1")},toForget:function(){this.$Router.auto("/pagesLogin/forget")},toLogin:function(){var e=this;(0,u.validate)(this.rules,this.model,(function(t){t?e.errStatus=d({},t):e.$api.loginApi.getLogin(d(d({},e.model),{},{type:"wap"})).then(function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==n.error){t.next=8;break}return e.setLogin(!0),e.setBind(!0),t.next=5,e.$api.memberApi.getUserInfo().then((function(t){e.$store.commit("login/setUserInfo",t.data)}));case 5:getCurrentPages().length>1?e.$Router.back(1):e.$Router.auto({path:"/"}),t.next=9;break;case 8:e.$toast(n.message);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},confirmHandler:function(){this.model.mobile&&this.model.password&&(this.toLogin(),uni.hideKeyboard())}})};t.default=f},2501:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.login-code .login-foot[data-v-41b80c4a]{margin-top:%?16?%;font-size:%?24?%;text-align:center;line-height:%?34?%;color:#969696}',""]),e.exports=t},"2d58":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.forget-pas[data-v-5a2793c2]{margin:%?16?% 0 %?46?%;font-size:%?24?%;text-align:right;line-height:%?34?%;color:#518def}.login-foot[data-v-5a2793c2]{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?16?%;font-size:%?24?%;line-height:%?34?%;color:#969696}',""]),e.exports=t},3847:function(e,t,n){"use strict";n.r(t);var o=n("ff00"),r=n("62a9");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("b22b");var a,c=n("f0c5"),s=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"5a2793c2",null,!1,o["a"],a);t["default"]=s.exports},"544b":function(e,t,n){"use strict";var o=n("8006"),r=n.n(o);r.a},"595a":function(e,t,n){"use strict";n.r(t);var o=n("b6f3"),r=n("cd37");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("ebed");var a,c=n("f0c5"),s=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"90ffb2b2",null,!1,o["a"],a);t["default"]=s.exports},"5b0a":function(e,t,n){"use strict";n.r(t);var o=n("ff78"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},"5ba3":function(e,t,n){var o=n("e687");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=n("4f06").default;r("621eb97a",o,!0,{sourceMap:!1,shadowMode:!1})},"62a9":function(e,t,n){"use strict";n.r(t);var o=n("145e"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},8006:function(e,t,n){var o=n("2501");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=n("4f06").default;r("450d626e",o,!0,{sourceMap:!1,shadowMode:!1})},"98a5":function(e,t,n){"use strict";n.r(t);var o=n("dbaf"),r=n("5b0a");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("544b");var a,c=n("f0c5"),s=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"41b80c4a",null,!1,o["a"],a);t["default"]=s.exports},aaa6:function(e,t,n){(function(e){var o=n("288e");n("8e6e"),n("ac6a"),n("456d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("bd86")),i=n("2f62"),a=o(n("9e33")),c=o(n("3847")),s=o(n("98a5")),u=o(n("3f3c"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={mixins:[u.default],components:{LoginBox:a.default,LoginPass:c.default,LoginCode:s.default},data:function(){return{type:"2"}},computed:d({},(0,i.mapState)("setting",{h5_login_method:function(e){var t,n;return null===(t=e.systemSetting)||void 0===t||null===(n=t.registry_settings)||void 0===n?void 0:n.h5_login_method}})),watch:{h5_login_method:{handler:function(t){e.log(t),this.type=this.h5_login_method||"0"},immediate:!0}},methods:{switchHandler:function(e){this.type=e}}};t.default=f}).call(this,n("5a52")["default"])},b22b:function(e,t,n){"use strict";var o=n("0e0a"),r=n.n(o);r.a},b6f3:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("login-box",["0"==e.type?n("login-pass",{on:{switch:function(t){arguments[0]=t=e.$handleEvent(t),e.switchHandler.apply(void 0,arguments)}}}):"1"==e.type?n("login-code",{on:{switch:function(t){arguments[0]=t=e.$handleEvent(t),e.switchHandler.apply(void 0,arguments)}}}):e._e()],1)},i=[]},cd37:function(e,t,n){"use strict";n.r(t);var o=n("aaa6"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},dbaf:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"login-code"},[n("login-input",{attrs:{type:"number",placeholder:"请输入手机号","error-text":e.errStatus.mobile,maxlength:"11",clearable:!0},on:{"update:errorText":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"mobile",t)},"update:error-text":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"mobile",t)}},model:{value:e.model.mobile,callback:function(t){e.$set(e.model,"mobile",t)},expression:"model.mobile"}}),n("login-input",{attrs:{placeholder:"请输入图形验证码",required:!0,maxlength:4,"error-text":e.errStatus.verify_code},on:{"update:errorText":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"verify_code",t)},"update:error-text":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"verify_code",t)}},scopedSlots:e._u([{key:"append",fn:function(){return[n("vcode-img-btn",{ref:"imgCode"})]},proxy:!0}]),model:{value:e.model.verify_code,callback:function(t){e.$set(e.model,"verify_code",t)},expression:"model.verify_code"}}),n("login-input",{attrs:{type:"number",maxlength:6,"error-text":e.errStatus.code,placeholder:"请输入短信验证码","confirm-type":"go"},on:{"update:errorText":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"code",t)},"update:error-text":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"code",t)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirmHandler.apply(void 0,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[n("vcode-btn",{ref:"code",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendSms.apply(void 0,arguments)}}})]},proxy:!0}]),model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}}),n("long-btn",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitData.apply(void 0,arguments)}}},[e._v("登录")]),n("v-uni-view",{staticClass:"login-foot",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.switchPass.apply(void 0,arguments)}}},[e._v("账号密码登录")])],1)},i=[]},e687:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */[data-v-90ffb2b2] .grace-page-body{background-color:#fff}[data-v-90ffb2b2] .login-code .my-long-button{margin:%?96?% auto 0;width:%?590?%}[data-v-90ffb2b2] .login-pass .my-long-button{margin:0 auto;width:%?590?%}',""]),e.exports=t},ebed:function(e,t,n){"use strict";var o=n("5ba3"),r=n.n(o);r.a},ff00:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"login-pass"},[n("login-input",{attrs:{type:"number",placeholder:"请输入手机号","error-text":e.errStatus.mobile,maxlength:"11",clearable:!0},on:{"update:errorText":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"mobile",t)},"update:error-text":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"mobile",t)}},model:{value:e.model.mobile,callback:function(t){e.$set(e.model,"mobile",t)},expression:"model.mobile"}}),n("login-input",{attrs:{"error-text":e.errStatus.password,type:"password",placeholder:"请输入密码","confirm-type":"go",password:!0,clearable:!0},on:{"update:errorText":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"password",t)},"update:error-text":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.errStatus,"password",t)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirmHandler.apply(void 0,arguments)}},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}),n("v-uni-view",{staticClass:"forget-pas",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toForget.apply(void 0,arguments)}}},[e._v("忘记密码?")]),n("btn",{attrs:{size:"middle",classNames:"theme-primary-bgcolor"},on:{"btn-click":function(t){arguments[0]=t=e.$handleEvent(t),e.toLogin.apply(void 0,arguments)}}},[e._v("登录")]),n("v-uni-view",{staticClass:"flex login-foot"},[n("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.switchCode.apply(void 0,arguments)}}},[e._v("短信验证码登录")]),n("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toRegister.apply(void 0,arguments)}}},[e._v("注册账号")])],1)],1)},i=[]},ff78:function(e,t,n){var o=n("288e");n("8e6e"),n("ac6a"),n("456d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=o(n("3b8d")),i=o(n("bd86")),a=o(n("1498")),c=o(n("e246")),s=o(n("71c5")),u=o(n("0497")),l=n("2f62"),d=n("74b8");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={components:{LongBtn:a.default,VcodeBtn:c.default,LoginInput:u.default,VcodeImgBtn:s.default},data:function(){return{model:{mobile:"",code:"",verify_code:""},rules:{mobile:[{validator:d.validMobile}],code:[{validator:d.validCode}],verify_code:[{validator:d.validVerify}]},errStatus:{}}},methods:p(p({},(0,l.mapMutations)("login",["setLogin","setBind"])),{},{switchPass:function(){this.$emit("switch","0")},sendSms:function(){var e=this;(0,d.validate)(this.rules,this.model,(function(t){t&&(t.mobile||t.verify_code)?e.errStatus={mobile:t.mobile,verify_code:t.verify_code}:e.$api.loginApi.sendSms({mobile:e.model.mobile,verify_code:e.model.verify_code,type:"login_code"}).then((function(t){0===t.error?(e.$refs.code.start(),uni.showToast({title:"发送成功",icon:"none"})):(e.$refs.imgCode.refresh(),e.$toast(t.message))}))}))},submitData:function(){var e=this;(0,d.validate)(this.rules,this.model,(function(t){t?e.errStatus=p({},t):e.$api.loginApi.loginByCode(e.model).then(function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==n.error){t.next=8;break}return e.setLogin(!0),e.setBind(!0),t.next=5,e.$api.memberApi.getUserInfo().then((function(t){e.$store.commit("login/setUserInfo",t.data)}));case 5:getCurrentPages().length>1?e.$Router.back(1):e.$Router.auto({path:"/"}),t.next=10;break;case 8:e.$refs.imgCode.refresh(),e.$toast(n.message);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},confirmHandler:function(){this.model.mobile&&this.model.code&&this.model.verify_code&&(this.submitData(),uni.hideKeyboard())}})};t.default=v}}]);