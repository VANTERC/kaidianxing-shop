(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[77],{"0b1a":function(t,e,i){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a481");var o={props:{end_time:{type:String},bg_color:{type:String,default:"#FF3C29"},color:{type:String,default:"#FF3C29"}},data:function(){return{countTime:[]}},mounted:function(){clearInterval(n),this.countTime=[],this.cutdownTime()},methods:{cutdownTime:function(){var t=this.end_time,e=new Date(Date.parse(t.replace(/-/g,"/"))).getTime();if(e-Date.now()>0){var i=e/1e3;this.startCount(i)}else this.countTime=["00","00","00","00"]},startCount:function(t){var e,i=this;e=this.$utils.countDown(t,!1),this.countTime=e||["00","00","00","00"],e?(n=setInterval((function(){e=i.$utils.countDown(t,!1),i.countTime=e||["00","00","00","00"],0==e&&(clearInterval(n),i.$emit("on-end"))}),1e3),this.$once("hook:beforeDestroy",(function(){clearInterval(n)}))):this.$emit("on-end")}}};e.default=o},"0b4e":function(t,e,i){(function(t){var n=i("288e");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("bd86")),a=i("2f62"),r=n(i("06ad"));function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={props:{value:{type:Boolean,default:!1},type:{type:String,default:""}},components:{PickMask:r.default},data:function(){return{shareContent:!0,shareNotice:!1,shareMsg:'请点击右上角的"..."按钮，分享给好友',channels:[{type:"wechat",icon:"icon-m-qudao-weixin",color:"#1BB723",text:"微信"},{type:"poster",icon:"icon-m-shengchenghaibao",color:"#FF6F29",text:"生成海报"},{type:"copy",icon:"icon-m-fuzhilianjie",color:"#518DEF",text:"复制链接"}],timer:null,times:0,isShowLink:!1}},computed:c(c(c(c({},(0,a.mapState)("decorate/goodDetailPage",{posterUrl:function(t){var e;return null===(e=t.detailInfo)||void 0===e?void 0:e.poster_url},goodsData:function(t){var e,i,n;return null!==(e=null===(i=t.detailInfo)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.goods)&&void 0!==e?e:{}}})),(0,a.mapState)("groups",["groupPosterData"])),(0,a.mapState)(["windowHeight","areaBottom"])),{},{isWeixin:function(){return this.$utils.is_weixin()}}),watch:{value:function(t){t&&(this.shareContent=!0)}},mounted:function(){this.getChannel()},methods:{cancel:function(){this.shareNotice=!1,this.$emit("input",!1)},shareHandler:function(t){this.$emit("share",t)},copyLink:function(){var e,i,n=this,o=this.posterUrl;"group"===this.type&&(o=null===this||void 0===this||null===(i=this.groupPosterData)||void 0===i?void 0:i.invite_url);t.log(null===this||void 0===this||null===(e=this.groupPosterData)||void 0===e?void 0:e.invite_url,"this?.groupPosterData?.invite_url"),uni.setClipboardData({data:o,success:function(){n.$toast("复制成功"),n.cancel()},fail:function(e){t.log(e)}})},closeAll:function(){this.shareContent=!1,this.shareNotice=!1,this.cancel()},shareNoticeShow:function(){this.shareContent=!1,this.shareNotice=!0},videoCopy:function(){var e=this;uni.setClipboardData({data:this.videoCopyLink,success:function(){wx.hideToast(),e.$toast("复制成功"),setTimeout((function(){e.$emit("input",!1)}),500)},fail:function(e){t.log(e)}})},getChannel:function(){var t=this;this.$api.settingApi.getChannelStatus({}).then((function(e){0==e.error&&(t.isShowLink=1==(null===e||void 0===e?void 0:e.h5)||1==(null===e||void 0===e?void 0:e.wechat))}))}}};e.default=d}).call(this,i("5a52")["default"])},"0bd8":function(t,e,i){(function(t){var n=i("288e"),o=i("7037");i("5df3"),i("10ad"),i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.addCart=O,e.createOrder=D,e.getLiverStatus=w,e.handleGroupParams=void 0,e.handleLimit=E,e.setShareInfo=x,e.tipBeforeOper=I;var a=n(i("bd86"));i("96cf"),i("c5f6"),i("6762"),i("2fdb");var r=n(i("3b8d")),s=n(i("a8db")),c=n(i("4360")),d=m(i("1902")),l=n(i("365c")),u=n(i("6031")),f=i("df39"),p=i("badd"),g=["goodsData","option_id","type","is_origin"],h=["goods_id","option_id","total","liverId","goodDetail","detailInfo","canBuy","buy_num","activityInfo","is_origin"],v=["goodDetail","total","buy_num","activityInfo","is_origin"];function b(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(b=function(t){return t?i:e})(t)}function m(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!==typeof t)return{default:t};var i=b(e);if(i&&i.has(t))return i.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var s=a?Object.getOwnPropertyDescriptor(t,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}function _(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";t&&uni.showToast({title:t,icon:e})}function w(t){return new Promise((function(e,i){t?l.default.goodsApi.getGoodsLiver({goods_id:t},{errorToast:!1,cache:1e4}).then((function(t){0==t.error?e(t):e({room_id:"",broadcast_room_id:""})})):e({room_id:"",broadcast_room_id:""})}))}function x(t){var e;if(d.is_weixin()){var i,n,o,a=null===(e=c.default.state.setting.systemSetting)||void 0===e?void 0:e.share,r={};"1"==this.goodDetail.ext_field.title_type?(i=this.goodDetail.ext_field.share_description||a.description,n=this.goodDetail.ext_field.logo,o=this.goodDetail.ext_field.title):(i=this.goodDetail.sub_name||a.description,n=d.media(this.goodDetail.thumb),o=this.goodDetail.title),r={description:i,logo:n,title:o,link:t.poster_url,sdkUrl:location.href},d.getShareInfo(r)}}function I(t,e){var i=t.goodsData,n=t.option_id,o=t.type,a=t.is_origin,r=(0,s.default)(t,g);return new Promise((function(t,s){if(0!=i.has_option||i.form_data&&!e)if(1==i.has_option&&n&&e){var c,d,l;null!==r&&void 0!==r&&null!==(c=r.activityInfo)&&void 0!==c&&c.groups&&"1"==(null===(d=r.extend_params)||void 0===d?void 0:d.is_ladder)&&"0"==(null===(l=r.extend_params)||void 0===l?void 0:l.ladder)&&!a?s({errorInfo:"请选择拼团类型",errorId:"openPicker",type:o}):t()}else s({errorInfo:"请选择商品规格",errorId:"openPicker",type:o});else{var u,f=null===r||void 0===r||null===(u=r.activityInfo)||void 0===u?void 0:u.groups,p=null===r||void 0===r?void 0:r.extend_params;!f||"1"!=(null===f||void 0===f?void 0:f.inner_type)||p&&("1"!=(null===p||void 0===p?void 0:p.is_ladder)||"0"!=(null===p||void 0===p?void 0:p.ladder))||a?t():s({errorInfo:"请选择拼团类型",errorId:"openPicker",type:o})}}))}function O(t){return C.apply(this,arguments)}function C(){return C=(0,r.default)(regeneratorRuntime.mark((function e(i){var n,o,a,r,s,d,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.goods_id,o=i.option_id,a=i.goodDetail,r=i.total,s=i.buy_num,d=i.activityInfo,f=i.is_origin,e.prev=1,e.next=4,E.call(this,{goodDetail:a,total:r,buy_num:s,activityInfo:d,is_origin:f});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),t.log("addCart???",e.t0);case 10:if(null===a||void 0===a||!a.form_data){e.next=20;break}return e.prev=11,e.next=14,c.default.dispatch("quickPurchase/validForm");case 14:p=e.sent,e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),t(e.t1);case 20:return e.abrupt("return",new Promise((function(t,e){var i={goods_id:n,option_id:o,total:r,mode:1,is_activity_goods:null!==a&&void 0!==a&&a.is_activity_goods?a.is_activity_goods:0};null!==a&&void 0!==a&&a.form_data&&p&&(i=y(y({},i),{},{form_data:p})),l.default.goodsApi.changeCartNum(i).then((function(e){uni.hideLoading(),0==e.error?(k("成功添加购物车","success"),u.default.getModule("diymenu").getCartNum(!0)):uni.showToast({title:e.message||"加入购物车失败",icon:"none"}),t(e)})).catch((function(t){e(t),uni.hideLoading()}))})));case 21:case"end":return e.stop()}}),e,this,[[1,7],[11,17]])}))),C.apply(this,arguments)}function P(t){return"undefined"===typeof t||"0"==t||""==t}function D(t){return $.apply(this,arguments)}function $(){return $=(0,r.default)(regeneratorRuntime.mark((function t(e){var i,n,o,a,d,l,u,f,p,g,v,b=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.goods_id,n=e.option_id,o=e.total,a=e.liverId,d=e.goodDetail,l=e.detailInfo,u=e.canBuy,f=e.buy_num,p=e.activityInfo,g=e.is_origin,v=(0,s.default)(e,h),t.prev=1,t.next=4,E.call(this,y({goodDetail:d,total:o,buy_num:f,activityInfo:p,is_origin:g},v));case 4:o=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](1),k(t.t0),t.abrupt("return");case 11:if(0!=d.stock){t.next=14;break}return k("商品已售罄"),t.abrupt("return");case 14:if(!c.default.state.login.isLogin){t.next=19;break}if(u){t.next=17;break}return t.abrupt("return",k("您暂时没有购买权限!"));case 17:t.next=20;break;case 19:return t.abrupt("return",c.default.commit("login/setModal",!0));case 20:return t.abrupt("return",new Promise(function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(e,r){var s,d,u,f,p,h,m,_,y,w,x,I,O;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=l.data.goods,d=s.dispatch_intracity,u=s.dispatch_express,f=s.dispatch_verify,p=s.type,h=s.form_data,m=l.intracity,_=m.express_enable,y=m.intracity_enable,w=m.verify_enable,x={dispatch_intracity:d,dispatch_express:u,dispatch_verify:f,express_enable:_,intracity_enable:y,verify_enable:w},c.default.commit("orderCreate/setDispatchStatus",x),c.default.commit("orderCreate/setGoodsInfo",[{goods_id:i,option_id:n||0,total:o}]),"3"===p&&function(){var t,e=null===(t=b.$store.state.quickPurchase)||void 0===t?void 0:t.appointList,i=[],n=[],o=function(t){var i={};e[t].map((function(t){i={date:t.timestemp,appointment_id:t.id,total:t.total},n.push(i)}))};for(var a in e)o(a);i=n,c.default.commit("orderCreate/setappointmentInfo",i)}(),"0"!==p){t.next=10;break}if(!P(_)&&!P(u)||!P(y)&&!P(d)||!P(w)&&!P(f)){t.next=10;break}return k("没有可用的配送方式"),t.abrupt("return");case 10:if(I={goods_id:i,option_id:n||0,total:o||1,type:p},g&&(I.is_origin="1"),a&&(I.room_id=a),v.extend_params?c.default.commit("orderCreate/setGroupsInfo",v.extend_params):c.default.commit("orderCreate/setGroupsInfo",null),!h){t.next=22;break}return t.next=17,c.default.dispatch("quickPurchase/validForm");case 17:O=t.sent,O.goods_id=i,c.default.dispatch("quickPurchase/sendFormData",O).then((function(t){0==t.error&&(e(),c.default.commit("form/resetForm"),b.$Router.auto({path:"/pagesOrder/create",query:I}))})),t.next=25;break;case 22:e(),c.default.commit("form/resetForm"),b.$Router.auto({path:"/pagesOrder/create",query:I});case 25:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 21:case"end":return t.stop()}}),t,this,[[1,7]])}))),$.apply(this,arguments)}var j=function(t,e,i){var n=t.activityInfo,o=t.goodDetail,a=t.total,r=Math.min(n.activity_stock||0,o.stock),s=n.rules,c=s.limit_type,d=s.limit_num,l=n.buy_count;if(l||(l=0),"0"!=c){var u=d-l;if(u-a<0)return void i("购买超过限制")}r>0?e(a):i("库存不足")},S=function(t,e,i){var n,o=t.activityInfo,a=t.goodDetail,r=t.total,s=t.restOpt;o.has_open&&"1"!=(null===s||void 0===s||null===(n=s.extend_params)||void 0===n?void 0:n.is_join)?i("您已有正在进行的拼团"):j({activityInfo:o,goodDetail:a,total:r},e,i)};function E(t){var e=t.goodDetail,i=t.total,n=t.buy_num,o=t.activityInfo,a=t.is_origin,r=(0,s.default)(t,v);return new Promise((function(t,s){var c,d,l=(0,p.getActivityName)(o),u=f.SINGLE_BUY_ACTIVE.includes(l);if(u&&"1"!=a){var g={seckill:j,groups:S},h=g[l];h&&h({activityInfo:o[l],goodDetail:e,total:i,restOpt:r},t,s)}else{var v,b=null===o||void 0===o?void 0:o.presell;if(b&&(null===o||void 0===o||null===(c=o.presell)||void 0===c?void 0:c.limit_num)>0)if(n=null===o||void 0===o?void 0:o.presell.member_goods_count,Number(null===o||void 0===o||null===(v=o.presell)||void 0===v?void 0:v.limit_num)<=Number(n))return void s("购买超过限制");if(b)t(1);else if(1==(null===e||void 0===e||null===(d=e.ext_field)||void 0===d?void 0:d.buy_limit)){if(Number(e.ext_field.max_buy)<=Number(n))return void s("已达到最多限购个数");var m=Number(e.ext_field.max_buy)-Number(n);if(Math.min(m,e.stock)<Number(e.ext_field.single_min_buy))return void s("起购"+e.ext_field.single_min_buy+"件");var _=Math.min(m,Number(e.ext_field.single_max_buy));e.ext_field.single_min_buy&&(i=Math.max(Number(e.ext_field.single_min_buy),i),t(i)),e.ext_field.single_max_buy&&(i=Math.min(_,i),t(i))}else t(i)}}))}var B=function(t){var e="1"==t.is_join?"1":"0",i={is_join:e,is_ladder:"0"};return t.ladder&&(i.ladder=params.ladder),t.team_id&&(i.team_id=t.team_id),t.activity_id&&(i.activity_id=t.activity_id),i};e.handleGroupParams=B}).call(this,i("5a52")["default"])},"100a":function(t,e,i){var n=i("52f4");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("3391bc13",n,!0,{sourceMap:!1,shadowMode:!1})},"1b12":function(t,e,i){"use strict";var n=i("100a"),o=i.n(n);o.a},"1bb0":function(t,e,i){"use strict";i.r(e);var n=i("e9c0"),o=i("97e8");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("747b");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"4cab25a8",null,!1,n["a"],r);e["default"]=c.exports},"23ea":function(t,e,i){"use strict";i.r(e);var n=i("a2b1"),o=i("f30c");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("f99f");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"5a7949cb",null,!1,n["a"],r);e["default"]=c.exports},2730:function(t,e,i){var n=i("288e");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("bd86"));function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}i("a481");var s=null,c={name:"GoodsGroup",props:{item:{type:Object,default:function(){}},activityInfo:{type:Object,default:function(){}}},data:function(){return{preloading:!0,loading:{},timestamp:null,dateTimer:null}},computed:{getLoadingSrc:function(){var t,e,i,n;return null!==(t=this.$store.state.setting.systemSetting)&&void 0!==t&&null!==(e=t.basic)&&void 0!==e&&e.loading?this.$store.state.setting.cacheLoadingImg||this.$utils.media(null===(i=this.$store.state.setting.systemSetting)||void 0===i||null===(n=i.basic)||void 0===n?void 0:n.loading):this.$utils.staticImg("decorate/goods_col2.png")},getGroupsPrice:function(){return"0"==this.activityInfo.is_ladder&&"0"==this.item.has_option?this.item.activity_price:null===(t=this.item.price_range)||void 0===t?void 0:t.min_price;var t},getPrice:function(){return this.item.original_price},getGroupsNum:function(){var t=this.activityInfo,e=t.is_ladder,i=t.success_num;return 0==e?"".concat(i,"人团"):"阶梯团"}},mounted:function(){var t=this;setTimeout((function(){t.preloading=!1}),3e3)},methods:{loaded:function(t){var e=this;if(t){var i=t.replace(/\./g,"_");this.loading[i]=!1,clearTimeout(s),s=setTimeout((function(){e.loading=r({},e.loading)}),100)}},clickGood:function(){this.$emit("on-click",this.item)}},filters:{formatMoney:function(t){return"number"===typeof t||"string"===typeof t&&""!==t.trim()?t>=1e4?parseInt(t/100)/100+"万":parseFloat(t):0}}};e.default=c},"32a6":function(t,e,i){var n=i("241e"),o=i("c3a1");i("ce7e")("keys",(function(){return function(t){return o(n(t))}}))},"3f0a":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */[data-v-4aa7b180] .grace-page-body{background-color:#fff}.group-detail[data-v-4aa7b180]{position:relative}.group-detail .bg[data-v-4aa7b180]{position:absolute;left:0;top:0;width:100%;height:%?232?%;background:-webkit-linear-gradient(top,#ff3c29,#ff6f29 96.87%);background:linear-gradient(180deg,#ff3c29,#ff6f29 96.87%)}.group-detail .container[data-v-4aa7b180]{position:relative;margin:0 %?24?%;padding-top:%?32?%}.group-detail .container .goods-info[data-v-4aa7b180]{overflow:hidden;border-radius:%?12?%;box-shadow:0 %?8?% %?8?% %?-4?% rgba(255,60,41,.1);background:#fff}.group-detail .container .goods-info .goods-rules[data-v-4aa7b180]{padding-left:%?24?%;height:%?64?%;font-size:%?24?%;line-height:%?64?%;color:#969696;background:#fcfcfc}.group-detail .container .content[data-v-4aa7b180]{padding:%?24?% 0}.group-detail .container .content .title[data-v-4aa7b180]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-bottom:%?16?%}.group-detail .container .content .title .title-line[data-v-4aa7b180]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.group-detail .container .content .title .title-line.reserve .line[data-v-4aa7b180]{-webkit-box-ordinal-group:2;-webkit-order:1;order:1}.group-detail .container .content .title .title-line .line[data-v-4aa7b180]{height:%?2?%;width:%?120?%}.group-detail .container .content .title .title-line .circle[data-v-4aa7b180]{border-radius:50%;width:%?8?%;height:%?8?%}.group-detail .container .content .title .title-text[data-v-4aa7b180]{margin:0 %?16?%;color:#212121;font-weight:700}.group-detail .container .content .surplus-time[data-v-4aa7b180]{margin-top:%?16?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.group-detail .container .content .pending[data-v-4aa7b180]{padding-top:%?24?%}.group-detail .container .content .pending .title-line.reserve .line[data-v-4aa7b180]{background:-webkit-linear-gradient(left,#ff3c29 -.74%,rgba(255,60,41,0) 99.26%);background:linear-gradient(90deg,#ff3c29 -.74%,rgba(255,60,41,0) 99.26%)}.group-detail .container .content .pending .title-line .line[data-v-4aa7b180]{background:-webkit-linear-gradient(right,#ff3c29 -.74%,rgba(255,60,41,0) 99.26%);background:linear-gradient(270deg,#ff3c29 -.74%,rgba(255,60,41,0) 99.26%)}.group-detail .container .content .pending .title-line .circle[data-v-4aa7b180]{border:%?2?% solid #ff3c29}.group-detail .container .content .pending .pending-tip[data-v-4aa7b180]{margin:%?48?% 0;font-size:%?32?%;line-height:%?44?%;text-align:center;color:#000}.group-detail .container .content .pending .pending-tip .surplus-user[data-v-4aa7b180]{margin:0 %?4?%;font-size:%?40?%;font-weight:700;line-height:%?56?%;color:#ff3c29}.group-detail .container .content .fail[data-v-4aa7b180]{padding-top:%?24?%}.group-detail .container .content .fail .title-line.reserve .line[data-v-4aa7b180]{background:-webkit-linear-gradient(left,#989898 -.74%,hsla(0,0%,60.4%,0) 99.26%);background:linear-gradient(90deg,#989898 -.74%,hsla(0,0%,60.4%,0) 99.26%)}.group-detail .container .content .fail .title-line .line[data-v-4aa7b180]{background:-webkit-linear-gradient(right,#989898 -.74%,hsla(0,0%,60.4%,0) 99.26%);background:linear-gradient(270deg,#989898 -.74%,hsla(0,0%,60.4%,0) 99.26%)}.group-detail .container .content .fail .title-line .circle[data-v-4aa7b180]{border:%?2?% solid #969696}.group-detail .container .content .fail .fail-tip[data-v-4aa7b180]{margin:%?48?% 0;font-size:%?24?%;line-height:%?34?%;text-align:center;color:#565656}.group-detail .container .content .success[data-v-4aa7b180]{margin-bottom:%?16?%;text-align:center}.group-detail .container .content .success .success-img[data-v-4aa7b180]{display:inline-block;width:%?538?%;height:%?252?%}.group-detail .container .content .user-list[data-v-4aa7b180]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-left:%?-20?%}.group-detail .container .content .user-list .user-item[data-v-4aa7b180],\n.group-detail .container .content .user-list .invite-btn[data-v-4aa7b180],\n.group-detail .container .content .user-list .ellipsis-icon[data-v-4aa7b180]{position:relative;margin-right:%?-20?%;border-radius:50%;width:%?108?%;height:%?108?%}.group-detail .container .content .user-list .user-item[data-v-4aa7b180]{border:%?2?% solid #fff}.group-detail .container .content .user-list .user-item .user-avatar[data-v-4aa7b180]{border-radius:50%;width:%?104?%;height:%?104?%}.group-detail .container .content .user-list .user-item .user-tag[data-v-4aa7b180]{position:absolute;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-radius:%?24?%;width:%?72?%;height:%?32?%;font-size:%?24?%;text-align:center;line-height:%?32?%;color:#fff;background:-webkit-linear-gradient(335.43deg,#ff8a00 19.05%,#ff4c14 87.67%);background:linear-gradient(114.57deg,#ff8a00 19.05%,#ff4c14 87.67%)}.group-detail .container .content .user-list .invite-btn[data-v-4aa7b180]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:50%;border:1px dashed #e6e7eb;width:%?108?%;height:%?108?%;background:#f5f5f5}.group-detail .container .content .user-list .invite-btn .icon-m-add[data-v-4aa7b180]{font-size:%?48?%;color:#969696}.group-detail .container .content .user-list .invite-btn .surplus-num[data-v-4aa7b180]{font-size:%?32?%;line-height:%?44?%;color:#969696}.group-detail .container .content .user-list .ellipsis-icon .icon-m-shenglve[data-v-4aa7b180]{font-size:%?108?%;color:#c4c4c4}.group-detail .container .content .btn-look[data-v-4aa7b180]{margin:%?32?% auto %?48?%;border:%?2?% solid #e6e7eb;border-radius:%?34?%;width:%?200?%;height:%?54?%;font-size:%?24?%;line-height:%?54?%;text-align:center;border:%?2?% solid #e6e7eb;border-radius:%?34?%;color:#212121}.group-detail .container .content .btn[data-v-4aa7b180]{margin-top:%?24?%;border-radius:%?82?%;width:%?702?%;height:%?80?%;font-size:%?32?%;line-height:%?80?%;text-align:center;border:%?2?% solid #ff3c29;color:#ff3c29;background:#fff}.group-detail .container .content .btn[data-v-4aa7b180]:first-child{margin-top:%?48?%;color:#fff;background:-webkit-linear-gradient(335.43deg,#ff8a00 19.05%,#ff4c14 87.67%);background:linear-gradient(114.57deg,#ff8a00 19.05%,#ff4c14 87.67%);box-shadow:0 4px 8px -2px rgba(255,60,41,.2);border:0}.group-detail .container .content .btn.disabled[data-v-4aa7b180]{border:0;background:#ccc;box-shadow:none}',""]),t.exports=e},4555:function(t,e,i){"use strict";i.r(e);var n=i("7a49"),o=i("8016");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("b3a1");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"4aa7b180",null,!1,n["a"],r);e["default"]=c.exports},"52f4":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.goods-group[data-v-cf94f36c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?16?% %?24?%;border-radius:%?12?%;background:#fff}.goods-group .image-box[data-v-cf94f36c]{position:relative;width:%?220?%;height:%?220?%;border-radius:%?12?%;overflow:hidden;-webkit-flex-shrink:0;flex-shrink:0}.goods-group .image-box .goods-img[data-v-cf94f36c]{width:100%;height:100%;border-radius:%?12?%}.goods-group .goods-content[data-v-cf94f36c]{padding-left:%?24?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;width:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:%?220?%}.goods-group .goods-content .goods-sub-title[data-v-cf94f36c]{font-size:%?24?%;line-height:%?34?%;color:#969696;padding-top:%?8?%}.goods-group .goods-content .goods-price-box[data-v-cf94f36c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.goods-group .goods-content .group-price .name[data-v-cf94f36c],\n.goods-group .goods-content .original-price .name[data-v-cf94f36c]{margin-right:%?8?%}.goods-group .goods-content .group-price[data-v-cf94f36c]{font-size:%?24?%;line-height:%?34?%;color:#ff3c29;padding-top:%?8?%;padding-bottom:%?4?%}.goods-group .goods-content .group-price .price[data-v-cf94f36c]{font-size:%?32?%;font-weight:700;line-height:%?46?%}.goods-group .goods-content .group-price .unit[data-v-cf94f36c]{font-size:%?24?%;line-height:%?34?%}.goods-group .goods-content .original-price[data-v-cf94f36c]{font-size:%?24?%;line-height:%?34?%;color:#969696}.goods-group .goods-content .buy-btn[data-v-cf94f36c]{border-radius:%?48?%;width:%?128?%;height:%?54?%;font-size:%?24?%;font-weight:700;text-align:center;line-height:%?54?%;color:#fff;background:-webkit-linear-gradient(335.43deg,#ff8a00 19.05%,#ff4c14 87.67%);background:linear-gradient(114.57deg,#ff8a00 19.05%,#ff4c14 87.67%)}.group-label[data-v-cf94f36c]{display:inline-block;font-size:%?20?%;line-height:%?28?%;padding:%?2?% %?8?%;color:#ff6f29;background:#fff9f0;border:%?2?% solid #ffdaa3}.goods-title[data-v-cf94f36c]{font-size:%?28?%;line-height:%?40?%;color:#212121}.goods-title .group-label[data-v-cf94f36c]{border-radius:%?4?%;margin-right:%?4?%}.omit-2[data-v-cf94f36c]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}',""]),t.exports=e},"57be":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.cut-down[data-v-4cab25a8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?32?%;color:#fff}.cut-down .day[data-v-4cab25a8]{padding:0 %?4?%;min-width:%?40?%}.cut-down .day[data-v-4cab25a8],\n.cut-down .time[data-v-4cab25a8]{border-radius:%?6?%;height:%?40?%;font-size:%?28?%;text-align:center;line-height:%?40?%;color:#fff;background-color:#ff3c29}.cut-down .text[data-v-4cab25a8]{margin:0 %?10?%;font-size:%?24?%;line-height:%?34?%;color:#ff3c29}.cut-down .time[data-v-4cab25a8]{width:%?40?%}.cut-down .colon[data-v-4cab25a8]{margin:0 %?4?%;line-height:%?32?%;color:#ff3c29}',""]),t.exports=e},"5dfd":function(t,e,i){var n=i("3f0a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("1fbaede5",n,!0,{sourceMap:!1,shadowMode:!1})},"65da":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.share-notice[data-v-5a7949cb]{position:fixed;top:%?400?%;left:0;width:100%;z-index:10000006;color:#fff;text-align:center}.share-notice uni-image[data-v-5a7949cb]{width:%?104?%;height:%?104?%}.share-notice p[data-v-5a7949cb]{font-size:%?30?%;padding-top:%?40?%}.share-notice .button[data-v-5a7949cb]{display:inline-block;width:%?334?%;height:%?80?%;margin-top:%?40?%;line-height:%?80?%;border:1px solid #fff;border-radius:%?40?%}.container[data-v-5a7949cb]{position:absolute;bottom:0;left:0;border-radius:%?20?% %?20?% 0 0;padding:%?32?% %?24?% 0;width:100vw;height:%?440?%;background-color:#fff}.container .title[data-v-5a7949cb]{font-size:%?32?%;font-weight:700;text-align:center;line-height:%?44?%;color:#000;font-size:%?32?%;margin-bottom:%?48?%}.container .channel[data-v-5a7949cb]{padding-bottom:%?24?%}.container .channel-list[data-v-5a7949cb]{width:%?140?%;height:%?188?%;margin-right:%?28?%;background-color:initial;line-height:1}.container .channel-list[data-v-5a7949cb]::after{border:none}.container .channel-icon[data-v-5a7949cb]{margin:0 %?10?% %?4?%;font-size:%?120?%;height:%?120?%;width:%?120?%}.container .channel-icon.icon-m-qudao-weixin[data-v-5a7949cb]{color:#1bb723}.container .channel-icon.icon-m-shengchenghaibao[data-v-5a7949cb]{color:#ff6f29}.container .channel-icon.icon-m-fuzhilianjie[data-v-5a7949cb]{color:#518def}.container .channel-icon.icon-m-yingyong-shipinhao-zhuanhuan[data-v-5a7949cb]{color:#ff901b}.container .channel-text[data-v-5a7949cb]{margin-bottom:%?17?%;font-size:%?28?%;text-align:center;line-height:%?40?%;color:#969696}.container .cancel[data-v-5a7949cb]{border-top:1px solid #e6e7eb;height:%?100?%;font-size:%?28?%;text-align:center;line-height:%?100?%;color:#969696}.modal[data-v-5a7949cb]{position:fixed;width:100%;height:100%;top:0;left:0}.modal .video-container[data-v-5a7949cb]{position:absolute;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background:#fff;border-radius:%?12?%;padding:%?48?% %?24?% %?22?%;width:%?512?%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.modal .video-container .video-title[data-v-5a7949cb]{height:%?40?%;line-height:%?40?%;font-size:%?28?%;text-align:center;color:#212121}.modal .video-container .video-link[data-v-5a7949cb]{margin:%?16?% 0 %?72?%;background:#f5f5f5;border-radius:%?20?%;padding:%?24?% %?16?%;line-height:%?34?%;font-size:%?24?%;overflow-wrap:break-word}.modal .video-container .video-copy[data-v-5a7949cb]{text-align:center;color:#fff;font-size:%?28?%;width:100%;height:%?80?%;line-height:%?80?%;border-radius:%?128?%;background:-webkit-linear-gradient(317.43deg,#ff3c29,#ff6f29 94.38%);background:linear-gradient(132.57deg,#ff3c29,#ff6f29 94.38%)}',""]),t.exports=e},"747b":function(t,e,i){"use strict";var n=i("e9ad"),o=i.n(n);o.a},"7a43":function(t,e,i){"use strict";i.r(e);var n=i("900f"),o=i("d0f2");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("1b12");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"cf94f36c",null,!1,n["a"],r);e["default"]=c.exports},"7a49":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-page-box",[i("v-uni-view",{staticClass:"group-detail"},[i("v-uni-view",{staticClass:"bg"}),i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"goods-info"},[i("Goods",{attrs:{item:t.goods,"activity-info":t.groupsInfo}}),i("v-uni-view",{staticClass:"goods-rules"},[t._v("拼团规则：支持开团邀请好友参团，人数不足自动退款")])],1),i("v-uni-view",{staticClass:"content"},["0"==t.state||"2"==t.state?[i("v-uni-view",{class:{pending:"0"==t.state,success:"1"==t.state,fail:"2"==t.state}},[i("v-uni-view",{staticClass:"title"},[i("v-uni-view",{staticClass:"title-line"},[i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"circle"})],1),"0"==t.state?i("span",{staticClass:"title-text"},[t._v("拼团剩余时间")]):t._e(),"2"==t.state?i("span",{staticClass:"title-text"},[t._v("拼团失败")]):t._e(),i("v-uni-view",{staticClass:"title-line reserve"},[i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"circle"})],1)],1),t.groupsInfo.end_time?i("v-uni-view",{staticClass:"surplus-time"},[i("cut-down",{attrs:{end_time:t.groupsInfo.end_time,color:"0"==t.state?"#ff3c29":"#969696",bg_color:"0"==t.state?"#ff3c29":"#969696"},on:{"on-end":function(e){arguments[0]=e=t.$handleEvent(e),t.finishGroup.apply(void 0,arguments)}}})],1):t._e(),"0"==t.state&&t.getSurplus?i("v-uni-view",{staticClass:"pending-tip"},[t._v("还差"),i("span",{staticClass:"surplus-user"},[t._v(t._s(t.getSurplus))]),t._v("人即可拼团成功")]):t._e(),"2"==t.state?i("v-uni-view",{staticClass:"fail-tip"},[t._v("团长有效期内拼团人数不足")]):t._e()],1)]:t._e(),"1"==t.state?[i("v-uni-view",{staticClass:"success"},[i("img",{staticClass:"success-img",attrs:{src:t.$utils.staticImg("activity/group/group_success.png")}})])]:t._e(),i("v-uni-view",{staticClass:"user-list"},[t._l(t.filterUsers,(function(e,n){return i("v-uni-view",{key:n,staticClass:"user-item"},[i("img",{staticClass:"user-avatar",attrs:{src:t.$utils.media(e.avatar)||t.$utils.staticImg("decorate/avatar_mobile.png")}}),t.groupsInfo.leader_id==e.member_id?i("v-uni-view",{staticClass:"user-tag"},[t._v("团长")]):t._e()],1)})),t.showSurplusIcon?i("v-uni-view",{staticClass:"ellipsis-icon"},[i("i",{staticClass:"iconfont-m- icon-m-shenglve"})]):t._e(),"1"==t.state||t.loadedError?t._e():i("v-uni-view",{staticClass:"invite-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleShare.apply(void 0,arguments)}}},[i("i",{staticClass:"iconfont-m- icon-m-add"})]),t.users.length>5&&"1"==t.state?i("v-uni-view",{staticClass:"invite-btn"},[i("span",{staticClass:"surplus-num"},[t._v("+"+t._s(t.surplusUserNum))])]):t._e()],2),t.loadedError?t._e():i("v-uni-view",{staticClass:"btn-look",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAllUsers.apply(void 0,arguments)}}},[t._v("查看全部团员")]),i("v-uni-view",["0"!=t.state||t.groupsInfo.is_join||t.groupsInfo.is_leader?t._e():i("v-uni-view",{staticClass:"btn btn-primary",class:{disabled:"0"==t.goods.activity_stock},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.joinGroups.apply(void 0,arguments)}}},[t._v("参与拼团")]),"0"==t.state&&"1"==t.groupsInfo.is_leader?i("v-uni-view",{staticClass:"btn btn-primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleShare.apply(void 0,arguments)}}},[t._v("邀请好友参团")]):t._e(),"1"==t.groupsInfo.is_leader&&"2"==t.state&&"0"==t.groupsInfo.status?i("v-uni-view",{staticClass:"btn btn-primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toGoods.apply(void 0,arguments)}}},[t._v("重新开团")]):t._e(),"1"==t.state||"2"==t.state||t.loadedError?i("v-uni-view",{staticClass:"btn btn-plain",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toIndex.apply(void 0,arguments)}}},[t._v("首页逛逛")]):t._e(),"0"!=t.state&&"1"!=t.state||!t.groupsInfo.order_id?t._e():i("v-uni-view",{staticClass:"btn btn-plain",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toOrder.apply(void 0,arguments)}}},[t._v("查看订单详情")])],1)],2)],1)],1),t.showShare?i("share-modal",{attrs:{type:"group"},on:{share:function(e){arguments[0]=e=t.$handleEvent(e),t.shareHandler.apply(void 0,arguments)}},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}}):t._e(),t.showPoster?i("poster-modal",{ref:"poster",attrs:{"poster-type":"group"},on:{mounted:function(e){arguments[0]=e=t.$handleEvent(e),t.posterShow.apply(void 0,arguments)}}}):t._e(),i("goods-picker",{ref:"goodsPicker",on:{choose:function(e){arguments[0]=e=t.$handleEvent(e),t.specPickerChoose.apply(void 0,arguments)},changeNum:function(e){arguments[0]=e=t.$handleEvent(e),t.optionChangeNum.apply(void 0,arguments)},clickBtn:function(e){arguments[0]=e=t.$handleEvent(e),t.clickBtn.apply(void 0,arguments)}}})],1)},a=[]},8016:function(t,e,i){"use strict";i.r(e);var n=i("be34"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"8aae2":function(t,e,i){i("32a6"),t.exports=i("584a").Object.keys},"900f":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods-group"},[i("div",{staticClass:"image-box"},[t.item.preloading&&t.preloading?i("img",{staticClass:"goods-img preload",attrs:{mode:"widthFix","lazy-load":!0,src:t.getLoadingSrc,alt:""}}):t._e(),i("img",{staticClass:"goods-img",class:{loading:t.item.preloading&&t.preloading},attrs:{mode:"widthFix","lazy-load":!0,src:t.$utils.media(t.item.thumb)||t.$utils.staticImg("decorate/goods_col2.png"),alt:""},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.loaded(t.item.thumb)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.loaded(t.item.thumb)}}})]),i("div",{staticClass:"goods-content"},[i("div",[i("div",{staticClass:"goods-title omit-2"},[i("span",{staticClass:"group-label"},[t._v(t._s(t.getGroupsNum))]),t._v(t._s(t.item.title||""))]),t.item.sub_name?i("div",{staticClass:"goods-sub-title line-hide"},[t._v(t._s(t.item.sub_name))]):t._e()]),i("div",{staticClass:"goods-price-box"},[i("div",{staticClass:"goods-price"},[i("div",{staticClass:"group-price"},[i("span",{staticClass:"name"},[t._v("拼团价")]),i("span",{staticClass:"price"},[i("span",{staticClass:"unit"},[t._v("￥")]),t._v(t._s(t._f("formatMoney")(t.getGroupsPrice)))])]),i("div",{staticClass:"original-price"},[i("span",{staticClass:"name"},[t._v("单买价")]),i("span",{staticClass:"price"},[i("span",{staticClass:"unit"},[t._v("￥")]),t._v(t._s(t._f("formatMoney")(t.getPrice)))])])])])])])},a=[]},"97e8":function(t,e,i){"use strict";i.r(e);var n=i("0b1a"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},a2b1:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-theme-content",[i("div",[t.shareNotice?i("v-uni-view",{staticClass:"share-notice"},[i("v-uni-image",{attrs:{src:t.$utils.staticImg("decorate/share@2x.png"),alt:""}}),i("p",[t._v(t._s(t.shareMsg))]),i("v-uni-view",{staticClass:"button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeAll.apply(void 0,arguments)}}},[t._v("知道了")])],1):t._e(),t.value?i("pick-mask",{staticClass:"pick-mask",on:{"mask-close":function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t.shareContent?i("v-uni-view",{staticClass:"container",style:{paddingBottom:t.areaBottom+"px"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"title"},[t._v("分享到")]),i("v-uni-view",{staticClass:"flex channel"},[i("v-uni-view",{staticClass:"channel-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareNoticeShow.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"iconfont-m- icon-m-qudao-weixin channel-icon"}),i("v-uni-view",{staticClass:"channel-text"},[t._v("微信")])],1),i("v-uni-view",{staticClass:"channel-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareHandler.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"iconfont-m- icon-m-shengchenghaibao channel-icon"}),i("v-uni-view",{staticClass:"channel-text"},[t._v("生成海报")])],1),t.isShowLink?i("v-uni-view",{staticClass:"channel-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyLink.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"iconfont-m- icon-m-fuzhilianjie channel-icon"}),i("v-uni-view",{staticClass:"channel-text"},[t._v("复制链接")])],1):t._e()],1),i("v-uni-view",{staticClass:"cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")])],1):t._e()],1):t._e()],1)])},a=[]},a4bb:function(t,e,i){t.exports=i("8aae2")},a8db:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return c}));var n=i("e265"),o=i.n(n),a=i("a4bb"),r=i.n(a);function s(t,e){if(null==t)return{};var i,n,o={},a=r()(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}function c(t,e){if(null==t)return{};var i,n,a=s(t,e);if(o.a){var r=o()(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(a[i]=t[i])}return a}},b3a1:function(t,e,i){"use strict";var n=i("5dfd"),o=i.n(n);o.a},b703:function(t,e,i){var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var o=n(i("3b8d")),a=n(i("d225")),r=n(i("b0b4")),s=n(i("4360")),c=i("a18c"),d=i("3f1e"),l=function(){function t(e){(0,a.default)(this,t),this.optionId=0,this.optionChoseNum=1,this.callback=null,this.callback=e,this.pickerCallback=this.pickerCallback.bind(this)}return(0,r.default)(t,[{key:"pickerCallback",value:function(t){var e=this;return new Promise(function(){var i=(0,o.default)(regeneratorRuntime.mark((function i(n,o){var a,r,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("clickBtn"!==(null===t||void 0===t?void 0:t.type)||"cart"!==t.data.type){i.next=10;break}if(!(0,d.hasBindBySence)("add_cart")){i.next=5;break}return s.default.commit("login/setModal",!0),n({type:"clickBtn"}),i.abrupt("return");case 5:return i.next=7,s.default.dispatch("quickPurchase/addCart",{option_id:e.optionId,total:e.optionChoseNum});case 7:n(),i.next=20;break;case 10:if("clickBtn"!==(null===t||void 0===t?void 0:t.type)||"buy"!==t.data.type){i.next=19;break}return i.next=13,s.default.dispatch("quickPurchase/createOrder",{option_id:e.optionId,total:e.optionChoseNum});case 13:a=i.sent,n(),s.default.commit("form/resetForm"),c.router.push({path:"/pagesOrder/create",query:a}),i.next=20;break;case 19:"choose"==t.type?e.optionId=(null===t||void 0===t||null===(r=t.data)||void 0===r||null===(l=r.options)||void 0===l?void 0:l.id)||0:"changeNum"==t.type?e.optionChoseNum=t.data.total:t&&e.callback&&e.callback(t);case 20:case"end":return i.stop()}}),i)})));return function(t,e){return i.apply(this,arguments)}}())}},{key:"getGoodDetail",value:function(t){return s.default.commit("form/resetForm"),new Promise((function(e,i){s.default.dispatch("quickPurchase/getQuickPurchaseData",{goodId:t}).then((function(t){0==t.error?e(t):i(t),uni.hideLoading()})).catch((function(t){i(t),uni.hideLoading()}))}))}}]),t}();e.default=l},b788:function(t,e,i){(function(t){var n=i("288e");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.eventHandler=h;var o=n(i("bd86"));i("6762"),i("2fdb"),i("96cf");var a=n(i("3b8d")),r=n(i("4360")),s=i("badd"),c=i("df39"),d=i("0bd8"),l=i("3f1e");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e){return g.apply(this,arguments)}function g(){return g=(0,a.default)(regeneratorRuntime.mark((function e(i,n){var o,a,u,p,g,h,v,b,m,_,y,k,w,x,I,O,C,P,D,$,j,S,E,B,M,N,G,R,T,z,L,q,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:I=n.goodsData,O=n.goods_id,C=n.option_id,P=n.total,D=n.detailInfo,$=n.buy_num,j=n.goodDetail,S=n.activityInfo,n.is_origin,E=i.data,e.prev=2,e.t0=E.btn,e.next="like"===e.t0?6:"add"===e.t0?12:"tocart"===e.t0?27:"buy"===e.t0?29:"custom"===e.t0?51:"customer"===e.t0?53:"bargaining"===e.t0?55:64;break;case 6:return B=this.pageInfo["detail_navbar"]||{},e.next=9,this.$api.goodsApi.changeFavor({goods_id:O,is_add:B.params.favor?0:1});case 9:return M=e.sent,0==M.error&&(B.params.favor||uni.showToast({title:"收藏成功",icon:"none"}),B.params.favor=!B.params.favor,this.$decorator.getPage(this.$Route).setPageInfo({detail_navbar:B},"detailNavBarHandler/eventHandler.js")),e.abrupt("break",64);case 12:return e.next=14,r.default.dispatch("login/checkLogin");case 14:if(e.sent){e.next=16;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 16:if(!(0,l.hasBindBySence)("add_cart")){e.next=18;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 18:return this.$store.commit("quickPurchase/setGoodDetail",D),this.$store.commit("quickPurchase/setOptionsInfo",null===(o=r.default.state)||void 0===o||null===(a=o.decorate)||void 0===a||null===(u=a.goodDetailPage)||void 0===u?void 0:u.optionsInfo),e.next=22,(0,d.tipBeforeOper)({goodsData:I,goods_id:O,option_id:C,total:P,type:E.btn,buy_num:$,activityInfo:S},!1);case 22:return e.next=24,d.addCart.call(this,{goods_id:O,goodDetail:j,option_id:C||0,total:P,activityInfo:S,buy_num:$,is_origin:T});case 24:return 1==this.goodsData.has_option&&(null===(p=this.$refs)||void 0===p||p.goodsPicker.toggle()),this.$decorator.getModule("diymenu").getCartNum(),e.abrupt("break",64);case 27:return this.$Router.auto({path:"/pagesCart/index"}),e.abrupt("break",64);case 29:return e.next=31,r.default.dispatch("login/checkLogin");case 31:if(e.sent){e.next=33;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 33:if(!(0,l.hasBindBySence)("buy")){e.next=35;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 35:return N=c.SINGLE_BUY_ACTIVE.includes(E.activeName),G=N?null===(g=r.default.state)||void 0===g||null===(h=g.decorate)||void 0===h||null===(v=h.goodDetailPage)||void 0===v?void 0:v.activeOptInfo:null===(b=r.default.state)||void 0===b||null===(m=b.decorate)||void 0===m||null===(_=m.goodDetailPage)||void 0===_?void 0:_.optionsInfo,this.$store.commit("quickPurchase/setGoodDetail",D),N&&"1"==E.is_join?(G.is_join="1",G.team_id=E.team_id,E.activity_id&&(G.activity_id=E.activity_id),E.ladder&&(G.ladder=E.ladder)):delete G.is_join,this.$store.commit("quickPurchase/setOptionsInfo",G),R=(0,s.getActivityName)(this.activityInfo),T=c.SINGLE_BUY_ACTIVE.includes(R)&&!N,e.next=44,(0,d.tipBeforeOper)({goodsData:I,goods_id:O,option_id:C,total:P,type:E.btn,buy_num:$,activityInfo:S,is_origin:T});case 44:return t.log(this.goodsData),1==this.goodsData.has_option&&"3"!=this.goodsData.type&&(null===(y=this.$refs)||void 0===y||y.goodsPicker.toggle()),0==this.goodsData.has_option&&"3"==this.goodsData.type&&(null===(k=this.$refs)||void 0===k||k.goodsPickerAppoint.toggle()),z={goodDetail:j,goods_id:O,option_id:C,total:P,detailInfo:D,liverId:this.liverId,canBuy:this.canBuy,buy_num:$,activityInfo:S,is_origin:T},"groups"!=R||T||(z.extend_params=(0,d.handleGroupParams)(G)),"3"!=this.goodsData.type&&d.createOrder.call(this,f({},z)),e.abrupt("break",64);case 51:return"wx_service"!=E.url?this.$Router.auto(E.url,{wxappid:E.wxappid}):"wx_service"==E.url&&(r.default.state.shopWxCode?r.default.commit("changeWxCode",{status:!0}):r.default.dispatch("getWxCode").then((function(t){t&&r.default.commit("changeWxCode",{status:!0})}))),e.abrupt("break",64);case 53:return r.default.state.shopWxCode?r.default.commit("changeWxCode",{status:!0}):r.default.dispatch("getWxCode").then((function(t){t&&r.default.commit("changeWxCode",{status:!0})})),e.abrupt("break",64);case 55:return e.next=57,r.default.dispatch("login/checkLogin");case 57:if(e.sent){e.next=59;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 59:return L=null===(w=this.goodsData)||void 0===w||null===(x=w.ext_field)||void 0===x?void 0:x.buy_button_settings,L&&1==(null===L||void 0===L?void 0:L.click_style)&&(null===(q=this.$refs)||void 0===q||q.bargaining.toggle()),L&&2==(null===L||void 0===L?void 0:L.click_style)&&this.$Router.auto(L.click_jump_url,{wxappid:L.btn_jump_link_wxappid}),L&&3==(null===L||void 0===L?void 0:L.click_style)&&(A=null===L||void 0===L?void 0:L.click_telephone,A&&uni.makePhoneCall({phoneNumber:A})),e.abrupt("break",64);case 64:e.next=70;break;case 66:e.prev=66,e.t1=e["catch"](2),t.log(e.t1,"eeeeeeeeeee"),"openPicker"==(null===e.t1||void 0===e.t1?void 0:e.t1.errorId)?"3"!=I.type?this.$refs.goodsPicker.toggle(null,e.t1.type):this.$refs.goodsPickerAppoint.toggle(null,e.t1.type):null!==e.t1&&void 0!==e.t1&&e.t1.errorInfo&&uni.showToast({title:e.t1.errorInfo,icon:"none"});case 70:case"end":return e.stop()}}),e,this,[[2,66]])}))),g.apply(this,arguments)}function h(t,e){return v.apply(this,arguments)}function v(){return v=(0,a.default)(regeneratorRuntime.mark((function e(i,n){var o,a,s,u,f,g,h,v,b,m,_,y,k,w,x,I,O,C,P,D,$,j,S,E,B,M,N,G,R,T,z,L,q,A,F=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:I=n.goodsData,O=n.goods_id,C=n.option_id,P=n.total,D=n.detailInfo,$=n.activityInfo,j=n.goodDetail,S=n.is_origin,E=n.sub_shop_id,B=n.buy_num,e.prev=1,e.t0=i.target,e.next="detail_info/refresh"===e.t0?5:"goods/clickBuyBtn"===e.t0?7:"detail_spec/clickItem"===e.t0?11:"detail_navbar/clickItem"===e.t0?33:"detail_comment/checkMore"===e.t0?35:"detail_comment/previewImage"===e.t0?37:"detail_info/clickShare"===e.t0?40:"detail_info/viewReward"===e.t0?52:"detail_sale/clickItem"===e.t0?54:"detail_sale/clickGroupsItem"===e.t0?73:"detail_sale/clickGroups"===e.t0?76:"detail_swipe/clickImg"===e.t0?79:"detail_pullup/clickDetail"===e.t0?81:83;break;case 5:return"frontStop"==i.data?this.$decorator.getPage(this.$Route).setPageInfo({detail_navbar:{params:{is_buy_disable:!0}}},"goodDetail/eventHandler.js/eventHandler"):this.pullDownRefresh(),e.abrupt("break",83);case 7:return e.next=9,this.$store.dispatch("quickPurchase/checkLoginStatus");case 9:return this.cartAdder.getGoodDetail(null===i||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.value)||void 0===a?void 0:a.gid,"godddDEtail/goods/clickBuyBtn").then((function(t){0===t.error&&F.cartAdder.callback({type:"toggle",data:{type:"spec"}})})),e.abrupt("break",83);case 11:return e.next=13,r.default.dispatch("login/checkLogin");case 13:if(e.sent){e.next=15;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 15:if(t.log((0,l.hasBindBySence)("buy"),'hasBindBySence("buy")'),!(0,l.hasBindBySence)("cart")&&!(0,l.hasBindBySence)("buy")){e.next=18;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 18:if(this.$store.commit("quickPurchase/setGoodDetail",D),M=c.SINGLE_BUY_ACTIVE.includes(i.data.params.activeName),N=M?null===(s=r.default.state)||void 0===s||null===(u=s.decorate)||void 0===u||null===(f=u.goodDetailPage)||void 0===f?void 0:f.activeOptInfo:null===(g=r.default.state)||void 0===g||null===(h=g.decorate)||void 0===h||null===(v=h.goodDetailPage)||void 0===v?void 0:v.optionsInfo,this.$store.commit("quickPurchase/setOptionsInfo",N),!M){e.next=30;break}return this.$store.commit("quickPurchase/setGoodDetail",D),e.next=26,d.tipBeforeOper.call(this,{goodsData:I,goods_id:O,option_id:C,total:P,type:"buy",activityInfo:$});case 26:1==this.goodsData.has_option&&(null===(G=this.$refs)||void 0===G||G.goodsPicker.toggle()),d.createOrder.call(this,{goods_id:O,option_id:C,total:P,goodDetail:j,detailInfo:D,is_origin:S}),e.next=32;break;case 30:1==this.goodsData.has_option&&"3"!=this.goodsData.type&&(null===(R=this.$refs)||void 0===R||R.goodsPicker.toggle(null,"spec","cacheNum")),"3"==this.goodsData.type&&(null===(T=this.$refs)||void 0===T||T.goodsPickerAppoint.toggle());case 32:return e.abrupt("break",83);case 33:return p.call(this,i,{goodsData:I,goodDetail:this.goodDetail,goods_id:O,option_id:C,total:P,detailInfo:D,activityInfo:$,is_origin:S,sub_shop_id:E,buy_num:B}),e.abrupt("break",83);case 35:return 0!=i.total&&this.$Router.auto({path:"/pagesGoods/detail/allComments",query:{goods_id:O}}),e.abrupt("break",83);case 37:return z=i.data,L=z.index,q=z.urls,uni.previewImage({current:L,urls:q.map((function(t){return F.$utils.media(t)}))}),e.abrupt("break",83);case 40:return e.next=42,r.default.dispatch("login/checkLogin");case 42:if(e.sent){e.next=46;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 46:if(!(0,l.hasBindBySence)("share")){e.next=50;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 50:this.showShare=!0;case 51:return e.abrupt("break",83);case 52:return this.showReward=!0,e.abrupt("break",83);case 54:if(this.type=i.data.type,A=null===(b=this.pageInfo.detail_sale)||void 0===b?void 0:b.data,A&&this.type&&(this.info=A.filter((function(t){return t.type==F.type}))[0]),"samecity"!=this.type){e.next=60;break}return this.$Router.auto("/pagesOrder/deliveryArea"),e.abrupt("return");case 60:if("verify"!=this.type){e.next=64;break}return t.log(111),this.$utils.getMapLocation().then((function(t){var e={longitude:(null===t||void 0===t?void 0:t.longitude)||"",latitude:(null===t||void 0===t?void 0:t.latitude)||"",goods_id:O,title:0==I.type?"自提点":"核销点"};F.$refs.mapPicker.showMapPicker(e)})).catch((function(e){t.log(e,"22222>>>>>>>>>>>>>>>")})),e.abrupt("return");case 64:if(e.t1="coupon"==i.data.type,!e.t1){e.next=69;break}return e.next=68,r.default.dispatch("login/checkLogin");case 68:e.t1=!e.sent;case 69:if(!e.t1){e.next=71;break}return e.abrupt("return",r.default.commit("login/setModal",!0));case 71:return this.show=!0,e.abrupt("break",83);case 73:return this.$store.commit("groups/setGroupsTeamId",null),this.$Router.auto({path:"/pagesGoods/groups/detail",query:{team_id:i.data.item.id}}),e.abrupt("break",83);case 76:return this.groupsInfo=i.data.info||{},this.groupShow=!0,e.abrupt("break",83);case 79:return"1"==(null===(m=r.default.state.setting)||void 0===m||null===(_=m.systemSetting)||void 0===_||null===(y=_.basic)||void 0===y?void 0:y.photo_preview)&&uni.previewImage({urls:i.data.items,current:i.data.index,indicator:"number"}),e.abrupt("break",83);case 81:return null===(k=r.default.state.setting)||void 0===k||null===(w=k.systemSetting)||void 0===w||null===(x=w.basic)||void 0===x||x.photo_preview,e.abrupt("break",83);case 83:e.next=88;break;case 85:e.prev=85,e.t2=e["catch"](1),"openPicker"==(null===e.t2||void 0===e.t2?void 0:e.t2.errorId)?this.$refs.goodsPicker.toggle(null,e.t2.type,"cacheNum"):null!==e.t2&&void 0!==e.t2&&e.t2.errorInfo&&uni.showToast({title:e.t2.errorInfo,icon:"none"});case 88:case"end":return e.stop()}}),e,this,[[1,85]])}))),v.apply(this,arguments)}}).call(this,i("5a52")["default"])},be34:function(t,e,i){(function(t){var n=i("288e");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a481"),i("96cf");var o,a=n(i("3b8d")),r=n(i("bd86")),s=n(i("7a43")),c=n(i("1bb0")),d=n(i("cfe0")),l=n(i("23ea")),u=n(i("c12a")),f=n(i("b703")),p=i("b788"),g=i("0bd8"),h=i("2f62");function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){(0,r.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={components:{Goods:s.default,CutDown:c.default,ShareModal:l.default,goodsPicker:d.default,PosterModal:u.default},data:function(){return{team_id:"",state:"",users:[],goods:{},groupsInfo:{},optionId:"",optionChoseNum:"1",optionChoose:"",goodsInfo:null,optionInfo:null,goodsData:{},goodDetail:{},activityInfo:{},canBuy:!1,showShare:!1,showPoster:!1,posterData:{},loadedError:!1,isWxScan:!1}},computed:b(b(b(b({},(0,h.mapState)("setting",{shareBase:function(t){var e;return null===(e=t.systemSetting)||void 0===e?void 0:e.share}})),(0,h.mapState)("login",["isLogin"])),(0,h.mapState)("groups",{id:function(t){return t.groupsTeamId}})),{},{getSurplus:function(){var t=this.groupsInfo,e=t.count,i=void 0===e?0:e,n=t.success_num,o=void 0===n?0:n;return+o-+i},filterUsers:function(){return"1"==this.state&&5==this.users.length?this.users.slice(0,5):this.users.slice(0,4)},showSurplusIcon:function(){return this.users.length>5&&"1"!=this.state},surplusUserNum:function(){return this.users.length-4}}),watch:{isLogin:{handler:function(t){this.team_id&&t&&this.getInfo()},immediate:!0}},mounted:function(){var t=this.$Route.query.team_id;t&&(this.team_id=this.$Route.query.team_id),this.team_id&&this.getInfo(),this.initBuyPicker()},onShow:function(){uni.hideLoading(),this.team_id&&this.getInfo()},onPullDownRefresh:function(){this.team_id&&this.getInfo()},methods:b(b({},(0,h.mapMutations)("order",["setGroupsUser"])),{},{initBuyPicker:function(){this.cartAdder=new f.default},getInfo:function(){var t=this;this.$api.orderApi.groupsOrder({team_id:this.team_id}).then((function(e){if(0==e.error){var i,n,o,a;t.loadedError=!1;var r=e.crew_list,s=e.goods,c=e.team_detail,d=e.activity;t.users=r,t.state=c.success,t.goods=s,t.team_id=c.id,"-1"!=d.status&&"-2"!=d.status||"0"==t.state||(c.end_time="0000-00-00 00:00:00"),t.groupsInfo=b(b({},c),d)||{},t.posterData={title:e.goods.title,thumb:e.goods.thumb,groups_price:"0"==(null===e||void 0===e||null===(i=e.team_detail)||void 0===i?void 0:i.is_ladder)&&"0"==e.goods.has_option?null===(n=e.goods)||void 0===n?void 0:n.activity_price:null===(o=e.goods)||void 0===o||null===(a=o.price_range)||void 0===a?void 0:a.min_price,original_price:e.goods.original_price,invite_url:e.team_detail.invite_url,team_id:t.team_id},t.$store.commit("groups/setGroupsPoster",t.posterData),t.setShareInfo(e)}else-10004===e.error&&(t.loadedError=!0,t.$toast(e.message,1e3))}))},joinGroups:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.goods.activity_stock){e.next=2;break}return e.abrupt("return");case 2:try{this.goodsInfo&&this.optionInfo?this.customEvent():this.getGoodsInfo()}catch(i){t.log(i)}case 3:case"end":return e.stop()}}),e,this)})));function i(){return e.apply(this,arguments)}return i}(),getGoodsInfo:function(){var t=this,e=this.goods.id;this.$api.goodsApi.goodsDetail({id:e,team_id:this.team_id}).then((function(e){if(0===e.error){var i;if(!e.activity.groups)return t.$toast("团无效"),void t.getInfo();t.goodsInfo=e,t.goodDetail=e.data.goods,t.buy_num=e.data.buy_num,t.canBuy="1"==e.perm.buy,t.activityInfo=null!==(i=null===e||void 0===e?void 0:e.activity)&&void 0!==i?i:null,t.$decorator.getPage(11).setGoodDetail(e),t.handleOption()}}))},handleOption:function(){var t="1"==this.goodDetail.has_option;if(t)this.getOptionsInfo(this.goods.id);else{var e={options:[],spec:[]};this.optionsInfo=e,this.$decorator.getPage(11).setActiveOptInfo(b(b({},e),{},{activeName:"groups"})),this.customEvent()}},getOptionsInfo:function(t){var e=this;this.$decorator.getPage(11).getActiveGoodsOption({goods_id:t,activeName:"groups",team_id:this.team_id}).then((function(t){0===t.error&&(e.optionInfo=t,e.customEvent())}))},customEvent:function(){var t={activeName:"groups",is_join:"1",team_id:this.team_id},e=this.groupsInfo,i=e.is_ladder,n=e.ladder,o=e.end_time,a=e.activity_id;"1"==i&&(t.ladder=n),a&&(t.activity_id=a);var r=new Date(Date.parse(o.replace(/-/g,"/"))).getTime();r-Date.now()>0&&"-1"==this.groupsInfo.status&&(t.activity_id=this.groupsInfo.activity_id);var s=this.goodsInfo,c=s.activity,d=s.data,l=d.goods,u=d.sub_shop_info,f=d.buy_num;p.eventHandler.call(this,{data:b({btn:"buy"},t),target:"detail_navbar/clickItem"},{goodsData:l,goods_id:this.goods.id,option_id:this.optionId,total:this.optionChoseNum,goodDetail:l,detailInfo:this.goodsInfo,activityInfo:c,sub_shop_id:null===u||void 0===u?void 0:u.id,buy_num:f})},clickBtn:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e,i){var n,o,a,r,s,c,d,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.goodsInfo,o=n.activity,a=n.data,r=a.goods,s=a.sub_shop_info,a.buy_num,c=b({goodsData:r,goods_id:this.goods.id,option_id:this.optionId,total:this.optionChoseNum,goodDetail:r,detailInfo:this.goodsInfo,activityInfo:o,sub_shop_id:null===s||void 0===s?void 0:s.id,buy_num:this.buy_num,canBuy:"1"==this.goodsInfo.perm.buy},i),t.prev=2,t.next=5,(0,g.tipBeforeOper)(c,null===(d=this.$refs)||void 0===d||null===(l=d.goodsPicker)||void 0===l?void 0:l.show);case 5:if("buy"!=e){t.next=9;break}return t.next=8,g.createOrder.call(this,c);case 8:null===(u=this.$refs)||void 0===u||u.goodsPicker.toggle();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),"openPicker"==t.t0.errorId&&uni.showToast({title:t.t0.errorInfo,icon:"none"});case 14:case"end":return t.stop()}}),t,this,[[2,11]])})));function e(e,i){return t.apply(this,arguments)}return e}(),specPickerChoose:function(t,e,i){this.optionId=null===e||void 0===e?void 0:e.id,this.optionChoose=t},optionChangeNum:function(t){this.optionChoseNum=t},shareHandler:function(){this.showShare=!1,this.posterShow()},posterShow:function(){this.showPoster?this.$refs.poster&&this.$refs.poster.toggle((function(e){t.log("toggle",e)})):this.showPoster=!0},handleShare:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("1"==this.groupsInfo.is_leader){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$store.dispatch("login/checkLogin");case 4:if(t.sent){t.next=8;break}return t.abrupt("return",this.$store.commit("login/setModal",!0));case 8:this.showShare=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),finishGroup:function(){var t=this;clearInterval(o);var e=this.state;"0"===e&&(this.getInfo(),o=setInterval((function(){e===t.state?t.getInfo():clearInterval(o)}),1e3),this.$once("hook:beforeDestroy",(function(){clearInterval(o)})))},toAllUsers:function(){this.setGroupsUser({list:this.users,id:this.groupsInfo.leader_id}),this.$Router.push({path:"/pagesGoods/groups/user"})},toIndex:function(){this.$Router.auto({path:"/"})},toGoods:function(){this.$Router.auto({path:"/pagesGoods/detail/index",query:{goods_id:this.goods.id}})},toOrder:function(){this.$Router.auto({path:"/pagesOrder/detail",query:{order_id:this.groupsInfo.order_id}})},setShareInfo:function(e){if(this.$utils.is_weixin()){var i={description:"点我立即拼单".concat(e.goods.title)||!1,link:e.team_detail.invite_url,logo:this.$utils.media(e.goods.thumb),sdkUrl:window.location.href,title:e.goods.title.title};t.log(i,"拼团详情shareInfo<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),this.$utils.getShareInfo(i)}},sendMsg:function(e){var i=this;return new Promise((function(n){i.$api.othersApi.getNoticeTemId({type_code:e},{errorToast:!1}).then((function(e){0==e.error?wx.requestSubscribeMessage({tmplIds:e.data,success:function(e){t.log(e)},fail:function(e){t.log(e)},complete:function(t){n()}}):n()}))}))}})};e.default=m}).call(this,i("5a52")["default"])},d0f2:function(t,e,i){"use strict";i.r(e);var n=i("2730"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},e265:function(t,e,i){t.exports=i("ed33")},e9ad:function(t,e,i){var n=i("57be");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("41c0456d",n,!0,{sourceMap:!1,shadowMode:!1})},e9c0:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cut-down"},[i("span",{staticClass:"day",style:{background:t.bg_color}},[t._v(t._s(t.countTime[0]))]),i("span",{staticClass:"text",style:{color:t.color}},[t._v("天")]),i("span",{staticClass:"time",style:{background:t.bg_color}},[t._v(t._s(t.countTime[1]))]),i("span",{staticClass:"colon",style:{color:t.color}},[t._v(":")]),i("span",{staticClass:"time",style:{background:t.bg_color}},[t._v(t._s(t.countTime[2]))]),i("span",{staticClass:"colon",style:{color:t.color}},[t._v(":")]),i("span",{staticClass:"time",style:{background:t.bg_color}},[t._v(t._s(t.countTime[3]))])])},a=[]},ed33:function(t,e,i){i("014b"),t.exports=i("584a").Object.getOwnPropertySymbols},edd8:function(t,e,i){var n=i("65da");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("50dd1134",n,!0,{sourceMap:!1,shadowMode:!1})},f30c:function(t,e,i){"use strict";i.r(e);var n=i("0b4e"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},f99f:function(t,e,i){"use strict";var n=i("edd8"),o=i.n(n);o.a}}]);