(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[69],{"2d77":function(t,i,e){var o=e("288e");e("8e6e"),e("ac6a"),e("456d"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=o(e("bd86"));function a(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,o)}return e}function s(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?a(Object(e),!0).forEach((function(i){(0,n.default)(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}e("a481");var r=null,c={name:"GoodsGroup",props:{item:{type:Object,default:function(){}},hasBtn:{type:Boolean,default:!0}},data:function(){return{preloading:!0,loading:{},timestamp:null,dateTimer:null}},computed:{getLoadingSrc:function(){var t,i,e,o;return null!==(t=this.$store.state.setting.systemSetting)&&void 0!==t&&null!==(i=t.basic)&&void 0!==i&&i.loading?this.$store.state.setting.cacheLoadingImg||this.$utils.media(null===(e=this.$store.state.setting.systemSetting)||void 0===e||null===(o=e.basic)||void 0===o?void 0:o.loading):this.$utils.staticImg("decorate/goods_col2.png")},getGroupsPrice:function(){var t,i,e,o=(null===(t=this.item.activities)||void 0===t?void 0:t.groups)||(null===(i=this.item.activities)||void 0===i?void 0:i.preheat_activity)||{};return 0==this.item.has_option&&"0"==o.inner_type?o.activity_price:(null===o||void 0===o||null===(e=o.price_range)||void 0===e?void 0:e.min_price)||0},getPrice:function(){return"1"==this.item.has_option?this.item.price:this.item.min_price},isPreheat:function(){var t;return null===(t=this.item.activities)||void 0===t?void 0:t.preheat_activity},getGroupsNum:function(){var t,i,e,o=null===(t=this.item)||void 0===t||null===(i=t.activities)||void 0===i?void 0:i.groups;return 0==(null===o||void 0===o?void 0:o.inner_type)?"".concat(null===o||void 0===o||null===(e=o.rules)||void 0===e?void 0:e.success_num,"人团"):"阶梯团"}},mounted:function(){var t=this;setTimeout((function(){t.preloading=!1}),3e3)},methods:{loaded:function(t){var i=this;if(t){var e=t.replace(/\./g,"_");this.loading[e]=!1,clearTimeout(r),r=setTimeout((function(){i.loading=s({},i.loading)}),100)}},clickGood:function(){this.$emit("on-click",this.item)}},filters:{formatMoney:function(t){return"number"===typeof t||"string"===typeof t&&""!==t.trim()?t>=1e4?parseInt(t/100)/100+"万":parseFloat(t):0}}};i.default=c},"3a29":function(t,i,e){"use strict";e.r(i);var o=e("98b1"),n=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=n.a},"5db3":function(t,i,e){"use strict";e.r(i);var o=e("b49e"),n=e("3a29");for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);e("a946");var s,r=e("f0c5"),c=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"5a25c08e",null,!1,o["a"],s);i["default"]=c.exports},"7aef":function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return o}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"goods-group"},[e("div",{staticClass:"image-box"},[t.item.preloading&&t.preloading?e("img",{staticClass:"goods-img preload",attrs:{mode:"widthFix","lazy-load":!0,src:t.getLoadingSrc,alt:""}}):t._e(),e("img",{staticClass:"goods-img",class:{loading:t.item.preloading&&t.preloading},attrs:{mode:"widthFix","lazy-load":!0,src:t.$utils.media(t.item.thumb),alt:""},on:{load:function(i){arguments[0]=i=t.$handleEvent(i),t.loaded(t.item.thumb)},error:function(i){arguments[0]=i=t.$handleEvent(i),t.loaded(t.item.thumb)}}})]),e("div",{staticClass:"goods-content"},[e("div",[e("div",{staticClass:"goods-title",class:[t.item.sub_name?"omit-1":"omit-2"]},[t.isPreheat?t._e():e("span",{staticClass:"group-label"},[t._v(t._s(t.getGroupsNum))]),t._v(t._s(t.item.title))]),t.item.sub_name?e("div",{staticClass:"goods-sub-title line-hide"},[t._v(t._s(t.item.sub_name))]):t._e()]),e("div",{staticClass:"goods-price-box"},[e("div",{staticClass:"goods-price"},[e("div",{staticClass:"group-price"},[e("span",{staticClass:"name"},[t._v("拼团价")]),e("span",{staticClass:"price"},[e("span",{staticClass:"unit"},[t._v("￥")]),t._v(t._s(t._f("formatMoney")(t.getGroupsPrice)))])]),e("div",{staticClass:"original-price"},[e("span",{staticClass:"name"},[t._v("单买价")]),e("span",{staticClass:"price"},[e("span",{staticClass:"unit"},[t._v("￥")]),t._v(t._s(t._f("formatMoney")(t.getPrice)))])])]),t.hasBtn?e("div",{staticClass:"buy-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickGood.apply(void 0,arguments)}}},[t._v("马上拼")]):t._e()])])])},a=[]},"90ca":function(t,i,e){"use strict";e.r(i);var o=e("7aef"),n=e("d99e");for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);e("c7ca");var s,r=e("f0c5"),c=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"51688340",null,!1,o["a"],s);i["default"]=c.exports},"98b1":function(t,i,e){(function(t){var o=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("a481");var n=o(e("90ca")),a={components:{Goods:n.default},data:function(){return{list:[],page:1,loading:!1,count:0,reqesting:!1,activityId:"",countTime:["0","23","59","59"],activeInfo:{},isFinish:!1}},computed:{loadingType:function(){var t=0;return this.loading?t=1:this.list.length==this.count&&this.count>0&&0==this.loading&&(t=2),t},isPreheat:function(){var t=this.activeInfo,i=t.is_preheat,e=t.start_time;if(!e)return!1;var o=new Date(Date.parse(e.replace(/-/g,"/"))).getTime();return"1"==i&&o>Date.now()}},onLoad:function(){this.activityId=this.$Route.query.id},onShow:function(){this.reset()},methods:{getList:function(){var t=this;if(!this.reqesting){this.reqesting=!0;var i={page:this.page,get_activity:1,activity_id:this.activityId,activity_type:"groups"};this.loading=!0,this.$api.goodsApi.goodsList(i).then((function(i){0==i.error&&(i.list.length>0&&(t.list=t.list.concat(i.list)),t.page=t.page+1,t.loading=!1,t.count=i.total,t.graceLazyload.load(0,t),t.reqesting=!1)})).catch((function(i){t.reqesting=!1})).finally((function(t){setTimeout((function(){uni.hideLoading()}),100)}))}},getActivity:function(){var i=this;uni.showLoading(),this.$api.goodsApi.getActivity({activity_id:this.activityId}).then((function(t){0==t.error&&(i.activeInfo=t,i.isFinish=t.status<0,i.isFinish?i.$Router.replace("/pagesGoods/activity/expire"):(i.getList(),i.cutdownTime()))})).catch((function(i){t.log(i)})).finally((function(){uni.hideLoading()}))},reset:function(){this.list=[],this.page=1,this.getActivity(),setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},cutdownTime:function(){var t=this.activeInfo,i=t.start_time,e=t.end_time,o=this.isPreheat?i:e,n=new Date(Date.parse(o.replace(/-/g,"/"))).getTime();if(n-Date.now()>0){var a=n/1e3;this.startCount(a)}},startCount:function(t){var i=this;this.countTime=this.$utils.countDown(t,!1);var e=setInterval((function(){i.countTime=i.$utils.countDown(t,!1),0==i.countTime&&(clearInterval(e),i.reset())}),1e3);this.$once("hook:beforeDestroy",(function(){clearInterval(e)}))},clickGoods:function(t){this.$Router.auto({path:"/pagesGoods/detail/index",query:{goods_id:t.id}})}},onPullDownRefresh:function(){uni.showLoading({title:"加载中"}),this.reset()},onReachBottom:function(){this.list.length==this.count&&this.page>1||this.getList()},onPageScroll:function(t){this.graceLazyload.load(t.scrollTop,this)}};i.default=a}).call(this,e("5a52")["default"])},a946:function(t,i,e){"use strict";var o=e("f60e"),n=e.n(o);n.a},b0df:function(t,i,e){var o=e("f644");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("face68aa",o,!0,{sourceMap:!1,shadowMode:!1})},b49e:function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return o}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"groups"},[e("div",{staticClass:"groups-img-box"},[e("img",{staticClass:"groups-img",attrs:{src:t.$utils.staticImg("activity/group/banner.png")}}),e("div",{staticClass:"count-down"},[t.isFinish?e("div",{staticClass:"groups-surplus"},[t._v("本场已结束")]):t.isPreheat?t.isPreheat?e("div",{staticClass:"groups-surplus"},[t._v("距本场开始")]):t._e():e("div",{staticClass:"groups-surplus"},[t._v("距本场结束")]),t.countTime&&!t.isFinish?e("div",{staticClass:"groups-count"},[e("span",{staticClass:"text"},[t._v(t._s(t.countTime[0])+"天")]),e("span",{staticClass:"time"},[t._v(t._s(t.countTime[1]))]),e("span",{staticClass:"colon"},[t._v(":")]),e("span",{staticClass:"time"},[t._v(t._s(t.countTime[2]))]),e("span",{staticClass:"colon"},[t._v(":")]),e("span",{staticClass:"time"},[t._v(t._s(t.countTime[3]))])]):t._e()])])]),e("div",{staticClass:"goods"},[t._l(t.list,(function(i){return e("v-uni-view",{key:i.id,staticClass:"goods-list"},[e("Goods",{attrs:{item:i,type:"groups"},on:{"on-click":function(i){arguments[0]=i=t.$handleEvent(i),t.clickGoods.apply(void 0,arguments)}}})],1)})),t.list.length!=t.count?e("kdx-page-loading",{attrs:{loadingType:t.loadingType}}):t._e(),!t.loading&&t.count<=0?[e("v-uni-view",{staticClass:"default-page flex-column"},[e("v-uni-view",{staticClass:"bg"},[e("v-uni-image",{attrs:{src:t.$utils.staticImg("default/search.png")}})],1),e("v-uni-view",{staticClass:"default-text"},[t._v("没找到相关宝贝")])],1)]:t._e()],2)])},a=[]},c7ca:function(t,i,e){"use strict";var o=e("b0df"),n=e.n(o);n.a},d99e:function(t,i,e){"use strict";e.r(i);var o=e("2d77"),n=e.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=n.a},db7d:function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.groups[data-v-5a25c08e]{position:relative;height:%?386?%}.groups .groups-img[data-v-5a25c08e]{height:%?346?%;width:%?750?%}.groups .count-down[data-v-5a25c08e]{position:absolute;left:%?24?%;bottom:%?0?%;height:%?80?%;width:%?702?%;background:#fff;border-radius:6px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.groups .count-down .groups-surplus[data-v-5a25c08e]{font-size:%?24?%;line-height:%?34?%;color:#212121}.groups .count-down .groups-count[data-v-5a25c08e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?32?%;color:#fff}.groups .count-down .groups-count .time[data-v-5a25c08e]{width:%?32?%;height:%?32?%;line-height:%?32?%;text-align:center;background-color:#ff6f29;color:#fff;font-size:%?24?%;border-radius:%?4?%}.groups .count-down .groups-count .text[data-v-5a25c08e]{margin-left:%?16?%;margin-right:%?12?%;font-size:%?24?%;color:#212121}.groups .count-down .groups-count .colon[data-v-5a25c08e]{margin:0 %?4?%;line-height:%?32?%;color:#ff6f29}.goods[data-v-5a25c08e]{margin-top:%?16?%;padding:0 %?24?%}.goods .goods-list[data-v-5a25c08e]{margin-bottom:%?16?%}',""]),t.exports=i},f60e:function(t,i,e){var o=e("db7d");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("3bf63fed",o,!0,{sourceMap:!1,shadowMode:!1})},f644:function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.goods-group[data-v-51688340]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?16?% %?24?%;border-radius:%?12?%;background:#fff}.goods-group .image-box[data-v-51688340]{position:relative;width:%?220?%;height:%?220?%;border-radius:%?12?%;overflow:hidden;-webkit-flex-shrink:0;flex-shrink:0}.goods-group .image-box .goods-img[data-v-51688340]{width:100%;height:100%;border-radius:%?12?%}.goods-group .goods-content[data-v-51688340]{padding-left:%?24?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;width:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:%?220?%}.goods-group .goods-content .goods-sub-title[data-v-51688340]{font-size:%?24?%;line-height:%?34?%;color:#969696;padding-top:%?8?%}.goods-group .goods-content .goods-price-box[data-v-51688340]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.goods-group .goods-content .group-price .name[data-v-51688340],\n.goods-group .goods-content .original-price .name[data-v-51688340]{margin-right:%?8?%}.goods-group .goods-content .group-price[data-v-51688340]{font-size:%?24?%;line-height:%?34?%;color:#ff3c29;padding-top:%?8?%;padding-bottom:%?4?%}.goods-group .goods-content .group-price .price[data-v-51688340]{font-size:%?32?%;font-weight:700;line-height:%?46?%}.goods-group .goods-content .group-price .unit[data-v-51688340]{font-size:%?24?%;line-height:%?34?%}.goods-group .goods-content .original-price[data-v-51688340]{font-size:%?24?%;line-height:%?34?%;color:#969696}.goods-group .goods-content .buy-btn[data-v-51688340]{border-radius:%?48?%;width:%?128?%;height:%?54?%;font-size:%?24?%;font-weight:700;text-align:center;line-height:%?54?%;color:#fff;background:-webkit-linear-gradient(335.43deg,#ff8a00 19.05%,#ff4c14 87.67%);background:linear-gradient(114.57deg,#ff8a00 19.05%,#ff4c14 87.67%)}.group-label[data-v-51688340]{font-size:%?20?%;line-height:%?28?%;padding:%?2?% %?8?%;color:#ff6f29;background:#fff9f0;border:%?2?% solid #ffdaa3}.goods-title[data-v-51688340]{font-size:%?28?%;line-height:%?40?%;color:#212121}.goods-title .group-label[data-v-51688340]{border-radius:%?4?%;margin-right:%?4?%}.omit-1[data-v-51688340]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.omit-2[data-v-51688340]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}',""]),t.exports=i}}]);