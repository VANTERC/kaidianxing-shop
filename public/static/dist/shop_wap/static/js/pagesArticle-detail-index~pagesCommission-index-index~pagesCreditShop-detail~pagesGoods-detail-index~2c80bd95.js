(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"0d93":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.community-poster-modal[data-v-306e93ec]{position:fixed;width:100%;height:100%;top:0;left:0;z-index:9999999}.community-poster-modal .modal[data-v-306e93ec]{position:fixed;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.7)}.community-poster-modal .create-poster[data-v-306e93ec]{opacity:0}.community-poster-modal.loading[data-v-306e93ec]{visibility:hidden}.community-poster-modal .none[data-v-306e93ec]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.community-poster-modal .poster-container[data-v-306e93ec]{position:absolute;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;height:%?996?%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.community-poster-modal .poster-container .close[data-v-306e93ec]{position:absolute;left:50%;top:%?-80?%;width:%?48?%;height:%?48?%;line-height:%?40?%;border:1px solid #fff;text-align:center;border-radius:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);box-sizing:border-box;background:#fff}.community-poster-modal .poster-container .close i[data-v-306e93ec]{color:#fff;font-size:%?20?%}.community-poster-modal .poster-container .link-content-h5[data-v-306e93ec]{-webkit-justify-content:space-around;justify-content:space-around;color:#fff;font-size:%?20?%;text-align:center;height:30%;-webkit-flex-shrink:0;flex-shrink:0;padding:%?40?% %?40?% 0}.community-poster-modal .poster-container .link-content-wxapp[data-v-306e93ec]{color:#333;font-size:%?20?%;text-align:center;height:%?329?%;-webkit-flex-shrink:0;flex-shrink:0;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.community-poster-modal .poster-container .link-content-wxapp .close[data-v-306e93ec]{border-top:%?1?% solid #e6e7eb;height:%?100?%;font-size:%?28?%;text-align:center;line-height:%?100?%;color:#969696;width:100%;padding:0 %?24?%;background:#fff}.community-poster-modal .poster-container .link-content-wxapp .share-btns[data-v-306e93ec]{display:-webkit-box;display:-webkit-flex;display:flex}.community-poster-modal .poster-container .link-content-wxapp .share-btns .btn[data-v-306e93ec]{width:22%;height:%?229?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;font-style:normal}.community-poster-modal .poster-container .link-content-wxapp .share-btns .btn uni-image[data-v-306e93ec]{margin:0 auto}.community-poster-modal .poster-container .link-content-wxapp .share-btns .btn uni-view[data-v-306e93ec]{margin:0 auto;text-align:center;color:#969696}.community-poster-modal .poster-container .link-content-wxapp uni-image[data-v-306e93ec]{width:%?120?%;height:%?120?%}.community-poster-modal .poster-container .link-content-wxapp uni-button[data-v-306e93ec]{background-color:initial;line-height:1.25;color:#333;border-radius:0}.community-poster-modal .poster-container .link-content-wxapp uni-button[data-v-306e93ec]::after{border:none}',""]),t.exports=e},"624f":function(t,e,n){"use strict";n.r(e);var o=n("8b5c"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},"6eb9":function(t,e,n){(function(t){var o=n("288e"),r=n("7037");n("5df3"),n("10ad"),n("8e6e"),n("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.getArticlePoster=W,e.getAvatar=P,e.getCommissionPoster=T,e.getCommissionPosterQrcode=v,e.getCreditGoodsPosters=C,e.getCreditShopQrcode=k,e.getFollowPosters=j,e.getGoodsPosters=R,e.getGroupPoster=D,e.getH5Qrcode=_,e.getJoinPoster=S,e.getWxArticlePoster=O,e.getWxGoodPoster=x,e.getWxGroupPoster=z,e.getWxappQrcode=w,n("ac6a"),n("96cf");var i=o(n("3b8d")),a=o(n("bd86"));n("a481");var s=o(n("365c")),l=h(n("1902")),c=o(n("4360")),u=o(n("2422")),d=o(n("ac8d")),f=o(n("6031"));function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(p=function(t){return t?n:e})(t)}function h(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=p(e);if(n&&n.has(t))return n.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=t[a]}return o.default=t,n&&n.set(t,o),o}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y="",b="";function w(){return new Promise((function(t,e){y?t(y):s.default.commissionApi.getWxappQrcode({}).then((function(e){0==(null===e||void 0===e?void 0:e.error)&&e.patch?uni.getImageInfo({src:e.patch,success:function(e){y=e.path,t(e.path)},fail:function(){uni.showToast({title:"加载商品二维码失败1",icon:"none"}),t()}}):(uni.showToast({title:"加载商品二维码失败2",icon:"none"}),t())})).catch((function(){t(),uni.showToast({title:"加载商品二维码失败3",icon:"none"})}))}))}function v(){return new Promise((function(t,e){y?t(y):s.default.merchantsApi.getCommissionPosterQrcode().then((function(e){0===e.error&&e.url?uni.getImageInfo({src:e.url,success:function(e){y=e.path,t(e.path)},fail:function(){uni.showToast({title:"加载商品二维码失败1",icon:"none"}),t()}}):(uni.showToast({title:"加载商品二维码失败2",icon:"none"}),t())})).catch((function(){t(),uni.showToast({title:"加载商品二维码失败3",icon:"none"})}))}))}function x(t){return new Promise((function(e,n){y?e(y):s.default.goodsApi.getWxPoster({goods_id:t}).then((function(t){0===t.error?uni.getImageInfo({src:t.patch,success:function(t){y=t.path,e(t.path)},fail:function(t){uni.showToast({title:"下载商品二维码失败",icon:"none"}),e()}}):(uni.showToast({title:"加载商品二维码失败:"+t.message,icon:"none"}),e())})).catch((function(){e(),uni.showToast({title:"加载商品二维码失败",icon:"none"})}))}))}function k(t){return new Promise((function(e,n){y?e(y):s.default.creditShopApi.getWxQrcode({id:t}).then((function(t){0==(null===t||void 0===t?void 0:t.error)&&t.patch?uni.getImageInfo({src:t.patch,success:function(t){y=t.path,e(t.path)},fail:function(){uni.showToast({title:"加载商品二维码失败1",icon:"none"}),e()}}):(uni.showToast({title:"加载商品二维码失败2",icon:"none"}),e())})).catch((function(){e(),uni.showToast({title:"加载商品二维码失败3",icon:"none"})}))}))}function P(t){return new Promise((function(e,n){b?e(b):uni.getImageInfo({src:t,success:function(t){b=t.path,e(t.path)},fail:function(){uni.showToast({title:"加载头像失败",icon:"none"}),e()}})}))}function _(e,n,o){/#\/$|#\/pages.+$/.test(e)&&(e=e.replace("#","&_route="));var r={};return o&&(r={foregroundColor:o.style.color,backgroundColor:o.style.bgcolor,margin:.04*n}),new Promise((function(o,i){u.default.make(m(m({canvasId:"qrcode",text:e,size:n,fileType:"png",margin:5},r),{},{success:function(e){t.log("成功"),y=e,o(e)},fail:function(e){t.log("失败"),uni.showToast({title:"生成二维码失败",icon:"none"}),i(e)}}))}))}function z(t){return new Promise((function(e,n){s.default.orderApi.getWxGroupsQrcode({team_id:t}).then((function(t){0===t.error?uni.getImageInfo({src:t.patch,success:function(t){y=t.path,e(t.path)},fail:function(t){uni.showToast({title:"下载商品二维码失败",icon:"none"}),e()}}):(uni.showToast({title:"加载商品二维码失败:"+t.message,icon:"none"}),e())})).catch((function(){e(),uni.showToast({title:"加载商品二维码失败",icon:"none"})}))}))}function O(t){return new Promise((function(e,n){y?e(y):s.default.articleApi.getWxappQrcode({id:t}).then((function(t){0===t.error?uni.getImageInfo({src:t.patch,success:function(t){y=t.path,e(t.path)},fail:function(t){uni.showToast({title:t,icon:"none"}),e()}}):(uni.showToast({title:"加载文章二维码失败:"+t.message,icon:"none"}),e())})).catch((function(){e(),uni.showToast({title:"加载文章二维码失败",icon:"none"})}))}))}function T(t,e){return y="",new Promise((function(n,o){f.default.getModule("poster").getPoster("commission").then(function(){var o=(0,i.default)(regeneratorRuntime.mark((function o(r){var a,s,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if("",a=r.filter((function(t){return"poster_qrcode"==t.id}))[0]||"",!a){o.next=6;break}return o.next=5,_(t.url,e,a);case 5:a=o.sent;case 6:s=l.deepCopy(r),s.forEach(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"poster_qrcode"==e.id&&(e.params.imgurl=a,y=a||""),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c=l.deepCopy(s),c=(0,d.default)(c),n(c);case 11:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}()).catch((function(t){uni.showToast({title:"生成海报失败",icon:"none"}),o(t),uni.hideLoading()}))}))}function R(t,e){var n;y="";var o=null===(n=c.default.state.decorate.goodDetailPage.detailInfo)||void 0===n?void 0:n.poster_url;return new Promise((function(t,n){f.default.getModule("poster").getPoster("goods").then(function(){var n=(0,i.default)(regeneratorRuntime.mark((function n(r){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=r.filter((function(t){return"poster_qrcode"==t.id}))[0],!a){n.next=5;break}return n.next=4,_(o,e);case 4:a=n.sent;case 5:s=l.deepCopy(r),s.forEach(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"poster_qrcode"==e.id&&(e.params.imgurl=a,y=a),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t((0,d.default)(s));case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){uni.showToast({title:"生成海报失败",icon:"none"}),n(t),uni.hideLoading()}))}))}function C(t,e){var n,o;y="";var r=null===(n=c.default.state.creditShop)||void 0===n||null===(o=n.creditPosterData)||void 0===o?void 0:o.poster_url;return new Promise((function(t,n){f.default.getModule("poster").getPoster("creditGoods").then(function(){var n=(0,i.default)(regeneratorRuntime.mark((function n(o){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=o.filter((function(t){return"poster_qrcode"==t.id}))[0],!a){n.next=5;break}return n.next=4,_(r,e);case 4:a=n.sent;case 5:s=l.deepCopy(o),s.forEach(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"poster_qrcode"==e.id&&(e.params.imgurl=a,y=a),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t((0,d.default)(s));case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){uni.showToast({title:"生成海报失败",icon:"none"}),n(t),uni.hideLoading()}))}))}function j(t){return y="",new Promise((function(t,e){f.default.getModule("poster").getPoster("follow").then((function(e){t((0,d.default)(e))})).catch((function(t){uni.showToast({title:"生成海报失败",icon:"none"}),e(t),uni.hideLoading()}))}))}function S(t,e){return y="",new Promise((function(n,o){f.default.getModule("poster").getPoster("join").then(function(){var o=(0,i.default)(regeneratorRuntime.mark((function o(r){var a,s,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=r.filter((function(t){return"poster_qrcode"==t.id}))[0]||"",!a){o.next=5;break}return o.next=4,_(t.url,e,a);case 4:a=o.sent;case 5:s=l.deepCopy(r),s.forEach(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"poster_qrcode"==e.id?(e.params.imgurl=a,y=a||""):"poster_avatar"==e.id&&(e.params.imgurl=avatarUrl,y=avatarUrl||""),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c=l.deepCopy(s),c=(0,d.default)(c),n(c);case 10:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}()).catch((function(t){uni.showToast({title:"生成海报失败",icon:"none"}),o(t),uni.hideLoading()}))}))}function D(t){return new Promise((function(t,e){f.default.getModule("poster").getPoster("group").then(function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(n){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.filter((function(t){return"poster_qrcode"==t.id}))[0]||"",!o){e.next=5;break}return e.next=4,_(o.params.imgurl,170,o);case 4:o=e.sent;case 5:r=l.deepCopy(n),r.forEach(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"poster_qrcode"==e.id&&(e.params.imgurl=o),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t((0,d.default)(r));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){uni.showToast({title:"生成海报失败",icon:"none"}),e(t),uni.hideLoading()}))}))}function W(t){return new Promise((function(t,e){f.default.getModule("poster").getPoster("article").then(function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(n){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.filter((function(t){return"poster_qrcode"==t.id}))[0]||"",!o){e.next=5;break}return e.next=4,_(o.params.imgurl,170,o);case 4:o=e.sent;case 5:r=l.deepCopy(n),r.forEach(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"poster_qrcode"==e.id&&(e.params.imgurl=o),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t((0,d.default)(r));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){uni.showToast({title:"生成海报失败",icon:"none"}),e(t),uni.hideLoading()}))}))}}).call(this,n("5a52")["default"])},7076:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("v-uni-view",{staticClass:"community-poster-modal",class:{loading:t.loading}},[n("v-uni-view",{staticClass:"modal",class:{"create-poster":!t.url}}),n("v-uni-view",{staticClass:"poster-container"},[n("v-uni-view",{staticClass:"close",class:{"create-poster":!t.url},staticStyle:{background:"rgba(0,0,0,0)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle.apply(void 0,arguments)}}},[n("i",{staticClass:"iconfont-m- icon-m-close"})]),n("div",{class:{"create-poster":!t.url}},[n("create-poster",{ref:"posterCreate",attrs:{painting:t.painterData,"img-src":t.url}})],1),n("v-uni-canvas",{staticClass:"none",style:{width:t.getSize+"px",height:t.getSize+"px"},attrs:{"canvas-id":"qrcode"}}),n("v-uni-view",{staticClass:"link-content-h5 flex"},[n("v-uni-view",{class:{"create-poster":!t.url}},[n("v-uni-view",[t._v("长按保存图片")])],1)],1)],1)],1):t._e()},i=[]},"756f":function(t,e,n){var o=n("0d93");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("4f06").default;r("9e6cb76c",o,!0,{sourceMap:!1,shadowMode:!1})},"8b5c":function(t,e,n){var o=n("288e");n("8e6e"),n("ac6a"),n("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("bd86")),i=o(n("cde2")),a=n("2f62"),s=(o(n("2422")),n("6eb9"));n("778c");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={components:{createPoster:i.default},props:{posterType:{type:String,default:""}},data:function(){return{loading:!0,show:!1,callback:null,info:null,url:"",copyLinkUrl:"",qrcodeSrc:"",painterData:{},imagePath:"",showPoster:""}},mounted:function(){this.$emit("mounted")},computed:c(c(c(c(c(c({},(0,a.mapState)("setting",{name:function(t){var e,n;return null===(e=t.systemSetting)||void 0===e||null===(n=e.basic)||void 0===n?void 0:n.name}})),(0,a.mapState)("decorate/goodDetailPage",{goods:function(t){var e,n,o;return null!==(e=null===(n=t.detailInfo)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.goods)&&void 0!==e?e:{}},posterUrl:function(t){var e;return null===(e=t.detailInfo)||void 0===e?void 0:e.poster_url},pageList:function(t){return t.pageList}})),(0,a.mapState)("groups",["groupPosterData"])),(0,a.mapState)("posterData",["posterData"])),(0,a.mapState)("creditShop",["creditPosterData"])),{},{getSize:function(){return 4*uni.upx2px(120)}}),methods:{clear:function(){return this.url="",this},toggle:function(t){var e=this;this.show=!this.show,this.show&&(this.loading=!0,uni.showLoading({title:"海报生成中...",mask:!0}),this.$nextTick((function(){e.$refs.posterCreate&&e.$refs.posterCreate.create((function(t){e.url=t}))})),this.getUrl()),this.imagePath&&uni.hideLoading(),"function"==typeof t&&(this.callback=t),this.callback&&this.callback(this.show),this.$emit("toggle",this.show)},getUrl:function(){var t=this,e=this;"commission"==this.posterType?this.$api.commissionApi.getQrcode({}).then((function(n){0==n.error?(t.copyLinkUrl=n.url,t.$store.commit("setting/setAvatar",n.avatar),(0,s.getCommissionPoster)(n,e.getSize).then((function(t){e.loading=!1,e.painterData=t})).catch((function(t){e.$toast("生成海报失败")}))):(uni.hideLoading(),e.$toast("生成海报失败"))})):"goods"==this.posterType?(0,s.getGoodsPosters)(this.goods.id,e.getSize).then((function(t){e.loading=!1,e.painterData=t})).catch((function(t){e.$toast("生成海报失败")})):"follow"==this.posterType?(0,s.getFollowPosters)(e.getSize).then((function(t){e.loading=!1,e.painterData=t})).catch((function(t){e.$toast("生成海报失败")})):"group"===this.posterType?(0,s.getGroupPoster)(this.groupPosterData.team_id).then((function(t){e.loading=!1,e.painterData=t})).catch((function(t){e.$toast("生成海报失败")})):"article"===this.posterType?(0,s.getArticlePoster)(this.posterData.id).then((function(t){e.loading=!1,e.painterData=t})).catch((function(t){e.$toast("生成海报失败")})):"creditGoods"==this.posterType&&(0,s.getCreditGoodsPosters)(this.creditPosterData.id,e.getSize).then((function(t){e.loading=!1,e.painterData=t})).catch((function(t){e.$toast("生成海报失败")}))},copyLink:function(){var t=this;if("goods"==this.posterType)this.copyLinkUrl=this.posterUrl;else if("group"===this.posterType){var e;this.copyLinkUrl=null===this||void 0===this||null===(e=this.groupPosterData)||void 0===e?void 0:e.invite_url}else if("article"===this.posterType){var n;this.copyLinkUrl=null===this||void 0===this||null===(n=this.posterData)||void 0===n?void 0:n.wap_url}uni.setClipboardData({data:this.copyLinkUrl,success:function(){t.show=!1,t.$toast("复制成功")}})},download:function(){this.saveImage()},onImgOK:function(t){this.imagePath=t.detail.path,this.loading=!1,uni.hideLoading()},imgErr:function(t){uni.hideLoading(),uni.showModal({title:"提示",content:"生成海报失败",showCancel:!1})},saveImage:function(){var t=this;uni.authorize({scope:"scope.writePhotosAlbum",success:function(){uni.saveImageToPhotosAlbum({filePath:t.imagePath,success:function(){uni.showModal({title:"保存成功",content:"图片已成功保存到相册，快去分享到您的圈子吧",showCancel:!1})}})},fail:function(){uni.showToast({title:"无相册读写权限",icon:"none"})}})}}};e.default=u},ac8d:function(t,e,n){(function(t){var o=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var r=n("1902"),i=o(n("4360"));function a(){return i.default.state.setting.pluginsPerms.commission}function s(t){return.936*t+"px"}function l(t){return 0==t.indexOf("http")&&(t=t.indexOf("?")>-1?t+"&t="+(new Date).getTime():t+"?t="+(new Date).getTime()),t}function c(t){var e=Math.round(t.style.height/((t.style.fontsize||12)*(t.style.lineheight||1.1)));return e=Math.max(e,1),e}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t=t.toLowerCase();var n=/^#([0-9|a-f]{3}|[0-9|a-f]{6})$/;if(t&&n.test(t)){4==t.length&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);for(var o=[],r=1;r<7;r+=2)o.push(parseInt("0x"+t.slice(r,r+2)));return o.push(e),"rgba("+o.join(",")+")"}return t}var d={poster_avatar:function(t,e){return{type:"image",url:l(t.params.imgurl?(0,r.media)(t.params.imgurl):(0,r.staticImg)("decorate/avatar_square.png")),css:{width:s(t.style.width),height:s(t.style.height),background:t.style.bgcolor,top:s(t.style.top),left:s(t.style.left),borderRadius:0==t.params.borderradius?s(t.style.width):0,borderWidth:1==t.params.bordershow?s(t.style.borderwidth||1):0,borderColor:t.style.bordercolor,mode:"scaleToFill"}}},poster_bgimg:function(t,e){return 0==t.params.bgtype?{type:"rect",css:{width:s(750),height:s(1334),background:t.style.bgcolor,top:"0",left:"0",rotate:"0",shadow:"",color:t.style.bgcolor,borderRadius:"0"}}:{type:"image",url:l(t.params.imgurl?(0,r.media)(t.params.imgurl):(0,r.staticImg)("decorate/page_bg_img.png")),css:{width:s(750),height:s(1334),top:"0",left:"0",mode:"scaleToFill"}}},poster_delprice:function(t,e){return parseFloat(t.params.content)?{type:"text",text:"￥"+t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:"0",lineHeight:s(t.style.fontsize*(t.style.lineheight||1)),maxLines:1,textDecoration:"line-through"}}:[]},poster_exptime:function(t,e){return{type:"text",text:t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1.4)),textAlign:t.style.textalign||"left",maxLines:1}}},poster_goodimg:function(t,e){return{type:"image",url:l(t.params.imgurl?(0,r.media)(t.params.imgurl):(0,r.staticImg)("decorate/page_bg_img.png")),css:{width:s(t.style.width),height:s(t.style.height),top:s(t.style.top),left:s(t.style.left),borderRadius:0==t.params.borderradius?s(12):0,borderWidth:1==t.params.bordershow?s(t.style.borderwidth):0,borderColor:t.style.bordercolor,mode:"scaleToFill"}}},poster_goodname:function(t,e){return{type:"text",text:t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",width:s(t.style.width),top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1.4)),textAlign:t.style.textalign||"left",maxLines:c(t)}}},poster_nickname:function(t,e){return{type:"text",text:t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",width:s(t.style.width),top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1.4)),textAlign:t.style.textalign||"left",maxLines:c(t)}}},poster_price:function(t,e){var n,o,r;return{type:"text",text:null!==(n=t.params)&&void 0!==n&&n.buy_button_status?"  "+(null===(o=t.params)||void 0===o||null===(r=o.buy_button_settings)||void 0===r?void 0:r.price_text):"￥"+t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1)),textAlign:t.style.textalign||"left",maxLines:1}}},poster_sellprice:function(t,e){var n,o,r;return{type:"text",text:null!==(n=t.params)&&void 0!==n&&n.buy_button_status?"  "+(null===(o=t.params)||void 0===o||null===(r=o.buy_button_settings)||void 0===r?void 0:r.price_text):"￥"+t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1)),textAlign:t.style.textalign||"left",maxLines:1}}},poster_img:function(t,e){return{type:"image",url:l(t.params.imgurl?(0,r.media)(t.params.imgurl):(0,r.staticImg)("decorate/page_bg_img.png")),css:{width:s(t.style.width),height:s(t.style.height),top:s(t.style.top),left:s(t.style.left),borderRadius:0==t.style.borderradius?s(12):0,borderWidth:1==t.params.bordershow?s(t.style.borderwidth):0,borderColor:t.style.bordercolor,mode:t.style.mode?t.style.mode:"scaleToFill"}}},poster_qrcode:function(e,n){var o={};try{o={type:"image",url:l((0,r.media)(e.params.imgurl)),css:{width:s(e.style.width),height:s(e.style.height),top:s(e.style.top),left:s(e.style.left),borderRadius:0==e.params.borderradius?s(12):0,borderWidth:1==e.params.bordershow?s(e.style.borderwidth):0,borderColor:e.style.bordercolor,mode:"scaleToFill"}}}catch(i){t.log(i,">><><")}return o},poster_commission:function(t,e){return 0==t.params.commission?[]:[{type:"text",text:" ",css:{width:s(t.style.width),height:s(t.style.height),top:s(t.style.top),left:s(t.style.left),borderRadius:s(t.style.borderradius),borderWidth:"0",borderColor:u(t.style.bgcolor,t.style.opacity),mode:"scaleToFill",textAlign:"center",lineHeight:s(t.style.height),fontSize:s(t.style.fontsize),color:t.style.color,background:u(t.style.bgcolor,t.style.opacity),fontWeight:t.style.fontweight>400?"bold":"normal"}},{type:"text",text:"预计佣金 ￥"+t.params.commission,css:{width:s(t.style.width),height:s(t.style.height),top:s(1*t.style.top+(t.style.height-t.style.fontsize)/2.2),left:s(t.style.left),borderRadius:s(t.style.borderradius),borderWidth:"0",borderColor:u(t.style.bgcolor,t.style.opacity),mode:"scaleToFill",textAlign:"center",lineHeight:s(t.style.fontsize),fontSize:s(t.style.fontsize),color:t.style.color,background:u(t.style.bgcolor,t.style.opacity),fontWeight:t.style.fontweight>400?"bold":"normal"}}]},poster_shoplogo:function(t,e){var n={width:s(t.style.width),top:s(t.style.top),left:s(t.style.left),borderRadius:t.style.borderRadius?s(t.style.borderRadius):0,mode:t.style.mode?t.style.mode:"auto",borderWidth:1==t.params.bordershow?s(t.style.borderwidth):0,borderColor:t.style.bordercolor||""};return 1==t.params.imgscaletype&&(n.height=s(t.style.height)),{type:"image",url:l(t.params.imgurl?(0,r.media)(t.params.imgurl):(0,r.staticImg)("decorate/page_bg_img.png")),css:n}},poster_shopname:function(t,e){return{type:"text",text:t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",width:s(t.style.width),top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1.4)),textAlign:t.style.textalign||"center",maxLines:c(t)}}},poster_text:function(t,e){return{type:"text",text:t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",width:s(t.style.width),top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1.4)),textAlign:t.style.textalign||"left"}}},poster_articletitle:function(t,e){return{type:"text",text:t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",width:s(t.style.width),top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1.4)),textAlign:t.style.textalign||"left"}}},poster_articledigest:function(t,e){return{type:"text",text:t.params.content,css:{color:t.style.color,background:"rgba(0,0,0,0)",width:s(t.style.width),top:s(t.style.top),left:s(t.style.left),fontSize:s(t.style.fontsize),fontWeight:t.style.fontweight>400?"bold":"normal",borderRadius:0,lineHeight:s(t.style.fontsize*(t.style.lineheight||1.4)),textAlign:t.style.textalign||"left"}}}};function f(t){for(var e=[],n=null,o=null,i=0;i<t.length;i++)o=t[i],n=d[o.id](o,i),("poster_commission"!=o.id||a())&&(Array.isArray(n)?e=e.concat(n):e.push(n));return e=(0,r.deepCopy)(e),{width:s(750),height:s(1334),borderRadius:s(18),views:e}}}).call(this,n("5a52")["default"])},c12a:function(t,e,n){"use strict";n.r(e);var o=n("7076"),r=n("624f");for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("caa8");var a,s=n("f0c5"),l=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,"306e93ec",null,!1,o["a"],a);e["default"]=l.exports},caa8:function(t,e,n){"use strict";var o=n("756f"),r=n.n(o);r.a}}]);